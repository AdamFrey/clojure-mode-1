var shadow$provide = {};
(function(){
shadow$provide[0]=function(sa,Ra,ub,D){function Na(Q){Na="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&"function"===typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H};return Na(Q)}function Ka(Q,H){if(H&&("object"===Na(H)||"function"===typeof H))return H;if(void 0===Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function Da(Q,H,M){Da="undefined"!==typeof Reflect&&
Reflect.get?Reflect.get:function(P,Z,ha){for(;!Object.prototype.hasOwnProperty.call(P,Z)&&(P=Ta(P),null!==P););if(P)return Z=Object.getOwnPropertyDescriptor(P,Z),Z.get?Z.get.call(ha):Z.value};return Da(Q,H,M||Q)}function Ta(Q){Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(H){return H.__proto__||Object.getPrototypeOf(H)};return Ta(Q)}function wa(Q,H){if("function"!==typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function");Q.prototype=Object.create(H&&H.prototype,
{constructor:{value:Q,writable:!0,configurable:!0}});H&&xa(Q,H)}function xa(Q,H){xa=Object.setPrototypeOf||function(M,P){M.__proto__=P;return M};return xa(Q,H)}function Ba(Q,H){if(!(Q instanceof H))throw new TypeError("Cannot call a class as a function");}function Ia(Q,H){for(var M=0;M<H.length;M++){var P=H[M];P.enumerable=P.enumerable||!1;P.configurable=!0;"value"in P&&(P.writable=!0);Object.defineProperty(Q,P.key,P)}}function qa(Q,H,M){H&&Ia(Q.prototype,H);M&&Ia(Q,M);return Q}function za(Q){return 127462<=
Q&&127487>=Q}function ja(Q,H){if(H==Q.length)return H;var M;if(M=H)M=Q.charCodeAt(H),M=56320<=M&&57344>M;M&&(M=Q.charCodeAt(H-1),M=55296<=M&&56320>M);M&&H--;M=Ea(Q,H);for(H+=ka(M);H<Q.length;){var P=Ea(Q,H),Z;if(!(Z=M==B||P==B))a:{for(Z=1;Z<q.length;Z+=2)if(q[Z]>P){Z=q[Z-1]<=P;break a}Z=!1}if(Z)H+=ka(P),M=P;else if(za(P)){P=0;for(Z=H-2;0<=Z&&za(Ea(Q,Z));)P++,Z-=2;if(0==P%2)break;else H+=2}else break}return H}function La(Q,H){for(;0<H;){var M=ja(Q,H-2);if(M<H)return M;H--}return 0}function Ea(Q,H){var M=
Q.charCodeAt(H);if(!(55296<=M&&56320>M)||H+1==Q.length)return M;Q=Q.charCodeAt(H+1);return 56320<=Q&&57344>Q?(M-55296<<10)+(Q-56320)+65536:M}function ka(Q){return 65536>Q?1:2}function ba(Q,H){A=(A+2)%n;O[A]=Q;return O[A+1]=H}function U(Q){var H=-1,M=!0,P=!1,Z=void 0;try{for(var ha=Q[Symbol.iterator](),Ca;!(M=(Ca=ha.next()).done);M=!0)H+=Ca.value.length+1}catch(Fa){P=!0,Z=Fa}finally{try{if(!M&&null!=ha["return"])ha["return"]()}finally{if(P)throw Z;}}return H}function I(Q,H){for(var M=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:0,P=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1E9,Z=0,ha=0,Ca=!0;ha<Q.length&&Z<=P;ha++){var Fa=Q[ha],Ma=Z+Fa.length;Ma>=M&&(Ma>P&&(Fa=Fa.slice(0,P-Z)),Z<M&&(Fa=Fa.slice(M-Z)),Ca?(H[H.length-1]+=Fa,Ca=!1):H.push(Fa));Z=Ma+1}return H}function r(Q,H){if(Q.length!=H.length||Q.lines!=H.lines)return!1;Q=new p(Q);H=new p(H);for(var M=0,P=0;;){if(Q.lineBreak!=H.lineBreak||Q.done!=H.done)return!1;if(Q.done)return!0;if(Q.lineBreak)Q.next(),H.next(),M=P=0;else{var Z=
Q.value.slice(M),ha=H.value.slice(P);if(Z.length==ha.length){if(Z!=ha)return!1;Q.next();H.next();M=P=0}else if(Z.length>ha.length){if(Z.slice(0,ha.length)!=ha)return!1;M+=ha.length;H.next();P=0}else{if(ha.slice(0,Z.length)!=Z)return!1;P+=Z.length;Q.next();M=0}}}}Object.defineProperty(D,"__esModule",{value:!0});D.codePointAt=Ea;D.codePointSize=ka;D.countColumn=function(Q,H,M){for(var P=0;P<Q.length;)9==Q.charCodeAt(P)?(H+=M-H%M,P++):(H++,P=ja(Q,P));return H};D.findColumn=function(Q,H,M,P){for(var Z=
0;Z<Q.length;){if(H>=M)return{offset:Z,leftOver:0};H+=9==Q.charCodeAt(Z)?P-H%P:1;Z=ja(Q,Z)}return{offset:Q.length,leftOver:M-H}};D.fromCodePoint=function(Q){if(65535>=Q)return String.fromCharCode(Q);Q-=65536;return String.fromCharCode((Q>>10)+55296,(Q&1023)+56320)};D.nextClusterBreak=ja;D.prevClusterBreak=La;D.Text=D.Line=void 0;var q="lc 34 7n 7 7b 19    2  2   20 b 1c l g  2t 7 2 6 2 2  4 z  u r 2j b 1m 9 9  o 4  9  3  5 17 3 3b f  w 1j    4 8 4  3 7 a 2 t  1m    2 4 8  9  a 2 q  2 2 1l  4 2 4 2 2 3 3  u 2 3  b 2 1l  4 5  2 4  k 2 m 6   1m   2  4 8  7 3 a 2 u  1n    c  9  14  3  1l 3 5 3  4 7 2 b 2 t  1m  2  2  3  5 2 7 2 b 2 s 2 1l 2   2 4 8  9  a 2 t  20  4  2 3   8  29  2 7 c 8 2q  2 9 b 6 22 2 r      1j e  5  2 5 b  10 9  2u 4  6  2 2 2 p 2 4 3 g 4 d  2 2 6  f  jj 3 qa 3 t 3 t 2 u 2 1s 2  7 8  2 b 9  19 3 3b 2 y  3a 3 4 2 9  6 3 63 2 2  1m   7     2 8 6 a 2  1c h 1r 4 1c 7   5  14 9 c 2 w 4 2 2  3 1k   2 3   3 1m 8 2 2 48 3  d  7 4  6  3 2 5i 1m  5 ek  5f x 2da 3 3x  2o w fe 6 2x 2 n9w 4  a w 2 28 2 7k  3  4  p 2 5  47 2 q i d  12 8 p b 1a 3 1c  2 4 2 2 13  1v 6 2 2 2 2 c  8  1b  1f   3 2 2 5 2   16 2 8  6m  2  4  fn4  kh g g g a6 2 gt  6a  45 5 1ae 3  2 5 4 14 3 4  4l 2 fx 4 ar 2 49 b 4w  1i f 1k 3 1d 4 2 2 1x 3 10 5  8 1q  c 2 1g 9 a 4 2  2n 3 2   2 6  4g  3 8 l 2 1l 2     m  e 7 3 5 5f 8 2 3   n  29  2 6   2   2  2 6j  2 4 6 2  2 r 2 2d 8 2   2 2y    2 6   2t 3 2 4  5 77 9  2 6t  a 2   4  40 4 2 2 4  w a 14 6 2 4 8  9 6 2 3 1a d  2 ba 7  6   2a m 2 7  2  2 3e 6 3   2  7   20 2 3    9n 2 f0b 5 1n 7 t4  1r 4 29  f5k 2 43q   3 4 5 8 8 2 7 u 4 44 3 1iz 1j 4 1e 8  e  m 5  f 11s 7  h 2 7  2  5 79 7 c5 4 15s 7 31 7 240 5 gx7k 2o 3k 6o".split(" ").map(function(Q){return Q?
parseInt(Q,36):1});for(sa=1;sa<q.length;sa++)q[sa]+=q[sa-1];var B=8205,L=function(){function Q(){Ba(this,Q)}qa(Q,[{key:"lineAt",value:function(H){if(0>H||H>this.length)throw new RangeError("Invalid position ".concat(H," in document of length ").concat(this.length));for(var M=0;M<O.length;M+=2)if(O[M]==this){var P=O[M+1];if(P.start<=H&&P.end>=H)return P}return ba(this,this.lineInner(H,!1,1,0).finish(this))}},{key:"line",value:function(H){if(1>H||H>this.lines)throw new RangeError("Invalid line number ".concat(H,
" in ").concat(this.lines,"-line document"));for(var M=0;M<O.length;M+=2)if(O[M]==this){var P=O[M+1];if(P.number==H)return P}return ba(this,this.lineInner(H,!0,1,0).finish(this))}},{key:"replace",value:function(H,M,P){var Z=[];this.decompose(0,H,Z);Z.push(P);this.decompose(M,this.length,Z);return u.from(Z,this.length-(M-H)+P.length)}},{key:"append",value:function(H){return 0==this.length?H:0==H.length?this:u.from([this,H],this.length+H.length)}},{key:"slice",value:function(H){var M=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:this.length,P=[];this.decompose(H,M,P);return u.from(P,M-H)}},{key:"eq",value:function(H){return this==H||r(this,H)}},{key:"iter",value:function(){return new p(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)}},{key:"iterRange",value:function(H){return new t(this,H,1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length)}},{key:"iterLines",value:function(){return new w(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)}},{key:"toString",
value:function(){return this.sliceString(0)}}],[{key:"of",value:function(H){if(0==H.length)throw new RangeError("A document must have at least one line");if(1==H.length&&!H[0]&&Q.empty)return Q.empty;var M=U(H);return 1024>M?new y(H,M):u.from(y.split(H,[]),M)}}]);return Q}();D.Text=L;"undefined"!=typeof Symbol&&(L.prototype[Symbol.iterator]=function(){return this.iter()});var O=[],A=-2,n=12,y=function(Q){function H(M){var P=1<arguments.length&&void 0!==arguments[1]?arguments[1]:U(M);Ba(this,H);var Z=
Ka(this,Ta(H).call(this));Z.text=M;Z.length=P;return Z}wa(H,Q);qa(H,[{key:"lineInner",value:function(M,P,Z,ha){for(var Ca=0;;Ca++){var Fa=this.text[Ca],Ma=ha+Fa.length;if((P?Z:Ma)>=M)return new N(ha,Ma,Z,Fa);ha=Ma+1;Z++}}},{key:"decompose",value:function(M,P,Z){Z.push(new H(I(this.text,[""],M,P),Math.min(P,this.length)-Math.max(0,M)))}},{key:"lastLineLength",value:function(){return this.text[this.text.length-1].length}},{key:"firstLineLength",value:function(){return this.text[0].length}},{key:"replace",
value:function(M,P,Z){var ha=this.length+Z.length-(P-M);return 1024<=ha||!(Z instanceof H)?Da(Ta(H.prototype),"replace",this).call(this,M,P,Z):new H(I(this.text,I(Z.text,I(this.text,[""],0,M)),P),ha)}},{key:"sliceString",value:function(M){for(var P=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length,Z=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"\n",ha="",Ca=0,Fa=0;Ca<=P&&Fa<this.text.length;Fa++){var Ma=this.text[Fa],Xa=Ca+Ma.length;Ca>M&&Fa&&(ha+=Z);M<Xa&&P>Ca&&(ha+=Ma.slice(Math.max(0,
M-Ca),P-Ca));Ca=Xa+1}return ha}},{key:"flatten",value:function(M){M[M.length-1]+=this.text[0];for(var P=1;P<this.text.length;P++)M.push(this.text[P])}},{key:"lines",get:function(){return this.text.length}},{key:"children",get:function(){return null}}],[{key:"split",value:function(M,P){var Z=[],ha=-1,Ca=!0,Fa=!1,Ma=void 0;try{for(var Xa=M[Symbol.iterator](),bb;!(Ca=(bb=Xa.next()).done);Ca=!0)for(var gb=bb.value;;){var Hb=ha+gb.length+1;if(512>Hb){ha=Hb;Z.push(gb);break}M=512-ha-1;var Db=gb.charCodeAt(M);
56320<=Db&&57344>Db&&M++;Z.push(gb.slice(0,M));P.push(new H(Z,512));gb=gb.slice(M);ha=-1;Z=[]}}catch(yb){Fa=!0,Ma=yb}finally{try{if(!Ca&&null!=Xa["return"])Xa["return"]()}finally{if(Fa)throw Ma;}}-1!=ha&&P.push(new H(Z,ha));return P}}]);return H}(L),u=function(Q){function H(M,P){Ba(this,H);var Z=Ka(this,Ta(H).call(this));Z.children=M;Z.length=P;Z.lines=1;P=!0;var ha=!1,Ca=void 0;try{for(var Fa=M[Symbol.iterator](),Ma;!(P=(Ma=Fa.next()).done);P=!0)Z.lines+=Ma.value.lines-1}catch(Xa){ha=!0,Ca=Xa}finally{try{if(!P&&
null!=Fa["return"])Fa["return"]()}finally{if(ha)throw Ca;}}return Z}wa(H,Q);qa(H,[{key:"lineInner",value:function(M,P,Z,ha){for(var Ca=0;;Ca++){var Fa=this.children[Ca],Ma=ha+Fa.length,Xa=Z+Fa.lines-1;if((P?Xa:Ma)>=M)return M=Fa.lineInner(M,P,Z,ha),P=void 0,M.from==ha&&(P=this.lineLengthTo(Ca))&&(M.from-=P,M.content=null),M.to==Ma&&(P=this.lineLengthFrom(Ca+1))&&(M.to+=P,M.content=null),M;ha=Ma;Z=Xa}}},{key:"decompose",value:function(M,P,Z){for(var ha=0,Ca=0;Ca<P&&ha<this.children.length;ha++){var Fa=
this.children[ha],Ma=Ca+Fa.length;M<Ma&&P>Ca&&(Ca>=M&&Ma<=P?Z.push(Fa):Fa.decompose(M-Ca,P-Ca,Z));Ca=Ma}}},{key:"lineLengthTo",value:function(M){var P=0;for(--M;0<=M;M--){var Z=this.children[M];if(1<Z.lines)return P+Z.lastLineLength();P+=Z.length}return P}},{key:"lastLineLength",value:function(){return this.lineLengthTo(this.children.length)}},{key:"lineLengthFrom",value:function(M){for(var P=0;M<this.children.length;M++){var Z=this.children[M];if(1<Z.lines)return P+Z.firstLineLength();P+=Z.length}return P}},
{key:"firstLineLength",value:function(){return this.lineLengthFrom(0)}},{key:"replace",value:function(M,P,Z){if(512>Z.length&&512>P-M)for(var ha=Z.length-(P-M),Ca=0,Fa=0;Ca<this.children.length;Ca++){var Ma=this.children[Ca],Xa=Fa+Ma.length;if(M>=Fa&&P<=Xa&&Ma.length+ha<this.length+ha>>2&&0<Ma.length+ha)return Xa=this.children.slice(),Xa[Ca]=Ma.replace(M-Fa,P-Fa,Z),new H(Xa,this.length+ha);Fa=Xa}return Da(Ta(H.prototype),"replace",this).call(this,M,P,Z)}},{key:"sliceString",value:function(M){for(var P=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length,Z=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"\n",ha="",Ca=0,Fa=0;Fa<P&&Ca<this.children.length;Ca++){var Ma=this.children[Ca],Xa=Fa+Ma.length;if(M<Xa&&P>Fa){Ma=Ma.sliceString(M-Fa,P-Fa,Z);if(M>=Fa&&P<=Xa)return Ma;ha+=Ma}Fa=Xa}return ha}},{key:"flatten",value:function(M){var P=!0,Z=!1,ha=void 0;try{for(var Ca=this.children[Symbol.iterator](),Fa;!(P=(Fa=Ca.next()).done);P=!0)Fa.value.flatten(M)}catch(Ma){Z=!0,ha=Ma}finally{try{if(!P&&
null!=Ca["return"])Ca["return"]()}finally{if(Z)throw ha;}}}}],[{key:"from",value:function(M,P){function Z(kb){var vb=kb.length;if(vb)if(vb>Db&&kb instanceof H){vb=!0;var sb=!1;var dc=void 0;try{for(var Eb=kb.children[Symbol.iterator](),ac;!(vb=(ac=Eb.next()).done);vb=!0)Z(ac.value)}catch(ec){sb=!0,dc=ec}finally{try{if(!vb&&null!=Eb["return"])Eb["return"]()}finally{if(sb)throw dc;}}}else vb>yb&&(hb>yb||0==hb)?(ha(),zb.push(kb)):kb instanceof y&&0<hb&&(sb=Ab[Ab.length-1])instanceof y&&512>=kb.length+
sb.length?(hb+=vb,Ab[Ab.length-1]=new y(I(kb.text,sb.text.slice()),kb.length+sb.length)):(hb+vb>Hb&&ha(),hb+=vb,Ab.push(kb))}function ha(){0!=hb&&(zb.push(1==Ab.length?Ab[0]:H.from(Ab,hb)),hb=0,Ab.length=0)}if(!M.every(function(kb){return kb instanceof L}))throw Error("NOP");if(1024>P){var Ca=[""],Fa=!0,Ma=!1,Xa=void 0;try{for(var bb=M[Symbol.iterator](),gb;!(Fa=(gb=bb.next()).done);Fa=!0)gb.value.flatten(Ca)}catch(kb){Ma=!0,Xa=kb}finally{try{if(!Fa&&null!=bb["return"])bb["return"]()}finally{if(Ma)throw Xa;
}}return new y(Ca,P)}var Hb=Math.max(512,P>>3),Db=Hb<<1,yb=Hb>>1,zb=[],hb=0,Ab=[];bb=!0;gb=!1;Ma=void 0;try{for(Ca=M[Symbol.iterator]();!(bb=(Fa=Ca.next()).done);bb=!0)Z(Fa.value)}catch(kb){gb=!0,Ma=kb}finally{try{if(!bb&&null!=Ca["return"])Ca["return"]()}finally{if(gb)throw Ma;}}ha();return 1==zb.length?zb[0]:new H(zb,P)}}]);return H}(L);L.empty=L.of([""]);var p=function(){function Q(H){var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;Ba(this,Q);this.dir=M;this.lineBreak=this.done=
!1;this.value="";this.nodes=[H];this.offsets=[0<M?0:H instanceof y?H.text.length:H.children.length]}qa(Q,[{key:"next",value:function(){for(var H=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;;){var M=this.nodes.length-1;if(0>M)return this.done=!0,this.value="",this.lineBreak=!1,this;var P=this.nodes[M],Z=this.offsets[M];if(P instanceof y)if(Z==(0<this.dir?0:P.text.length)||this.lineBreak){var ha=P.text[Z-(0>this.dir?1:0)];this.offsets[M]=Z+=this.dir;Z==(0<this.dir?P.text.length:0)&&(this.nodes.pop(),
this.offsets.pop());this.lineBreak=!1;if(ha.length>Math.max(0,H))return this.value=0==H?ha:0<this.dir?ha.slice(H):ha.slice(0,ha.length-H),this;H-=ha.length}else{this.lineBreak=!0;if(0==H)return this.value="\n",this;H--}else Z==(0<this.dir?P.children.length:0)?(this.nodes.pop(),this.offsets.pop()):(P=P.children[0<this.dir?Z:Z-1],ha=P.length,this.offsets[M]=Z+this.dir,H>ha?H-=ha:(this.nodes.push(P),this.offsets.push(0<this.dir?0:P instanceof y?P.text.length:P.children.length)))}}}]);return Q}(),t=function(){function Q(H,
M,P){Ba(this,Q);this.value="";this.cursor=new p(H,M>P?-1:1);M>P?(this.skip=H.length-M,this.limit=M-P):(this.skip=M,this.limit=P-M)}qa(Q,[{key:"next",value:function(){if(0>=this.limit)this.limit=-1;else{var H=this.cursor.next(this.skip),M=H.value,P=H.lineBreak;H=H.done;this.skip=0;this.value=M;P=P?1:M.length;P>this.limit&&(this.value=0<this.cursor.dir?M.slice(0,this.limit):M.slice(P-this.limit));this.limit=H||0==this.value.length?-1:this.limit-this.value.length}return this}},{key:"lineBreak",get:function(){return this.cursor.lineBreak}},
{key:"done",get:function(){return 0>this.limit}}]);return Q}(),w=function(){function Q(H){var M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;Ba(this,Q);this.value="";this.done=!1;this.cursor=H.iter();this.skip=M}qa(Q,[{key:"next",value:function(){if(this.cursor.done)return this.done=!0,this.value="",this;for(this.value="";;){var H=this.cursor.next(this.skip),M=H.value,P=H.lineBreak;H=H.done;this.skip=0;if(H||P)return this;this.value+=M}}},{key:"lineBreak",get:function(){return!1}}]);return Q}(),
N=function(){function Q(H,M,P,Z){Ba(this,Q);this.from=H;this.to=M;this.number=P;this.content=Z}qa(Q,[{key:"slice",value:function(){var H=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,M=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if("string"==typeof this.content)return M==H+1?this.content.charAt(H):this.content.slice(H,M);if(H==M)return"";var P=this.content.slice(H,M);0==H&&M==this.length&&(this.content=P);return P}},{key:"finish",value:function(H){null==this.content&&
(this.content=new T(H,this.from));return this}},{key:"findClusterBreak",value:function(H,M){if(0>H||H>this.length)throw new RangeError("Invalid position given to Line.findClusterBreak");if("string"==this.content){var P=this.from;var Z=this.content}else P=Math.max(0,H-256),Z=this.slice(P,Math.min(this.length,P+512));return(M?ja:La)(Z,H-P)+P}},{key:"length",get:function(){return this.to-this.from}}]);return Q}();D.Line=N;var T=function(){function Q(H,M){Ba(this,Q);this.doc=H;this.start=M;this.strings=
this.cursor=null}qa(Q,[{key:"slice",value:function(H,M){this.cursor||(this.cursor=this.doc.iter(),this.strings=[this.cursor.next(this.start).value]);for(var P="",Z=0,ha=0;;ha++){ha==this.strings.length&&this.strings.push(this.cursor.next().value);var Ca=this.strings[ha],Fa=Z;Z+=Ca.length;if(!(Z<=H)&&(P+=Ca.slice(Math.max(0,H-Fa),Math.min(Ca.length,M-Fa)),Z>=M))return P}}}]);return Q}()};
shadow$provide[1]=function(sa,Ra,ub,D){function Na(I){function r(w,N,T,Q,H){var M=p.id,P=p.start,Z=p.end,ha=p.size,Ca=P-w;if(0>ha)T.push(y[M]),Q.push(Ca),p.next();else{var Fa=t[M],Ma;if(Ma=Z-P<=n){var Xa=p.pos-N;var bb=p.fork();var gb=Ma=N=0,Hb=bb.end-n;Xa=bb.pos-Xa;a:for(;bb.pos>Xa;){var Db=bb.size,yb=bb.pos-Db;if(0>Db||yb<Xa||bb.start<Hb)break;var zb=bb.id>=u?4:0,hb=bb.start;for(bb.next();bb.pos>yb;){if(0>bb.size)break a;bb.id>=u&&(zb+=4);bb.next()}Ma=hb;N+=Db;gb+=zb}Ma=bb=4<N?{size:N,start:Ma,
skip:gb}:null}if(Ma){Ca=new Uint16Array(bb.size-bb.skip);ha=p.pos-bb.size;for(P=Ca.length;p.pos>ha;)P=q(bb.start,Ca,P);Z=new La(Ca,Z-bb.start,L,H);Ca=bb.start-w}else{ha=p.pos-ha;p.next();w=[];H=[];M=M>=L.types.length?M-(L.types.length-u):-1;if(-1<M)for(Fa=t[M];p.pos>ha;)r(P,ha,w,H,p.id==M?Fa:Ia.none);else for(;p.pos>ha;)r(P,ha,w,H,Ia.none);w.reverse();H.reverse();Z=-1<M&&w.length>U?Ka(Fa,Fa,w,H,0,w.length,0,n,Z-P):new qa(Fa,w,H,Z-P)}T.push(Z);Q.push(Ca)}}function q(w,N,T){var Q=p.id,H=p.start,M=p.end,
P=p.size;p.next();var Z=T;if(4<P)for(P=p.pos-(P-4);p.pos>P;)T=q(w,N,T);Q<u&&(N[--T]=Z,N[--T]=M-w,N[--T]=H-w,N[--T]=Q);return T}var B=I.buffer,L=I.group,O=I.topID;O=void 0===O?0:O;var A=I.maxBufferLength,n=void 0===A?D.DefaultBufferLength:A;A=I.reused;var y=void 0===A?[]:A;I=I.minRepeatType;var u=void 0===I?L.types.length:I,p=Array.isArray(B)?new ba(B,B.length):B,t=L.types;B=[];for(I=[];0<p.pos;)r(0,0,B,I,Ia.none);A=B.length?I[0]+B[0].length:0;return new qa(L.types[O],B.reverse(),I.reverse(),A)}function Ka(I,
r,q,B,L,O,A,n,y){var u=[],p=[];if(y<=n)for(;L<O;L++)u.push(q[L]),p.push(B[L]-A);else for(var t=Math.max(n,Math.ceil(1.5*y/U));L<O;){var w=L,N=B[L];for(L++;L<O&&!(B[L]+q[L].length-N>t);L++);if(L==w+1){w=q[w];if(w instanceof qa&&w.type==r&&w.length>t<<1){for(var T=0;T<w.children.length;T++)u.push(w.children[T]),p.push(w.positions[T]+N-A);continue}u.push(w)}else if(L==w+1)u.push(q[w]);else{w=Ka(r,r,q,B,w,L,N,n,B[L-1]+q[L-1].length-N);if(T=r!=Ia.none){a:{T=0;for(var Q=w.children;T<Q.length;T++)if(Q[T].type==
r){T=!0;break a}T=!1}T=!T}T&&(w=new qa(Ia.none,w.children,w.positions,w.length));u.push(w)}p.push(N-A)}return new qa(I,u,p,y)}var Da=this&&this.__extends||function(){var I=function(r,q){I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,L){B.__proto__=L}||function(B,L){for(var O in L)L.hasOwnProperty(O)&&(B[O]=L[O])};return I(r,q)};return function(r,q){function B(){this.constructor=r}I(r,q);r.prototype=null===q?Object.create(q):(B.prototype=q.prototype,new B)}}();Object.defineProperty(D,
"__esModule",{value:!0});D.DefaultBufferLength=1024;var Ta=function(){function I(r,q){this.enter=r;this.leave=q;this.result=void 0}Object.defineProperty(I.prototype,"done",{get:function(){return void 0!==this.result},enumerable:!0,configurable:!0});I.prototype.doEnter=function(r,q,B){r=this.enter(r,q,B);if(void 0===r)return!0;!1!==r&&(this.result=r);return!1};return I}(),wa=0,xa=function(){function I(r){r=(void 0===r?{}:r).deserialize;this.id=wa++;this.deserialize=r||function(){throw Error("This node type doesn't define a deserialize function");
}}I.string=function(){return new I({deserialize:function(r){return r}})};I.number=function(){return new I({deserialize:Number})};I.flag=function(){return new I({deserialize:function(){return!0}})};I.prototype.set=function(r,q){r[this.id]=q;return r};I.prototype.add=function(r){return new Ba(this,"function"==typeof r?r:Ia.match(r))};I.error=I.flag();I.skipped=I.flag();I.closedBy=new I({deserialize:function(r){return r.split(" ")}});I.openedBy=new I({deserialize:function(r){return r.split(" ")}});I.top=
I.flag();return I}();D.NodeProp=xa;var Ba=function(){return function(I,r){this.prop=I;this.f=r}}();D.NodePropSource=Ba;var Ia=function(){function I(r,q,B){this.name=r;this.props=q;this.id=B}I.prototype.prop=function(r){return this.props[r.id]};I.match=function(r){var q=Object.create(null),B;for(B in r)for(var L=0,O=B.split(" ");L<O.length;L++)q[O[L]]=r[B];return function(A){return q[A.name]}};I.none=new I("",Object.create(null),0);return I}();D.NodeType=Ia;sa=function(){function I(r){this.types=r;
for(var q=0;q<r.length;q++)if(r[q].id!=q)throw new RangeError("Node type ids should correspond to array positions when creating a node group");}I.prototype.extend=function(){for(var r=[],q=0;q<arguments.length;q++)r[q]=arguments[q];q=[];for(var B=0,L=this.types;B<L.length;B++){for(var O=L[B],A=null,n=0,y=r;n<y.length;n++){var u=y[n],p=u.f(O);if(void 0!==p){if(!A){A=Object.create(null);for(var t in O.props)A[t]=O.props[t]}A[u.prop.id]=p}}q.push(A?new Ia(O.name,A,O.id):O)}return new I(q)};return I}();
D.NodeGroup=sa;sa=function(){function I(){}Object.defineProperty(I.prototype,"name",{get:function(){return this.type.name},enumerable:!0,configurable:!0});Object.defineProperty(I.prototype,"depth",{get:function(){for(var r=0,q=this.parent;q;q=q.parent)r++;return r},enumerable:!0,configurable:!0});Object.defineProperty(I.prototype,"root",{get:function(){for(var r=this;r.parent;)r=r.parent;return r},enumerable:!0,configurable:!0});I.prototype.resolve=function(r,q){void 0===q&&(q=0);var B=this.resolveAt(r);
if(0!=q)for(;;){var L=0>q?B.childBefore(r):B.childAfter(r);if(!L||(0>q?L.end:L.start)!=r)break;B=L}return B};Object.defineProperty(I.prototype,"firstChild",{get:function(){return this.childAfter(this.start-1)},enumerable:!0,configurable:!0});Object.defineProperty(I.prototype,"lastChild",{get:function(){return this.childBefore(this.end+1)},enumerable:!0,configurable:!0});return I}();D.Subtree=sa;var qa=function(I){function r(q,B,L,O){var A=I.call(this)||this;A.type=q;A.children=B;A.positions=L;A.length=
O;return A}Da(r,I);Object.defineProperty(r.prototype,"start",{get:function(){return 0},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"end",{get:function(){return this.length},enumerable:!0,configurable:!0});r.prototype.toString=function(){var q=this.children.map(function(B){return B.toString()}).join();return this.name?(/\W/.test(this.name)&&!this.type.prop(xa.error)?JSON.stringify(this.name):this.name)+(q.length?"("+q+")":""):q};r.prototype.partial=function(q,B,L,O,A){for(var n=
0;n<this.children.length;n++){var y=this.positions[n];if(y>B)break;var u=this.children[n],p=y+u.length;p<q||(q<=y&&B>=p?(O.push(u),A.push(y+L)):u instanceof r&&u.partial(q-y,B-y,L+y,O,A))}};r.prototype.applyChanges=function(q){function B(t,w,N){var T=-1;t.iterate({from:w,to:0>N?0:t.length,enter:function(){return 0>T?void 0:!1},leave:function(Q,H,M){0>T&&(0>N?M<=w:H>=w)&&!Q.prop(xa.error)&&(T=0>N?Math.min(w,M-1):Math.max(w,H+1))}});return-1<T?T:0>N?0:t.length}if(0==q.length)return this;for(var L=[],
O=[],A=0,n=0,y=0;;n++){var u=n==q.length?null:q[n],p=u?B(this,u.fromA,-1):this.length;p>y&&this.partial(y,p,A,L,O);if(!u)break;y=B(this,u.toA,1);A+=u.toB-u.fromB-(u.toA-u.fromA)}return new r(Ia.none,L,O,this.length+A)};r.prototype.cut=function(q){if(q>=this.length)return this;for(var B=[],L=[],O=0;O<this.children.length;O++){var A=this.positions[O];if(A>=q)break;var n=this.children[O];B.push(A+n.length<=q?n:n.cut(q-A));L.push(A)}return new r(this.type,B,L,q)};r.prototype.iterate=function(q){var B=
q.from;B=void 0===B?this.start:B;var L=q.to;L=void 0===L?this.end:L;q=new Ta(q.enter,q.leave);this.iterInner(B,L,0,q);return q.result};r.prototype.iterInner=function(q,B,L,O){if(!this.type.name||O.doEnter(this.type,L,L+this.length)){if(q<=B)for(var A=0;A<this.children.length&&!O.done;A++){var n=this.children[A],y=this.positions[A]+L,u=y+n.length;if(y>B)break;u<q||n.iterInner(q,B,y,O)}else for(A=this.children.length-1;0<=A&&!O.done;A--){n=this.children[A];y=this.positions[A]+L;u=y+n.length;if(u<B)break;
y>q||n.iterInner(q,B,y,O)}O.leave&&this.type.name&&O.leave(this.type,L,L+this.length)}};r.prototype.resolveAt=function(q){if(za==this)for(var B=ja;;){var L=B.parent;if(!L)break;if(B.start<q&&B.end>q)return B.resolve(q);B=L}za=this;return ja=this.resolveInner(q,0,this)};r.prototype.childBefore=function(q){return this.findChild(q,-1,0,this)};r.prototype.childAfter=function(q){return this.findChild(q,1,0,this)};r.prototype.findChild=function(q,B,L,O){for(var A=0;A<this.children.length;A++){var n=this.positions[A]+
L,y=-1;if(n>=q)if(0>B&&0<A)y=A-1;else if(0<B)y=A;else break;0>y&&(n+this.children[A].length>q||0>B&&A==this.children.length-1)&&(y=A);if(0<=y&&(n=this.children[y],y=this.positions[y]+L,0!=n.length||y!=q)){if(n instanceof r)return n.type.name?new Ea(n,y,O):n.findChild(q,B,y,O);var u=n.findIndex(q,B,y,0,n.buffer.length);if(-1<u)return new ka(n,y,u,O)}}return null};r.prototype.resolveInner=function(q,B,L){return(B=this.findChild(q,0,B,L))?B.resolveAt(q):L};r.prototype.append=function(q){if(q.children.length&&
q.positions[0]<this.length)throw Error("Can't append overlapping trees");return new r(this.type,this.children.concat(q.children),this.positions.concat(q.positions),q.length)};r.prototype.balance=function(q){void 0===q&&(q=D.DefaultBufferLength);return this.children.length<=U?this:Ka(this.type,Ia.none,this.children,this.positions,0,this.children.length,0,q,this.length)};r.build=function(q){return Na(q)};r.empty=new r(Ia.none,[],[],0);return r}(sa);D.Tree=qa;qa.prototype.parent=null;var za=qa.empty,
ja=qa.empty,La=function(){function I(r,q,B,L){void 0===L&&(L=Ia.none);this.buffer=r;this.length=q;this.group=B;this.type=L}I.prototype.toString=function(){for(var r=[],q=0;q<this.buffer.length;)q=this.childToString(q,r);return r.join(",")};I.prototype.childToString=function(r,q){var B=this.buffer[r+3],L=this.group.types[this.buffer[r]],O=L.name;/\W/.test(O)&&!L.prop(xa.error)&&(O=JSON.stringify(O));r+=4;if(B>r){for(L=[];r<B;)r=this.childToString(r,L);O+="("+L.join(",")+")"}q.push(O);return r};I.prototype.cut=
function(r){for(var q=0;q<this.buffer.length&&this.buffer[q+1]<r;)q+=4;for(var B=new Uint16Array(q),L=0;L<q;L+=4)B[L]=this.buffer[L],B[L+1]=this.buffer[L+1],B[L+2]=Math.min(r,this.buffer[L+2]),B[L+3]=Math.min(this.buffer[L+3],q);return new I(B,Math.min(r,this.length),this.group)};I.prototype.iterate=function(r){var q=r.from;q=void 0===q?0:q;var B=r.to;B=void 0===B?this.length:B;r=new Ta(r.enter,r.leave);this.iterInner(q,B,0,r);return r.result};I.prototype.iterInner=function(r,q,B,L){if(r<=q)for(var O=
0;O<this.buffer.length;)O=this.iterChild(r,q,B,O,L);else this.iterRev(r,q,B,0,this.buffer.length,L)};I.prototype.iterChild=function(r,q,B,L,O){var A=this.group.types[this.buffer[L++]],n=this.buffer[L++]+B,y=this.buffer[L++]+B,u=this.buffer[L++];if(n>q)return this.buffer.length;if(y>=r&&O.doEnter(A,n,y)){for(;L<u&&!O.done;)L=this.iterChild(r,q,B,L,O);O.leave&&O.leave(A,n,y)}return u};I.prototype.parentNodesByEnd=function(r,q){for(var B=this,L=[],O=function(A){var n=B.buffer[A+3];if(n==A+4)return n;
for(var y=A+4;y<n;)y=O(y);L.push(A);return n};r<q;)r=O(r);return L};I.prototype.iterRev=function(r,q,B,L,O,A){var n=this,y=this.parentNodesByEnd(L,O),u=-1,p=-1,t=function(){0<y.length?(u=y.pop(),p=n.buffer[u+3]):p=-1};t();a:for(;O>L&&!A.done;){for(;p==O;){var w=u,N=this.buffer[w],T=this.buffer[w+1]+B,Q=this.buffer[w+2]+B;t();if(T<=r&&Q>=q&&!A.doEnter(this.group.types[N],T,Q)){for(O=w;p>w;)t();continue a}}w=this.buffer[--O];N=this.buffer[--O]+B;T=this.buffer[--O]+B;Q=this.buffer[--O];T>r||N<q||(w!=
O+4||A.doEnter(this.group.types[Q],T,N))&&A.leave&&A.leave(this.group.types[Q],T,N)}};I.prototype.findIndex=function(r,q,B,L,O){for(var A=-1,n=this.buffer;L<O;){var y=n[L+1]+B,u=n[L+2]+B,p=y==u&&y==r;if(y>=r){if(0<q&&!p)return L;break}if(u>r)return L;p||(A=L);L=n[L+3]}return 0>q?A:-1};return I}();D.TreeBuffer=La;var Ea=function(I){function r(q,B,L){var O=I.call(this)||this;O.node=q;O.start=B;O.parent=L;return O}Da(r,I);Object.defineProperty(r.prototype,"type",{get:function(){return this.node.type},
enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"end",{get:function(){return this.start+this.node.length},enumerable:!0,configurable:!0});r.prototype.resolveAt=function(q){return q<=this.start||q>=this.end?this.parent.resolveAt(q):this.node.resolveInner(q,this.start,this)};r.prototype.childBefore=function(q){return this.node.findChild(q,-1,this.start,this)};r.prototype.childAfter=function(q){return this.node.findChild(q,1,this.start,this)};r.prototype.toString=function(){return this.node.toString()};
r.prototype.iterate=function(q){var B=q.from;B=void 0===B?this.start:B;var L=q.to;L=void 0===L?this.end:L;q=new Ta(q.enter,q.leave);this.node.iterInner(B,L,this.start,q);return q.result};return r}(sa),ka=function(I){function r(q,B,L,O){var A=I.call(this)||this;A.buffer=q;A.bufferStart=B;A.index=L;A.parent=O;return A}Da(r,I);Object.defineProperty(r.prototype,"type",{get:function(){return this.buffer.group.types[this.buffer.buffer[this.index]]},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,
"start",{get:function(){return this.buffer.buffer[this.index+1]+this.bufferStart},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"end",{get:function(){return this.buffer.buffer[this.index+2]+this.bufferStart},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"endIndex",{get:function(){return this.buffer.buffer[this.index+3]},enumerable:!0,configurable:!0});r.prototype.childBefore=function(q){q=this.buffer.findIndex(q,-1,this.bufferStart,this.index+4,this.endIndex);
return 0>q?null:new r(this.buffer,this.bufferStart,q,this)};r.prototype.childAfter=function(q){q=this.buffer.findIndex(q,1,this.bufferStart,this.index+4,this.endIndex);return 0>q?null:new r(this.buffer,this.bufferStart,q,this)};r.prototype.iterate=function(q){var B=q.from;B=void 0===B?this.start:B;var L=q.to;L=void 0===L?this.end:L;q=new Ta(q.enter,q.leave);B<=L?this.buffer.iterChild(B,L,this.bufferStart,this.index,q):this.buffer.iterRev(B,L,this.bufferStart,this.index,this.endIndex,q);return q.result};
r.prototype.resolveAt=function(q){if(q<=this.start||q>=this.end)return this.parent.resolveAt(q);var B=this.buffer.findIndex(q,0,this.bufferStart,this.index+4,this.endIndex);return 0>B?this:(new r(this.buffer,this.bufferStart,B,this)).resolveAt(q)};r.prototype.toString=function(){var q=[];this.buffer.childToString(this.index,q);return q.join("")};return r}(sa),ba=function(){function I(r,q){this.buffer=r;this.index=q}Object.defineProperty(I.prototype,"id",{get:function(){return this.buffer[this.index-
4]},enumerable:!0,configurable:!0});Object.defineProperty(I.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!0,configurable:!0});Object.defineProperty(I.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0});Object.defineProperty(I.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!0,configurable:!0});Object.defineProperty(I.prototype,"pos",{get:function(){return this.index},enumerable:!0,configurable:!0});
I.prototype.next=function(){this.index-=4};I.prototype.fork=function(){return new I(this.buffer,this.index)};return I}(),U=8};
shadow$provide[2]=function(sa,Ra,ub,D){function Na(X){Na="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"===typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E};return Na(X)}function Ka(X){Ka=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)};return Ka(X)}function Da(X,E){if("function"!==typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");
X.prototype=Object.create(E&&E.prototype,{constructor:{value:X,writable:!0,configurable:!0}});E&&Ta(X,E)}function Ta(X,E){Ta=Object.setPrototypeOf||function(F,C){F.__proto__=C;return F};return Ta(X,E)}function wa(X,E){if(!(X instanceof E))throw new TypeError("Cannot call a class as a function");}function xa(X,E){for(var F=0;F<E.length;F++){var C=E[F];C.enumerable=C.enumerable||!1;C.configurable=!0;"value"in C&&(C.writable=!0);Object.defineProperty(X,C.key,C)}}function Ba(X,E,F){E&&xa(X.prototype,
E);F&&xa(X,F);return X}function Ia(X,E,F){var C=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!(0==E&&0>=F)){var S=X.length-2;0<=S&&0>=F&&F==X[S+1]?X[S]+=E:0==E&&0==X[S]?X[S+1]+=F:C?(X[S]+=E,X[S+1]+=F):X.push(E,F)}}function qa(X,E,F){if(0!=F.length)if(E=E.length-2>>1,E<X.length)X[X.length-1]=X[X.length-1].append(F);else{for(;X.length<E;)X.push(p.Text.empty);X.push(F)}}function za(X,E,F){for(var C=X.inserted,S=0,W=0,ca=0;ca<X.sections.length;){var la=X.sections[ca++],ta=X.sections[ca++];
if(0>ta)S+=la,W+=la;else{for(var ua=S,va=W,oa=p.Text.empty;;){ua+=la;va+=ta;ta&&C&&(oa=oa.append(C[ca-2>>1]));if(F||ca==X.sections.length||0>X.sections[ca+1])break;la=X.sections[ca++];ta=X.sections[ca++]}E(S,ua,W,va,oa);S=ua;W=va}}}function ja(X,E,F){for(var C=[],S=3<arguments.length&&void 0!==arguments[3]&&arguments[3]?[]:null,W=new H(X),ca=new H(E),la=0,ta=0;;)if(-1==W.ins)la+=W.len,W.next();else if(-1==ca.ins&&ta<la){var ua=Math.min(ca.len,la-ta);ca.forward(ua);Ia(C,ua,-1);ta+=ua}else if(0<=ca.ins&&
(W.done||ta<la||ta==la&&(ca.len<W.len||ca.len==W.len&&!F))){for(Ia(C,ca.ins,-1);la>ta&&!W.done&&la+W.len<ta+ca.len;)la+=W.len,W.next();ta+=ca.len;ca.next()}else if(0<=W.ins){ua=0;for(var va=la+W.len;;)if(0<=ca.ins&&ta>la&&ta+ca.len<va)ua+=ca.ins,ta+=ca.len,ca.next();else if(-1==ca.ins&&ta<va){var oa=Math.min(ca.len,va-ta);ua+=oa;ca.forward(oa);ta+=oa}else break;Ia(C,ua,W.ins);S&&qa(S,C,W.text);la=va;W.next()}else{if(W.done&&ca.done)return S?new Q(C,S):new T(C);throw Error("Mismatched change set lengths");
}}function La(X,E){for(var F=[],C=2<arguments.length&&void 0!==arguments[2]&&arguments[2]?[]:null,S=new H(X),W=new H(E),ca=!1;;){if(S.done&&W.done)return C?new Q(F,C):new T(F);if(0==S.ins)Ia(F,S.len,0,ca),S.next();else if(0!=W.len||W.done){if(S.done||W.done)throw Error("Mismatched change set lengths");var la=Math.min(S.len2,W.len),ta=F.length;if(-1==S.ins){var ua=-1==W.ins?-1:W.off?0:W.ins;Ia(F,la,ua,ca);C&&ua&&qa(C,F,W.text)}else-1==W.ins?(Ia(F,S.off?0:S.len,la,ca),C&&qa(C,F,S.textBit(la))):(Ia(F,
S.off?0:S.len,W.off?0:W.ins,ca),C&&!W.off&&qa(C,F,W.text));ca=(S.ins>la||0<=W.ins&&W.len>la)&&(ca||F.length>ta);S.forward2(la);W.forward(la)}else Ia(F,0,W.ins,ca),C&&qa(C,F,W.text),W.next()}}function Ea(X){var E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;E=X[E];X.sort(function(ca,la){return ca.from-la.from});E=X.indexOf(E);for(var F=1;F<X.length;F++){var C=X[F],S=X[F-1];if(C.empty?C.from<=S.to:C.from<S.to){var W=S.from;S=Math.max(C.to,S.to);F<=E&&E--;X.splice(--F,2,C.anchor>C.head?P.range(S,
W):P.range(W,S))}}return new P(X,E)}function ka(X,E){var F=!0,C=!1,S=void 0;try{for(var W=X.ranges[Symbol.iterator](),ca;!(F=(ca=W.next()).done);F=!0)if(ca.value.to>E)throw new RangeError("Selection points outside of document");}catch(la){C=!0,S=la}finally{try{if(!F&&null!=W["return"])W["return"]()}finally{if(C)throw S;}}}function ba(X,E){return X==E||X.length==E.length&&X.every(function(F,C){return F===E[C]})}function U(X,E,F){if(X.length!=E.length)return!1;for(var C=0;C<X.length;C++)if(!F(X[C],
E[C]))return!1;return!0}function I(X,E,F){var C=F.map(function(la){return X[la.id]}),S=F.map(function(la){return la.type}),W=C.filter(function(la){return!(la&1)}),ca=X[E.id]>>1;return function(la,ta){var ua=ta?ta.reconfigure?ta.startState.config.address[E.id]:ca<<1:null,va=null==ua,oa=!0,Oa=!1,Ua=void 0;try{for(var $a=W[Symbol.iterator](),ab;!(oa=(ab=$a.next()).done);oa=!0)O(la,ab.value)&1&&(va=!0)}catch(Kb){Oa=!0,Ua=Kb}finally{try{if(!oa&&null!=$a["return"])$a["return"]()}finally{if(Oa)throw Ua;
}}if(!va)return 0;va=[];for(oa=0;oa<C.length;oa++)if(Oa=A(la,C[oa]),2==S[oa]){Ua=!0;$a=!1;ab=void 0;try{for(var cb=Oa[Symbol.iterator](),ob;!(Ua=(ob=cb.next()).done);Ua=!0)va.push(ob.value)}catch(Kb){$a=!0,ab=Kb}finally{try{if(!Ua&&null!=cb["return"])cb["return"]()}finally{if($a)throw ab;}}}else va.push(Oa);cb=E.combine(va);if(null!=ua&&E.compare(cb,A(ta.startState,ua)))return 0;la.values[ca]=cb;return 1}}function r(X,E){if(!Ma.hasOwnProperty(E))throw new RangeError("Invalid precedence: ".concat(E));
return new Xa(X,Ma[E])}function q(X,E){return X?r(E,X):E}function B(X){return(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(X):[]).concat(Object.keys(X))}function L(X,E){function F(oa,Oa){var Ua=S.get(oa);if(null!=Ua){if(Ua>=Oa)return;var $a=C[Ua].indexOf(oa);-1<$a&&C[Ua].splice($a,1)}S.set(oa,Oa);if(Array.isArray(oa)){Ua=!0;$a=!1;var ab=void 0;try{for(var cb=oa[Symbol.iterator](),ob;!(Ua=(ob=cb.next()).done);Ua=!0)F(ob.value,Oa)}catch(Kb){$a=!0,ab=Kb}finally{try{if(!Ua&&null!=cb["return"])cb["return"]()}finally{if($a)throw ab;
}}}else if(oa instanceof bb){if(oa.tag in W)throw new RangeError("Duplicate use of tag '".concat(String(oa.tag),"' in extensions"));W[oa.tag]=!0;F(E[oa.tag]||oa.extension,Oa)}else oa.extension?F(oa.extension,Oa):oa instanceof Xa?F(oa.e,oa.prec):(C[Oa].push(oa),oa instanceof Fa&&F(oa.facets,Oa))}var C=[[],[],[],[]],S=new Map,W=Object.create(null);F(X,Ma["default"]);X=!0;var ca=!1,la=void 0;try{for(var ta=B(E)[Symbol.iterator](),ua;!(X=(ua=ta.next()).done);X=!0){var va=ua.value;va in W||"full"==va||
!E[va]||(W[va]=!0,F(E[va],Ma["default"]))}}catch(oa){ca=!0,la=oa}finally{try{if(!X&&null!=ta["return"])ta["return"]()}finally{if(ca)throw la;}}return C.reduce(function(oa,Oa){return oa.concat(Oa)})}function O(X,E){if(E&1)return 2;E>>=1;var F=X.status[E];if(4==F)throw Error("Cyclic dependency between fields and/or facets");if(F&2)return F;X.status[E]=4;F=X.config.dynamicSlots[E](X,X.applying);return X.status[E]=2|F}function A(X,E){return E&1?X.config.staticValues[E>>1]:X.values[E>>1]}function n(X,
E,F){var C=E.reconfigure;if(C&&C.append){C=Object.assign({},C);var S="undefined"==typeof Symbol?"__append"+Math.floor(4294967295*Math.random()):Symbol("appendConf");C[S]=C.append;C.append=void 0}S=E.selection;return{changes:E.changes instanceof Q?E.changes:Q.of(E.changes||[],F,X.facet(Bb.lineSeparator)),selection:S&&(S instanceof P?S:P.single(S.anchor,S.head)),effects:E.effects?Array.isArray(E.effects)?E.effects:[E.effects]:dc,annotations:E.annotations?Array.isArray(E.annotations)?E.annotations:[E.annotations]:
dc,scrollIntoView:!!E.scrollIntoView,reconfigure:C}}function y(X,E,F){var C=n(X,E.length?E[0]:{},X.doc.length);E.length&&!1===E[0].filter&&(F=!1);for(var S=1;S<E.length;S++){!1===E[S].filter&&(F=!1);var W=!!E[S].sequential,ca=void 0,la=C;C=n(X,E[S],W?C.changes.newLength:X.doc.length);if(W){var ta=C.changes;var ua=Q.empty(C.changes.length);W=la.changes.compose(C.changes)}else ta=C.changes.map(la.changes),ua=la.changes.mapDesc(C.changes,!0),W=la.changes.compose(ta);C={changes:W,selection:C.selection?
C.selection.map(ua):null===(ca=la.selection)||void 0===ca?void 0:ca.map(ta),effects:kb.mapEffects(la.effects,ta).concat(kb.mapEffects(C.effects,ua)),annotations:la.annotations.length?la.annotations.concat(C.annotations):C.annotations,scrollIntoView:la.scrollIntoView||C.scrollIntoView,reconfigure:C.reconfigure?C.reconfigure.full||!la.reconfigure?C.reconfigure:Object.assign({},la.reconfigure,C.reconfigure):la.reconfigure}}X=new sb(X,C.changes,C.selection,C.effects,C.annotations,C.reconfigure,C.scrollIntoView);
if(F){F=X.startState;S=E=!0;ca=!1;la=void 0;try{var va=F.facet(Db)[Symbol.iterator]();for(var oa;!(S=(oa=va.next()).done);S=!0){var Oa=oa.value,Ua=Oa(X);if(!1===Ua){E=!1;break}if(Array.isArray(Ua)){if(!0===E)var $a=Ua;else a:{C=E;W=Ua;ua=[];for(var ab=ta=0;;){if(ta<C.length&&(ab==W.length||W[ab]>=C[ta])){var cb=C[ta++];var ob=C[ta++]}else if(ab<W.length)cb=W[ab++],ob=W[ab++];else{$a=ua;break a}!ua.length||ua[ua.length-1]<cb?ua.push(cb,ob):ua[ua.length-1]<ob&&(ua[ua.length-1]=ob)}}E=$a}}}catch(Kb){ca=
!0,la=Kb}finally{try{if(!S&&null!=va["return"])va["return"]()}finally{if(ca)throw la;}}!0!==E&&(!1===E?(oa=X.changes.invertedDesc,va=Q.empty(F.doc.length)):(oa=X.changes.filter(E),va=oa.changes,oa=oa.filtered.invertedDesc),X=new sb(F,va,X.selection&&X.selection.map(oa),kb.mapEffects(X.effects,oa),X.annotations,X.reconfigure,X.scrollIntoView));va=F.facet(yb);for(oa=va.length-1;0<=oa;oa--)Oa=va[oa](X),X=Oa instanceof sb?Oa:Array.isArray(Oa)&&1==Oa.length&&Oa[0]instanceof sb?Oa[0]:y(F,Array.isArray(Oa)?
Oa:[Oa],!1);va=X}else va=X;return va}function u(X){return function(E){if(!/\S/.test(E))return Eb.Space;a:if(ec)var F=ec.test(E);else{for(F=0;F<E.length;F++){var C=E[F];if(/\w/.test(C)||""<C&&(C.toUpperCase()!=C.toLowerCase()||ac.test(C))){F=!0;break a}}F=!1}if(F)return Eb.Word;for(F=0;F<X.length;F++)if(-1<E.indexOf(X[F]))return Eb.Word;return Eb.Other}}Object.defineProperty(D,"__esModule",{value:!0});D.combineConfig=function(X,E){var F=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},C=
{},S=!0,W=!1,ca=void 0;try{for(var la=X[Symbol.iterator](),ta;!(S=(ta=la.next()).done);S=!0)for(var ua=ta.value,va=0,oa=Object.keys(ua);va<oa.length;va++){var Oa=oa[va],Ua=ua[Oa],$a=C[Oa];if(void 0===$a)C[Oa]=Ua;else if($a!==Ua&&void 0!==Ua)if(Object.hasOwnProperty.call(F,Oa))C[Oa]=F[Oa]($a,Ua);else throw Error("Config merge conflict for field "+Oa);}}catch(cb){W=!0,ca=cb}finally{try{if(!S&&null!=la["return"])la["return"]()}finally{if(W)throw ca;}}for(var ab in E)void 0===C[ab]&&(C[ab]=E[ab]);return C};
D.precedence=r;D.tagExtension=function(X,E){return new bb(X,E)};Object.defineProperty(D,"Text",{enumerable:!0,get:function(){return p.Text}});D.languageDataProp=D.Transaction=D.StateField=D.StateEffectType=D.StateEffect=D.SelectionRange=D.MapMode=D.IndentContext=D.Facet=D.EditorState=D.EditorSelection=D.CharCategory=D.ChangeSet=D.ChangeDesc=D.AnnotationType=D.Annotation=void 0;var p=Ra(0),t=Ra(1),w=/\r\n?|\n/,N;D.MapMode=N;(function(X){X[X.Simple=0]="Simple";X[X.TrackDel=1]="TrackDel";X[X.TrackBefore=
2]="TrackBefore";X[X.TrackAfter=3]="TrackAfter"})(N||(D.MapMode=N={}));var T=function(){function X(E){wa(this,X);this.sections=E}Ba(X,[{key:"iterGaps",value:function(E){for(var F=0,C=0,S=0;F<this.sections.length;){var W=this.sections[F++],ca=this.sections[F++];0>ca?(E(C,S,W),S+=W):S+=ca;C+=W}}},{key:"iterChangedRanges",value:function(E){za(this,E,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1)}},{key:"composeDesc",value:function(E){return this.empty?E:E.empty?this:La(this,E)}},{key:"mapDesc",
value:function(E){var F=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;return E.empty?this:ja(this,E,F)}},{key:"mapPos",value:function(E){for(var F=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,C=2<arguments.length&&void 0!==arguments[2]?arguments[2]:N.Simple,S=0,W=0,ca=0;ca<this.sections.length;){var la=this.sections[ca++],ta=this.sections[ca++],ua=S+la;if(0>ta){if(ua>E)return W+(E-S);W+=la}else{if(C!=N.Simple&&ua>=E&&(C==N.TrackDel&&S<E&&ua>E||C==N.TrackBefore&&S<E||C==N.TrackAfter&&
ua>E))return-1;if(ua>E||ua==E&&0>F&&!la)return E==S||0>F?W:W+ta;W+=ta}S=ua}if(E>S)throw new RangeError("Position ".concat(E," is out of range for changeset of length ").concat(S));return W}},{key:"mapPosStable",value:function(E){for(var F=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,C=0,S=0,W=0,ca=0;ca<this.sections.length;){var la=this.sections[ca++],ta=this.sections[ca++],ua=C+la;if(0>ta){if(ua>E)return S+Math.max(0,E-C);W=S+=la}else{if(0>=F&&ua>=E)return W;S+=ta}C=ua}return S}},{key:"touchesRange",
value:function(E){for(var F=1<arguments.length&&void 0!==arguments[1]?arguments[1]:E,C=0,S=0;C<this.sections.length&&S<=F;){var W=this.sections[C++],ca=this.sections[C++];W=S+W;if(0<=ca&&S<=F&&W>=E)return S<E&&W>F?"cover":!0;S=W}return!1}},{key:"toString",value:function(){for(var E="",F=0;F<this.sections.length;){var C=this.sections[F++],S=this.sections[F++];E+=(E?" ":"")+C+(0<=S?":"+S:"")}return E}},{key:"length",get:function(){for(var E=0,F=0;F<this.sections.length;F+=2)E+=this.sections[F];return E}},
{key:"newLength",get:function(){for(var E=0,F=0;F<this.sections.length;F+=2){var C=this.sections[F+1];E+=0>C?this.sections[F]:C}return E}},{key:"empty",get:function(){return 0==this.sections.length||2==this.sections.length&&0>this.sections[1]}},{key:"invertedDesc",get:function(){for(var E=[],F=0;F<this.sections.length;){var C=this.sections[F++],S=this.sections[F++];0>S?E.push(C,S):E.push(S,C)}return new X(E)}}]);return X}();D.ChangeDesc=T;var Q=function(X){function E(F,C){wa(this,E);F=Ka(E).call(this,
F);if(!F||"object"!==Na(F)&&"function"!==typeof F){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");F=this}F.inserted=C;return F}Da(E,X);Ba(E,[{key:"apply",value:function(F){if(this.length!=F.length)throw new RangeError("Applying change set to a document with the wrong length");za(this,function(C,S,W,ca,la){return F=F.replace(W,W+(S-C),la)},!1);return F}},{key:"mapDesc",value:function(F){return ja(this,F,1<arguments.length&&void 0!==arguments[1]?
arguments[1]:!1,!0)}},{key:"invert",value:function(F){for(var C=this.sections.slice(),S=[],W=0,ca=0;W<C.length;W+=2){var la=C[W],ta=C[W+1];if(0<=ta){C[W]=ta;C[W+1]=la;for(ta=W>>1;S.length<ta;)S.push(p.Text.empty);S.push(la?F.slice(ca,ca+la):p.Text.empty)}ca+=la}return new E(C,S)}},{key:"compose",value:function(F){return this.empty?F:F.empty?this:La(this,F,!0)}},{key:"map",value:function(F){var C=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;return F.empty?this:ja(this,F,C,!0)}},{key:"iterChanges",
value:function(F){za(this,F,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1)}},{key:"filter",value:function(F){var C=[],S=[],W=[],ca=new H(this),la=0,ta=0;a:for(;;){for(var ua=la==F.length?1E9:F[la++];ta<ua||ta==ua&&0==ca.len;){if(ca.done)break a;var va=Math.min(ca.len,ua-ta);Ia(W,va,-1);var oa=-1==ca.ins?-1:0==ca.off?ca.ins:0;Ia(C,va,oa);0<oa&&qa(S,C,ca.text);ca.forward(va);ta+=va}for(ua=F[la++];ta<ua;){if(ca.done)break a;va=Math.min(ca.len,ua-ta);Ia(C,va,-1);Ia(W,va,-1==ca.ins?-1:0==ca.off?
ca.ins:0);ca.forward(va);ta+=va}}return{changes:new E(C,S),filtered:new T(W)}}},{key:"desc",get:function(){return new T(this.sections)}}],[{key:"of",value:function(F,C,S){function W(){if(0<arguments.length&&void 0!==arguments[0]&&arguments[0]||la.length){ua<C&&Ia(la,C-ua,-1);var oa=new E(la,ta);va=va?va.compose(oa.map(va)):oa;la=[];ta=[];ua=0}}function ca(oa){if(Array.isArray(oa)){var Oa=!0,Ua=!1,$a=void 0;try{for(var ab=oa[Symbol.iterator](),cb;!(Oa=(cb=ab.next()).done);Oa=!0)ca(cb.value)}catch(ob){Ua=
!0,$a=ob}finally{try{if(!Oa&&null!=ab["return"])ab["return"]()}finally{if(Ua)throw $a;}}}else if(oa instanceof E){if(oa.length!=C)throw new RangeError("Mismatched change set length (got ".concat(oa.length,", expected ").concat(C,")"));W();va=va?va.compose(oa.map(va)):oa}else{Oa=oa.from;Ua=oa.to;Ua=void 0===Ua?Oa:Ua;oa=oa.insert;if(Oa>Ua||0>Oa||Ua>C)throw new RangeError("Invalid change range ".concat(Oa," to ").concat(Ua," (in doc of length ").concat(C,")"));oa=oa?"string"==typeof oa?p.Text.of(oa.split(S||
w)):oa:p.Text.empty;$a=oa.length;if(Oa!=Ua||0!=$a)Oa<ua&&W(),Oa>ua&&Ia(la,Oa-ua,-1),Ia(la,Ua-Oa,$a),qa(ta,la,oa),ua=Ua}}var la=[],ta=[],ua=0,va=null;ca(F);W(!va);return va}},{key:"empty",value:function(F){return new E(F?[F,-1]:[],[])}}]);return E}(T);D.ChangeSet=Q;var H=function(){function X(E){wa(this,X);this.set=E;this.i=0;this.next()}Ba(X,[{key:"next",value:function(){var E=this.set.sections;this.i<E.length?(this.len=E[this.i++],this.ins=E[this.i++]):(this.len=0,this.ins=-2);this.off=0}},{key:"textBit",
value:function(E){var F=this.set.inserted,C=this.i-2>>1;return C>=F.length&&!E?p.Text.empty:F[C].slice(this.off,null==E?void 0:this.off+E)}},{key:"forward",value:function(E){E==this.len?this.next():(this.len-=E,this.off+=E)}},{key:"forward2",value:function(E){-1==this.ins?this.forward(E):E==this.ins?this.next():(this.ins-=E,this.off+=E)}},{key:"done",get:function(){return-2==this.ins}},{key:"len2",get:function(){return 0>this.ins?this.len:this.ins}},{key:"text",get:function(){var E=this.set.inserted,
F=this.i-2>>1;return F>=E.length?p.Text.empty:E[F]}}]);return X}(),M=function(){function X(E,F,C){wa(this,X);this.from=E;this.to=F;this.flags=C}Ba(X,[{key:"map",value:function(E){var F=E.mapPos(this.from);E=E.mapPos(this.to);return F==this.from&&E==this.to?this:new X(F,E,this.flags)}},{key:"extend",value:function(E){var F=1<arguments.length&&void 0!==arguments[1]?arguments[1]:E;return E<=this.anchor&&F>=this.anchor?P.range(E,F):P.range(this.anchor,Math.abs(E-this.anchor)>Math.abs(F-this.anchor)?E:
F)}},{key:"eq",value:function(E){return this.anchor==E.anchor&&this.head==E.head}},{key:"toJSON",value:function(){return{anchor:this.anchor,head:this.head}}},{key:"anchor",get:function(){return this.flags&16?this.to:this.from}},{key:"head",get:function(){return this.flags&16?this.from:this.to}},{key:"empty",get:function(){return this.from==this.to}},{key:"assoc",get:function(){return this.flags&4?-1:this.flags&8?1:0}},{key:"bidiLevel",get:function(){var E=this.flags&3;return 3==E?null:E}},{key:"goalColumn",
get:function(){var E=this.flags>>5;return 33554431==E?void 0:E}}],[{key:"fromJSON",value:function(E){if(!E||"number"!=typeof E.anchor||"number"!=typeof E.head)throw new RangeError("Invalid JSON representation for SelectionRange");return P.range(E.anchor,E.head)}}]);return X}();D.SelectionRange=M;var P=function(){function X(E){var F=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;wa(this,X);this.ranges=E;this.primaryIndex=F}Ba(X,[{key:"map",value:function(E){return E.empty?this:X.create(this.ranges.map(function(F){return F.map(E)}),
this.primaryIndex)}},{key:"eq",value:function(E){if(this.ranges.length!=E.ranges.length||this.primaryIndex!=E.primaryIndex)return!1;for(var F=0;F<this.ranges.length;F++)if(!this.ranges[F].eq(E.ranges[F]))return!1;return!0}},{key:"asSingle",value:function(){return 1==this.ranges.length?this:new X([this.primary])}},{key:"addRange",value:function(E){var F=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;return X.create([E].concat(this.ranges),F?0:this.primaryIndex+1)}},{key:"replaceRange",value:function(E){var F=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.primaryIndex,C=this.ranges.slice();C[F]=E;return X.create(C,this.primaryIndex)}},{key:"toJSON",value:function(){return{ranges:this.ranges.map(function(E){return E.toJSON()}),primaryIndex:this.primaryIndex}}},{key:"primary",get:function(){return this.ranges[this.primaryIndex]}}],[{key:"fromJSON",value:function(E){if(!E||!Array.isArray(E.ranges)||"number"!=typeof E.primaryIndex||E.primaryIndex>=E.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");
return new X(E.ranges.map(function(F){return M.fromJSON(F)}),E.primaryIndex)}},{key:"single",value:function(E){return new X([X.range(E,1<arguments.length&&void 0!==arguments[1]?arguments[1]:E)],0)}},{key:"create",value:function(E){var F=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(0==E.length)throw new RangeError("A selection needs at least one range");for(var C=0,S=0;S<E.length;S++){var W=E[S];if(W.empty?W.from<=C:W.from<C)return Ea(E.slice(),F);C=W.to}return new X(E,F)}},{key:"cursor",
value:function(E){var F=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,C=2<arguments.length?arguments[2]:void 0,S=3<arguments.length?arguments[3]:void 0;return new M(E,E,(0==F?0:0>F?4:8)|(null==C?3:Math.min(2,C))|(null!==S&&void 0!==S?S:33554431)<<5)}},{key:"range",value:function(E,F,C){C=(null!==C&&void 0!==C?C:33554431)<<5;return F<E?new M(F,E,16|C):new M(E,F,C)}}]);return X}();D.EditorSelection=P;var Z=0,ha=function(){function X(E,F,C,S){wa(this,X);this.combine=E;this.compareInput=F;
this.compare=C;this.isStatic=S;this.id=Z++;this["default"]=E([])}Ba(X,[{key:"of",value:function(E){return new Ca([],this,0,E)}},{key:"compute",value:function(E,F){if(this.isStatic)throw Error("Can't compute a static facet");return new Ca(E,this,1,F)}},{key:"computeN",value:function(E,F){if(this.isStatic)throw Error("Can't compute a static facet");return new Ca(E,this,2,F)}},{key:"from",value:function(E,F){var C=this;return function(S){return q(F,C.compute([S],function(W){return E(W.field(S))}))}}},
{key:"nFrom",value:function(E,F){var C=this;return function(S){return q(F,C.computeN([S],function(W){return E(W.field(S))}))}}}],[{key:"define",value:function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new X(E.combine||function(F){return F},E.compareInput||function(F,C){return F===C},E.compare||(E.combine?function(F,C){return F===C}:ba),!!E["static"])}}]);return X}();D.Facet=ha;var Ca=function(){function X(E,F,C,S){wa(this,X);this.dependencies=E;this.facet=F;this.type=
C;this.value=S;this.id=Z++}Ba(X,[{key:"dynamicSlot",value:function(E){var F=this.value,C=this.facet.compareInput,S=E[this.id]>>1,W=2==this.type,ca=!1,la=!1,ta=[],ua=!0,va=!1,oa=void 0;try{for(var Oa=this.dependencies[Symbol.iterator](),Ua;!(ua=(Ua=Oa.next()).done);ua=!0){var $a=Ua.value;"doc"==$a?ca=!0:"selection"==$a?la=!0:0==(E[$a.id]&1)&&ta.push(E[$a.id])}}catch(ab){va=!0,oa=ab}finally{try{if(!ua&&null!=Oa["return"])Oa["return"]()}finally{if(va)throw oa;}}return function(ab,cb){if(!cb||cb.reconfigure)ab.values[S]=
F(ab);else{if(!(ca&&cb.docChanged||la&&(cb.docChanged||cb.selection)||ta.some(function(Kb){return 0<(O(ab,Kb)&1)})))return 0;var ob=F(ab);cb=cb.startState.values[S];if(W?U(ob,cb,C):C(ob,cb))return 0;ab.values[S]=ob}return 1}}}]);return X}(),Fa=function(){function X(E,F,C,S,W){wa(this,X);this.id=E;this.createF=F;this.updateF=C;this.compareF=S;this.facets=W}Ba(X,[{key:"slot",value:function(E){var F=this,C=E[this.id]>>1;return function(S,W){if(!W)return S.values[C]=F.createF(S),1;var ca=0;if(W.reconfigure){var la=
W.startState.config.address[F.id];la=null==la?null:la>>1;la=null==la?F.createF(W.startState):W.startState.values[la];ca=1}else la=W.startState.values[C];W=F.updateF(la,W);ca||F.compareF(la,W)||(ca=1);ca&&(S.values[C]=W);return ca}}}],[{key:"define",value:function(E){var F=[],C=new X(Z++,E.create,E.update,E.compare||function(va,oa){return va===oa},F);if(E.provide){var S=!0,W=!1,ca=void 0;try{for(var la=E.provide[Symbol.iterator](),ta;!(S=(ta=la.next()).done);S=!0){var ua=ta.value;ua instanceof ha?
F.push(ua.compute([C],function(va){return va.field(C)})):F.push(ua(C))}}catch(va){W=!0,ca=va}finally{try{if(!S&&null!=la["return"])la["return"]()}finally{if(W)throw ca;}}}return C}}]);return X}();D.StateField=Fa;var Ma={fallback:3,"default":2,extend:1,override:0},Xa=function C(E,F){wa(this,C);this.e=E;this.prec=F},bb=function S(F,C){wa(this,S);this.tag=F;this.extension=C},gb=function(){function F(C,S,W,ca,la){wa(this,F);this.source=C;this.replacements=S;this.dynamicSlots=W;this.address=ca;this.staticValues=
la;for(this.statusTemplate=[];this.statusTemplate.length<la.length;)this.statusTemplate.push(0)}Ba(F,[{key:"staticFacet",value:function(C){var S=this.address[C.id];return null==S?C["default"]:this.staticValues[S>>1]}}],[{key:"resolve",value:function(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Object.create(null),W=2<arguments.length?arguments[2]:void 0,ca=[],la=Object.create(null),ta=!0,ua=!1,va=void 0;try{for(var oa=L(C,S)[Symbol.iterator](),Oa;!(ta=(Oa=oa.next()).done);ta=!0){var Ua=
Oa.value;Ua instanceof Fa?ca.push(Ua):(la[Ua.facet.id]||(la[Ua.facet.id]=[])).push(Ua)}}catch(ya){ua=!0,va=ya}finally{try{if(!ta&&null!=oa["return"])oa["return"]()}finally{if(ua)throw va;}}var $a=Object.create(null),ab=[],cb=[];ta=function(){var ya=Kb[ob];$a[ya.id]=cb.length<<1;cb.push(function(Lb){return ya.slot(Lb)})};for(var ob=0,Kb=ca;ob<Kb.length;ob++)ta();ca=function(ya){var Lb=la[ya],Cb=Lb[0].facet;if(Lb.every(function(ia){return 0==ia.type})){$a[Cb.id]=ab.length<<1|1;var lb=Cb.combine(Lb.map(function(ia){return ia.value}));
ya=W?W.config.address[Cb.id]:null;null!=ya&&(ya=A(W,ya),Cb.compare(lb,ya)&&(lb=ya));ab.push(lb)}else{ya=!0;var Ib=!1,G=void 0;try{var Y=function(){var ia=ma.value;0==ia.type?($a[ia.id]=ab.length<<1|1,ab.push(ia.value)):($a[ia.id]=cb.length<<1,cb.push(function(na){return ia.dynamicSlot(na)}))};lb=Lb[Symbol.iterator]();for(var ma;!(ya=(ma=lb.next()).done);ya=!0)Y()}catch(ia){Ib=!0,G=ia}finally{try{if(!ya&&null!=lb["return"])lb["return"]()}finally{if(Ib)throw G;}}$a[Cb.id]=cb.length<<1;cb.push(function(ia){return I(ia,
Cb,Lb)})}};for(var jc in la)ca(jc);return new F(C,S,cb.map(function(ya){return ya($a)}),$a,ab)}}]);return F}(),Hb=ha.define({combine:function(F){return F.some(function(C){return C})},"static":!0}),Db=ha.define(),yb=ha.define();sa=new t.NodeProp;D.languageDataProp=sa;var zb=ha.define();sa=function(){function F(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};wa(this,F);this.state=C;this.options=S}Ba(F,[{key:"textAfterPos",value:function(C){var S,W,ca=null===(S=this.options)||void 0===
S?void 0:S.simulateBreak;return C==ca&&(null===(W=this.options)||void 0===W?0:W.simulateDoubleBreak)?"":this.state.sliceDoc(C,Math.min(C+100,null!=ca&&ca>C?ca:1E9,this.state.doc.lineAt(C).to))}},{key:"countColumn",value:function(C,S){return(0,p.countColumn)(0>S?C:C.slice(0,S),0,this.state.tabSize)}},{key:"lineIndent",value:function(C){var S,W=null===(S=this.options)||void 0===S?void 0:S.overrideIndentation;if(W&&(S=W(C.from),-1<S))return S;C=C.slice(0,Math.min(100,C.length));return this.countColumn(C,
C.search(/\S/))}},{key:"column",value:function(C){var S,W=this.state.doc.lineAt(C),ca=W.slice(0,C-W.from);C=this.countColumn(ca,C-W.from);W=(null===(S=this.options)||void 0===S?0:S.overrideIndentation)?this.options.overrideIndentation(W.from):-1;-1<W&&(C+=W-this.countColumn(ca,ca.search(/\S/)));return C}},{key:"unit",get:function(){return this.state.indentUnit}}]);return F}();D.IndentContext=sa;var hb=function(){function F(C,S){wa(this,F);this.type=C;this.value=S}Ba(F,null,[{key:"define",value:function(){return new Ab}}]);
return F}();D.Annotation=hb;var Ab=function(){function F(){wa(this,F)}Ba(F,[{key:"of",value:function(C){return new hb(this,C)}}]);return F}();D.AnnotationType=Ab;var kb=function(){function F(C,S){wa(this,F);this.type=C;this.value=S}Ba(F,[{key:"map",value:function(C){C=this.type.map(this.value,C);return void 0===C?void 0:C==this.value?this:new F(this.type,C)}},{key:"is",value:function(C){return this.type==C}}],[{key:"define",value:function(){return new vb((0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{}).map||function(C){return C})}},{key:"mapEffects",value:function(C,S){if(!C.length)return C;var W=[],ca=!0,la=!1,ta=void 0;try{for(var ua=C[Symbol.iterator](),va;!(ca=(va=ua.next()).done);ca=!0){var oa=va.value.map(S);oa&&W.push(oa)}}catch(Oa){la=!0,ta=Oa}finally{try{if(!ca&&null!=ua["return"])ua["return"]()}finally{if(la)throw ta;}}return W}}]);return F}();D.StateEffect=kb;var vb=function(){function F(C){wa(this,F);this.map=C}Ba(F,[{key:"of",value:function(C){return new kb(this,C)}}]);
return F}();D.StateEffectType=vb;var sb=function(){function F(C,S,W,ca,la,ta,ua){wa(this,F);this.startState=C;this.changes=S;this.selection=W;this.effects=ca;this.annotations=la;this.reconfigure=ta;this.scrollIntoView=ua;this._state=this._doc=null;W&&ka(W,S.newLength);la.some(function(va){return va.type==F.time})||(this.annotations=la.concat(F.time.of(Date.now())))}Ba(F,[{key:"annotation",value:function(C){var S=!0,W=!1,ca=void 0;try{for(var la=this.annotations[Symbol.iterator](),ta;!(S=(ta=la.next()).done);S=
!0){var ua=ta.value;if(ua.type==C)return ua.value}}catch(va){W=!0,ca=va}finally{try{if(!S&&null!=la["return"])la["return"]()}finally{if(W)throw ca;}}}},{key:"newDoc",get:function(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}},{key:"newSelection",get:function(){return this.selection||this.startState.selection.map(this.changes)}},{key:"state",get:function(){this._state||this.startState.applyTransaction(this);return this._state}},{key:"docChanged",get:function(){return!this.changes.empty}}]);
return F}();D.Transaction=sb;sb.time=hb.define();sb.userEvent=hb.define();sb.addToHistory=hb.define();var dc=[],Eb;D.CharCategory=Eb;(function(F){F[F.Word=0]="Word";F[F.Space=1]="Space";F[F.Other=2]="Other"})(Eb||(D.CharCategory=Eb={}));var ac=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{var ec=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(F){}var Bb=function(){function F(C,S,W){var ca=3<arguments.length&&void 0!==arguments[3]?
arguments[3]:null;wa(this,F);this.config=C;this.doc=S;this.selection=W;this.applying=null;this.status=C.statusTemplate.slice();if(ca&&!ca.reconfigure)this.values=ca.startState.values.slice();else if(this.values=C.dynamicSlots.map(function(va){return null}),ca)for(var la in C.address){var ta=C.address[la],ua=ca.startState.config.address[la];null!=ua&&0==(ta&1)&&(this.values[ta>>1]=A(ca.startState,ua))}if(this.applying=ca)ca._state=this;for(ca=0;ca<this.config.dynamicSlots.length;ca++)O(this,ca<<1);
this.applying=null}Ba(F,[{key:"field",value:function(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,W=this.config.address[C.id];if(null==W){if(S)throw new RangeError("Field is not present in this state");}else return O(this,W),A(this,W)}},{key:"update",value:function(){for(var C=arguments.length,S=Array(C),W=0;W<C;W++)S[W]=arguments[W];return y(this,S,!0)}},{key:"applyTransaction",value:function(C){var S=this.config;C.reconfigure&&(S=gb.resolve(C.reconfigure.full||S.source,Object.assign(S.replacements,
C.reconfigure,{full:void 0}),this));new F(S,C.newDoc,C.newSelection,C)}},{key:"replaceSelection",value:function(C){"string"==typeof C&&(C=this.toText(C));return this.changeByRange(function(S){return{changes:{from:S.from,to:S.to,insert:C},range:P.cursor(S.from+C.length)}})}},{key:"changeByRange",value:function(C){var S=this.selection,W=C(S.ranges[0]),ca=this.changes(W.changes);W=[W.range];for(var la=1;la<S.ranges.length;la++){for(var ta=C(S.ranges[la]),ua=this.changes(ta.changes),va=ua.map(ca),oa=
0;oa<la;oa++)W[oa]=W[oa].map(va);W.push(ta.range.map(ca.mapDesc(ua,!0)));ca=ca.compose(va)}return{changes:ca,selection:P.create(W,S.primaryIndex)}}},{key:"changes",value:function(){var C=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return C instanceof Q?C:Q.of(C,this.doc.length,this.facet(F.lineSeparator))}},{key:"toText",value:function(C){return p.Text.of(C.split(this.facet(F.lineSeparator)||w))}},{key:"sliceDoc",value:function(){return this.doc.sliceString(0<arguments.length&&void 0!==
arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.doc.length,this.lineBreak)}},{key:"facet",value:function(C){var S=this.config.address[C.id];if(null==S)return C["default"];O(this,S);return A(this,S)}},{key:"toJSON",value:function(){return{doc:this.sliceDoc(),selection:this.selection.toJSON()}}},{key:"indentString",value:function(C){var S="";if(9==this.facet(F.indentUnit).charCodeAt(0))for(;C>=this.tabSize;)S+="\t",C-=this.tabSize;for(var W=0;W<C;W++)S+=" ";return S}},
{key:"phrase",value:function(C){var S=!0,W=!1,ca=void 0;try{for(var la=this.facet(F.phrases)[Symbol.iterator](),ta;!(S=(ta=la.next()).done);S=!0){var ua=ta.value;if(Object.prototype.hasOwnProperty.call(ua,C))return ua[C]}}catch(va){W=!0,ca=va}finally{try{if(!S&&null!=la["return"])la["return"]()}finally{if(W)throw ca;}}return C}},{key:"charCategorizer",value:function(C){return u(this.languageDataAt("wordChars",C).join(""))}},{key:"languageDataAt",value:function(C,S){for(var W=[],ca=this.facet(F.syntax),
la=ca.length?0:1;2>la;la++){var ta=this.facet(la?zb:ca[0].languageDataFacetAt(this,S)),ua=!0,va=!1,oa=void 0;try{for(var Oa=ta[Symbol.iterator](),Ua;!(ua=(Ua=Oa.next()).done);ua=!0){var $a=Ua.value;Object.prototype.hasOwnProperty.call($a,C)&&W.push($a[C])}}catch(ab){va=!0,oa=ab}finally{try{if(!ua&&null!=Oa["return"])Oa["return"]()}finally{if(va)throw oa;}}}return W}},{key:"tabSize",get:function(){return this.facet(F.tabSize)}},{key:"lineBreak",get:function(){return this.facet(F.lineSeparator)||"\n"}},
{key:"indentUnit",get:function(){var C=this.facet(F.indentUnit);return 9==C.charCodeAt(0)?this.tabSize*C.length:C.length}},{key:"tree",get:function(){var C=this.facet(F.syntax);return C.length?C[0].getTree(this):t.Tree.empty}}],[{key:"fromJSON",value:function(C){var S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!C||"string"!=typeof C.doc)throw new RangeError("Invalid JSON representation for EditorState");return F.create({doc:C.doc,selection:P.fromJSON(C.selection),extensions:S.extensions})}},
{key:"create",value:function(){var C=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},S=gb.resolve(C.extensions||[]),W=C.doc instanceof p.Text?C.doc:p.Text.of((C.doc||"").split(S.staticFacet(F.lineSeparator)||w));C=C.selection?C.selection instanceof P?C.selection:P.single(C.selection.anchor,C.selection.head):P.single(0);ka(C,W.length);S.staticFacet(Hb)||(C=C.asSingle());return new F(S,W,C)}}]);return F}();D.EditorState=Bb;Bb.allowMultipleSelections=Hb;Bb.indentation=ha.define();Bb.tabSize=
ha.define({combine:function(F){return F.length?F[0]:4}});Bb.lineSeparator=ha.define({combine:function(F){return F.length?F[0]:void 0},"static":!0});Bb.indentUnit=ha.define({combine:function(F){if(!F.length)return"  ";if(!/^(?: +|\t+)$/.test(F[0]))throw Error("Invalid indent unit: "+JSON.stringify(F[0]));return F[0]}});Bb.phrases=ha.define();Bb.syntax=ha.define();Bb.globalLanguageData=zb;Bb.foldable=ha.define();Bb.changeFilter=Db;Bb.transactionFilter=yb};
shadow$provide[3]=function(sa,Ra,ub,D){function Na(za,ja){return"undefined"==typeof Symbol?"__"+za+(ja?Math.floor(1E8*Math.random()):""):ja?Symbol(za):Symbol.for(za)}function Ka(za,ja,La){if("object"!=typeof ja)throw new RangeError("Expected style object, got "+JSON.stringify(ja));var Ea=[],ka=function(U){if(/^@/.test(U)){var I=[];Ka(za,ja[U],I);La.push(U+" {"+I.join(" ")+"}")}else if(/&/.test(U))Ka(za.split(/\s*,\s*/).map(function(r){return U.replace(/&/g,r)}).join(", "),ja[U],La);else if("specificity"!=
U){if("object"==typeof ja[U])throw new RangeError("The value of a property ("+U+") should be a primitive value.");Ea.push(U.replace(/_.*/,"").replace(/[A-Z]/g,function(r){return"-"+r.toLowerCase()})+": "+ja[U])}},ba;for(ba in ja)ka(ba);Ea.length&&La.push(za+" {"+Ea.join("; ")+"}")}var Da=Na("ͼ"),Ta=Na("styleSet",1),wa=Na("rules",1),xa="undefined"==typeof sa?window:sa,Ba=D.StyleModule=function(za,ja){this[wa]=[];for(var La in za){var Ea=za[La].specificity||0,ka=Ba.newName(),ba=La;if(!1!==(ja&&ja.generateClasses)){var U=
ka;ba="."+ka;for(ka=0;ka<Ea;ka++){var I="ͼ_"+(ka?ka.toString(36):"");ba+="."+I;U+=" "+I}this[La]=U}Ka(ba,za[La],this[wa])}};Ba.newName=function(){var za=xa[Da]||1;xa[Da]=za+1;return"ͼ"+za.toString(36)};Ba.prototype=Object.create(null);Ba.mount=function(za,ja){(za[Ta]||new qa(za)).mount(Array.isArray(ja)?ja:[ja])};var Ia=null,qa=function(za){if(za.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Ia)return za.adoptedStyleSheets=[Ia.sheet].concat(za.adoptedStyleSheets),za[Ta]=Ia;this.sheet=
new CSSStyleSheet;za.adoptedStyleSheets=[this.sheet].concat(za.adoptedStyleSheets);Ia=this}else this.styleTag=(za.ownerDocument||za).createElement("style"),za=za.head||za,za.insertBefore(this.styleTag,za.firstChild);this.modules=[]};qa.prototype.mount=function(za){for(var ja=this.sheet,La=0,Ea=0,ka=0;ka<za.length;ka++){var ba=za[ka],U=this.modules.indexOf(ba);U<Ea&&-1<U&&(this.modules.splice(U,1),Ea--,U=-1);if(-1==U){if(this.modules.splice(Ea++,0,ba),ja)for(U=0;U<ba[wa].length;U++)ja.insertRule(ba[wa][U],
La++)}else{for(;Ea<U;)La+=this.modules[Ea++][wa].length;La+=ba[wa].length;Ea++}}if(!ja){za="";for(ja=0;ja<this.modules.length;ja++)za+=this.modules[ja][wa].join("\n")+"\n";this.styleTag.textContent=za}}};
shadow$provide[4]=function(sa,Ra,ub,D){function Na(U,I){if(!(U instanceof I))throw new TypeError("Cannot call a class as a function");}function Ka(U,I){for(var r=0;r<I.length;r++){var q=I[r];q.enumerable=q.enumerable||!1;q.configurable=!0;"value"in q&&(q.writable=!0);Object.defineProperty(U,q.key,q)}}function Da(U,I,r){I&&Ka(U.prototype,I);r&&Ka(U,r);return U}function Ta(U,I){return U.from-I.from||U.value.startSide-I.value.startSide}function wa(U,I){var r=new Map,q=!0,B=!1,L=void 0;try{for(var O=
U[Symbol.iterator](),A;!(q=(A=O.next()).done);q=!0){var n=A.value;for(U=0;U<n.chunk.length;U++)500>n.chunk[U].maxPoint&&r.set(n.chunk[U],n.chunkPos[U])}}catch(t){B=!0,L=t}finally{try{if(!q&&null!=O["return"])O["return"]()}finally{if(B)throw L;}}q=new Set;B=!0;L=!1;O=void 0;try{for(var y=I[Symbol.iterator](),u;!(B=(u=y.next()).done);B=!0){var p=u.value;for(I=0;I<p.chunk.length;I++)r.get(p.chunk[I])==p.chunkPos[I]&&q.add(p.chunk[I])}}catch(t){L=!0,O=t}finally{try{if(!B&&null!=y["return"])y["return"]()}finally{if(L)throw O;
}}return q}function xa(U,I){for(var r=U[I];;){var q=(I<<1)+1;if(q>=U.length)break;var B=U[q];q+1<U.length&&0<=B.compare(U[q+1])&&(B=U[q+1],q++);if(0>r.compare(B))break;U[q]=r;U[I]=B;I=q}}function Ba(U,I,r,q,B,L){U["goto"](I);r["goto"](q);B=q+B;var O=q;for(I=q-I;;){q=U.to+I-r.to||U.endSide-r.endSide;var A=0>q?U.to+I:r.to,n=Math.min(A,B);if(U.point||r.point)U.point&&r.point&&(U.point==r.point||U.point.eq(r.point))||L.comparePoint(O,n,U.point,r.point);else{var y;if(y=n>O){a:{y=U.active;var u=r.active;
if(y.length!=u.length)y=!1;else{var p=0;b:for(;p<y.length;p++){for(var t=0;t<u.length;t++)if(y[p]==u[p]||y[p].eq(u[t]))continue b;y=!1;break a}y=!0}}y=!y}y&&L.compareRange(O,n,U.active,r.active)}if(A>B)break;O=A;0>=q&&U.next();0<=q&&r.next()}}function Ia(U,I){for(var r=-1,q=1E9,B=0;B<I.length;B++)0>(I[B]-q||U[B].endSide-U[r].endSide)&&(r=B,q=I[B]);return r}Object.defineProperty(D,"__esModule",{value:!0});D.RangeValue=D.RangeSetBuilder=D.RangeSet=D.Range=void 0;sa=Ra(2);Ra=function(){function U(){Na(this,
U)}Da(U,[{key:"eq",value:function(I){return this==I}},{key:"range",value:function(I){return new qa(I,1<arguments.length&&void 0!==arguments[1]?arguments[1]:I,this)}}]);return U}();D.RangeValue=Ra;Ra.prototype.startSide=Ra.prototype.endSide=0;Ra.prototype.point=!1;Ra.prototype.mapMode=sa.MapMode.TrackDel;var qa=function B(I,r,q){Na(this,B);this.from=I;this.to=r;this.value=q};D.Range=qa;var za=function(){function I(r,q,B,L){Na(this,I);this.from=r;this.to=q;this.value=B;this.maxPoint=L}Da(I,[{key:"findIndex",
value:function(r,q){var B=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1E9*q,L=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(0>=r)return L;for(var O=0>q?this.to:this.from,A=O.length;;){if(L==A)return L;var n=L+A>>1,y=O[n]-r||(0>q?this.value[n].startSide:this.value[n].endSide)-B;if(n==L)return 0<=y?L:A;0<=y?A=n:L=n+1}}},{key:"between",value:function(r,q,B,L){q=this.findIndex(q,-1);for(B=this.findIndex(B,1,void 0,q);q<B;q++)if(!1===L(this.from[q]+r,this.to[q]+r,this.value[q]))return!1}},
{key:"map",value:function(r,q){for(var B=[],L=[],O=[],A=-1,n=-1,y=0;y<this.value.length;y++){var u=this.value[y],p=this.from[y]+r,t=this.to[y]+r;if(p==t){t=q.mapPos(p,u.startSide,u.mapMode);if(0>t)continue;p=t}else if(p=q.mapPos(p,u.startSide),t=q.mapPos(t,u.endSide),p>t||p==t&&0<u.startSide&&0>=u.endSide)continue;0>(t-p||u.endSide-u.startSide)||(0>A&&(A=p),u.point&&(n=Math.max(n,t-p)),B.push(u),L.push(p-A),O.push(t-A))}return{mapped:B.length?new I(L,O,B,n):null,pos:A}}},{key:"length",get:function(){return this.to[this.to.length-
1]}}]);return I}(),ja=function(){function I(r,q){var B=2<arguments.length&&void 0!==arguments[2]?arguments[2]:I.empty,L=3<arguments.length?arguments[3]:void 0;Na(this,I);this.chunkPos=r;this.chunk=q;this.nextLayer=B;this.maxPoint=L}Da(I,[{key:"chunkEnd",value:function(r){return this.chunkPos[r]+this.chunk[r].length}},{key:"update",value:function(r){var q=r.add;q=void 0===q?[]:q;var B=r.sort,L=r.filter,O=r.filterFrom;O=void 0===O?0:O;r=r.filterTo;r=void 0===r?this.length:r;if(0==q.length&&!L)return this;
(void 0===B?0:B)&&q.slice().sort(Ta);if(this==I.empty)return q.length?I.of(q):this;B=(new Ea(this,null,-1))["goto"](0);for(var A=0,n=[],y=new La;B.value||A<q.length;)if(A<q.length&&0<=(B.from-q[A].from||B.startSide-q[A].value.startSide)){var u=q[A++];y.addInner(u.from,u.to,u.value)||n.push(u)}else if(1==B.rangeIndex&&B.chunkIndex<this.chunk.length&&(A==q.length||this.chunkEnd(B.chunkIndex)<q[A].from)&&(!L||O>this.chunkEnd(B.chunkIndex)||r<this.chunkPos[B.chunkIndex])&&y.addChunk(this.chunkPos[B.chunkIndex],
this.chunk[B.chunkIndex]))B.nextChunk();else{if(!L||O>B.to||r<B.from||L(B.from,B.to,B.value))y.addInner(B.from,B.to,B.value)||n.push(new qa(B.from,B.to,B.value));B.next()}return y.finishInner(this.nextLayer!=I.empty||n.length?this.nextLayer.update({add:n,filter:L,filterFrom:O,filterTo:r}):I.empty)}},{key:"map",value:function(r){if(0==r.length||this==I.empty)return this;for(var q=[],B=[],L=-1,O=0;O<this.chunk.length;O++){var A=this.chunkPos[O],n=this.chunk[O],y=r.touchesRange(A,A+n.length);!1===y?
(L=Math.max(L,n.maxPoint),q.push(n),B.push(r.mapPos(A))):!0===y&&(n=n.map(A,r),A=n.mapped,n=n.pos,A&&(L=Math.max(L,A.maxPoint),q.push(A),B.push(n)))}r=this.nextLayer.map(r);return 0==q.length?r:new I(B,q,r,L)}},{key:"between",value:function(r,q,B){if(this!=I.empty){for(var L=0;L<this.chunk.length;L++){var O=this.chunkPos[L],A=this.chunk[L];if(q>=O&&r<=O+A.length&&!1===A.between(O,r-O,q-O,B))return}this.nextLayer.between(r,q,B)}}},{key:"iter",value:function(){var r=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:0;return ka.from([this])["goto"](r)}},{key:"length",get:function(){var r=this.chunk.length-1;return 0>r?0:Math.max(this.chunkEnd(r),this.nextLayer.length)}},{key:"size",get:function(){if(this==I.empty)return 0;var r=this.nextLayer.size,q=!0,B=!1,L=void 0;try{for(var O=this.chunk[Symbol.iterator](),A;!(q=(A=O.next()).done);q=!0)r+=A.value.value.length}catch(n){B=!0,L=n}finally{try{if(!q&&null!=O["return"])O["return"]()}finally{if(B)throw L;}}return r}}],[{key:"iter",value:function(r){var q=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return ka.from(r)["goto"](q)}},{key:"compare",value:function(r,q,B,L){var O,A=null!==(O=L.minPointSize)&&void 0!==O?O:-1;O=r.filter(function(t){return 500<=t.maxPoint||t!=I.empty&&0>q.indexOf(t)&&t.maxPoint>=A});var n=q.filter(function(t){return 500<=t.maxPoint||t!=I.empty&&0>r.indexOf(t)&&t.maxPoint>=A}),y=wa(O,n),u=new ba(O,y,A),p=new ba(n,y,A);B.iterGaps(function(t,w,N){return Ba(u,t,p,w,N,L)});B.empty&&0==B.length&&Ba(u,0,p,0,0,L)}},{key:"spans",
value:function(r,q,B,L){var O;r=(new ba(r,null,null!==(O=L.minPointSize)&&void 0!==O?O:-1))["goto"](q);for(O=q;;){var A=Math.min(r.to,B);r.point?L.point(O,A,r.point,r.pointFrom<q,r.to>B):A>O&&L.span(O,A,r.active);if(r.to>B)break;O=r.to;r.next()}}},{key:"of",value:function(r){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,B=new La,L=!0,O=!1,A=void 0;try{for(var n=(r instanceof qa?[r]:q?r.slice().sort(Ta):r)[Symbol.iterator](),y;!(L=(y=n.next()).done);L=!0){var u=y.value;B.add(u.from,
u.to,u.value)}}catch(p){O=!0,A=p}finally{try{if(!L&&null!=n["return"])n["return"]()}finally{if(O)throw A;}}return B.finish()}}]);return I}();D.RangeSet=ja;ja.empty=new ja([],[],null,-1);ja.empty.nextLayer=ja.empty;var La=function(){function I(){Na(this,I);this.chunks=[];this.chunkPos=[];this.chunkStart=-1;this.last=null;this.lastTo=this.lastFrom=-1E9;this.from=[];this.to=[];this.value=[];this.setMaxPoint=this.maxPoint=-1;this.nextLayer=null}Da(I,[{key:"finishChunk",value:function(r){this.chunks.push(new za(this.from,
this.to,this.value,this.maxPoint));this.chunkPos.push(this.chunkStart);this.chunkStart=-1;this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint);this.maxPoint=-1;r&&(this.from=[],this.to=[],this.value=[])}},{key:"add",value:function(r,q,B){this.addInner(r,q,B)||(this.nextLayer||(this.nextLayer=new I)).add(r,q,B)}},{key:"addInner",value:function(r,q,B){var L=r-this.lastTo||B.startSide-this.last.endSide;if(0>=L&&0>(r-this.lastFrom||B.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");
if(0>L)return!1;250==this.from.length&&this.finishChunk(!0);0>this.chunkStart&&(this.chunkStart=r);this.from.push(r-this.chunkStart);this.to.push(q-this.chunkStart);this.last=B;this.lastFrom=r;this.lastTo=q;this.value.push(B);B.point&&(this.maxPoint=Math.max(this.maxPoint,q-r));return!0}},{key:"addChunk",value:function(r,q){if(0>(r-this.lastTo||q.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0);this.setMaxPoint=Math.max(this.setMaxPoint,q.maxPoint);this.chunks.push(q);
this.chunkPos.push(r);var B=q.value.length-1;this.last=q.value[B];this.lastFrom=q.from[B]+r;this.lastTo=q.to[B]+r;return!0}},{key:"finish",value:function(){return this.finishInner(ja.empty)}},{key:"finishInner",value:function(r){this.from.length&&this.finishChunk(!1);if(0==this.chunks.length)return r;r=new ja(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(r):r,this.setMaxPoint);this.from=null;return r}}]);return I}();D.RangeSetBuilder=La;var Ea=function(){function I(r,q,B){Na(this,
I);this.layer=r;this.skip=q;this.minPoint=B}Da(I,[{key:"goto",value:function(r){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1E9;this.chunkIndex=this.rangeIndex=0;this.gotoInner(r,q,!1);return this}},{key:"gotoInner",value:function(r,q,B){for(;this.chunkIndex<this.layer.chunk.length;){var L=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(L)||this.layer.chunkEnd(this.chunkIndex)<r||L.maxPoint<this.minPoint))break;this.chunkIndex++;B=!1}r=this.chunkIndex==this.layer.chunk.length?
0:this.layer.chunk[this.chunkIndex].findIndex(r-this.layer.chunkPos[this.chunkIndex],-1,q);if(!B||this.rangeIndex<r)this.rangeIndex=r;this.next()}},{key:"forward",value:function(r,q){0>(this.to-r||this.endSide-q)&&this.gotoInner(r,q,!0)}},{key:"next",value:function(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1E9;this.value=null;break}else{var r=this.layer.chunkPos[this.chunkIndex],q=this.layer.chunk[this.chunkIndex];this.from=r+q.from[this.rangeIndex];this.to=r+q.to[this.rangeIndex];
this.value=q.value[this.rangeIndex];if(++this.rangeIndex==q.value.length){this.chunkIndex++;if(this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}if(0>this.minPoint||this.value.point&&this.to-this.from>=this.minPoint)break}}},{key:"nextChunk",value:function(){this.chunkIndex++;this.rangeIndex=0;this.next()}},{key:"compare",value:function(r){return this.from-r.from||this.startSide-r.startSide||this.to-r.to||
this.endSide-r.endSide}},{key:"startSide",get:function(){return this.value?this.value.startSide:0}},{key:"endSide",get:function(){return this.value?this.value.endSide:0}}]);return I}(),ka=function(){function I(r){Na(this,I);this.heap=r}Da(I,[{key:"goto",value:function(r){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1E9,B=!0,L=!1,O=void 0;try{for(var A=this.heap[Symbol.iterator](),n;!(B=(n=A.next()).done);B=!0)n.value["goto"](r,q)}catch(y){L=!0,O=y}finally{try{if(!B&&null!=A["return"])A["return"]()}finally{if(L)throw O;
}}for(q=this.heap.length>>1;0<=q;q--)xa(this.heap,q);this.next();return this}},{key:"forward",value:function(r,q){var B=!0,L=!1,O=void 0;try{for(var A=this.heap[Symbol.iterator](),n;!(B=(n=A.next()).done);B=!0)n.value.forward(r,q)}catch(y){L=!0,O=y}finally{try{if(!B&&null!=A["return"])A["return"]()}finally{if(L)throw O;}}for(B=this.heap.length>>1;0<=B;B--)xa(this.heap,B);0>(this.to-r||this.value.endSide-q)&&this.next()}},{key:"next",value:function(){if(0==this.heap.length)this.from=this.to=1E9,this.value=
null;else{var r=this.heap[0];this.from=r.from;this.to=r.to;(this.value=r.value)&&r.next();xa(this.heap,0)}}},{key:"startSide",get:function(){return this.value?this.value.startSide:0}}],[{key:"from",value:function(r){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,B=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,L=[],O=!0,A=!1,n=void 0;try{for(var y=r[Symbol.iterator](),u;!(O=(u=y.next()).done);O=!0)for(var p=u.value;p!=ja.empty;p=p.nextLayer)p.maxPoint>=B&&L.push(new Ea(p,
q,B))}catch(t){A=!0,n=t}finally{try{if(!O&&null!=y["return"])y["return"]()}finally{if(A)throw n;}}return 1==L.length?L[0]:new I(L)}}]);return I}(),ba=function(){function I(r,q,B){Na(this,I);this.minPoint=B;this.active=[];this.activeTo=[];this.minActive=-1;this.point=null;this.pointFrom=0;this.to=-1E9;this.endSide=0;this.cursor=ka.from(r,q,B)}Da(I,[{key:"goto",value:function(r){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1E9;this.cursor["goto"](r,q);this.active.length=this.activeTo.length=
0;this.minActive=-1;this.to=r;this.endSide=q;this.next();return this}},{key:"forward",value:function(r,q){for(;-1<this.minActive&&0>(this.activeTo[this.minActive]-r||this.active[this.minActive].endSide-q);)this.removeActive(this.minActive);this.cursor.forward(r,q)}},{key:"removeActive",value:function(r){var q=this.active,B=q.pop();r!=q.length&&(q[r]=B);q=this.activeTo;B=q.pop();r!=q.length&&(q[r]=B);this.minActive=Ia(this.active,this.activeTo)}},{key:"next",value:function(){var r=this.to;for(this.point=
null;;){var q=this.minActive;if(-1<q&&0>(this.activeTo[q]-this.cursor.from||this.active[q].endSide-this.cursor.startSide)){if(this.activeTo[q]>r){this.to=this.activeTo[q];this.endSide=this.active[q].endSide;break}this.removeActive(q)}else if(this.cursor.value)if(this.cursor.from>r){this.to=this.cursor.from;this.endSide=this.cursor.startSide;break}else if(q=this.cursor.value,q.point){this.point=q;this.pointFrom=this.cursor.from;this.to=this.cursor.to;this.endSide=q.endSide;this.cursor.next();this.to>
r&&this.forward(this.to,this.endSide);break}else this.active.push(q),this.activeTo.push(this.cursor.to),this.minActive=Ia(this.active,this.activeTo),this.cursor.next();else{this.to=this.endSide=1E9;break}}}}]);return I}()};
shadow$provide[5]=function(sa,Ra,ub,D){Object.defineProperty(D,"__esModule",{value:!0});var Na={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"\x3d",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",
162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Ka={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"\x26",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"\x3c",189:"_",190:"\x3e",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"};sa="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent);var Da="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor);
Ra="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent);ub="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);var Ta="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),wa=sa&&(ub||57>+sa[1])||Ra&&ub;for(sa=0;10>sa;sa++)Na[48+sa]=Na[96+sa]=String(sa);for(sa=1;24>=sa;sa++)Na[sa+111]="F"+sa;for(sa=65;90>=sa;sa++)Na[sa]=String.fromCharCode(sa+32),Ka[sa]=String.fromCharCode(sa);for(var xa in Na)Ka.hasOwnProperty(xa)||(Ka[xa]=
Na[xa]);D.base=Na;D.keyName=function(Ba){Ba=!(wa&&(Ba.ctrlKey||Ba.altKey||Ba.metaKey)||(Da||Ta)&&Ba.shiftKey&&Ba.key&&1==Ba.key.length)&&Ba.key||(Ba.shiftKey?Ka:Na)[Ba.keyCode]||Ba.key||"Unidentified";"Esc"==Ba&&(Ba="Escape");"Del"==Ba&&(Ba="Delete");"Left"==Ba&&(Ba="ArrowLeft");"Up"==Ba&&(Ba="ArrowUp");"Right"==Ba&&(Ba="ArrowRight");"Down"==Ba&&(Ba="ArrowDown");return Ba};D.shift=Ka};
shadow$provide[6]=function(sa,Ra,ub,D){function Na(g,c,a){Na="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(d,e,h){for(;!Object.prototype.hasOwnProperty.call(d,e)&&(d=wa(d),null!==d););if(d)return e=Object.getOwnPropertyDescriptor(d,e),e.get?e.get.call(h):e.value};return Na(g,c,a||g)}function Ka(g){Ka="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"===typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?
"symbol":typeof c};return Ka(g)}function Da(g,c){return!c||"object"!==Ka(c)&&"function"!==typeof c?Ta(g):c}function Ta(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function wa(g){wa=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)};return wa(g)}function xa(g,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function");g.prototype=
Object.create(c&&c.prototype,{constructor:{value:g,writable:!0,configurable:!0}});c&&Ba(g,c)}function Ba(g,c){Ba=Object.setPrototypeOf||function(a,d){a.__proto__=d;return a};return Ba(g,c)}function Ia(g){if(Array.isArray(g)){var c=0;for(var a=Array(g.length);c<g.length;c++)a[c]=g[c];c=a}else c=void 0;c||(c=Symbol.iterator in Object(g)||"[object Arguments]"===Object.prototype.toString.call(g)?Array.from(g):void 0);if(!(g=c))throw new TypeError("Invalid attempt to spread non-iterable instance");return g}
function qa(g,c){if(!(g instanceof c))throw new TypeError("Cannot call a class as a function");}function za(g,c){for(var a=0;a<c.length;a++){var d=c[a];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(g,d.key,d)}}function ja(g,c,a){c&&za(g.prototype,c);a&&za(g,a);return g}function La(g){return g.getSelection?g.getSelection():document.getSelection()}function Ea(g){var c=g.isCollapsed;c&&Za.chrome&&g.rangeCount&&!g.getRangeAt(0).collapsed&&(c=!1);return c}
function ka(g,c){if(!c.anchorNode)return!1;try{return g.contains(3==c.anchorNode.nodeType?c.anchorNode.parentNode:c.anchorNode)}catch(a){return!1}}function ba(g){if(3==g.nodeType){var c=document.createRange();c.setEnd(g,g.nodeValue.length);c.setStart(g,0);return c.getClientRects()}return 1==g.nodeType?g.getClientRects():[]}function U(g,c,a,d){return a?r(g,c,a,d,-1)||r(g,c,a,d,1):!1}function I(g){for(var c=0;;c++)if(g=g.previousSibling,!g)return c}function r(g,c,a,d,e){for(;;){if(g==a&&c==d)return!0;
if(c==(0>e?0:q(g))){if("DIV"==g.nodeName)return!1;var h=g.parentNode;if(!h||1!=h.nodeType)return!1;c=I(g)+(0>e?0:1);g=h}else if(1==g.nodeType)g=g.childNodes[c+(0>e?-1:0)],c=0>e?q(g):0;else return!1}}function q(g){return 3==g.nodeType?g.nodeValue.length:g.childNodes.length}function B(g,c){c=c?g.left:g.right;return{left:c,right:c,top:g.top,bottom:g.bottom}}function L(g){if(g.setActive)return g.setActive();if(Fb)return g.focus(Fb);for(var c=[],a=g;a&&(c.push(a,a.scrollTop,a.scrollLeft),a!=a.ownerDocument);a=
a.parentNode);g.focus(null==Fb?{get preventScroll(){Fb={preventScroll:!0};return!0}}:void 0);if(!Fb)for(Fb=!1,g=0;g<c.length;){a=c[g++];var d=c[g++],e=c[g++];a.scrollTop!=d&&(a.scrollTop=d);a.scrollLeft!=e&&(a.scrollLeft=e)}}function O(g){var c=g.nextSibling;g.parentNode.removeChild(g);return c}function A(g,c){for(var a in g)"class"==a&&c["class"]?c["class"]+=" "+g["class"]:"style"==a&&c.style?c.style+=";"+g.style:c[a]=g[a];return c}function n(g,c){if(g==c)return!0;if(!g||!c)return!1;var a=Object.keys(g),
d=Object.keys(c);if(a.length!=d.length)return!1;for(var e=0;e<a.length;e++){var h=a[e];if(-1==d.indexOf(h)||g[h]!==c[h])return!1}return!0}function y(g,c,a){if(c)for(var d in c)a&&d in a||g.removeAttribute(d);if(a)for(var e in a)c&&c[e]==a[e]||g.setAttribute(e,a[e])}function u(g,c,a,d){var e=c,h=c,k=0;0==c&&0>a||c==d&&0<=a?Za.chrome||Za.gecko||(c?(e--,k=1):(h++,k=-1)):0>a?e--:h++;c=document.createRange();c.setEnd(g,h);c.setStart(g,e);g=c.getBoundingClientRect();return k?B(g,0>k):g}function p(g){var c=
g.inclusiveStart,a=g.inclusiveEnd;null==c&&(c=g.inclusive);null==a&&(a=g.inclusive);return{start:c||!1,end:a||!1}}function t(g,c,a){var d=a.length-1;0<=d&&a[d]+4>g?a[d]=Math.max(a[d],c):a.push(g,c)}function w(g,c){var a=Object.create(null),d;for(d in c){var e=d.split(/\s*,\s*/).map(function(h){var k=g,x;k==gc&&(x=/^(.*?)@(light|dark)$/.exec(h))&&(k="dark"==x[2]?Jc:uc,h=x[1]);h=h.split(".");k="."+k+("wrap"==h[0]?"":" ");for(x=1;x<=h.length;x++)k+=".cm-"+h.slice(0,x).join("-");return k}).join(", ");
a[e]=c[d]}return new Lb.StyleModule(a,{generateClasses:!1})}function N(g){g=g.split(".");for(var c="",a=1;a<=g.length;a++)c+=(c?" ":"")+"cm-"+g.slice(0,a).join("-");return c}function T(g){for(var c=[],a=0;a<g.length;a++)c.push(1<<+g[a]);return c}function Q(g,c){var a=g.length;c=c==zc?1:2;if(!g||1==c&&!Qc.test(g))return[new hc(0,a,0)];for(var d=0,e=c,h=c;d<a;d++){var k=g.charCodeAt(d);k=247>=k?Rc[k]:1424<=k&&1524>=k?2:1536<=k&&1785>=k?Sc[k-1536]:1774<=k&&2220>=k?4:8192<=k&&8203>=k?256:8204==k?256:
1;512==k?k=e:8==k&&4==h&&(k=16);Gb[d]=4==k?2:k;k&7&&(h=k);e=k}h=0;for(g=k=c;h<a;h++){d=Gb[h];if(128==d)h<a-1&&k==Gb[h+1]&&k&24?d=Gb[h]=k:Gb[h]=256;else if(64==d){for(e=h+1;e<a&&64==Gb[e];)e++;for(k=h&&8==k||e<a&&8==Gb[e]?1==g?1:8:256;h<e;h++)Gb[h]=k;h=e-1}else 8==d&&1==g&&(Gb[h]=1);k=d;d&7&&(g=d)}for(d=0;d<a;d++)if(256==Gb[d]){for(g=d+1;g<a&&256==Gb[g];)g++;e=1==(d?Gb[d-1]:c);for(e=e==(1==(g<a?Gb[g]:c))?e?1:2:c;d<g;d++)Gb[d]=e;d=g-1}g=[];if(1==c)for(c=0;c<a;){d=c;for(e=1!=Gb[c++];c<a&&e==(1!=Gb[c]);)c++;
if(e)for(e=c;e>d;){h=e;for(k=2!=Gb[--e];e>d&&k==(2!=Gb[e-1]);)e--;g.push(new hc(e,h,k?2:1))}else g.push(new hc(d,c,0))}else for(c=0;c<a;){d=c;for(e=2==Gb[c++];c<a&&e==(2==Gb[c]);)c++;g.push(new hc(d,c,e?1:2))}return g}function H(g,c,a,d,e){var h,k=d.head-g.from,x=-1;if(0==k){if(!e||!g.length)return null;c[0].level!=a&&(k=c[0].side(!1,a),x=0)}else if(k==g.length){if(e)return null;var K=c[c.length-1];K.level!=a&&(k=K.side(!0,a),x=c.length-1)}0>x&&(x=hc.find(c,k,null!==(h=d.bidiLevel)&&void 0!==h?h:
-1,d.assoc));d=c[x];k==d.side(e,a)&&(d=c[x+=e?1:-1],k=d.side(!e,a));K=e==(d.dir==a);h=g.findClusterBreak(k,K);Ac=g.slice(Math.min(k,h),Math.max(k,h));return h!=d.side(e,a)?ya.EditorSelection.cursor(h+g.from,K?-1:1,d.level):(c=x==(e?c.length-1:0)?null:c[x+(e?1:-1)])||d.level==a?c&&c.level<d.level?ya.EditorSelection.cursor(c.side(!e,a)+g.from,0,c.level):ya.EditorSelection.cursor(h+g.from,0,d.level):ya.EditorSelection.cursor(e?g.to:g.from,e?-1:1,a)}function M(g,c){var a,d;null==g[c]&&(a=g[c-1])instanceof
v&&(d=g[c+1])instanceof v&&g.splice(c-1,3,new v(a.length+1+d.length))}function P(g,c,a){var d=new R;Cb.RangeSet.compare(g,c,a,d);return d.changes}function Z(g,c,a){g=g.facet(Pa);if(g.length)g[0](c);else if(window.onerror)window.onerror(String(c),a,void 0,void 0,c);else a?console.error(a+":",c):console.error(c)}function ha(g,c,a){var d=[],e=g,h=0;Cb.RangeSet.spans(a.facet(Wa),g,c,{span:function(){},point:function(k,x){k>e&&(d.push({from:e,to:k}),h+=k-e);e=x},minPointSize:20});e<c&&(d.push({from:e,
to:c}),h+=c-e);return{total:h,ranges:d}}function Ca(g,c){var a=g.ranges;if(0>=c)return a[0].from;if(1<=c)return a[a.length-1].to;g=Math.floor(g.total*c);for(c=0;;c++){var d=a[c],e=d.from;d=d.to-e;if(g<=d)return e+g;g-=d}}function Fa(g,c){var a=0,d=!0,e=!1,h=void 0;try{for(var k=g.ranges[Symbol.iterator](),x;!(d=(x=k.next()).done);d=!0){var K=x.value,V=K.from,aa=K.to;if(c<=aa){a+=c-V;break}a+=aa-V}}catch(da){e=!0,h=da}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;}}return a/
g.total}function Ma(g,c){var a=!0,d=!1,e=void 0;try{for(var h=g[Symbol.iterator](),k;!(a=(k=h.next()).done);a=!0){var x=k.value;if(c(x))return x}}catch(K){d=!0,e=K}finally{try{if(!a&&null!=h["return"])h["return"]()}finally{if(d)throw e;}}}function Xa(g,c){var a=La(g.root);a=a.focusNode&&bb(a.focusNode,a.focusOffset,0);if(!a)return pb.none;var d=g.docView.nearest(a),e=a;if(d instanceof Bc){var h=d.posAtStart;var k=h+d.length;e=d.dom}else if(d instanceof ib){for(;e.parentNode!=d.dom;)e=e.parentNode;
for(k=e.previousSibling;k&&!Qb.get(k);)k=k.previousSibling;h=k=k?Qb.get(k).posAtEnd:d.posAtStart}else return pb.none;d=c.mapPos(h,1);c=Math.max(d,c.mapPos(k,-1));k=a.nodeValue;g=g.state;if(c-d<k.length)if(g.sliceDoc(d,Math.min(g.doc.length,d+k.length))==k)c=d+k.length;else if(g.sliceDoc(Math.max(0,c-k.length),c)==k)d=c-k.length;else return pb.none;else if(g.sliceDoc(d,c)!=k)return pb.none;return pb.set(pb.replace({widget:new sd({top:e,text:a})}).range(d,c))}function bb(g,c,a){for(;;){if(3==g.nodeType)return g;
if(1==g.nodeType&&0<c&&0>=a)g=g.childNodes[c-1],c=q(g);else if(1==g.nodeType&&c<g.childNodes.length&&0<=a)g=g.childNodes[c],c=0;else return null}}function gb(g,c){return 1!=g.nodeType?0:(c&&"false"==g.childNodes[c-1].contentEditable?1:0)|(c<g.childNodes.length&&"false"==g.childNodes[c].contentEditable?2:0)}function Hb(g,c,a){var d=new td;Cb.RangeSet.compare(g,c,a,d);return d.changes}function Db(g,c){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,d=g.charCategorizer(c),e=g.doc.lineAt(c),
h=c-e.from;if(0==e.length)return ya.EditorSelection.cursor(c);0==h?a=1:h==e.length&&(a=-1);var k=h,x=h;0>a?k=e.findClusterBreak(h,!1):x=e.findClusterBreak(h,!0);for(a=d(e.slice(k,x));0<k;){h=e.findClusterBreak(k,!1);if(d(e.slice(h,k))!=a)break;k=h}for(;x<e.length;){h=e.findClusterBreak(x,!0);if(d(e.slice(x,h))!=a)break;x=h}return ya.EditorSelection.range(k+e.from,x+e.from)}function yb(g,c){return g.top<c.bottom-1&&g.bottom>c.top+1}function zb(g,c){return c<g.top?{top:c,left:g.left,right:g.right,bottom:g.bottom}:
g}function hb(g,c){return c>g.bottom?{top:g.top,left:g.left,right:g.right,bottom:c}:g}function Ab(g,c,a){for(var d,e,h,k,x,K,V,aa,da=g.firstChild;da;da=da.nextSibling)for(var ra=ba(da),Va=0;Va<ra.length;Va++){var Qa=ra[Va];e&&yb(e,Qa)&&(Qa=zb(hb(Qa,e.bottom),e.top));var jb=Qa.left>c?Qa.left-c:Math.max(0,c-Qa.right),tb=Qa.top>a?Qa.top-a:Math.max(0,a-Qa.bottom);if(0==jb&&0==tb)return 3==da.nodeType?kb(da,c,a):Ab(da,c,a);if(!d||k>tb||k==tb&&h>jb)d=da,e=Qa,h=jb,k=tb;0==jb?a>Qa.bottom&&(!V||V.bottom<Qa.bottom)?
(x=da,V=Qa):a<Qa.top&&(!aa||aa.top>Qa.top)&&(K=da,aa=Qa):V&&yb(V,Qa)?V=hb(V,Qa.bottom):aa&&yb(aa,Qa)&&(aa=zb(aa,Qa.top))}V&&V.bottom>=a?(d=x,e=V):aa&&aa.top<=a&&(d=K,e=aa);if(!d)return{node:g,offset:0};k=Math.max(e.left,Math.min(e.right,c));if(3==d.nodeType)return kb(d,k,a);if(!h&&"true"==d.contentEditable)return Ab(d,k,a);c=Array.prototype.indexOf.call(g.childNodes,d)+(c>=(e.left+e.right)/2?1:0);return{node:g,offset:c}}function kb(g,c,a){for(var d=g.nodeValue.length,e=document.createRange(),h=0;h<
d;h++){e.setEnd(g,h+1);e.setStart(g,h);for(var k=e.getClientRects(),x=0;x<k.length;x++){var K=k[x];if(K.top!=K.bottom&&K.left-1<=c&&K.right+1>=c&&K.top-1<=a&&K.bottom+1>=a){a=c=c>=(K.left+K.right)/2;if(Za.chrome||Za.gecko)e.setEnd(g,h),e.getBoundingClientRect().left==K.right&&(a=!c);return{node:g,offset:h+(a?1:0)}}}}return{node:g,offset:0}}function vb(g,c){for(var a=c.x,d=c.y,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,h=g.contentDOM.getBoundingClientRect(),k,x=g.defaultLineHeight/
2,K=!1;;){k=g.blockAtHeight(d,h.top);if(k.top>d||k.bottom<d){e=k.top>d?-1:1;d=Math.min(k.bottom-x,Math.max(k.top+x,d));if(K)return-1;K=!0}if(k.type==Mb.Text)break;d=0<e?k.bottom+x:k.top-x}e=k.from;if(e<g.viewport.from)return 0==g.viewport.from?0:-1;if(e>g.viewport.to)return g.viewport.to==g.state.doc.length?g.state.doc.length:-1;a=Math.max(h.left+1,Math.min(h.right-1,a));k=g.root;x=k.elementFromPoint(a,d);h=-1;if(x&&g.contentDOM.contains(x)&&!(g.docView.nearest(x)instanceof Cc))if(k.caretPositionFromPoint){if(k=
k.caretPositionFromPoint(a,d)){var V=k.offsetNode;h=k.offset}}else k.caretRangeFromPoint&&(k=k.caretRangeFromPoint(a,d))&&(V=k.startContainer,h=k.startOffset);V||(V=ib.find(g.docView,e),a=Ab(V.dom,a,d),V=a.node,h=a.offset);return g.docView.posFromDOM(V,h)}function sb(g,c,a,d){for(var e=g.state.doc.lineAt(c.head),h=g.bidiSpans(e),k=null;;){var x=H(e,h,g.textDirection,c,a),K=Ac;if(!x){if(e.number==(a?g.state.doc.lines:1))return c;K="\n";e=g.state.doc.line(e.number+(a?1:-1));h=g.bidiSpans(e);x=ya.EditorSelection.cursor(a?
e.from:e.to)}if(!k){if(!d)return x;k=d(K)}else if(!k(K))return c;c=x}}function dc(g,c,a){var d=g.state.charCategorizer(c),e=d(a);return function(h){h=d(h);e==ya.CharCategory.Space&&(e=h);return e==h}}function Eb(g,c){if(g.state.selection.primary.empty)return!1;g=La(g.root);if(0==g.rangeCount)return!0;g=g.getRangeAt(0).getClientRects();for(var a=0;a<g.length;a++){var d=g[a];if(d.left<=c.clientX&&d.right>=c.clientX&&d.top<=c.clientY&&d.bottom>=c.clientY)return!0}return!1}function ac(g,c){if(!c.bubbles)return!0;
if(c.defaultPrevented)return!1;for(var a=c.target,d;a!=g.contentDOM;a=a.parentNode)if(!a||11==a.nodeType||(d=Qb.get(a))&&d.ignoreEvent(c))return!1;return!0}function ec(g){var c=g.dom.parentNode;if(c){var a=c.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.focus();setTimeout(function(){g.focus();a.remove();Bb(g,a.value)},50)}}function Bb(g,c){var a=g.state.toText(c),d=1;c=a.lines==g.state.selection.ranges.length?g.state.changeByRange(function(e){var h=
a.line(d++);return{changes:{from:e.from,to:e.to,insert:h.slice()},range:ya.EditorSelection.cursor(e.from+h.length)}}):g.state.replaceSelection(a);g.dispatch(c,{annotations:ya.Transaction.userEvent.of("paste"),scrollIntoView:!0})}function X(g,c,a,d){if(1==d)return ya.EditorSelection.cursor(c,a);if(2==d)return Db(g.state,c,a);if(a=ib.find(g.docView,c))return ya.EditorSelection.range(a.posAtStart,a.posAtEnd);g=g.state.doc.lineAt(c);return ya.EditorSelection.range(g.from,g.to)}function E(g,c){var a=g.posAtCoords({x:c.clientX,
y:c.clientY});if(0>a)a=null;else{var d=c.clientX;c=c.clientY;var e=ib.find(g.docView,a);if(e){var h=a-e.posAtStart;d=0==h?1:h==e.length?-1:(g=e.coordsAt(h,-1))&&c>=g.top&&c<=g.bottom&&d>=g.left&&d<=g.right?-1:(e=e.coordsAt(h,1))&&c>=e.top&&c<=e.bottom&&d>=e.left&&d<=e.right?1:g&&c>=g.top&&c<=g.bottom?-1:1}else d=1;a={pos:a,bias:d}}return a}function F(g){if(!ud)return g.detail;var c=gd;gd=g;return hd=!c||c.timeStamp>Date.now()-400&&2>Math.abs(c.clientX-g.clientX)&&2>Math.abs(c.clientY-g.clientY)?(hd+
1)%3:1}function C(g,c){var a=E(g,c),d=F(c),e=g.state.selection,h=a,k=c;return{update:function(x){x.changes&&(a&&(a.pos=x.changes.mapPos(a.pos)),e=e.map(x.changes))},get:function(x,K,V){if(x.clientX==k.clientX&&x.clientY==k.clientY)var aa=h;else aa=h=E(g,x),k=x;if(!aa||!a)return e;x=X(g,aa.pos,aa.bias,d);if(a.pos!=aa.pos&&!K){var da=X(g,a.pos,a.bias,d);aa=Math.min(da.from,x.from);da=Math.max(da.to,x.to);x=aa<x.from?ya.EditorSelection.range(aa,da):ya.EditorSelection.range(da,aa)}return K?e.replaceRange(e.primary.extend(x.from,
x.to)):V?e.addRange(x):ya.EditorSelection.create([x])}}}function S(g,c){var a=g.dom.parentNode;if(a){var d=a.appendChild(document.createElement("textarea"));d.style.cssText="position: fixed; left: -10000px; top: 10px";d.value=c;d.focus();d.selectionEnd=c.length;d.selectionStart=0;setTimeout(function(){d.remove();g.focus()},50)}}function W(g,c,a){for(;c;){var d=Qb.get(c);if(d&&d.parent==g)return d;d=c.parentNode;c=d!=g.dom?d:0<a?c.nextSibling:c.previousSibling}return null}function ca(g,c,a,d){var e,
h=g.state.selection.primary,k;if(-1<c&&(k=g.docView.domBoundsAround(c,a,0))){var x=k;c=x.from;var K=x.to;x=g.docView.impreciseHead||g.docView.impreciseAnchor?[]:ua(g.contentDOM,g.root);a=new vd(x);a.readRange(k.startDOM,k.endDOM);x=va(x,c);k=h.from;var V=null;8===g.inputState.lastKeyCode&&g.inputState.lastKeyTime>Date.now()-100&&(k=h.to,V="end");(k=la(g.state.doc.sliceString(c,K,"﷚"),a.text,k-c,V))&&(e={from:c+k.from,to:c+k.toA,insert:ya.Text.of(a.text.slice(k.from,k.toB).split("﷚"))})}else g.hasFocus&&
(c=La(g.root),a=g.docView,k=a.impreciseHead,a=a.impreciseAnchor,k=k&&k.node==c.focusNode&&k.offset==c.focusOffset?g.state.selection.primary.head:g.docView.posFromDOM(c.focusNode,c.focusOffset),c=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset?g.state.selection.primary.anchor:Ea(c)?k:g.docView.posFromDOM(c.anchorNode,c.anchorOffset),k!=h.head||c!=h.anchor)&&(x=ya.EditorSelection.single(c,k));if(e||x)if(!e&&d&&!h.empty&&x&&x.primary.empty&&(e={from:h.from,to:h.to,insert:g.state.doc.slice(h.from,h.to)}),
e){var aa=g.state;if(!Za.android||!(e.from==h.from&&e.to==h.to&&1==e.insert.length&&2==e.insert.lines&&oa(g,"Enter",10)||e.from==h.from-1&&e.to==h.to&&0==e.insert.length&&oa(g,"Backspace",8)||e.from==h.from&&e.to==h.to+1&&0==e.insert.length&&oa(g,"Delete",46))){var da=e.insert.toString();g.state.facet(Ya).some(function(ra){return ra(g,e.from,e.to,da)})||(e.from>=h.from&&e.to<=h.to&&e.to-e.from>=(h.to-h.from)/3?(x=h.from<e.from?aa.doc.sliceString(h.from,e.from,"﷚"):"",h=h.to>e.to?aa.doc.sliceString(e.to,
h.to,"﷚"):"",h=aa.replaceSelection(ya.Text.of((x+e.insert.sliceString(0,void 0,"﷚")+h).split("﷚")))):(h=aa.changes(e),h={changes:h,selection:x&&!aa.selection.primary.eq(x.primary)&&x.primary.to<=h.newLength?aa.selection.replaceRange(x.primary):void 0}),g.dispatch(h,{scrollIntoView:!0,annotations:ya.Transaction.userEvent.of("input")}))}}else x&&!x.primary.eq(h)&&(h=!1,g.inputState.lastSelectionTime>Date.now()-50&&("keyboardselection"==g.inputState.lastSelectionOrigin?h=!0:aa=ya.Transaction.userEvent.of(g.inputState.lastSelectionOrigin)),
g.dispatch({selection:x,scrollIntoView:h,annotations:aa}))}function la(g,c,a,d){for(var e=Math.min(g.length,c.length),h=0;h<e&&g.charCodeAt(h)==c.charCodeAt(h);)h++;if(h==e&&g.length==c.length)return null;e=g.length;for(var k=c.length;0<e&&0<k&&g.charCodeAt(e-1)==c.charCodeAt(k-1);)e--,k--;"end"==d&&(a-=e+Math.max(0,h-Math.min(e,k))-h);e<h&&g.length<c.length?(h-=a<=h&&a>=e?h-a:0,k=h+(k-e),e=h):k<h&&(h-=a<=h&&a>=k?h-a:0,e=h+(e-k),k=h);return{from:h,toA:e,toB:k}}function ta(g){return 1==g.nodeType&&
/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(g.nodeName)}function ua(g,c){var a=[];if(c.activeElement!=g)return a;var d=La(c);g=d.anchorNode;c=d.anchorOffset;var e=d.focusNode;d=d.focusOffset;g&&(a.push(new id(g,c)),e==g&&d==c||a.push(new id(e,d)));return a}function va(g,c){if(0==g.length)return null;var a=g[0].pos;g=2==g.length?g[1].pos:a;return-1<a&&-1<g?ya.EditorSelection.single(a+c,g+c):null}function oa(g,c,a){a={key:c,code:c,keyCode:a,which:a,cancelable:!0};c=new KeyboardEvent("keydown",
a);g.contentDOM.dispatchEvent(c);a=new KeyboardEvent("keyup",a);g.contentDOM.dispatchEvent(a);return c.defaultPrevented||a.defaultPrevented}function Oa(g,c){return null==g?c.getBoundingClientRect().top:g}function Ua(){window.addEventListener("resize",function(){-1==Tc&&(Tc=setTimeout($a,50))})}function $a(){Tc=-1;for(var g=document.querySelectorAll(".cm-content"),c=0;c<g.length;c++){var a=Qb.get(g[c]);a&&a.editorView.requestMeasure()}}function ab(g,c,a){c.altKey&&(g="Alt-"+g);c.ctrlKey&&(g="Ctrl-"+
g);c.metaKey&&(g="Meta-"+g);!1!==a&&c.shiftKey&&(g="Shift-"+g);return g}function cb(g){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:wd,a=Object.create(null),d=Object.create(null),e=function(Wb,Ub){var vc=d[Wb];if(null==vc)d[Wb]=Ub;else if(vc!=Ub)throw Error("Key binding "+Wb+" is used both as a regular binding and as a multi-stroke prefix");},h=function(Wb,Ub,vc,Uc){var Kc=a[Wb]||(a[Wb]=Object.create(null)),Xc=Ub.split(/ (?!$)/).map(function(nc){nc=nc.split(/-(?!$)/);var Vb=nc[nc.length-
1];"Space"==Vb&&(Vb=" ");for(var Lc,Dc,jd,Vc,Wc=0;Wc<nc.length-1;++Wc){var wc=nc[Wc];if(/^(cmd|meta|m)$/i.test(wc))Vc=!0;else if(/^a(lt)?$/i.test(wc))Lc=!0;else if(/^(c|ctrl|control)$/i.test(wc))Dc=!0;else if(/^s(hift)?$/i.test(wc))jd=!0;else if(/^mod$/i.test(wc))"mac"==c?Vc=!0:Dc=!0;else throw Error("Unrecognized modifier name: "+wc);}Lc&&(Vb="Alt-"+Vb);Dc&&(Vb="Ctrl-"+Vb);Vc&&(Vb="Meta-"+Vb);jd&&(Vb="Shift-"+Vb);return Vb});Ub=function(nc){var Vb=Xc.slice(0,nc).join(" ");e(Vb,!0);Kc[Vb]||(Kc[Vb]=
{preventDefault:!0,commands:[function(Lc){var Dc=oc={view:Lc,prefix:Vb,scope:Wb};setTimeout(function(){oc==Dc&&(oc=null)},xd);return!0}]})};for(var Yc=1;Yc<Xc.length;Yc++)Ub(Yc);Ub=Xc.join(" ");e(Ub,!1);Ub=Kc[Ub]||(Kc[Ub]={preventDefault:!1,commands:[]});Ub.commands.push(vc);Uc&&(Ub.preventDefault=!0)},k=!0,x=!1,K=void 0;try{for(var V=g[Symbol.iterator](),aa;!(k=(aa=V.next()).done);k=!0){var da=aa.value,ra=da[c]||da.key;if(ra){var Va=!0,Qa=!1,jb=void 0;try{for(var tb=(da.scope?da.scope.split(" "):
["editor"])[Symbol.iterator](),ic;!(Va=(ic=tb.next()).done);Va=!0){var kc=ic.value;h(kc,ra,da.run,da.preventDefault);da.shift&&h(kc,"Shift-"+ra,da.shift,da.preventDefault)}}catch(Wb){Qa=!0,jb=Wb}finally{try{if(!Va&&null!=tb["return"])tb["return"]()}finally{if(Qa)throw jb;}}}}}catch(Wb){x=!0,K=Wb}finally{try{if(!k&&null!=V["return"])V["return"]()}finally{if(x)throw K;}}return a}function ob(g,c,a,d){var e=(0,Ib.keyName)(c),h=1==e.length&&" "!=e,k="";oc&&oc.view==a&&oc.scope==d&&(k=oc.prefix+" ",oc=
null);var x=!!k,K=function(jb){if(jb){var tb=!0,ic=!1,kc=void 0;try{for(var Wb=jb.commands[Symbol.iterator](),Ub;!(tb=(Ub=Wb.next()).done);tb=!0){var vc=Ub.value;if(vc(a))return!0}}catch(Uc){ic=!0,kc=Uc}finally{try{if(!tb&&null!=Wb["return"])Wb["return"]()}finally{if(ic)throw kc;}}jb.preventDefault&&(x=!0)}return!1},V=!0,aa=!1,da=void 0;try{for(var ra=g[Symbol.iterator](),Va;!(V=(Va=ra.next()).done);V=!0){var Qa=Va.value[d];g=void 0;if(Qa){if(K(Qa[k+ab(e,c,!h)]))return!0;if(h&&(c.shiftKey||c.altKey||
c.metaKey)&&(g=Ib.base[c.keyCode])&&g!=e){if(K(Qa[k+ab(g,c,!0)]))return!0}else if(h&&c.shiftKey&&K(Qa[k+ab(e,c,!0)]))return!0}}}catch(jb){aa=!0,da=jb}finally{try{if(!V&&null!=ra["return"])ra["return"]()}finally{if(aa)throw da;}}return x}function Kb(g){var c=g.ranges;g=g.primaryIndex;if(1==c.length)return pb.none;for(var a=[],d=0;d<c.length;d++)if(d!=g){var e=c[d];a.push(e.empty?Zc.deco.range(e.from):yd.range(c[d].from,c[d].to))}return pb.set(a)}function jc(){if(null==$c&&"undefined"!=typeof document&&
document.body){var g=document.body.style;$c=null!=(g.tabSize||g.MozTabSize)}return $c||!1}Object.defineProperty(D,"__esModule",{value:!0});D.highlightSpecialChars=function(){var g=[Mc.of(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),zd];jc()||g.push(Ad);return g};D.indentOnInput=function(){return ya.EditorState.transactionFilter.of(function(g){if(!g.docChanged||"input"!=g.annotation(ya.Transaction.userEvent))return g;var c=g.startState.languageDataAt("indentOnInput",g.startState.selection.primary.head);
if(!c.length)return g;var a=g.newDoc,d=g.newSelection.primary.head,e=a.lineAt(d);if(d>e.from+kd)return g;var h=a.sliceString(e.from,d);if(!c.some(function(da){return da.test(h)}))return g;var k=g.state,x=-1,K=[];c=!0;a=!1;d=void 0;try{e=function(){var da=k.doc.lineAt(aa.value.head);if(da.from==x)return"continue";x=da.from;var ra=Math.max.apply(Math,Ia(k.facet(ya.EditorState.indentation).map(function(Qa){return Qa(new ya.IndentContext(k),da.from)})));if(0>ra)return"continue";var Va=/^\s*/.exec(da.slice(0,
Math.min(da.length,kd)))[0];ra=k.indentString(ra);Va!=ra&&K.push({from:da.from,to:da.from+Va.length,insert:ra})};for(var V=k.selection.ranges[Symbol.iterator](),aa;!(c=(aa=V.next()).done);c=!0)e()}catch(da){a=!0,d=da}finally{try{if(!c&&null!=V["return"])V["return"]()}finally{if(a)throw d;}}return K.length?[g,{changes:K}]:g})};D.keymap=function(g,c){return[Bd,ad.of(cb(g,c))]};D.logException=Z;D.multipleSelections=function(){return[ya.EditorState.allowMultipleSelections.of(!0),Cd]};D.runScopeHandlers=
function(g,c,a){return ob(g.state.facet(ad),c,g,a)};D.themeClass=N;Object.defineProperty(D,"Range",{enumerable:!0,get:function(){return Cb.Range}});D.__test=D.WidgetType=D.ViewUpdate=D.ViewPlugin=D.PluginField=D.EditorView=D.Direction=D.Decoration=D.BlockType=D.BlockInfo=D.BidiSpan=void 0;var ya=Ra(2),Lb=Ra(3),Cb=Ra(4),lb=Ra(0),Ib=Ra(5),G=function(g,c){var a=Array.isArray(g)?g:void 0;if(!a)if(Symbol.iterator in Object(g)||"[object Arguments]"===Object.prototype.toString.call(g)){a=[];var d=!0,e=!1,
h=void 0;try{for(var k=g[Symbol.iterator](),x;!(d=(x=k.next()).done)&&(a.push(x.value),!c||a.length!==c);d=!0);}catch(K){e=!0,h=K}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;}}}else a=void 0;if(!(g=a))throw new TypeError("Invalid attempt to destructure non-iterable instance");return g}("undefined"!=typeof navigator?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}],2),Y=G[0],ma=G[1],ia=/Edge\/(\d+)/.exec(Y.userAgent),na=/MSIE \d/.test(Y.userAgent),
pa=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Y.userAgent),Ja=!!(na||pa||ia),db=!Ja&&/gecko\/(\d+)/i.test(Y.userAgent),eb=!Ja&&/Chrome\/(\d+)/.exec(Y.userAgent),fb="webkitFontSmoothing"in ma.documentElement.style,Za={mac:/Mac/.test(Y.platform),ie:Ja,ie_version:na?ma.documentMode||6:pa?+pa[1]:ia?+ia[1]:0,gecko:db,gecko_version:db?+(/Firefox\/(\d+)/.exec(Y.userAgent)||[0,0])[1]:0,chrome:!!eb,chrome_version:eb?+eb[1]:0,ios:!Ja&&/AppleWebKit/.test(Y.userAgent)&&/Mobile\/\w+/.test(Y.userAgent),android:/Android\b/.test(Y.userAgent),
webkit:fb,safari:/Apple Computer/.test(Y.vendor),webkit_version:fb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=ma.documentElement.style.tabSize?"tab-size":"-moz-tab-size"},Rb=function(){function g(){qa(this,g);this.anchorNode=null;this.anchorOffset=0;this.focusNode=null;this.focusOffset=0}ja(g,[{key:"eq",value:function(c){return this.anchorNode==c.anchorNode&&this.anchorOffset==c.anchorOffset&&this.focusNode==c.focusNode&&this.focusOffset==c.focusOffset}},{key:"set",
value:function(c){this.anchorNode=c.anchorNode;this.anchorOffset=c.anchorOffset;this.focusNode=c.focusNode;this.focusOffset=c.focusOffset}}]);return g}(),Fb=null,bc=function(){function g(c,a){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;qa(this,g);this.node=c;this.offset=a;this.precise=d}ja(g,null,[{key:"before",value:function(c,a){return new g(c.parentNode,I(c),a)}},{key:"after",value:function(c,a){return new g(c.parentNode,I(c)+1,a)}}]);return g}(),bd=[],Qb=function(){function g(){qa(this,
g);this.dom=this.parent=null;this.dirty=2}ja(g,[{key:"posBefore",value:function(c){var a=this.posAtStart,d=!0,e=!1,h=void 0;try{for(var k=this.children[Symbol.iterator](),x;!(d=(x=k.next()).done);d=!0){var K=x.value;if(K==c)return a;a+=K.length+K.breakAfter}}catch(V){e=!0,h=V}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;}}throw new RangeError("Invalid child in posBefore");}},{key:"posAfter",value:function(c){return this.posBefore(c)+c.length}},{key:"coordsAt",value:function(c,
a){return null}},{key:"sync",value:function(c){if(this.dirty&2){var a=this.dom,d=null,e=!0,h=!1,k=void 0;try{for(var x=this.children[Symbol.iterator](),K;!(e=(K=x.next()).done);e=!0){var V=K.value;if(V.dirty){var aa=d?d.nextSibling:a.firstChild;!aa||V.dom||g.get(aa)||V.reuseDOM(aa);V.sync(c);V.dirty=0}c&&c.node==a&&d!=V.dom&&(c.written=!0);var da=a,ra=V.dom,Va=d?d.nextSibling:da.firstChild;if(ra.parentNode==da)for(;Va!=ra;)Va=O(Va);else da.insertBefore(ra,Va);d=V.dom}}catch(Qa){h=!0,k=Qa}finally{try{if(!e&&
null!=x["return"])x["return"]()}finally{if(h)throw k;}}(x=d?d.nextSibling:a.firstChild)&&c&&c.node==a&&(c.written=!0);for(;x;)x=O(x)}else if(this.dirty&1){x=!0;K=!1;V=void 0;try{for(a=this.children[Symbol.iterator]();!(x=(d=a.next()).done);x=!0)e=d.value,e.dirty&&(e.sync(c),e.dirty=0)}catch(Qa){K=!0,V=Qa}finally{try{if(!x&&null!=a["return"])a["return"]()}finally{if(K)throw V;}}}}},{key:"reuseDOM",value:function(c){return!1}},{key:"localPosFromDOM",value:function(c,a){if(c==this.dom)c=this.dom.childNodes[a];
else{for(a=0==q(c)?0:0==a?-1:1;;){var d=c.parentNode;if(d==this.dom)break;0==a&&d.firstChild!=d.lastChild&&(a=c==d.firstChild?-1:1);c=d}c=0>a?c:c.nextSibling}if(c==this.dom.firstChild)return 0;for(;c&&!g.get(c);)c=c.nextSibling;if(!c)return this.length;for(d=a=0;;a++){var e=this.children[a];if(e.dom==c)return d;d+=e.length+e.breakAfter}}},{key:"domBoundsAround",value:function(c,a){for(var d=-1,e=-1,h=-1,k=-1,x=0,K=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;x<this.children.length;x++){var V=
this.children[x],aa=K+V.length;if(K<c&&aa>a)return V.domBoundsAround(c,a,K);aa>=c&&-1==d&&(d=x,e=K);if(aa>=a&&-1==h){h=x;k=aa;break}K=aa+V.breakAfter}return{from:e,to:k,startDOM:(d?this.children[d-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:h<this.children.length-1?this.children[h+1].dom:null}}},{key:"markDirty",value:function(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;this.dirty&2||(this.dirty|=2,this.markParentsDirty(c))}},{key:"markParentsDirty",value:function(c){for(var a=
this.parent;a;a=a.parent){c&&(a.dirty|=2);if(a.dirty&1)break;a.dirty|=1;c=!1}}},{key:"setParent",value:function(c){this.parent!=c&&(this.parent=c,this.dirty&&this.markParentsDirty(!0))}},{key:"setDOM",value:function(c){this.dom=c;c.cmView=this}},{key:"replaceChildren",value:function(c,a){var d,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:bd;this.markDirty();for(var h=c;h<a;h++)this.children[h].parent=null;(d=this.children).splice.apply(d,[c,a-c].concat(Ia(e)));for(d=0;d<e.length;d++)e[d].setParent(this)}},
{key:"ignoreMutation",value:function(c){return!1}},{key:"ignoreEvent",value:function(c){return!1}},{key:"childCursor",value:function(){return new Nc(this.children,0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.length,this.children.length)}},{key:"childPos",value:function(c){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.childCursor().findPos(c,a)}},{key:"toString",value:function(){var c=this.constructor.name.replace("View","");return c+(this.children.length?
"("+this.children.join()+")":this.length?"["+("Text"==c?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}},{key:"editorView",get:function(){if(!this.parent)throw Error("Accessing view in orphan content view");return this.parent.editorView}},{key:"overrideDOMText",get:function(){return null}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBefore(this):0}},{key:"posAtEnd",get:function(){return this.posAtStart+this.length}},{key:"rootView",get:function(){for(var c=this;;){var a=
c.parent;if(!a)return c;c=a}}}],[{key:"get",value:function(c){return c.cmView}}]);return g}();Qb.prototype.breakAfter=0;var Nc=function(){function g(c,a,d){qa(this,g);this.children=c;this.pos=a;this.i=d;this.off=0}ja(g,[{key:"findPos",value:function(c){for(var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;;){if(c>this.pos||c==this.pos&&(0<a||0==this.i||this.children[this.i-1].breakAfter))return this.off=c-this.pos,this;var d=this.children[--this.i];this.pos-=d.length+d.breakAfter}}}]);
return g}(),Jb=[],Bc=function(g){function c(){qa(this,c);return Da(this,wa(c).apply(this,arguments))}xa(c,g);ja(c,[{key:"match",value:function(a){return!1}},{key:"getSide",value:function(){return 0}},{key:"children",get:function(){return Jb}}]);return c}(Qb),qc=function(g){function c(a,d,e,h){qa(this,c);var k=Da(this,wa(c).call(this));k.text=a;k.tagName=d;k.attrs=h;k.textDOM=null;k["class"]=e;return k}xa(c,g);ja(c,[{key:"createDOM",value:function(a){var d=this.tagName||(this.attrs||this["class"]?
"span":null);this.textDOM=a||document.createTextNode(this.text);if(d){a=document.createElement(d);a.appendChild(this.textDOM);this["class"]&&(a.className=this["class"]);if(this.attrs)for(var e in this.attrs)a.setAttribute(e,this.attrs[e]);this.setDOM(a)}else this.setDOM(this.textDOM)}},{key:"sync",value:function(a){this.dom||this.createDOM();if(this.textDOM.nodeValue!=this.text&&(a&&a.node==this.textDOM&&(a.written=!0),this.textDOM.nodeValue=this.text,a=this.dom,this.textDOM!=a&&(this.dom.firstChild!=
this.textDOM||a.lastChild!=this.textDOM))){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(this.textDOM)}}},{key:"reuseDOM",value:function(a){if(3!=a.nodeType)return!1;this.createDOM(a);return!0}},{key:"merge",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(e&&(!(e instanceof c&&e.tagName==this.tagName&&e["class"]==this["class"]&&n(e.attrs,this.attrs))||256<this.length-(d-a)+e.length))return!1;
this.text=this.text.slice(0,a)+(e?e.text:"")+this.text.slice(d);this.markDirty();return!0}},{key:"slice",value:function(a){return new c(this.text.slice(a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length),this.tagName,this["class"],this.attrs)}},{key:"localPosFromDOM",value:function(a,d){return a==this.textDOM?d:d?this.text.length:0}},{key:"domAtPos",value:function(a){return new bc(this.textDOM,a)}},{key:"domBoundsAround",value:function(a,d,e){return{from:e,to:e+this.length,startDOM:this.dom,
endDOM:this.dom.nextSibling}}},{key:"coordsAt",value:function(a,d){return u(this.textDOM,a,d,this.length)}},{key:"length",get:function(){return this.text.length}}]);return c}(Bc),Cc=function(g){function c(a,d,e,h){qa(this,c);var k=Da(this,wa(c).call(this));k.widget=a;k.length=d;k.side=e;k.open=h;return k}xa(c,g);ja(c,[{key:"slice",value:function(a){return c.create(this.widget,(1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length)-a,this.side)}},{key:"sync",value:function(){this.dom&&
this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"getSide",value:function(){return this.side}},{key:"merge",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(e){if(!(e instanceof c&&e.open)||0<a&&!(e.open&1)||d<this.length&&!(e.open&2))return!1;if(!this.widget.compare(e.widget))throw Error("Trying to merge incompatible widgets");
}this.length=a+(e?e.length:0)+(this.length-d);return!0}},{key:"match",value:function(a){return a.length==this.length&&a instanceof c&&a.side==this.side&&this.widget.constructor==a.widget.constructor?(this.widget.eq(a.widget.value)||this.markDirty(!0),this.widget=a.widget,!0):!1}},{key:"ignoreMutation",value:function(){return!0}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"domAtPos",value:function(a){return 0==a?bc.before(this.dom):bc.after(this.dom,a==this.length)}},
{key:"domBoundsAround",value:function(){return null}},{key:"coordsAt",value:function(a,d){d=this.dom.getClientRects();for(var e,h=0<a?d.length-1:0;!(e=d[h],0<a?0==h:h==d.length-1||e.top<e.bottom);h+=0<a?-1:1);return e}},{key:"overrideDOMText",get:function(){if(0==this.length)return lb.Text.empty;for(var a=this;a.parent;)a=a.parent;a=(a=a.editorView)&&a.state.doc;var d=this.posAtStart;return a?a.slice(d,d+this.length):lb.Text.empty}}],[{key:"create",value:function(a,d,e){return new (a.customView||
c)(a,d,e,3<arguments.length&&void 0!==arguments[3]?arguments[3]:0)}}]);return c}(Bc),cd=function(g){function c(){qa(this,c);return Da(this,wa(c).apply(this,arguments))}xa(c,g);ja(c,[{key:"domAtPos",value:function(a){return new bc(this.widget.value.text,a)}},{key:"sync",value:function(){this.dom||this.setDOM(this.widget.toDOM(this.editorView))}},{key:"localPosFromDOM",value:function(a,d){return d?3==a.nodeType?Math.min(d,this.length):this.length:0}},{key:"ignoreMutation",value:function(){return!1}},
{key:"coordsAt",value:function(a,d){return u(this.widget.value.text,a,d,this.length)}},{key:"overrideDOMText",get:function(){return null}}]);return c}(Cc),xb=function(){function g(c){qa(this,g);this.value=c}ja(g,[{key:"eq",value:function(c){return this.value===c}},{key:"updateDOM",value:function(c){return!1}},{key:"compare",value:function(c){return this==c||this.constructor==c.constructor&&this.eq(c.value)}},{key:"ignoreEvent",value:function(c){return!0}},{key:"estimatedHeight",get:function(){return-1}},
{key:"customView",get:function(){return null}}]);return g}();D.WidgetType=xb;var Mb;D.BlockType=Mb;(function(g){g[g.Text=0]="Text";g[g.WidgetBefore=1]="WidgetBefore";g[g.WidgetAfter=2]="WidgetAfter";g[g.WidgetRange=3]="WidgetRange"})(Mb||(D.BlockType=Mb={}));var pb=function(g){function c(a,d,e,h){qa(this,c);var k=Da(this,wa(c).call(this));k.startSide=a;k.endSide=d;k.widget=e;k.spec=h;return k}xa(c,g);ja(c,[{key:"hasHeight",value:function(){return this.widget?-1<this.widget.estimatedHeight:!1}},{key:"point",
get:function(){return!1}},{key:"heightRelevant",get:function(){return!1}}],[{key:"mark",value:function(a){return new rc(a)}},{key:"widget",value:function(a){var d=a.side||0;a.block&&(d+=(2E8+1)*(0<d?1:-1));return new Ec(a,d,d,!!a.block,a.widget||null,!1)}},{key:"replace",value:function(a){var d=!!a.block,e=p(a),h=e.start;e=e.end;return new Ec(a,d?-2E8*(h?2:1):1E8*(h?-1:1),d?2E8*(e?2:1):1E8*(e?1:-1),d,a.widget||null,!0)}},{key:"line",value:function(a){return new lc(a)}},{key:"set",value:function(a){return Cb.RangeSet.of(a,
1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1)}}]);return c}(Cb.RangeValue);D.Decoration=pb;pb.none=Cb.RangeSet.empty;var rc=function(g){function c(a){qa(this,c);var d=p(a),e=d.start;d=d.end;return Da(this,wa(c).call(this,1E8*(e?-1:1),1E8*(d?1:-1),null,a))}xa(c,g);ja(c,[{key:"eq",value:function(a){return this==a||a instanceof c&&this.spec.tagName==a.spec.tagName&&this.spec["class"]==a.spec["class"]&&n(this.spec.attributes||null,a.spec.attributes||null)}},{key:"range",value:function(a){var d=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:a;if(a>=d)throw new RangeError("Mark decorations may not be empty");return Na(wa(c.prototype),"range",this).call(this,a,d)}}]);return c}(pb),lc=function(g){function c(a){qa(this,c);return Da(this,wa(c).call(this,-1E8,-1E8,null,a))}xa(c,g);ja(c,[{key:"eq",value:function(a){return a instanceof c&&n(this.spec.attributes,a.spec.attributes)}},{key:"range",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a;if(d!=a)throw new RangeError("Line decoration ranges must be zero-length");
return Na(wa(c.prototype),"range",this).call(this,a,d)}},{key:"point",get:function(){return!0}}]);return c}(pb);lc.prototype.mapMode=ya.MapMode.TrackBefore;var Ec=function(g){function c(a,d,e,h,k,x){qa(this,c);a=Da(this,wa(c).call(this,d,e,k,a));a.block=h;a.isReplace=x;a.mapMode=h?0>d?ya.MapMode.TrackBefore:ya.MapMode.TrackAfter:ya.MapMode.TrackDel;return a}xa(c,g);ja(c,[{key:"eq",value:function(a){var d;if(d=a instanceof c){d=this.widget;var e=a.widget;d=d==e||!!(d&&e&&d.compare(e))}return d&&this.block==
a.block&&this.startSide==a.startSide&&this.endSide==a.endSide}},{key:"range",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a;if(this.isReplace&&(a>d||a==d&&0<this.startSide&&0>this.endSide))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&d!=a)throw new RangeError("Widget decorations can only have zero-length ranges");return Na(wa(c.prototype),"range",this).call(this,a,d)}},{key:"point",get:function(){return!0}},{key:"type",get:function(){return this.startSide<
this.endSide?Mb.WidgetRange:0>this.startSide?Mb.WidgetBefore:Mb.WidgetAfter}},{key:"heightRelevant",get:function(){return this.block||!!this.widget&&5<=this.widget.estimatedHeight}}]);return c}(pb),mc=ya.Facet.define({combine:function(g){return g.join(" ")}}),fc=ya.Facet.define({combine:function(g){return-1<g.indexOf(!0)}}),gc=Lb.StyleModule.newName(),uc=Lb.StyleModule.newName(),Jc=Lb.StyleModule.newName(),dd=w(gc,{wrap:{position:"relative !important",boxSizing:"border-box","\x26.cm-focused":{outline_fallback:"1px dotted #212121",
outline:"5px auto -webkit-focus-ring-color"},display:"flex !important",flexDirection:"column"},scroller:{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto"},content:{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",boxSizing:"border-box",padding:"4px 0",outline:"none"},"content@light":{caretColor:"black"},"content@dark":{caretColor:"white"},line:{display:"block",padding:"0 2px 0 4px"},button:{verticalAlign:"middle",
color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"3px"},"button@light":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","\x26:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"button@dark":{backgroundImage:"linear-gradient(#555, #111)",border:"1px solid #888","\x26:active":{backgroundImage:"linear-gradient(#111, #333)"}},textfield:{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"textfield@light":{backgroundColor:"white"},
"textfield@dark":{border:"1px solid #555",backgroundColor:"inherit"},secondarySelection:{backgroundColor_fallback:"#3297FD",color_fallback:"white !important",backgroundColor:"Highlight",color:"HighlightText !important"},secondaryCursor:{display:"inline-block",verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em"},"secondaryCursor@light":{borderLeft:"1.4px solid #555"},"secondaryCursor@dark":{borderLeft:"1.4px solid #ddd"}}),Fc=N("line"),ib=function(g){function c(){qa(this,c);var a=
Da(this,wa(c).apply(this,arguments));a.children=[];a.length=0;a.prevAttrs=void 0;a.attrs=null;a.breakAfter=0;return a}xa(c,g);ja(c,[{key:"merge",value:function(a,d,e,h){if(e){if(!(e instanceof c))return!1;this.dom||e.transferDOM(this)}h&&this.setDeco(e?e.attrs:null);e=e?e.children:[];var k=this.childCursor(),x=k.findPos(d,1);h=x.i;x=x.off;var K=k.findPos(a,-1);k=K.i;K=K.off;a-=d;d=!0;var V=!1,aa=void 0;try{for(var da=e[Symbol.iterator](),ra;!(d=(ra=da.next()).done);d=!0)a+=ra.value.length}catch(Va){V=
!0,aa=Va}finally{try{if(!d&&null!=da["return"])da["return"]()}finally{if(V)throw aa;}}this.length+=a;if(k==h&&K){da=this.children[k];if(1==e.length&&da.merge(K,x,e[0]))return!0;if(0==e.length)return da.merge(K,x,null),!0;da=da.slice(x);da.merge(0,0,e[e.length-1])?e[e.length-1]=da:e.push(da);h++;x=0}x?(da=this.children[h],e.length&&da.merge(0,x,e[e.length-1])?e.pop():da.merge(0,x,null)):h<this.children.length&&e.length&&this.children[h].merge(0,0,e[e.length-1])&&e.pop();K?(da=this.children[k],e.length&&
da.merge(K,void 0,e[0])?e.shift():da.merge(K,void 0,null),k++):k&&e.length&&this.children[k-1].merge(this.children[k-1].length,void 0,e[0])&&e.shift();for(;k<h&&e.length&&this.children[h-1].match(e[e.length-1]);)e.pop(),h--;for(;k<h&&e.length&&this.children[k].match(e[0]);)e.shift(),k++;(e.length||k!=h)&&this.replaceChildren(k,h,e);return!0}},{key:"split",value:function(a){var d=new c;d.breakAfter=this.breakAfter;if(0==this.length)return d;var e=this.childPos(a),h=e.i;if(e=e.off)d.append(this.children[h].slice(e)),
this.children[h].merge(e,void 0,null),h++;for(e=h;e<this.children.length;e++)d.append(this.children[e]);for(;0<h&&0==this.children[h-1].length;)this.children[h-1].parent=null,h--;this.children.length=h;this.markDirty();this.length=a;return d}},{key:"transferDOM",value:function(a){this.dom&&(a.setDOM(this.dom),a.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}},{key:"setDeco",value:function(a){n(this.attrs,a)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),
this.attrs=a)}},{key:"append",value:function(a){this.children.push(a);a.setParent(this);this.length+=a.length}},{key:"addLineDeco",value:function(a){if(a=a.spec.attributes)this.attrs=A(a,this.attrs||{})}},{key:"domAtPos",value:function(a){for(var d=0,e=0;d<this.children.length;d++){var h=this.children[d],k=e+h.length;if(!(k==e&&0>=h.getSide())){if(a>e&&a<k&&h.dom.parentNode==this.dom)return h.domAtPos(a-e);if(a<=e)break;e=k}}for(;0<d;d--)if(a=this.children[d-1].dom,a.parentNode==this.dom)return bc.after(a);
return new bc(this.dom,0)}},{key:"sync",value:function(a){this.dom||(this.setDOM(document.createElement("div")),this.dom.className=Fc,this.prevAttrs=this.attrs?null:void 0);void 0!==this.prevAttrs&&(y(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add(Fc),this.prevAttrs=void 0);Na(wa(c.prototype),"sync",this).call(this,a);a=this.dom.lastChild;a&&("BR"==a.nodeName||Qb.get(a)instanceof qc)||(a=document.createElement("BR"),a.cmIgnore=!0,this.dom.appendChild(a))}},{key:"measureTextSize",value:function(){if(0==
this.children.length||20<this.length)return null;var a=0,d=!0,e=!1,h=void 0;try{for(var k=this.children[Symbol.iterator](),x;!(d=(x=k.next()).done);d=!0){var K=x.value;if(!(K instanceof qc))return null;var V=ba(K.dom);if(1!=V.length)return null;a+=V[0].width}}catch(aa){e=!0,h=aa}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;}}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:a/this.length}}},{key:"coordsAt",value:function(a,d){for(var e=0,h=0;h<this.children.length;h++){var k=
this.children[h],x=e+k.length;if(x!=e&&(0>=d||x==this.length?x>=a:x>a))return k.coordsAt(a-e,d);e=x}return this.dom.lastChild.getBoundingClientRect()}},{key:"match",value:function(a){return!1}},{key:"type",get:function(){return Mb.Text}}],[{key:"find",value:function(a,d){for(var e=0,h=0;;e++){var k=a.children[e];h+=k.length;if(h>=d){if(k instanceof c)return k;if(k.length)return null}h+=k.breakAfter}}}]);return c}(Qb),Gc=[],Zb=function(g){function c(a,d,e){var h=3<arguments.length&&void 0!==arguments[3]?
arguments[3]:0;qa(this,c);var k=Da(this,wa(c).call(this));k.widget=a;k.length=d;k.type=e;k.open=h;k.breakAfter=0;return k}xa(c,g);ja(c,[{key:"merge",value:function(a,d,e){if(!(e instanceof c&&e.open)||0<a&&!(e.open&1)||d<this.length&&!(e.open&2))return!1;if(!this.widget.compare(e.widget))throw Error("Trying to merge an open widget with an incompatible node");this.length=a+e.length+(this.length-d);return!0}},{key:"domAtPos",value:function(a){return 0==a?bc.before(this.dom):bc.after(this.dom,a==this.length)}},
{key:"split",value:function(a){var d=this.length-a;this.length=a;return new c(this.widget,d,this.type)}},{key:"sync",value:function(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"domBoundsAround",value:function(){return null}},{key:"match",value:function(a){return a instanceof c&&a.type==this.type&&a.widget.constructor==this.widget.constructor?(a.widget.eq(this.widget.value)||this.markDirty(!0),this.widget=a.widget,
this.length=a.length,this.breakAfter=a.breakAfter,!0):!1}},{key:"children",get:function(){return Gc}},{key:"overrideDOMText",get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ya.Text.empty}}]);return c}(Qb),xc=function(){function g(c,a,d){qa(this,g);this.doc=c;this.pos=a;this.end=d;this.content=[];this.curLine=null;this.breakAtStart=0;this.text="";this.textOff=0;this.cursor=c.iter();this.skip=a}ja(g,[{key:"posCovered",value:function(){if(0==this.content.length)return!this.breakAtStart&&
this.doc.lineAt(this.pos).from!=this.pos;var c=this.content[this.content.length-1];return!c.breakAfter&&!(c instanceof Zb&&c.type==Mb.WidgetBefore)}},{key:"getLine",value:function(){this.curLine||this.content.push(this.curLine=new ib);return this.curLine}},{key:"addWidget",value:function(c){this.curLine=null;this.content.push(c)}},{key:"finish",value:function(){this.posCovered()||this.getLine()}},{key:"buildText",value:function(c,a,d,e,h){for(;0<c;){if(this.textOff==this.text.length){var k=this.cursor.next(this.skip);
h=k.value;var x=k.lineBreak;k=k.done;this.skip=0;if(k)throw Error("Ran out of text content when drawing inline views");if(x){this.posCovered()||this.getLine();this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1;this.curLine=null;c--;continue}else this.text=h,this.textOff=0}h=Math.min(this.text.length-this.textOff,c);this.getLine().append(new qc(this.text.slice(this.textOff,this.textOff+h),a,d,e));c-=h;this.textOff+=h}}},{key:"span",value:function(c,a,d){var e=
null,h=null,k=null,x=!0,K=!1,V=void 0;try{for(var aa=d[Symbol.iterator](),da;!(x=(da=aa.next()).done);x=!0){var ra=da.value.spec;ra.tagName&&(e=ra.tagName);ra["class"]&&(h=h?h+" "+ra["class"]:ra["class"]);if(ra.attributes)for(var Va in ra.attributes){var Qa=ra.attributes[Va];null!=Qa&&("class"==Va?h=h?h+" "+Qa:Qa:(k||(k={}),"style"==Va&&k.style&&(Qa=k.style+";"+Qa),k[Va]=Qa))}}}catch(jb){K=!0,V=jb}finally{try{if(!x&&null!=aa["return"])aa["return"]()}finally{if(K)throw V;}}this.buildText(a-c,e,h,k,
d);this.pos=a}},{key:"point",value:function(c,a,d,e,h){e=(e?1:0)|(h?2:0);c=a-c;d instanceof Ec?d.block?(h=d.type,h!=Mb.WidgetAfter||this.posCovered()||this.getLine(),this.addWidget(new Zb(d.widget||new Hc("div"),c,h,e))):this.getLine().append(Cc.create(d.widget||new Hc("span"),c,d.startSide,e)):this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(d);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=
a)}}],[{key:"build",value:function(c,a,d,e){c=new g(c,a,d);Cb.RangeSet.spans(e,a,d,c);c.finish();return c}}]);return g}(),Hc=function(g){function c(){qa(this,c);return Da(this,wa(c).apply(this,arguments))}xa(c,g);ja(c,[{key:"toDOM",value:function(){return document.createElement(this.value)}},{key:"updateDOM",value:function(a){return a.nodeName.toLowerCase()==this.value}}]);return c}(xb),Xb;D.Direction=Xb;(function(g){g[g.LTR=0]="LTR";g[g.RTL=1]="RTL"})(Xb||(D.Direction=Xb={}));var zc=Xb.LTR,ed=Xb.RTL,
Rc=T("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Sc=T("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),
Qc=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,hc=function(){function g(c,a,d){qa(this,g);this.from=c;this.to=a;this.level=d}ja(g,[{key:"side",value:function(c,a){return this.dir==a==c?this.to:this.from}},{key:"dir",get:function(){return this.level%2?ed:zc}}],[{key:"find",value:function(c,a,d,e){for(var h=-1,k=0;k<c.length;k++){var x=c[k];if(x.from<=a&&x.to>=a){if(x.level==d)return k;if(0>h||(0!=e?0>e?x.from<a:x.to>a:c[h].level>x.level))h=k}}if(0>h)throw new RangeError("Index out of range");return h}}]);
return g}();D.BidiSpan=hc;var Gb=[],Ac="",Ic=["pre-wrap","normal","pre-line"],Oc=function(){function g(){qa(this,g);this.doc=lb.Text.empty;this.lineWrapping=!1;this.direction=Xb.LTR;this.heightSamples={};this.lineHeight=14;this.charWidth=7;this.lineLength=30;this.heightChanged=!1}ja(g,[{key:"heightForGap",value:function(c,a){var d=this.doc.lineAt(a).number-this.doc.lineAt(c).number+1;this.lineWrapping&&(d+=Math.ceil((a-c-d*this.lineLength*.5)/this.lineLength));return this.lineHeight*d}},{key:"heightForLine",
value:function(c){return this.lineWrapping?(1+Math.max(0,Math.ceil((c-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}},{key:"setDoc",value:function(c){this.doc=c;return this}},{key:"mustRefresh",value:function(c,a,d){for(var e=!1,h=0;h<c.length;h++){var k=c[h];0>k?h++:this.heightSamples[Math.floor(10*k)]||(e=!0,this.heightSamples[Math.floor(10*k)]=!0)}return e||-1<Ic.indexOf(a)!=this.lineWrapping||this.direction!=d}},{key:"refresh",value:function(c,a,d,e,h,k){var x=-1<Ic.indexOf(c);
c=Math.round(d)!=Math.round(this.lineHeight)||this.lineWrapping!=x||this.direction!=a;this.lineWrapping=x;this.direction=a;this.lineHeight=d;this.charWidth=e;this.lineLength=h;if(c)for(this.heightSamples={},a=0;a<k.length;a++)d=k[a],0>d?a++:this.heightSamples[Math.floor(10*d)]=!0;return c}}]);return g}(),sc=function(){function g(c,a){qa(this,g);this.from=c;this.heights=a;this.index=0}ja(g,[{key:"more",get:function(){return this.index<this.heights.length}}]);return g}(),pc=function(){function g(c,
a,d,e,h){qa(this,g);this.from=c;this.length=a;this.top=d;this.height=e;this.type=h}ja(g,[{key:"join",value:function(c){var a=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(c.type)?c.type:[c]);return new g(this.from,this.length+c.length,this.top,this.height+c.height,a)}},{key:"to",get:function(){return this.from+this.length}},{key:"bottom",get:function(){return this.top+this.height}}]);return g}();D.BlockInfo=pc;var b;(function(g){g[g.ByPos=0]="ByPos";g[g.ByHeight=1]="ByHeight";g[g.ByPosNoHeight=
2]="ByPosNoHeight"})(b||(b={}));var f=function(){function g(c,a){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2;qa(this,g);this.length=c;this.height=a;this.flags=d}ja(g,[{key:"setHeight",value:function(c,a){this.height!=a&&(1E-4<Math.abs(this.height-a)&&(c.heightChanged=!0),this.height=a)}},{key:"replace",value:function(c,a,d){return g.of(d)}},{key:"decomposeLeft",value:function(c,a){a.push(this)}},{key:"decomposeRight",value:function(c,a){a.push(this)}},{key:"applyChanges",value:function(c,
a,d,e){for(var h=this,k=e.length-1;0<=k;k--){var x=e[k],K=x.fromA,V=x.toA,aa=x.fromB;x=x.toB;var da=h.lineAt(K,b.ByPosNoHeight,a,0,0),ra=da.to>=V?da:h.lineAt(V,b.ByPosNoHeight,a,0,0);x+=ra.to-V;for(V=ra.to;0<k&&da.from<=e[k-1].toA;)K=e[k-1].fromA,aa=e[k-1].fromB,k--,K<da.from&&(da=h.lineAt(K,b.ByPosNoHeight,a,0,0));aa+=da.from-K;K=da.from;aa=J.build(d,c,aa,x);h=h.replace(K,V,aa)}return h.updateHeight(d,0)}},{key:"outdated",get:function(){return 0<(this.flags&2)},set:function(c){this.flags=(c?2:0)|
this.flags&-3}}],[{key:"empty",value:function(){return new m(0,0)}},{key:"of",value:function(c){if(1==c.length)return c[0];for(var a=0,d=c.length,e=0,h=0;;)if(a==d)if(e>2*h){var k=c[a-1];k["break"]?c.splice(--a,1,k.left,null,k.right):c.splice(--a,1,k.left,k.right);d+=1+k["break"];e-=k.size}else if(h>2*e)k=c[d],k["break"]?c.splice(d,1,k.left,null,k.right):c.splice(d,1,k.left,k.right),d+=2+k["break"],h-=k.size;else break;else e<h?(k=c[a++])&&(e+=k.size):(k=c[--d])&&(h+=k.size);e=0;null==c[a-1]?(e=1,
a--):null==c[a]&&(e=1,d++);return new z(g.of(c.slice(0,a)),e,g.of(c.slice(d)))}}]);return g}();f.prototype.size=1;var l=function(g){function c(a,d,e){qa(this,c);a=Da(this,wa(c).call(this,a,d));a.type=e;return a}xa(c,g);ja(c,[{key:"blockAt",value:function(a,d,e,h){return new pc(h,this.length,e,this.height,this.type)}},{key:"lineAt",value:function(a,d,e,h,k){return this.blockAt(0,e,h,k)}},{key:"forEachLine",value:function(a,d,e,h,k,x){x(this.blockAt(0,e,h,k))}},{key:"updateHeight",value:function(a){var d=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=3<arguments.length?arguments[3]:void 0;e&&e.from<=d&&e.more&&this.setHeight(a,e.heights[e.index++]);this.outdated=!1;return this}},{key:"toString",value:function(){return"block(".concat(this.length,")")}}]);return c}(f),m=function(g){function c(a,d){qa(this,c);a=Da(this,wa(c).call(this,a,d,Mb.Text));a.collapsed=0;a.widgetHeight=0;return a}xa(c,g);ja(c,[{key:"replace",value:function(a,d,e){a=e[0];return 1==e.length&&(a instanceof c||a instanceof
v&&a.flags&4)&&10>Math.abs(this.length-a.length)?(a instanceof v?a=new c(a.length,this.height):a.height=this.height,this.outdated||(a.outdated=!1),a):f.of(e)}},{key:"updateHeight",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,h=3<arguments.length?arguments[3]:void 0;h&&h.from<=d&&h.more?this.setHeight(a,h.heights[h.index++]):(e||this.outdated)&&this.setHeight(a,Math.max(this.widgetHeight,a.heightForLine(this.length-
this.collapsed)));this.outdated=!1;return this}},{key:"toString",value:function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}]);return c}(l),v=function(g){function c(a){qa(this,c);return Da(this,wa(c).call(this,a,0))}xa(c,g);ja(c,[{key:"lines",value:function(a,d){var e=a.lineAt(d).number;a=a.lineAt(d+this.length).number;return{firstLine:e,lastLine:a,lineHeight:this.height/(a-e+1)}}},{key:"blockAt",value:function(a,
d,e,h){var k=this.lines(d,h),x=k.firstLine;h=k.lineHeight;a=Math.max(0,Math.min(k.lastLine-x,Math.floor((a-e)/h)));d=d.line(x+a);return new pc(d.from,d.length,e+h*a,h,Mb.Text)}},{key:"lineAt",value:function(a,d,e,h,k){if(d==b.ByHeight)return this.blockAt(a,e,h,k);if(d==b.ByPosNoHeight)return h=e.lineAt(a),a=h.from,new pc(a,h.to-a,0,0,Mb.Text);k=this.lines(e,k);d=k.firstLine;k=k.lineHeight;a=e.lineAt(a);return new pc(a.from,a.length,h+k*(a.number-d),k,Mb.Text)}},{key:"forEachLine",value:function(a,
d,e,h,k,x){k=this.lines(e,k);a=k.lastLine;d=k.lineHeight;for(k=k.firstLine;k<=a;k++){var K=e.line(k),V=K.from;K=K.to;if(V>K)break;K>=V&&x(new pc(V,K-V,h,h+=d,Mb.Text))}}},{key:"replace",value:function(a,d,e){d=this.length-d;if(0<d){var h=e[e.length-1];h instanceof c?e[e.length-1]=new c(h.length+d):e.push(null,new c(d-1))}0<a&&(d=e[0],d instanceof c?e[0]=new c(a+d.length):e.unshift(new c(a-1),null));return f.of(e)}},{key:"decomposeLeft",value:function(a,d){d.push(new c(a-1),null)}},{key:"decomposeRight",
value:function(a,d){d.push(null,new c(this.length-a-1))}},{key:"updateHeight",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,h=3<arguments.length?arguments[3]:void 0,k=d+this.length;if(h&&h.from<=d+this.length&&h.more){e=[];var x=Math.max(d,h.from);for(h.from>d&&e.push((new c(h.from-d-1)).updateHeight(a,d));x<=k&&h.more;){d=a.doc.lineAt(x).length;e.length&&e.push(null);var K=new m(d,h.heights[h.index++]);
K.outdated=!1;e.push(K);x+=d+1}x<=k&&e.push(null,(new c(k-x)).updateHeight(a,x));a.heightChanged=!0;return f.of(e)}if(e||this.outdated)this.setHeight(a,a.heightForGap(d,d+this.length)),this.outdated=!1;return this}},{key:"toString",value:function(){return"gap(".concat(this.length,")")}}]);return c}(f),z=function(g){function c(a,d,e){qa(this,c);d=Da(this,wa(c).call(this,a.length+d+e.length,a.height+e.height,d|(a.outdated||e.outdated?2:0)));d.left=a;d.right=e;d.size=a.size+e.size;return d}xa(c,g);ja(c,
[{key:"blockAt",value:function(a,d,e,h){var k=e+this.left.height;return a<k||0==this.right.height?this.left.blockAt(a,d,e,h):this.right.blockAt(a,d,k,h+this.left.length+this["break"])}},{key:"lineAt",value:function(a,d,e,h,k){var x=h+this.left.height,K=k+this.left.length+this["break"],V=d==b.ByHeight?a<x||0==this.right.height:a<K;a=V?this.left.lineAt(a,d,e,h,k):this.right.lineAt(a,d,e,x,K);if(this["break"]||(V?a.to<K:a.from>K))return a;d=d==b.ByPosNoHeight?b.ByPosNoHeight:b.ByPos;return V?a.join(this.right.lineAt(K,
d,e,x,K)):this.left.lineAt(K,d,e,h,k).join(a)}},{key:"forEachLine",value:function(a,d,e,h,k,x){var K=h+this.left.height,V=k+this.left.length+this["break"];if(this["break"])a<V&&this.left.forEachLine(a,d,e,h,k,x),d>=V&&this.right.forEachLine(a,d,e,K,V,x);else{var aa=this.lineAt(V,b.ByPos,e,h,k);a<aa.from&&this.left.forEachLine(a,aa.from-1,e,h,k,x);aa.to>=a&&aa.from<=d&&x(aa);d>aa.to&&this.right.forEachLine(aa.to+1,d,e,K,V,x)}}},{key:"replace",value:function(a,d,e){var h=this.left.length+this["break"];
if(d<h)return this.balanced(this.left.replace(a,d,e),this.right);if(a>this.left.length)return this.balanced(this.left,this.right.replace(a-h,d-h,e));h=[];0<a&&this.decomposeLeft(a,h);var k=h.length,x=!0,K=!1,V=void 0;try{for(var aa=e[Symbol.iterator](),da;!(x=(da=aa.next()).done);x=!0)h.push(da.value)}catch(ra){K=!0,V=ra}finally{try{if(!x&&null!=aa["return"])aa["return"]()}finally{if(K)throw V;}}0<a&&M(h,k-1);d<this.length&&(a=h.length,this.decomposeRight(d,h),M(h,a));return f.of(h)}},{key:"decomposeLeft",
value:function(a,d){var e=this.left.length;if(a<=e)return this.left.decomposeLeft(a,d);d.push(this.left);this["break"]&&(e++,a>=e&&d.push(null));a>e&&this.right.decomposeLeft(a-e,d)}},{key:"decomposeRight",value:function(a,d){var e=this.left.length,h=e+this["break"];if(a>=h)return this.right.decomposeRight(a-h,d);a<e&&this.left.decomposeRight(a,d);this["break"]&&a<h&&d.push(null);d.push(this.right)}},{key:"balanced",value:function(a,d){if(a.size>2*d.size||d.size>2*a.size)return f.of(this["break"]?
[a,null,d]:[a,d]);this.left=a;this.right=d;this.height=a.height+d.height;this.outdated=a.outdated||d.outdated;this.size=a.size+d.size;this.length=a.length+this["break"]+d.length;return this}},{key:"updateHeight",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,h=3<arguments.length?arguments[3]:void 0,k=this.left,x=this.right,K=d+k.length+this["break"],V=null;h&&h.from<=d+k.length&&h.more?V=k=k.updateHeight(a,
d,e,h):k.updateHeight(a,d,e);h&&h.from<=K+x.length&&h.more?V=x=x.updateHeight(a,K,e,h):x.updateHeight(a,K,e);if(V)return this.balanced(k,x);this.height=this.left.height+this.right.height;this.outdated=!1;return this}},{key:"toString",value:function(){return this.left+(this["break"]?" ":"-")+this.right}},{key:"break",get:function(){return this.flags&1}}]);return c}(f),J=function(){function g(c,a){qa(this,g);this.pos=c;this.oracle=a;this.nodes=[];this.lineEnd=this.lineStart=-1;this.covering=null;this.writtenTo=
c}ja(g,[{key:"span",value:function(c,a){if(-1<this.lineStart){c=Math.min(a,this.lineEnd);var d=this.nodes[this.nodes.length-1];d instanceof m?d.length+=c-this.pos:(c>this.pos||!this.isCovered)&&this.nodes.push(new m(c-this.pos,-1));this.writtenTo=c;a>c&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=a}},{key:"point",value:function(c,a,d){if(c<a||d.heightRelevant){var e=d.widget?Math.max(0,d.widget.estimatedHeight):0;c=a-c;d.block?this.addBlock(new l(c,e,d.type)):(c||5<=e)&&this.addLineDeco(e,
c)}else a>c&&this.span(c,a);-1<this.lineEnd&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}},{key:"enterLine",value:function(){if(!(-1<this.lineStart)){var c=this.oracle.doc.lineAt(this.pos),a=c.from;c=c.to;this.lineStart=a;this.lineEnd=c;this.writtenTo<a&&((this.writtenTo<a-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,a-1)),this.nodes.push(null));this.pos>a&&this.nodes.push(new m(this.pos-a,-1));this.writtenTo=this.pos}}},
{key:"blankContent",value:function(c,a){var d=new v(a-c);this.oracle.doc.lineAt(c).to==a&&(d.flags|=4);return d}},{key:"ensureLine",value:function(){this.enterLine();var c=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(c instanceof m)return c;c=new m(0,-1);this.nodes.push(c);return c}},{key:"addBlock",value:function(c){this.enterLine();c.type!=Mb.WidgetAfter||this.isCovered||this.ensureLine();this.nodes.push(c);this.writtenTo=this.pos+=c.length;c.type!=Mb.WidgetBefore&&(this.covering=c)}},
{key:"addLineDeco",value:function(c,a){var d=this.ensureLine();d.length+=a;d.collapsed+=a;d.widgetHeight=Math.max(d.widgetHeight,c);this.writtenTo=this.pos+=a}},{key:"finish",value:function(c){var a=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(-1<this.lineStart)||a instanceof m||this.isCovered?(this.writtenTo<this.pos||null==a)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new m(0,-1));a=!0;var d=!1,e=void 0;try{for(var h=this.nodes[Symbol.iterator](),
k;!(a=(k=h.next()).done);a=!0){var x=k.value;x instanceof m&&x.updateHeight(this.oracle,c);c+=x?x.length:1}}catch(K){d=!0,e=K}finally{try{if(!a&&null!=h["return"])h["return"]()}finally{if(d)throw e;}}return this.nodes}},{key:"isCovered",get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}},{key:"minPointSize",get:function(){return 0}}],[{key:"build",value:function(c,a,d,e){c=new g(d,c);Cb.RangeSet.spans(a,d,e,c);return c.finish(d)}}]);return g}(),R=function(){function g(){qa(this,
g);this.changes=[]}ja(g,[{key:"compareRange",value:function(){}},{key:"comparePoint",value:function(c,a,d,e){(c<a||d&&d.heightRelevant||e&&e.heightRelevant)&&t(c,a,this.changes)}},{key:"minPointSize",get:function(){return 0}}]);return g}(),ea=[],fa=ya.Facet.define(),Ha=ya.Facet.define(),Ga=ya.Facet.define(),Pa=ya.Facet.define(),Sa=ya.Facet.define(),Ya=ya.Facet.define(),nb=ya.Facet.define({combine:function(g){return g.length?g[0]:!0}}),mb=function(){function g(){qa(this,g)}ja(g,null,[{key:"define",
value:function(){return new g}}]);return g}();D.PluginField=mb;mb.scrollMargins=mb.define();var Ob=0,qb=ya.Facet.define(),$b=function(){function g(c,a,d){qa(this,g);this.id=c;this.create=a;this.fields=d;this.extension=qb.of(this)}ja(g,[{key:"provide",value:function(c,a){return new g(this.id,this.create,this.fields.concat({field:c,get:a}))}},{key:"decorations",value:function(c){return this.provide(Yb,c||function(a){return a.decorations})}},{key:"eventHandlers",value:function(c){return this.provide(Nb,
function(a){return{plugin:a,handlers:c}})}}],[{key:"define",value:function(c){return new g(Ob++,c,[])}},{key:"fromClass",value:function(c){return g.define(function(a){return new c(a)})}}]);return g}();D.ViewPlugin=$b;var Yb=mb.define(),Nb=mb.define(),Pb=function(){function g(c,a){qa(this,g);this.value=c;this.spec=a;this.updateFunc=this.value.update?this.value.update.bind(this.value):function(){}}ja(g,[{key:"takeField",value:function(c,a){var d=!0,e=!1,h=void 0;try{for(var k=this.spec.fields[Symbol.iterator](),
x;!(d=(x=k.next()).done);d=!0){var K=x.value,V=K.get;K.field==c&&a.push(V(this.value))}}catch(aa){e=!0,h=aa}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;}}}},{key:"update",value:function(c){try{return this.updateFunc(c),this}catch(a){Z(c.state,a,"CodeMirror plugin crashed");if(this.value.destroy)try{this.value.destroy()}catch(d){}return g.dummy}}},{key:"destroy",value:function(c){try{this.value.destroy&&this.value.destroy()}catch(a){Z(c.state,a,"CodeMirror plugin crashed")}}}],
[{key:"create",value:function(c,a){try{var d=c.create(a)}catch(e){return Z(a.state,e,"CodeMirror plugin crashed"),g.dummy}return new g(d,c)}}]);return g}();Pb.dummy=new Pb({},$b.define(function(){return{}}));var cc=ya.Facet.define({combine:function(g){return g.reduce(function(c,a){return A(a,c)},{})}}),Aa=ya.Facet.define({combine:function(g){return g.reduce(function(c,a){return A(a,c)},{})}}),Wa=ya.Facet.define(),rb=ya.Facet.define(),wb=function(){function g(c,a,d,e){qa(this,g);this.fromA=c;this.toA=
a;this.fromB=d;this.toB=e}ja(g,[{key:"join",value:function(c){return new g(Math.min(this.fromA,c.fromA),Math.max(this.toA,c.toA),Math.min(this.fromB,c.fromB),Math.max(this.toB,c.toB))}},{key:"addToSet",value:function(c){for(var a=c.length,d=this;0<a;a--){var e=c[a-1];if(!(e.fromA>d.toA)){if(e.toA<d.fromA)break;d=d.join(e);c.splice(a-1,1)}}c.splice(a,0,d);return c}}],[{key:"extendWithRanges",value:function(c,a){if(0==a.length)return c;for(var d=[],e=0,h=0,k=0,x=0;;e++){var K=e==c.length?null:c[e];
k-=x;for(var V=K?K.fromB:1E9;h<a.length&&a[h]<V;){var aa=a[h+1],da=Math.max(x,a[h]),ra=Math.min(V,aa);da<=ra&&(new g(da+k,ra+k,da,ra)).addToSet(d);if(aa>V)break;else h+=2}if(!K)return d;(new g(K.fromA,K.toA,K.fromB,K.toB)).addToSet(d);k=K.toA;x=K.toB}}}]);return g}(),tc=function(){function g(c,a){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ea;qa(this,g);this.view=c;this.state=a;this.transactions=d;this.flags=0;this.prevState=c.state;this.changes=ya.ChangeSet.empty(this.prevState.doc.length);
var e=!0,h=!1,k=void 0;try{for(var x=d[Symbol.iterator](),K;!(e=(K=x.next()).done);e=!0)this.changes=this.changes.compose(K.value.changes)}catch(aa){h=!0,k=aa}finally{try{if(!e&&null!=x["return"])x["return"]()}finally{if(h)throw k;}}var V=[];this.changes.iterChangedRanges(function(aa,da,ra,Va){return V.push(new wb(aa,da,ra,Va))});this.changedRanges=V;d=c.hasFocus;d!=c.inputState.notifiedFocused&&(c.inputState.notifiedFocused=d,1!=this.flags);this.docChanged&&(this.flags|=2)}ja(g,[{key:"viewportChanged",
get:function(){return 0<(this.flags&4)}},{key:"heightChanged",get:function(){return 0<(this.flags&2)}},{key:"focusChanged",get:function(){return 0<(this.flags&1)}},{key:"docChanged",get:function(){return this.transactions.some(function(c){return c.docChanged})}},{key:"selectionSet",get:function(){return this.transactions.some(function(c){return c.selection})}},{key:"empty",get:function(){return 0==this.flags&&0==this.transactions.length}}]);return g}();D.ViewUpdate=tc;var Pc=function(){function g(c,
a,d){qa(this,g);this.from=c;this.to=a;this.size=d}ja(g,[{key:"draw",value:function(c){return pb.replace({widget:new Dd({size:this.size,vertical:c})}).range(this.from,this.to)}}],[{key:"same",value:function(c,a){if(c.length!=a.length)return!1;for(var d=0;d<c.length;d++){var e=c[d],h=a[d];if(e.from!=h.from||e.to!=h.to||e.size!=h.size)return!1}return!0}}]);return g}(),Dd=function(g){function c(){qa(this,c);return Da(this,wa(c).apply(this,arguments))}xa(c,g);ja(c,[{key:"toDOM",value:function(){var a=
document.createElement("div");this.value.vertical?a.style.height=this.value.size+"px":(a.style.width=this.value.size+"px",a.style.height="2px",a.style.display="inline-block");return a}},{key:"eq",value:function(a){return this.value.size==a.size&&this.value.vertical==a.vertical}},{key:"estimatedHeight",get:function(){return this.value.vertical?this.value.size:-1}}]);return c}(xb),ld=function(){function g(c){qa(this,g);this.state=c;this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0};
this.paddingBottom=this.paddingTop=0;this.heightOracle=new Oc;this.heightMap=f.empty();this.scrollTo=null;this.printing=!1;this.visibleRanges=[];this.mustEnforceCursorAssoc=!1;this.heightMap=this.heightMap.applyChanges(c.facet(Wa),lb.Text.empty,this.heightOracle.setDoc(c.doc),[new wb(0,0,0,c.doc.length)]);this.viewport=this.getViewport(0,null);this.lineGaps=this.ensureLineGaps([]);this.lineGapDeco=pb.set(this.lineGaps.map(function(a){return a.draw(!1)}));this.computeVisibleRanges()}ja(g,[{key:"update",
value:function(c){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=this.state;this.state=c.state;var e=this.state.facet(Wa),h=wb.extendWithRanges(c.changedRanges,P(c.prevState.facet(Wa),e,c?c.changes:ya.ChangeSet.empty(this.state.doc.length))),k=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(e,d.doc,this.heightOracle.setDoc(this.state.doc),h);this.heightMap.height!=k&&(c.flags|=2);d=h.length?this.mapViewport(this.viewport,c.changes):this.viewport;if(a&&(a.head<
d.from||a.head>d.to)||!this.viewportIsAppropriate(d))d=this.getViewport(0,a);d.eq(this.viewport)||(this.viewport=d,c.flags|=4);if(this.lineGaps.length||15E3<this.viewport.to-this.viewport.from)c.flags|=this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,c.changes)));this.computeVisibleRanges();a&&(this.scrollTo=a);!this.mustEnforceCursorAssoc&&c.selectionSet&&c.view.lineWrapping&&c.state.selection.primary.empty&&c.state.selection.primary.assoc&&(this.mustEnforceCursorAssoc=!0)}},
{key:"measure",value:function(c,a){var d=c.dom,e="",h=Xb.LTR;if(!a){var k=window.getComputedStyle(d);e=k.whiteSpace;h="rtl"==k.direction?Xb.RTL:Xb.LTR;this.paddingTop=parseInt(k.paddingTop)||0;this.paddingBottom=parseInt(k.paddingBottom)||0}if(this.printing)k={top:-1E8,bottom:1E8,left:-1E8,right:1E8};else{k=this.paddingTop;var x=d.getBoundingClientRect(),K=Math.max(0,x.left),V=Math.min(innerWidth,x.right),aa=Math.max(0,x.top),da=Math.min(innerHeight,x.bottom);for(d=d.parentNode;d;)if(1==d.nodeType){if((d.scrollHeight>
d.clientHeight||d.scrollWidth>d.clientWidth)&&"visible"!=window.getComputedStyle(d).overflow){var ra=d.getBoundingClientRect();K=Math.max(K,ra.left);V=Math.min(V,ra.right);aa=Math.max(aa,ra.top);da=Math.min(da,ra.bottom)}d=d.parentNode}else if(11==d.nodeType)d=d.host;else break;k={left:K-x.left,right:V-x.left,top:aa-(x.top+k),bottom:da-(x.top+k)}}K=k;k=K.top-this.pixelViewport.top;x=K.bottom-this.pixelViewport.bottom;this.pixelViewport=K;if(this.pixelViewport.bottom<=this.pixelViewport.top||this.pixelViewport.right<=
this.pixelViewport.left)return 0;V=c.measureVisibleLineHeights();aa=!1;K=0;a||(this.heightOracle.mustRefresh(V,e,h)&&(a=c.measureTextSize(),aa=a.charWidth,aa=this.heightOracle.refresh(e,h,a.lineHeight,aa,c.dom.clientWidth/aa,V))&&(c.minWidth=0),0<k&&0<x?K=Math.max(k,x):0>k&&0>x&&(K=Math.min(k,x)));this.heightOracle.heightChanged=!1;this.heightMap=this.heightMap.updateHeight(this.heightOracle,0,aa,new sc(this.viewport.from,V));e=this.heightOracle.heightChanged?2:0;if(!this.viewportIsAppropriate(this.viewport,
K)||this.scrollTo&&(this.scrollTo.head<this.viewport.from||this.scrollTo.head>this.viewport.to))this.viewport=this.getViewport(K,this.scrollTo),e|=4;if(this.lineGaps.length||15E3<this.viewport.to-this.viewport.from)e|=this.updateLineGaps(this.ensureLineGaps(aa?[]:this.lineGaps));this.computeVisibleRanges();this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,c.enforceCursorAssoc());return e}},{key:"getViewport",value:function(c,a){var d=.5-Math.max(-.5,Math.min(.5,c/1E3/2));c=this.heightMap;
var e=this.state.doc,h=this.pixelViewport,k=h.top;h=h.bottom;d=new yc(c.lineAt(k-1E3*d,b.ByHeight,e,0,0).from,c.lineAt(h+1E3*(1-d),b.ByHeight,e,0,0).to);a&&(a.head<d.from?(a=c.lineAt(a.head,b.ByPos,e,0,0).top,d=new yc(c.lineAt(a-500,b.ByHeight,e,0,0).from,c.lineAt(a+(h-k)+500,b.ByHeight,e,0,0).to)):a.head>d.to&&(a=c.lineAt(a.head,b.ByPos,e,0,0).bottom,d=new yc(c.lineAt(a-(h-k)-500,b.ByHeight,e,0,0).from,c.lineAt(a+500,b.ByHeight,e,0,0).to)));return d}},{key:"mapViewport",value:function(c,a){var d=
a.mapPos(c.from,-1);c=a.mapPos(c.to,1);return new yc(this.heightMap.lineAt(d,b.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(c,b.ByPos,this.state.doc,0,0).to)}},{key:"viewportIsAppropriate",value:function(c){var a=c.from,d=c.to,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,h=this.heightMap.lineAt(a,b.ByPos,this.state.doc,0,0).top,k=this.heightMap.lineAt(d,b.ByPos,this.state.doc,0,0).bottom;return(0==a||h<=this.pixelViewport.top-Math.max(10,Math.min(-e,250)))&&(d==this.state.doc.length||
k>=this.pixelViewport.bottom+Math.max(10,Math.min(e,250)))&&h>this.pixelViewport.top-2E3&&k<this.pixelViewport.bottom+2E3}},{key:"mapLineGaps",value:function(c,a){if(!c.length||a.empty)return c;var d=[],e=!0,h=!1,k=void 0;try{for(var x=c[Symbol.iterator](),K;!(e=(K=x.next()).done);e=!0){var V=K.value;a.touchesRange(V.from,V.to)||d.push(new Pc(a.mapPos(V.from),a.mapPos(V.to),V.size))}}catch(aa){h=!0,k=aa}finally{try{if(!e&&null!=x["return"])x["return"]()}finally{if(h)throw k;}}return d}},{key:"ensureLineGaps",
value:function(c){var a=this,d=[];if(this.heightOracle.direction!=Xb.LTR)return d;this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,function(e){if(!(1E4>e.length)){var h=ha(e.from,e.to,a.state);if(!(1E4>h.total)){if(a.heightOracle.lineWrapping){var k=e.from!=a.viewport.from?e.from:Ca(h,(a.pixelViewport.top-e.top)/e.height);var x=e.to!=a.viewport.to?e.to:Ca(h,(a.pixelViewport.bottom-e.top)/e.height)}else x=h.total*a.heightOracle.charWidth,k=Ca(h,a.pixelViewport.left/
x),x=Ca(h,a.pixelViewport.right/x);var K=a.state.selection.primary;K.from<=k&&K.to>=e.from&&(k=K.from);K.from<=e.to&&K.to>=x&&(x=K.to);var V=k-1E4,aa=x+1E4;V>e.from+5E3&&d.push(Ma(c,function(da){return da.from==e.from&&da.to>V-5E3&&da.to<V+5E3})||new Pc(e.from,V,a.gapSize(e,V,!0,h)));aa<e.to-5E3&&d.push(Ma(c,function(da){return da.to==e.to&&da.from>aa-5E3&&da.from<aa+5E3})||new Pc(aa,e.to,a.gapSize(e,aa,!1,h)))}}});return d}},{key:"gapSize",value:function(c,a,d,e){if(this.heightOracle.lineWrapping)return e=
c.height*Fa(e,a),d?e:c.height-e;c=Fa(e,a);return e.total*this.heightOracle.charWidth*(d?c:1-c)}},{key:"updateLineGaps",value:function(c){var a=this;return Pc.same(c,this.lineGaps)?0:(this.lineGaps=c,this.lineGapDeco=pb.set(c.map(function(d){return d.draw(a.heightOracle.lineWrapping)})),16)}},{key:"computeVisibleRanges",value:function(){var c=this.state.facet(Wa);this.lineGaps.length&&(c=c.concat(this.lineGapDeco));var a=[];Cb.RangeSet.spans(c,this.viewport.from,this.viewport.to,{span:function(d,e){a.push({from:d,
to:e})},point:function(){},minPointSize:20});this.visibleRanges=a}},{key:"lineAt",value:function(c,a){return this.heightMap.lineAt(c,b.ByPos,this.state.doc,a+this.paddingTop,0)}},{key:"lineAtHeight",value:function(c,a){return this.heightMap.lineAt(c,b.ByHeight,this.state.doc,a+this.paddingTop,0)}},{key:"blockAtHeight",value:function(c,a){return this.heightMap.blockAt(c,this.state.doc,a+this.paddingTop,0)}},{key:"forEachLine",value:function(c,a,d,e){return this.heightMap.forEachLine(c,a,this.state.doc,
e+this.paddingTop,0,d)}}]);return g}(),yc=function(){function g(c,a){qa(this,g);this.from=c;this.to=a}ja(g,[{key:"eq",value:function(c){return this.from==c.from&&this.to==c.to}}]);return g}(),Ed=[],md=function(g){function c(a){qa(this,c);var d=Da(this,wa(c).call(this));d.view=a;d.viewports=Ed;d.compositionDeco=pb.none;d.decorations=[];d.minWidth=0;d.minWidthFrom=0;d.minWidthTo=0;d.impreciseAnchor=null;d.impreciseHead=null;d.setDOM(a.contentDOM);d.children=[new ib];d.children[0].setParent(Ta(d));d.updateInner([new wb(0,
0,0,a.state.doc.length)],d.updateDeco(),0);return d}xa(c,g);ja(c,[{key:"update",value:function(a){var d=this,e,h=a.changedRanges;0<this.minWidth&&h.length&&(h.every(function(K){var V=K.fromA;return K.toA<d.minWidthFrom||V>d.minWidthTo})?(this.minWidthFrom=a.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=a.changes.mapPos(this.minWidthTo,1)):this.minWidth=0);null!==(e=this.view.inputState)&&void 0!==e&&e.composing?a.transactions.length&&(this.compositionDeco=Xa(this.view,a.changes)):this.compositionDeco=
pb.none;e=(Za.ie||Za.chrome)&&!this.compositionDeco.size&&a&&a.state.doc.lines!=a.prevState.doc.lines;var k=this.decorations,x=this.updateDeco();k=Hb(k,x,a.changes);h=wb.extendWithRanges(h,k);k=a.transactions.some(function(K){return"pointerselection"==K.annotation(ya.Transaction.userEvent)});if(0==this.dirty&&0==h.length&&!(a.flags&20)&&a.state.selection.primary.from>=this.view.viewport.from&&a.state.selection.primary.to<=this.view.viewport.to)return this.updateSelection(e,k),!1;this.updateInner(h,
x,a.prevState.doc.length,e,k);return!0}},{key:"updateInner",value:function(a,d,e){var h=this,k=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,x=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1;this.updateChildren(a,d,e);this.view.observer.ignore(function(){h.dom.style.height=h.view.viewState.heightMap.height+"px";h.dom.style.minWidth=h.minWidth?h.minWidth+"px":"";var K=Za.chrome?{node:La(h.view.root).focusNode,written:!1}:void 0;h.sync(K);h.dirty=0;if(null===K||void 0===K?0:K.written)k=
!0;h.updateSelection(k,x);h.dom.style.height=""})}},{key:"updateChildren",value:function(a,d,e){e=this.childCursor(e);for(var h=a.length-1;;h--){var k=0<=h?a[h]:null;if(!k)break;var x=k.fromA,K=k.toA,V=xc.build(this.view.state.doc,k.fromB,k.toB,d);k=V.content;V=V.breakAtStart;var aa=e.findPos(K,1);K=aa.i;aa=aa.off;x=e.findPos(x,-1);this.replaceRange(x.i,x.off,K,aa,k,V)}}},{key:"replaceRange",value:function(a,d,e,h,k,x){var K=this.children[a],V=k.length?k[k.length-1]:null,aa=V?V.breakAfter:x;if(a!=
e||x||aa||!(2>k.length)||!K.merge(d,h,k.length?V:null,0==d)){var da=this.children[e];h<da.length||da.children.length&&0==da.children[da.children.length-1].length?(a==e&&(da=da.split(h),h=0),!aa&&V&&da.merge(0,h,V,!0)?k[k.length-1]=da:((h||da.children.length&&0==da.children[0].length)&&da.merge(0,h,null,!1),k.push(da))):da.breakAfter&&(V?V.breakAfter=1:x=1);e++;K.breakAfter=x;0<d&&(!x&&k.length&&K.merge(d,K.length,k[0],!1)?K.breakAfter=k.shift().breakAfter:(d<K.length||K.children.length&&0==K.children[K.children.length-
1].length)&&K.merge(d,K.length,null,!1),a++);for(;a<e&&k.length;)if(this.children[e-1].match(k[k.length-1]))e--,k.pop();else if(this.children[a].match(k[0]))a++,k.shift();else break;(a<e||k.length)&&this.replaceChildren(a,e,k)}}},{key:"updateSelection",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;if(1<arguments.length&&void 0!==arguments[1]&&arguments[1]||this.mayControlSelection()){var d=this.view.state.selection.primary,e=this.domAtPos(d.anchor),h=this.domAtPos(d.head),
k=La(this.root);(a||!k.focusNode||Za.gecko&&d.empty&&gb(k.focusNode,k.focusOffset)||!U(e.node,e.offset,k.anchorNode,k.anchorOffset)||!U(h.node,h.offset,k.focusNode,k.focusOffset))&&this.view.observer.ignore(function(){if(d.empty){if(Za.gecko){var x=gb(e.node,e.offset);if(x&&3!=x){var K=bb(e.node,e.offset,1==x?1:-1);K&&(e=new bc(K,1==x?0:K.nodeValue.length))}}k.collapse(e.node,e.offset);null!=d.bidiLevel&&null!=k.cursorBidiLevel&&(k.cursorBidiLevel=d.bidiLevel)}else k.extend?(k.collapse(e.node,e.offset),
k.extend(h.node,h.offset)):(x=document.createRange(),d.anchor>d.head&&(K=[h,e],e=K[0],h=K[1]),x.setEnd(h.node,h.offset),x.setStart(e.node,e.offset),k.removeAllRanges(),k.addRange(x))});this.impreciseAnchor=e.precise?null:new bc(k.anchorNode,k.anchorOffset);this.impreciseHead=h.precise?null:new bc(k.focusNode,k.focusOffset)}}},{key:"enforceCursorAssoc",value:function(){var a=this.view.state.selection.primary,d=La(this.root);if(a.empty&&a.assoc&&d.modify){var e=ib.find(this,a.head);if(e){var h=e.posAtStart;
a.head!=h&&a.head!=h+e.length&&(e=this.coordsAt(a.head,-1),h=this.coordsAt(a.head,1),!e||!h||e.bottom>h.top||(e=this.domAtPos(a.head+a.assoc),d.collapse(e.node,e.offset),d.modify("move",0>a.assoc?"forward":"backward","lineboundary")))}}}},{key:"mayControlSelection",value:function(){return this.view.state.facet(nb)?this.root.activeElement==this.dom:ka(this.dom,La(this.root))}},{key:"nearest",value:function(a){for(;a;){var d=Qb.get(a);if(d&&d.rootView==this)return d;a=a.parentNode}return null}},{key:"posFromDOM",
value:function(a,d){var e=this.nearest(a);if(!e)throw new RangeError("Trying to find position for a DOM position outside of the document");return e.localPosFromDOM(a,d)+e.posAtStart}},{key:"domAtPos",value:function(a){var d=this.childCursor().findPos(a,-1);a=d.i;for(d=d.off;a<this.children.length-1;){var e=this.children[a];if(d<e.length||e instanceof ib)break;a++;d=0}return this.children[a].domAtPos(d)}},{key:"coordsAt",value:function(a,d){for(var e=this.length,h=this.children.length-1;;h--){var k=
this.children[h];e=e-k.breakAfter-k.length;if(a>=e&&k.type!=Mb.WidgetAfter)return k.coordsAt(a-e,d)}}},{key:"measureVisibleLineHeights",value:function(){var a=[],d=this.view.viewState.viewport,e=d.from;d=d.to;for(var h=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,k=0,x=0;x<this.children.length;x++){var K=this.children[x],V=k+K.length;if(V>d)break;if(k>=e){a.push(K.dom.getBoundingClientRect().height);var aa=K.dom.scrollWidth;aa>h&&(this.minWidth=h=aa,this.minWidthFrom=k,this.minWidthTo=
V)}k=V+K.breakAfter}return a}},{key:"measureTextSize",value:function(){var a=this,d=!0,e=!1,h=void 0;try{for(var k=this.children[Symbol.iterator](),x;!(d=(x=k.next()).done);d=!0){var K=x.value;if(K instanceof ib){var V=K.measureTextSize();if(V)return V}}}catch(Va){e=!0,h=Va}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;}}var aa=document.createElement("div"),da,ra;aa.className="cm-line";aa.textContent="abc def ghi jkl mno pqr stu";this.view.observer.ignore(function(){a.dom.appendChild(aa);
var Va=ba(aa.firstChild)[0];da=aa.getBoundingClientRect().height;ra=Va?Va.width/27:7;aa.remove()});return{lineHeight:da,charWidth:ra}}},{key:"childCursor",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.length,d=this.children.length;d&&(a-=this.children[--d].length);return new Nc(this.children,a,d)}},{key:"computeBlockGapDeco",value:function(){var a=this.view.viewState.viewport,d=[a],e=this.view.state.selection.primary,h=e.head,k=e.anchor;if(h<a.from||h>a.to)a=this.view.viewState.lineAt(h,
0),d.push(new yc(a.from,a.to));d.some(function(aa){var da=aa.to;return k>=aa.from&&k<=da})||(a=this.view.viewState.lineAt(k,0),d.push(new yc(a.from,a.to)));this.viewports=d.sort(function(aa,da){return aa.from-da.from});a=[];for(h=e=0;;h++){var x=h==d.length?null:d[h],K=x?x.from-1:this.length;if(K>e){var V=this.view.viewState.lineAt(K,0).bottom-this.view.viewState.lineAt(e,0).top;a.push(pb.replace({widget:new Fd(V),block:!0,inclusive:!0}).range(e,K))}if(!x)break;e=x.to+1}return pb.set(a)}},{key:"updateDeco",
value:function(){return this.decorations=[].concat(Ia(this.view.state.facet(Wa)),[this.computeBlockGapDeco(),this.view.viewState.lineGapDeco,this.compositionDeco],Ia(this.view.pluginField(Yb)))}},{key:"scrollPosIntoView",value:function(a,d){var e;if(a=this.coordsAt(a,d)){var h=e=d=0,k=0,x=!0,K=!1,V=void 0;try{for(var aa=this.view.pluginField(mb.scrollMargins)[Symbol.iterator](),da;!(x=(da=aa.next()).done);x=!0){var ra=da.value;if(ra){var Va=ra.left,Qa=ra.right,jb=ra.top;var tb=ra.bottom;null!=Va&&
(d=Math.max(d,Va));null!=Qa&&(e=Math.max(e,Qa));null!=jb&&(h=Math.max(h,jb));null!=tb&&(k=Math.max(k,tb))}}}catch(ic){K=!0,V=ic}finally{try{if(!x&&null!=aa["return"])aa["return"]()}finally{if(K)throw V;}}ra=this.dom;aa={left:a.left-d,top:a.top-h,right:a.right+e,bottom:a.bottom+k};da=ra.ownerDocument.defaultView;for(ra=ra.parentNode;ra;)if(1==ra.nodeType){if(Va=ra==document.body)tb=0,a=da.innerWidth,d=0,e=da.innerHeight;else{if(ra.scrollHeight<=ra.clientHeight&&ra.scrollWidth<=ra.clientWidth){ra=ra.parentNode;
continue}Qa=ra.getBoundingClientRect();tb=Qa.left;a=Qa.left+ra.clientWidth;d=Qa.top;e=Qa.top+ra.clientHeight}jb=Qa=0;aa.top<d?jb=-(d-aa.top+5):aa.bottom>e&&(jb=aa.bottom-e+5);aa.left<tb?Qa=-(tb-aa.left+5):aa.right>a&&(Qa=aa.right-a+5);if(Qa||jb)Va?da.scrollBy(Qa,jb):(jb&&(tb=ra.scrollTop,ra.scrollTop+=jb,jb=ra.scrollTop-tb),Qa&&(tb=ra.scrollLeft,ra.scrollLeft+=Qa,Qa=ra.scrollLeft-tb),aa={left:aa.left-Qa,top:aa.top-jb,right:aa.right-Qa,bottom:aa.bottom-jb});if(Va)break;ra=ra.parentNode}else if(11==
ra.nodeType)ra=ra.host;else break}}},{key:"root",get:function(){return this.view.root}},{key:"editorView",get:function(){return this.view}},{key:"length",get:function(){return this.view.state.doc.length}}]);return c}(Qb),Fd=function(g){function c(){qa(this,c);return Da(this,wa(c).apply(this,arguments))}xa(c,g);ja(c,[{key:"toDOM",value:function(){var a=document.createElement("div");this.updateDOM(a);return a}},{key:"updateDOM",value:function(a){if(1E7>this.value){for(;a.lastChild;)a.lastChild.remove();
a.style.height=this.value+"px"}else{a.style.height="";for(var d=this.value;0<d;d-=1E7)a.appendChild(document.createElement("div")).style.height=Math.min(d,1E7)+"px"}return!0}},{key:"estimatedHeight",get:function(){return this.value}}]);return c}(xb),sd=function(g){function c(){qa(this,c);return Da(this,wa(c).apply(this,arguments))}xa(c,g);ja(c,[{key:"eq",value:function(a){return this.value.top==a.top&&this.value.text==a.text}},{key:"toDOM",value:function(){return this.value.top}},{key:"ignoreEvent",
value:function(){return!1}},{key:"customView",get:function(){return cd}}]);return c}(xb),td=function(){function g(){qa(this,g);this.changes=[]}ja(g,[{key:"compareRange",value:function(c,a){t(c,a,this.changes)}},{key:"comparePoint",value:function(c,a){t(c,a,this.changes)}}]);return g}(),Hd=function(){function g(c){var a=this;qa(this,g);this.lastKeyTime=this.lastKeyCode=0;this.lastSelectionOrigin=null;this.lastSelectionTime=0;this.registeredEvents=[];this.customHandlers=[];this.composing=!1;this.compositionEndedAt=
0;this.mouseSelection=null;var d=function(h){var k=Sb[h];c.contentDOM.addEventListener(h,function(x){ac(c,x)&&!a.ignoreDuringComposition(x)&&(a.mustFlushObserver(x)&&c.observer.forceFlush(),a.runCustomHandlers(h,c,x)?x.preventDefault():k(c,x))});a.registeredEvents.push(h)},e;for(e in Sb)d(e);c.contentDOM.addEventListener("keydown",function(h){c.inputState.lastKeyCode=h.keyCode;c.inputState.lastKeyTime=Date.now()});c.root.activeElement==c.contentDOM&&c.dom.classList.add("cm-focused");this.notifiedFocused=
c.hasFocus;this.ensureHandlers(c)}ja(g,[{key:"setSelectionOrigin",value:function(c){this.lastSelectionOrigin=c;this.lastSelectionTime=Date.now()}},{key:"ensureHandlers",value:function(c){var a=this,d=this.customHandlers=c.pluginField(Nb),e=!0,h=!1,k=void 0;try{for(var x=d[Symbol.iterator](),K;!(e=(K=x.next()).done);e=!0){var V=K.value;d=function(da){0>a.registeredEvents.indexOf(da)&&(a.registeredEvents.push(da),("scroll"!=da?c.contentDOM:c.scrollDOM).addEventListener(da,function(ra){ac(c,ra)&&a.runCustomHandlers(da,
c,ra)&&ra.preventDefault()}))};for(var aa in V.handlers)d(aa)}}catch(da){h=!0,k=da}finally{try{if(!e&&null!=x["return"])x["return"]()}finally{if(h)throw k;}}}},{key:"runCustomHandlers",value:function(c,a,d){var e=!0,h=!1,k=void 0;try{for(var x=this.customHandlers[Symbol.iterator](),K;!(e=(K=x.next()).done);e=!0){var V=K.value,aa=V.handlers[c];if(aa)try{if(aa.call(V.plugin,d,a)||d.defaultPrevented)return!0}catch(da){Z(a.state,da)}}}catch(da){h=!0,k=da}finally{try{if(!e&&null!=x["return"])x["return"]()}finally{if(h)throw k;
}}return!1}},{key:"ignoreDuringComposition",value:function(c){return/^key/.test(c.type)?this.composing?!0:Za.safari&&500>c.timeStamp-this.compositionEndedAt?(this.compositionEndedAt=0,!0):!1:!1}},{key:"mustFlushObserver",value:function(c){return"keydown"==c.type||"compositionend"==c.type}},{key:"startMouseSelection",value:function(c,a,d){this.mouseSelection&&this.mouseSelection.destroy();this.mouseSelection=new Gd(this,c,a,d)}},{key:"update",value:function(c){this.mouseSelection&&this.mouseSelection.update(c);
this.lastKeyCode=this.lastSelectionTime=0}},{key:"destroy",value:function(){this.mouseSelection&&this.mouseSelection.destroy()}}]);return g}(),Gd=function(){function g(c,a,d,e){qa(this,g);this.inputState=c;this.view=a;this.startEvent=d;this.style=e;c=a.contentDOM.ownerDocument;c.addEventListener("mousemove",this.move=this.move.bind(this));c.addEventListener("mouseup",this.up=this.up.bind(this));this.extend=d.shiftKey;if(c=a.state.facet(ya.EditorState.allowMultipleSelections))c=a.state.facet(fa),c=
c.length?c[0](d):Za.mac?d.metaKey:d.ctrlKey;this.multiple=c;c=a.state.facet(Ha);this.dragMove=c.length?c[0](d):Za.mac?!d.altKey:!d.ctrlKey;this.dragging=Eb(a,d)?null:!1;!1===this.dragging&&(d.preventDefault(),this.select(d))}ja(g,[{key:"move",value:function(c){if(0==c.buttons)return this.destroy();!1===this.dragging&&this.select(c)}},{key:"up",value:function(c){null==this.dragging&&this.select(this.startEvent);this.dragging||c.preventDefault();this.destroy()}},{key:"destroy",value:function(){var c=
this.view.contentDOM.ownerDocument;c.removeEventListener("mousemove",this.move);c.removeEventListener("mouseup",this.up);this.inputState.mouseSelection=null}},{key:"select",value:function(c){c=this.style.get(c,this.extend,this.multiple);c.eq(this.view.state.selection)&&c.primary.assoc==this.view.state.selection.primary.assoc||this.view.dispatch({selection:c,annotations:ya.Transaction.userEvent.of("pointerselection"),scrollIntoView:!0})}},{key:"update",value:function(c){c.docChanged&&this.dragging&&
(this.dragging=this.dragging.map(c.changes));this.style.update(c)}}]);return g}(),Sb=Object.create(null),nd=Za.ie&&15>Za.ie_version||Za.ios&&604>Za.webkit_version;Sb.keydown=function(g,c){var a=(c.ctrlKey?1:0)|(c.metaKey?8:0)|(c.altKey?2:0)|(c.shiftKey?4:0),d=c.keyCode,e=Za.mac&&1==a;(8==d||e&&72==d||46==d||e&&68==d||27==d||a==(Za.mac?8:1)&&(66==d||73==d||89==d||90==d))&&c.preventDefault();g.inputState.setSelectionOrigin("keyboardselection")};Sb.touchdown=Sb.touchmove=function(g){g.inputState.setSelectionOrigin("pointerselection")};
Sb.mousedown=function(g,c){var a=null,d=!0,e=!1,h=void 0;try{for(var k=g.state.facet(Ga)[Symbol.iterator](),x;!(d=(x=k.next()).done);d=!0){var K=x.value;if(a=K(g,c))break}}catch(V){e=!0,h=V}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;}}a||0!=c.button||(a=C(g,c));a&&(g.root.activeElement!=g.contentDOM&&g.observer.ignore(function(){return L(g.contentDOM)}),g.inputState.startMouseSelection(g,c,a))};var ud=Za.ie&&11>=Za.ie_version,gd=null,hd=0;Sb.dragstart=function(g,c){var a=
g.state.selection.primary,d=g.inputState.mouseSelection;d&&(d.dragging=a);c.dataTransfer&&(c.dataTransfer.setData("Text",g.state.sliceDoc(a.from,a.to)),c.dataTransfer.effectAllowed="copyMove")};Sb.drop=function(g,c){if(c.dataTransfer){var a=g.posAtCoords({x:c.clientX,y:c.clientY}),d=c.dataTransfer.getData("Text");0>a||!d||(c.preventDefault(),c=(c=g.inputState.mouseSelection)&&c.dragging&&c.dragMove?{from:c.dragging.from,to:c.dragging.to}:null,d={from:a,insert:d},d=g.state.changes(c?[c,d]:d),g.focus(),
g.dispatch({changes:d,selection:{anchor:d.mapPos(a,-1),head:d.mapPos(a,1)},annotations:ya.Transaction.userEvent.of("drop")}))}};Sb.paste=function(g,c){g.observer.flush();var a=nd?null:c.clipboardData;(a=a&&a.getData("text/plain"))?(Bb(g,a),c.preventDefault()):ec(g)};Sb.copy=Sb.cut=function(g,c){var a=g.state;var d=[],e=[],h=!0,k=!1,x=void 0;try{for(var K=a.selection.ranges[Symbol.iterator](),V;!(h=(V=K.next()).done);h=!0){var aa=V.value;aa.empty||(d.push(a.sliceDoc(aa.from,aa.to)),e.push(aa))}}catch(Qa){k=
!0,x=Qa}finally{try{if(!h&&null!=K["return"])K["return"]()}finally{if(k)throw x;}}if(!d.length){h=-1;k=!0;x=!1;K=void 0;try{for(var da=a.selection.ranges[Symbol.iterator](),ra;!(k=(ra=da.next()).done);k=!0){var Va=a.doc.lineAt(ra.value.from);Va.number>h&&(d.push(Va.slice()),e.push({from:Va.from,to:Math.min(a.doc.length,Va.to+1)}));h=Va.number}}catch(Qa){x=!0,K=Qa}finally{try{if(!k&&null!=da["return"])da["return"]()}finally{if(x)throw K;}}}if(a=d.join(a.lineBreak))(d=nd?null:c.clipboardData)?(c.preventDefault(),
d.clearData(),d.setData("text/plain",a)):S(g,a),"cut"==c.type&&g.dispatch({changes:e,scrollIntoView:!0,annotations:ya.Transaction.userEvent.of("cut")})};Sb.focus=Sb.blur=function(g){setTimeout(function(){g.hasFocus!=g.inputState.notifiedFocused&&g.update([])},10)};Sb.beforeprint=function(g){g.viewState.printing=!0;g.requestMeasure();setTimeout(function(){g.viewState.printing=!1;g.requestMeasure()},2E3)};Sb.compositionstart=Sb.compositionupdate=function(g){g.inputState.composing||(g.docView.compositionDeco.size&&
(g.observer.flush(),g.docView.compositionDeco.size&&g.update([])),g.inputState.composing=!0)};Sb.compositionend=function(g){g.inputState.composing=!1;g.inputState.compositionEndedAt=Date.now();setTimeout(function(){g.inputState.composing||g.docView.compositionDeco.size&&g.update([])},50)};var Id={childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},fd=Za.ie&&11>=Za.ie_version,Jd=function(){function g(c,a,d){var e=this;qa(this,g);this.view=c;this.onChange=a;this.onScrollChanged=d;this.active=
!1;this.ignoreSelection=new Rb;this.delayedFlush=-1;this.queue=[];this.scrollTargets=[];this.intersection=null;this.intersecting=!1;this.parentCheck=-1;this.dom=c.contentDOM;this.observer=new MutationObserver(function(h){var k=!0,x=!1,K=void 0;try{for(var V=h[Symbol.iterator](),aa;!(k=(aa=V.next()).done);k=!0)e.queue.push(aa.value)}catch(da){x=!0,K=da}finally{try{if(!k&&null!=V["return"])V["return"]()}finally{if(x)throw K;}}Za.ie&&11>=Za.ie_version&&h.some(function(da){return"childList"==da.type&&
da.removedNodes.length||"characterData"==da.type&&da.oldValue.length>da.target.nodeValue.length})?e.flushSoon():e.flush()});fd&&(this.onCharData=function(h){e.queue.push({target:h.target,type:"characterData",oldValue:h.prevValue});e.flushSoon()});this.onSelectionChange=function(){if(e.view.root.activeElement==e.dom){if(Za.ie&&11>=Za.ie_version&&!e.view.state.selection.primary.empty){var h=La(e.view.root);if(h.focusNode&&U(h.focusNode,h.focusOffset,h.anchorNode,h.anchorOffset))return e.flushSoon()}e.flush()}};
this.start();this.onScroll=this.onScroll.bind(this);window.addEventListener("scroll",this.onScroll);"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(function(h){0>e.parentCheck&&(e.parentCheck=setTimeout(e.listenForScroll.bind(e),1E3));0<h[h.length-1].intersectionRatio!=e.intersecting&&(e.intersecting=!e.intersecting,e.onScroll())},{}),this.intersection.observe(this.dom));this.listenForScroll()}ja(g,[{key:"onScroll",value:function(){this.intersecting&&(this.flush(),
this.onScrollChanged())}},{key:"listenForScroll",value:function(){this.parentCheck=-1;for(var c=0,a=null,d=this.dom;d;)if(1==d.nodeType)!a&&c<this.scrollTargets.length&&this.scrollTargets[c]==d?c++:a||(a=this.scrollTargets.slice(0,c)),a&&a.push(d),d=d.parentNode;else if(11==d.nodeType)d=d.host;else break;c<this.scrollTargets.length&&!a&&(a=this.scrollTargets.slice(0,c));if(a){c=!0;d=!1;var e=void 0;try{for(var h=this.scrollTargets[Symbol.iterator](),k;!(c=(k=h.next()).done);c=!0)k.value.removeEventListener("scroll",
this.onScroll)}catch(V){d=!0,e=V}finally{try{if(!c&&null!=h["return"])h["return"]()}finally{if(d)throw e;}}h=!0;k=!1;c=void 0;try{for(var x=(this.scrollTargets=a)[Symbol.iterator](),K;!(h=(K=x.next()).done);h=!0)K.value.addEventListener("scroll",this.onScroll)}catch(V){k=!0,c=V}finally{try{if(!h&&null!=x["return"])x["return"]()}finally{if(k)throw c;}}}}},{key:"ignore",value:function(c){if(!this.active)return c();try{return this.stop(),c()}finally{this.start(),this.clear()}}},{key:"start",value:function(){this.active||
(this.observer.observe(this.dom,Id),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange),fd&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}},{key:"stop",value:function(){this.active&&(this.active=!1,this.observer.disconnect(),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),fd&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}},{key:"clearSelection",value:function(){this.ignoreSelection.set(La(this.view.root))}},
{key:"clear",value:function(){this.observer.takeRecords();this.queue.length=0;this.clearSelection()}},{key:"flushSoon",value:function(){var c=this;0>this.delayedFlush&&(this.delayedFlush=window.setTimeout(function(){c.delayedFlush=-1;c.flush()},20))}},{key:"forceFlush",value:function(){0<=this.delayedFlush&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}},{key:"flush",value:function(){var c=this;if(!(0<=this.delayedFlush)){var a=this.queue,d=!0,e=!1,h=void 0;try{for(var k=
this.observer.takeRecords()[Symbol.iterator](),x;!(d=(x=k.next()).done);d=!0)a.push(x.value)}catch(Va){e=!0,h=Va}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;}}a.length&&(this.queue=[]);d=La(this.view.root);d=!this.ignoreSelection.eq(d)&&ka(this.dom,d);if(0!=a.length||d){h=e=-1;k=!1;x=!0;var K=!1,V=void 0;try{for(var aa=a[Symbol.iterator](),da;!(x=(da=aa.next()).done);x=!0){var ra=this.readMutation(da.value);ra&&(ra.typeOver&&(k=!0),-1==e?(e=ra.from,h=ra.to):(e=Math.min(ra.from,
e),h=Math.max(ra.to,h)))}}catch(Va){K=!0,V=Va}finally{try{if(!x&&null!=aa["return"])aa["return"]()}finally{if(K)throw V;}}a=this.view.state;if(-1<e||d)this.onChange(e,h,k);this.view.state==a&&(this.view.docView.dirty&&(this.ignore(function(){return c.view.docView.sync()}),this.view.docView.dirty=0),this.view.docView.updateSelection());this.clearSelection()}}}},{key:"readMutation",value:function(c){var a=this.view.docView.nearest(c.target);if(!a||a.ignoreMutation(c))return null;a.markDirty();if("childList"==
c.type){var d=W(a,c.previousSibling||c.target.previousSibling,-1);c=W(a,c.nextSibling||c.target.nextSibling,1);return{from:d?a.posAfter(d):a.posAtStart,to:c?a.posBefore(c):a.posAtEnd,typeOver:!1}}return{from:a.posAtStart,to:a.posAtEnd,typeOver:c.target.nodeValue==c.oldValue}}},{key:"destroy",value:function(){this.stop();this.intersection&&this.intersection.disconnect();var c=!0,a=!1,d=void 0;try{for(var e=this.scrollTargets[Symbol.iterator](),h;!(c=(h=e.next()).done);c=!0)h.value.removeEventListener("scroll",
this.onScroll)}catch(k){a=!0,d=k}finally{try{if(!c&&null!=e["return"])e["return"]()}finally{if(a)throw d;}}window.removeEventListener("scroll",this.onScroll);clearTimeout(this.parentCheck)}}]);return g}(),vd=function(){function g(c){qa(this,g);this.points=c;this.text=""}ja(g,[{key:"readRange",value:function(c,a){if(c){for(var d=c.parentNode;;){this.findPointBefore(d,c);this.readNode(c);var e=c.nextSibling;if(e==a)break;var h=Qb.get(c),k=Qb.get(e);if((h?h.breakAfter:ta(c))||(k?k.breakAfter:ta(e))&&
("BR"!=c.nodeName||c.cmIgnore))this.text+="﷚";c=e}this.findPointBefore(d,a)}}},{key:"readNode",value:function(c){if(!c.cmIgnore){var a=Qb.get(c);a=a&&a.overrideDOMText;var d;null!=a?d=a.sliceString(0,void 0,"﷚"):3==c.nodeType?d=c.nodeValue:"BR"==c.nodeName?d=c.nextSibling?"﷚":"":1==c.nodeType&&this.readRange(c.firstChild,null);null!=d&&(this.findPointIn(c,d.length),this.text+=d)}}},{key:"findPointBefore",value:function(c,a){var d=!0,e=!1,h=void 0;try{for(var k=this.points[Symbol.iterator](),x;!(d=
(x=k.next()).done);d=!0){var K=x.value;K.node==c&&c.childNodes[K.offset]==a&&(K.pos=this.text.length)}}catch(V){e=!0,h=V}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;}}}},{key:"findPointIn",value:function(c,a){var d=!0,e=!1,h=void 0;try{for(var k=this.points[Symbol.iterator](),x;!(d=(x=k.next()).done);d=!0){var K=x.value;K.node==c&&(K.pos=this.text.length+Math.min(K.offset,a))}}catch(V){e=!0,h=V}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;}}}}]);
return g}(),id=function d(c,a){qa(this,d);this.node=c;this.offset=a;this.pos=-1},Tb=function(){function c(){var a=this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};qa(this,c);this.plugins=[];this.editorAttrs={};this.contentAttrs={};this.bidiCache=[];this.updateState=2;this.measureScheduled=-1;this.measureRequests=[];this.contentDOM=document.createElement("div");this.scrollDOM=document.createElement("div");this.scrollDOM.className=N("scroller");this.scrollDOM.appendChild(this.contentDOM);
this.dom=document.createElement("div");this.dom.appendChild(this.scrollDOM);this._dispatch=d.dispatch||function(e){return a.update([e])};this.dispatch=this.dispatch.bind(this);this.root=d.root||document;this.viewState=new ld(d.state||ya.EditorState.create());this.plugins=this.state.facet(qb).map(function(e){return Pb.create(e,a)});this.observer=new Jd(this,function(e,h,k){return ca(a,e,h,k)},function(){return a.measure()});this.docView=new md(this);this.inputState=new Hd(this);this.mountStyles();
this.updateAttrs();this.updateState=0;Ua();this.requestMeasure();d.parent&&d.parent.appendChild(this.dom)}ja(c,[{key:"dispatch",value:function(){var a;this._dispatch(1==arguments.length&&(0>=arguments.length?void 0:arguments[0])instanceof ya.Transaction?0>=arguments.length?void 0:arguments[0]:(a=this.state).update.apply(a,arguments))}},{key:"update",value:function(a){if(0!=this.updateState)throw Error("Calls to EditorView.update are not allowed while an update is in progress");this.updateState=2;
var d=this.state,e=!0,h=!1,k=void 0;try{for(var x=a[Symbol.iterator](),K;!(e=(K=x.next()).done);e=!0){var V=K.value;if(V.startState!=d)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");d=V.state}}catch(Va){h=!0,k=Va}finally{try{if(!e&&null!=x["return"])x["return"]()}finally{if(h)throw k;}}e=new tc(this,d,a);a=a.some(function(Va){return Va.scrollIntoView})?d.selection.primary:null;this.viewState.update(e,a);this.bidiCache=od.update(this.bidiCache,
e.changes);e.empty||this.updatePlugins(e);d=this.docView.update(e);this.state.facet(rb)!=this.styleModules&&this.mountStyles();this.updateAttrs();this.updateState=0;(d||a||this.viewState.mustEnforceCursorAssoc)&&this.requestMeasure();a=!0;d=!1;h=void 0;try{for(var aa=this.state.facet(Sa)[Symbol.iterator](),da;!(a=(da=aa.next()).done);a=!0){var ra=da.value;ra(e)}}catch(Va){d=!0,h=Va}finally{try{if(!a&&null!=aa["return"])aa["return"]()}finally{if(d)throw h;}}}},{key:"setState",value:function(a){var d=
this;if(0!=this.updateState)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");this.updateState=2;var e=!0,h=!1,k=void 0;try{for(var x=this.plugins[Symbol.iterator](),K;!(e=(K=x.next()).done);e=!0)K.value.destroy(this)}catch(V){h=!0,k=V}finally{try{if(!e&&null!=x["return"])x["return"]()}finally{if(h)throw k;}}this.viewState=new ld(a);this.plugins=a.facet(qb).map(function(V){return Pb.create(V,d)});this.docView=new md(this);this.inputState.ensureHandlers(this);
this.mountStyles();this.updateAttrs();this.bidiCache=[];this.updateState=0;this.requestMeasure()}},{key:"updatePlugins",value:function(a){var d=a.prevState.facet(qb),e=a.state.facet(qb);if(d!=e){var h=[],k=[],x=!0,K=!1,V=void 0;try{for(var aa=e[Symbol.iterator](),da;!(x=(da=aa.next()).done);x=!0){var ra=da.value,Va=d.indexOf(ra);if(0>Va)h.push(Pb.create(ra,this));else{var Qa=this.plugins[Va].update(a);k.push(Qa);h.push(Qa)}}}catch(kc){K=!0,V=kc}finally{try{if(!x&&null!=aa["return"])aa["return"]()}finally{if(K)throw V;
}}a=!0;d=!1;e=void 0;try{for(var jb=this.plugins[Symbol.iterator](),tb;!(a=(tb=jb.next()).done);a=!0){var ic=tb.value;0>k.indexOf(ic)&&ic.destroy(this)}}catch(kc){d=!0,e=kc}finally{try{if(!a&&null!=jb["return"])jb["return"]()}finally{if(d)throw e;}}this.plugins=h;this.inputState.ensureHandlers(this)}else for(h=0;h<this.plugins.length;h++)this.plugins[h]=this.plugins[h].update(a)}},{key:"measure",value:function(){var a=this;-1<this.measureScheduled&&cancelAnimationFrame(this.measureScheduled);this.measureScheduled=
1;for(var d=null,e=0;;e++){this.updateState=1;var h=this.viewState.measure(this.docView,0<e),k=this.measureRequests;if(!h&&!k.length&&null==this.viewState.scrollTo)break;this.measureRequests=[];if(5<e){console.warn("Viewport failed to stabilize");break}var x=k.map(function(ra){try{return ra.read(a)}catch(Va){return Z(a.state,Va),pd}}),K=new tc(this,this.state);K.flags|=h;d?d.flags|=h:d=K;this.updateState=2;this.updatePlugins(K);h&&this.docView.update(K);for(K=0;K<k.length;K++)if(x[K]!=pd)try{k[K].write(x[K],
this)}catch(ra){Z(this.state,ra)}this.viewState.scrollTo&&(this.docView.scrollPosIntoView(this.viewState.scrollTo.head,this.viewState.scrollTo.assoc),this.viewState.scrollTo=null);if(!(h&4)&&0==this.measureRequests.length)break}this.updateState=0;this.measureScheduled=-1;if(d){e=!0;h=!1;k=void 0;try{for(var V=this.state.facet(Sa)[Symbol.iterator](),aa;!(e=(aa=V.next()).done);e=!0){var da=aa.value;da(d)}}catch(ra){h=!0,k=ra}finally{try{if(!e&&null!=V["return"])V["return"]()}finally{if(h)throw k;}}}}},
{key:"updateAttrs",value:function(){var a=A(this.state.facet(cc),{"class":N("wrap")+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});y(this.dom,this.editorAttrs,a);this.editorAttrs=a;a=A(this.state.facet(Aa),{spellcheck:"false",contenteditable:String(this.state.facet(nb)),"class":N("content"),style:"".concat(Za.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"});y(this.contentDOM,this.contentAttrs,a);this.contentAttrs=a}},{key:"mountStyles",value:function(){this.styleModules=
this.state.facet(rb);Lb.StyleModule.mount(this.root,this.styleModules.concat(dd).reverse())}},{key:"domAtPos",value:function(a){return this.docView.domAtPos(a)}},{key:"posAtDOM",value:function(a){return this.docView.posFromDOM(a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)}},{key:"readMeasured",value:function(){if(2==this.updateState)throw Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&-1<this.measureScheduled&&this.measure()}},{key:"requestMeasure",
value:function(a){var d=this;0>this.measureScheduled&&(this.measureScheduled=requestAnimationFrame(function(){return d.measure()}));if(a){if(null!=a.key)for(var e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===a.key){this.measureRequests[e]=a;return}this.measureRequests.push(a)}}},{key:"pluginField",value:function(a){var d=[],e=!0,h=!1,k=void 0;try{for(var x=this.plugins[Symbol.iterator](),K;!(e=(K=x.next()).done);e=!0)K.value.takeField(a,d)}catch(V){h=!0,k=V}finally{try{if(!e&&
null!=x["return"])x["return"]()}finally{if(h)throw k;}}return d}},{key:"plugin",value:function(a){var d=!0,e=!1,h=void 0;try{for(var k=this.plugins[Symbol.iterator](),x;!(d=(x=k.next()).done);d=!0){var K=x.value;if(K.spec==a)return K.value}}catch(V){e=!0,h=V}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;}}return null}},{key:"blockAtHeight",value:function(a,d){this.readMeasured();return this.viewState.blockAtHeight(a,Oa(d,this.contentDOM))}},{key:"visualLineAtHeight",value:function(a,
d){this.readMeasured();return this.viewState.lineAtHeight(a,Oa(d,this.contentDOM))}},{key:"visualLineAt",value:function(a){return this.viewState.lineAt(a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)}},{key:"viewportLines",value:function(a,d){var e=this.viewport;this.viewState.forEachLine(e.from,e.to,a,Oa(d,this.contentDOM))}},{key:"moveByChar",value:function(a,d,e){return sb(this,a,d,e)}},{key:"moveByGroup",value:function(a,d){var e=this;return sb(this,a,d,function(h){return dc(e,a.head,
h)})}},{key:"moveToLineBoundary",value:function(a,d){a:{var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;var h=this.state.doc.lineAt(a.head);if(e=e&&this.lineWrapping?this.coordsAtPos(0>a.assoc&&a.head>h.from?a.head-1:a.head):null){var k=this.dom.getBoundingClientRect();e=this.posAtCoords({x:d==(this.textDirection==Xb.LTR)?k.right-1:k.left+1,y:(e.top+e.bottom)/2});if(-1<e){h=ya.EditorSelection.cursor(e,d?-1:1);break a}}e=ib.find(this.docView,a.head);h=ya.EditorSelection.cursor(e?d?
e.posAtEnd:e.posAtStart:d?h.to:h.from,d?-1:1)}return h}},{key:"moveVertically",value:function(a,d,e){a:{var h,k=a.head;var x=d?1:-1;if(k==(d?this.state.doc.length:0))x=ya.EditorSelection.cursor(k);else{var K=this.coordsAtPos(k);if(K){var V=this.dom.getBoundingClientRect();d=null!==(h=a.goalColumn)&&void 0!==h?h:K.left-V.left;h=V.left+d;e=null!==e&&void 0!==e?e:5;K=0>x?K.top:K.bottom;for(V=0;50>V;V+=10){var aa=vb(this,{x:h,y:K+(e+V)*x},x);if(0>aa)break;if(aa!=k){x=ya.EditorSelection.cursor(aa,void 0,
void 0,d);break a}}}e=this.state.doc;K=e.lineAt(k);d=this.state.tabSize;h=a.goalColumn;a=0;if(null==h){for(k=e.iterRange(K.from,k);!k.next().done;)a=(0,lb.countColumn)(k.value,a,d);h=a*this.defaultCharacterWidth}else a=Math.round(h/this.defaultCharacterWidth);if(0>x&&0==K.from)x=ya.EditorSelection.cursor(0);else if(0<x&&K.to==e.length)x=ya.EditorSelection.cursor(K.to);else{K=e.line(K.number+x);x=K.from;k=0;for(e=e.iterRange(K.from,K.to);k>=a&&!e.next().done;)k=(0,lb.findColumn)(e.value,k,a,d),K=k.offset,
k=a-k.leftOver,x+=K;x=ya.EditorSelection.cursor(x,void 0,void 0,h)}}}return x}},{key:"scrollPosIntoView",value:function(a){this.viewState.scrollTo=ya.EditorSelection.cursor(a);this.requestMeasure()}},{key:"posAtCoords",value:function(a){this.readMeasured();return vb(this,a)}},{key:"coordsAtPos",value:function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();var e=this.state.doc.lineAt(a),h=this.bidiSpans(e),k=this.docView.coordsAt(a,d);if(!k||k.left==k.right)return k;
e=h[hc.find(h,a-e.from,-1,d)];return B(k,e.dir==Xb.LTR==0<d)}},{key:"bidiSpans",value:function(a){if(a.length>Kd)return[new hc(0,a.length,0)];var d=this.textDirection,e=!0,h=!1,k=void 0;try{for(var x=this.bidiCache[Symbol.iterator](),K;!(e=(K=x.next()).done);e=!0){var V=K.value;if(V.from==a.from&&V.dir==d)return V.order}}catch(aa){h=!0,k=aa}finally{try{if(!e&&null!=x["return"])x["return"]()}finally{if(h)throw k;}}e=Q(a.slice(),this.textDirection);this.bidiCache.push(new od(a.from,a.to,d,e));return e}},
{key:"focus",value:function(){var a=this;this.observer.ignore(function(){L(a.contentDOM);a.docView.updateSelection()})}},{key:"destroy",value:function(){var a=!0,d=!1,e=void 0;try{for(var h=this.plugins[Symbol.iterator](),k;!(a=(k=h.next()).done);a=!0)k.value.destroy(this)}catch(x){d=!0,e=x}finally{try{if(!a&&null!=h["return"])h["return"]()}finally{if(d)throw e;}}this.inputState.destroy();this.dom.remove();this.observer.destroy();-1<this.measureScheduled&&cancelAnimationFrame(this.measureScheduled)}},
{key:"state",get:function(){return this.viewState.state}},{key:"viewport",get:function(){return this.viewState.viewport}},{key:"visibleRanges",get:function(){return this.viewState.visibleRanges}},{key:"themeClasses",get:function(){return gc+" "+(this.state.facet(fc)?Jc:uc)+" "+this.state.facet(mc)}},{key:"contentHeight",get:function(){return this.viewState.heightMap.height+this.viewState.paddingTop+this.viewState.paddingBottom}},{key:"defaultCharacterWidth",get:function(){return this.viewState.heightOracle.charWidth}},
{key:"defaultLineHeight",get:function(){return this.viewState.heightOracle.lineHeight}},{key:"textDirection",get:function(){return this.viewState.heightOracle.direction}},{key:"lineWrapping",get:function(){return this.viewState.heightOracle.lineWrapping}},{key:"hasFocus",get:function(){return this.root.activeElement==this.contentDOM}}],[{key:"domEventHandlers",value:function(a){return $b.define(function(){return{}}).eventHandlers(a)}},{key:"theme",value:function(a,d){var e=Lb.StyleModule.newName();
a=[mc.of(e),rb.of(w(e,a))];d&&d.dark&&a.push(fc.of(!0));return a}},{key:"baseTheme",value:function(a){return(0,ya.precedence)(rb.of(w(gc,a)),"fallback")}}]);return c}();D.EditorView=Tb;Tb.styleModule=rb;Tb.inputHandler=Ya;Tb.exceptionSink=Pa;Tb.updateListener=Sa;Tb.editable=nb;Tb.dragMovesSelection=Ha;Tb.clickAddsSelectionRange=fa;Tb.mouseSelectionStyle=Ga;Tb.decorations=Wa;Tb.lineWrapping=Tb.theme({content:{whiteSpace:"pre-wrap"}});Tb.contentAttributes=Aa;Tb.editorAttributes=cc;var Kd=4096,Tc=-1,
pd={},od=function(){function c(a,d,e,h){qa(this,c);this.from=a;this.to=d;this.dir=e;this.order=h}ja(c,null,[{key:"update",value:function(a,d){if(d.empty)return a;for(var e=[],h=a.length?a[a.length-1].dir:Xb.LTR,k=Math.max(0,a.length-10);k<a.length;k++){var x=a[k];x.dir!=h||d.touchesRange(x.from,x.to)||e.push(new c(d.mapPos(x.from,1),d.mapPos(x.to,-1),x.dir,x.order))}return e}}]);return c}(),wd="undefined"==typeof navigator?"key":/Mac/.test(navigator.platform)?"mac":/Win/.test(navigator.platform)?
"win":/Linux|X11/.test(navigator.platform)?"linux":"key",ad=ya.Facet.define(),Bd=Tb.domEventHandlers({keydown:function(c,a){return ob(a.state.facet(ad),c,a,"editor")}}),oc=null,xd=4E3,Cd=ya.StateField.define({create:function(c){return Kb(c.selection)},update:function(c,a){return a.docChanged||a.selection?Kb(a.state.selection):c},provide:[Tb.decorations]}),Zc=function(c){function a(){qa(this,a);return Da(this,wa(a).apply(this,arguments))}xa(a,c);ja(a,[{key:"toDOM",value:function(){var d=document.createElement("span");
d.className=N("secondaryCursor");return d}}]);return a}(xb);Zc.deco=pb.widget({widget:new Zc(null)});var yd=pb.mark({"class":N("secondarySelection")}),Ld=/[\0-\x08\n-\x1F\x7F-\x9F\xAD\u061C\u200B\u200C\u200E\u200F\u2028\u2029\uFEFF\uFFF9-\uFFFC]/g,Md={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8233:"paragraph separator",
65279:"zero width no-break space",65532:"object replacement"},$c=null,qd=null!=/x/.unicode?"gu":"g",Mc=ya.Facet.define({combine:function(c){c=(0,ya.combineConfig)(c,{render:null,specialChars:Ld,addSpecialChars:null});if(c.replaceTabs=!jc())c.specialChars=new RegExp("\t|"+c.specialChars.source,qd);c.addSpecialChars&&(c.specialChars=new RegExp(c.specialChars.source+"|"+c.addSpecialChars.source,qd));return c}}),zd=$b.fromClass(function(){function c(a){qa(this,c);this.view=a;this.decorations=pb.none;
this.decorationCache=Object.create(null);this.recompute()}ja(c,[{key:"update",value:function(a){var d=a.prevState.facet(Mc)!=a.state.facet(Mc);d&&(this.decorationCache=Object.create(null));(d||a.changes.length||a.viewportChanged)&&this.recompute()}},{key:"recompute",value:function(){var a=[],d=!0,e=!1,h=void 0;try{for(var k=this.view.visibleRanges[Symbol.iterator](),x;!(d=(x=k.next()).done);d=!0){var K=x.value;this.getDecorationsFor(K.from,K.to,a)}}catch(V){e=!0,h=V}finally{try{if(!d&&null!=k["return"])k["return"]()}finally{if(e)throw h;
}}this.decorations=pb.set(a)}},{key:"getDecorationsFor",value:function(a,d,e){var h=this.view.state.facet(Mc),k=this.view.state.doc,x=a;for(a=k.iterRange(a,d);!a.next().done;){if(!a.lineBreak)for(;d=h.specialChars.exec(a.value);){var K=(0,lb.codePointAt)(d[0],0);if(null!=K){if(9==K){var V=k.lineAt(x+d.index);K=this.view.state.tabSize;V=(0,lb.countColumn)(k.sliceString(V.from,x+d.index),0,K);K=pb.replace({widget:new Nd((K-V%K)*this.view.defaultCharacterWidth)})}else K=this.decorationCache[K]||(this.decorationCache[K]=
pb.replace({widget:new Od(h,K)}));e.push(K.range(x+d.index,x+d.index+d[0].length))}}x+=a.value.length}}}]);return c}()).decorations(),Od=function(c){function a(d,e){qa(this,a);e=Da(this,wa(a).call(this,e));e.options=d;return e}xa(a,c);ja(a,[{key:"toDOM",value:function(){var d=this.value;d=32<=d?null:10==d?"␤":String.fromCharCode(9216+d);d=d||"•";var e="Control character "+(Md[this.value]||this.value),h=this.options.render&&this.options.render(this.value,e,d);if(h)return h;h=document.createElement("span");
h.textContent=d;h.title=e;h.setAttribute("aria-label",e);h.style.color="red";return h}},{key:"ignoreEvent",value:function(){return!1}}]);return a}(xb),Nd=function(c){function a(){qa(this,a);return Da(this,wa(a).apply(this,arguments))}xa(a,c);ja(a,[{key:"toDOM",value:function(){var d=document.createElement("span");d.textContent="\t";d.className=rd.tab;d.style.width=this.value+"px";return d}},{key:"ignoreEvent",value:function(){return!1}}]);return a}(xb),rd=new Lb.StyleModule({tab:{display:"inline-block",
overflow:"hidden",verticalAlign:"bottom"}}),Ad=Tb.styleModule.of(rd),kd=200;D.__test={HeightMap:f,HeightOracle:Oc,MeasuredHeights:sc,QueryType:b,ChangedRange:wb,computeOrder:Q,moveVisually:H}};
shadow$provide[7]=function(sa,Ra,ub,D){function Na(ka){for(var ba=0;ba<Ea.length;ba+=2)if(Ea.charCodeAt(ba)==ka)return Ea.charAt(ba+1);return(0,ja.fromCodePoint)(128>ka?ka:ka+1)}function Ka(ka,ba,U,I){var r=ka.state.selection.primary;if(2<I.length||2==I.length&&1==(0,ja.codePointSize)((0,ja.codePointAt)(I,0))||ba!=r.from||U!=r.to)return!1;ba=Da(ka.state,I);if(!ba)return!1;ka.dispatch(ba);return!0}function Da(ka,ba){var U=ka.languageDataAt("closeBrackets",ka.selection.primary.head)[0]||La,I=U.brackets||
La.brackets,r=!0,q=!1,B=void 0;try{for(var L=I[Symbol.iterator](),O;!(r=(O=L.next()).done);r=!0){var A=O.value,n=Na((0,ja.codePointAt)(A,0));if(ba==A)return n==A?Ba(ka,A,-1<I.indexOf(A+A+A)):wa(ka,A,n,U.before||La.before);if(ba==n)return xa(ka,A,n)}}catch(y){q=!0,B=y}finally{try{if(!r&&null!=L["return"])L["return"]()}finally{if(q)throw B;}}return null}function Ta(ka,ba){ka=ka.sliceString(ba,ba+2);return ka.slice(0,(0,ja.codePointSize)((0,ja.codePointAt)(ka,0)))}function wa(ka,ba,U,I){var r=null,q=
ka.changeByRange(function(B){if(!B.empty)return{changes:[{insert:ba,from:B.from},{insert:U,from:B.to}],range:za.EditorSelection.range(B.anchor+ba.length,B.head+ba.length)};var L=Ta(ka.doc,B.head);return!L||/\s/.test(L)||-1<I.indexOf(L)?{changes:{insert:ba+U,from:B.head},range:za.EditorSelection.cursor(B.head+ba.length)}:{range:r=B}});return r?null:ka.update(q,{scrollIntoView:!0})}function xa(ka,ba,U){var I=null;ba=ka.selection.ranges.map(function(r){return r.empty&&Ta(ka.doc,r.head)==U?za.EditorSelection.cursor(r.head+
U.length):I=r});return I?null:ka.update({selection:za.EditorSelection.create(ba,ka.selection.primaryIndex),scrollIntoView:!0})}function Ba(ka,ba,U){var I=null,r=ka.changeByRange(function(q){if(!q.empty)return{changes:[{insert:ba,from:q.from},{insert:ba,from:q.to}],range:za.EditorSelection.range(q.anchor+ba.length,q.head+ba.length)};var B=q.head,L=Ta(ka.doc,B);if(L==ba){if(Ia(ka,B))return{changes:{insert:ba+ba,from:B},range:za.EditorSelection.cursor(B+ba.length)};q=U&&ka.sliceDoc(B,B+3*ba.length)==
ba+ba+ba;return{range:za.EditorSelection.cursor(B+ba.length*(q?3:1))}}return U&&ka.sliceDoc(B-2*ba.length,B)==ba+ba&&Ia(ka,B-2*ba.length)?{changes:{insert:ba+ba+ba+ba,from:B},range:za.EditorSelection.cursor(B+ba.length)}:ka.charCategorizer(B)(L)!=za.CharCategory.Word&&(L=ka.sliceDoc(B-1,B),L!=ba&&ka.charCategorizer(B)(L)!=za.CharCategory.Word)?{changes:{insert:ba+ba,from:B},range:za.EditorSelection.cursor(B+ba.length)}:{range:I=q}});return I?null:ka.update(r,{scrollIntoView:!0})}function Ia(ka,ba){ka=
ka.tree.resolve(ba+1);return ka.parent&&ka.start==ba}Object.defineProperty(D,"__esModule",{value:!0});D.closeBrackets=function(){return qa.EditorView.inputHandler.of(Ka)};D.handleInsertion=Da;D.deleteBracketPair=D.closeBracketsKeymap=void 0;var qa=Ra(6),za=Ra(2),ja=Ra(0),La={brackets:["(","[","{","'",'"'],before:")]}'\":;\x3e"},Ea="()[]{}\x3c\x3e";sa=function(ka){var ba=ka.state;ka=ka.dispatch;var U=(ba.languageDataAt("closeBrackets",ba.selection.primary.head)[0]||La).brackets||La.brackets,I=null,
r=ba.changeByRange(function(q){if(q.empty){var B=q.head;B=ba.doc.sliceString(B-2,B);B=(0,ja.codePointSize)((0,ja.codePointAt)(B,0))==B.length?B:B.slice(1);var L=!0,O=!1,A=void 0;try{for(var n=U[Symbol.iterator](),y;!(L=(y=n.next()).done);L=!0){var u=y.value;if(u==B&&Ta(ba.doc,q.head)==Na((0,ja.codePointAt)(u,0)))return{changes:{from:q.head-u.length,to:q.head+u.length},range:za.EditorSelection.cursor(q.head-u.length)}}}catch(p){O=!0,A=p}finally{try{if(!L&&null!=n["return"])n["return"]()}finally{if(O)throw A;
}}}return{range:I=q}});I||ka(ba.update(r,{scrollIntoView:!0}));return!I};D.deleteBracketPair=sa;D.closeBracketsKeymap=[{key:"Backspace",run:sa}]};
shadow$provide[8]=function(sa,Ra,ub,D){function Na(ba,U){if(!(ba instanceof U))throw new TypeError("Cannot call a class as a function");}function Ka(ba,U){for(var I=0;I<U.length;I++){var r=U[I];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(ba,r.key,r)}}function Da(ba,U,I){U&&Ka(ba.prototype,U);I&&Ka(ba,I);return ba}Object.defineProperty(D,"__esModule",{value:!0});D.styleTags=D.highlighter=D.defaultTags=D.defaultHighlighter=D.TagSystem=void 0;var Ta=
Ra(1),wa=Ra(3),xa=Ra(6),Ba=Ra(2),Ia=Ra(4);sa=function(){function ba(U){var I=this;Na(this,ba);this.typeNames=[""];this.typeIDs=Object.create(null);this.prop=new Ta.NodeProp;this.flags=U.flags;this.types=U.types;this.flagMask=Math.pow(2,this.flags.length)-1;this.typeShift=this.flags.length;var r=U.subtypes||0,q=[void 0];this.typeIDs[""]=0;var B=1,L=!0,O=!1,A=void 0;try{for(var n=U.types[Symbol.iterator](),y;!(L=(y=n.next()).done);L=!0){var u=y.value,p=/^([\w\-]+)(?:=([\w-]+))?$/.exec(u);if(!p)throw new RangeError("Invalid type name "+
u);var t=B++;this.typeNames[t]=p[1];this.typeIDs[p[1]]=t;q[t]=p[2];for(U=0;U<r;U++){var w=B++,N=p[1]+"#"+(U+1);this.typeNames[w]=N;this.typeIDs[N]=w;q[w]=p[1]}}}catch(T){O=!0,A=T}finally{try{if(!L&&null!=n["return"])n["return"]()}finally{if(O)throw A;}}this.parents=q.map(function(T){if(null==T)return 0;var Q=I.typeIDs[T];if(null==Q)throw new RangeError("Unknown parent type '".concat(T,"' specified"));return Q});if(30<this.flags.length||this.typeNames.length>Math.pow(2,30-this.flags.length))throw new RangeError("Too many style tag flags to fit in a 30-bit integer");
}Da(ba,[{key:"get",value:function(U){var I=0,r=!0,q=!1,B=void 0;try{for(var L=U.split(" ")[Symbol.iterator](),O;!(r=(O=L.next()).done);r=!0){var A=O.value;if(A){var n=this.flags.indexOf(A);if(-1<n)I+=1<<n;else{var y=this.typeIDs[A];if(null==y)throw new RangeError("Unknown tag type '".concat(A,"'"));if(I>>this.typeShift)throw new RangeError("Multiple tag types specified in '".concat(U,"'"));I+=y<<this.typeShift}}}}catch(u){q=!0,B=u}finally{try{if(!r&&null!=L["return"])L["return"]()}finally{if(q)throw B;
}}return I}},{key:"getWithMode",value:function(U){var I="+"==U[0]?1:"!"==U[0]?0:2;return{mode:I,tag:this.get(2==I?U:U.slice(1))}}},{key:"addTagProp",value:function(U){var I=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this.getWithMode(U);return this.prop.set(I,new ja(r.tag,r.mode,za))}},{key:"add",value:function(U){var I=Object.create(null),r;for(r in U){var q=this.getWithMode(U[r]),B=q.mode;q=q.tag;var L=!0,O=!1,A=void 0;try{for(var n=r.split(" ")[Symbol.iterator](),y;!(L=(y=n.next()).done);L=
!0){var u=y.value.split("/"),p=u[u.length-1],t=1<u.length?u.slice(0,u.length-1).map(function(N){return"*"==N?null:N}):za,w=new ja(q,B,t);I[p]=w.sort(I[p])}}catch(N){O=!0,A=N}finally{try{if(!L&&null!=n["return"])n["return"]()}finally{if(O)throw A;}}}return this.prop.add(I)}},{key:"highlighter",value:function(U){var I=this,r=new Ea(this,U);return[xa.ViewPlugin.define(function(q){return new ka(q,I.prop,r)}).decorations(),xa.EditorView.styleModule.of(r.module)]}},{key:"specificity",value:function(U){for(var I=
U&this.flagMask,r=0,q=1;q<=this.flags.length;q++)I&1<<q&&r++;for(U>>=this.typeShift;U;U=this.parents[U])r+=1E3;return r}}]);return ba}();D.TagSystem=sa;var qa=new sa({flags:"invalid meta standard definition constant local control link strong emphasis monospace changed inserted deleted".split(" "),subtypes:7,types:"comment lineComment\x3dcomment blockComment\x3dcomment docComment\x3dcomment name variableName\x3dname typeName\x3dname propertyName\x3dname className\x3dname labelName\x3dname functionName\x3dname namespace\x3dname literal string\x3dliteral docString\x3dstring character\x3dstring number\x3dliteral integer\x3dnumber float\x3dnumber regexp\x3dliteral escape\x3dliteral color\x3dliteral content heading\x3dcontent list\x3dcontent quote\x3dcontent keyword self\x3dkeyword null\x3dkeyword atom\x3dkeyword unit\x3dkeyword modifier\x3dkeyword operatorKeyword\x3dkeyword operator derefOperator\x3doperator arithmeticOperator\x3doperator logicOperator\x3doperator bitwiseOperator\x3doperator compareOperator\x3doperator updateOperator\x3doperator typeOperator\x3doperator punctuation separator\x3dpunctuation bracket\x3dpunctuation angleBracket\x3dbracket squareBracket\x3dbracket paren\x3dbracket brace\x3dbracket".split(" ")});
D.defaultTags=qa;var za=[],ja=function(){function ba(U,I,r,q){Na(this,ba);this.tag=U;this.mode=I;this.context=r;this.next=q}Da(ba,[{key:"sort",value:function(U){if(!U||U.context.length<this.context.length)return this.next=U,this;U.next=this.sort(U.next);return U}}]);return ba}();D.styleTags=function(ba){return qa.add(ba)};sa=function(ba){return qa.highlighter(ba)};D.highlighter=sa;var La=function B(U,I,r,q){Na(this,B);this.type=U;this.flags=I;this.specificity=r;this.cls=q},Ea=function(){function U(I,
r){Na(this,U);this.tags=I;this.cache=Object.create(null);var q=Object.create(null),B=0,L=[],O;for(O in r){var A="c"+B++;q[A]=r[O];var n=!0,y=!1,u=void 0;try{for(var p=O.split(/\s*,\s*/)[Symbol.iterator](),t;!(n=(t=p.next()).done);n=!0){var w=I.get(t.value);L.push(new La(w>>I.typeShift,w&I.flagMask,I.specificity(w),A))}}catch(N){y=!0,u=N}finally{try{if(!n&&null!=p["return"])p["return"]()}finally{if(y)throw u;}}}this.rules=L.sort(function(N,T){return T.specificity-N.specificity});this.module=new wa.StyleModule(q)}
Da(U,[{key:"match",value:function(I){var r=this.cache[I];if(null!=r)return r;r="";for(var q=I>>this.tags.typeShift,B=I&this.tags.flagMask;;){var L=!0,O=!1,A=void 0;try{for(var n=this.rules[Symbol.iterator](),y;!(L=(y=n.next()).done);L=!0){var u=y.value;if(u.type==q&&(u.flags&B)==u.flags&&(r&&(r+=" "),r+=this.module[u.cls],B&=~u.flags,q))break}}catch(p){O=!0,A=p}finally{try{if(!L&&null!=n["return"])n["return"]()}finally{if(O)throw A;}}if(q)q=this.tags.parents[q];else break}return this.cache[I]=r}}]);
return U}(),ka=function(){function U(I,r,q){Na(this,U);this.prop=r;this.styling=q;this.nodeStack=[""];this.classStack=[""];this.inheritStack=[""];this.tree=I.state.tree;this.decorations=this.buildDeco(I.visibleRanges,this.tree)}Da(U,[{key:"update",value:function(I){var r=I.state.facet(Ba.EditorState.syntax);if(!r.length)this.decorations=xa.Decoration.none;else if(r[0].parsePos(I.state)<I.view.viewport.to)this.decorations=this.decorations.map(I.changes);else if(this.tree!=r[0].getTree(I.state)||I.viewportChanged)this.tree=
r[0].getTree(I.state),this.decorations=this.buildDeco(I.view.visibleRanges,this.tree)}},{key:"buildDeco",value:function(I,r){function q(M,P){M>O&&P&&L.add(O,M,xa.Decoration.mark({"class":P}));O=M}var B=this,L=new Ia.RangeSetBuilder,O,A,n,y=this.nodeStack,u=this.classStack,p=this.inheritStack,t=!0,w=!1,N=void 0;try{for(var T=function(){var M=H.value,P=M.from,Z=M.to;A="";n=0;O=P;r.iterate({from:P,to:Z,enter:function(ha,Ca){n++;for(var Fa=p[n-1],Ma=Fa,Xa=ha.prop(B.prop),bb=!1;Xa;){var gb;if(!(gb=!Xa.context.length))a:if(gb=
Xa.context,gb.length>n-1)gb=!1;else{for(var Hb=n-1,Db=gb.length-1;0<=Db;Db--,Hb--){var yb=gb[Db];if(yb&&yb!=y[Hb]){gb=!1;break a}}gb=!0}if(gb){if(gb=B.styling.match(Xa.tag))Ma&&(Ma+=" "),Ma+=gb,1==Xa.mode?Fa=Ma:0==Xa.mode&&(bb=!0);break}Xa=Xa.next}Ma!=A&&(q(Ca,A),A=Ma);if(bb)return n--,!1;u[n]=Ma;p[n]=Fa;y[n]=ha.name},leave:function(ha,Ca,Fa){n--;ha=u[n];ha!=A&&(q(Math.min(Z,Fa),A),A=ha)}})},Q=I[Symbol.iterator](),H;!(t=(H=Q.next()).done);t=!0)T()}catch(M){w=!0,N=M}finally{try{if(!t&&null!=Q["return"])Q["return"]()}finally{if(w)throw N;
}}return L.finish()}}]);return U}();sa=sa({deleted:{textDecoration:"line-through"},inserted:{textDecoration:"underline"},link:{textDecoration:"underline"},strong:{fontWeight:"bold"},emphasis:{fontStyle:"italic"},invalid:{color:"#f00"},keyword:{color:"#708"},atom:{color:"#219"},number:{color:"#164"},string:{color:"#a11"},"regexp, escape":{color:"#e40"},"variableName definition":{color:"#00f"},typeName:{color:"#085"},className:{color:"#167"},"propertyName definition":{color:"#00c"},comment:{color:"#940"},
meta:{color:"#555"}});D.defaultHighlighter=sa};
shadow$provide[9]=function(sa,Ra,ub,D){function Na(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function");}function Ka(u,p){for(var t=0;t<p.length;t++){var w=p[t];w.enumerable=w.enumerable||!1;w.configurable=!0;"value"in w&&(w.writable=!0);Object.defineProperty(u,w.key,w)}}function Da(u,p,t){p&&Ka(u.prototype,p);t&&Ka(u,t);return u}function Ta(u,p){return function(t){var w=t.state;t=t.dispatch;var N=w.field(q,!1);if(!N)return!1;w=N.pop(u,w,p);if(!w)return!1;t(w);return!0}}
function wa(u){return function(p){p=p.field(q,!1);if(!p)return 0;p=0==u?p.done:p.undone;return p.length-(p.length&&!p[0].changes?1:0)}}function xa(u,p,t,w){u=u.slice(p+1>t+20?p-t-1:0,p);u.push(w);return u}function Ba(u,p){var t=[],w=!1;u.iterChangedRanges(function(N,T){return t.push(N,T)});p.iterChangedRanges(function(N,T,Q,H){for(N=0;N<t.length;){T=t[N++];var M=t[N++];H>=T&&Q<=M&&(w=!0)}});return w}function Ia(u,p){return u.ranges.length==p.ranges.length&&0===u.ranges.filter(function(t,w){return t.empty!=
p.ranges[w].empty}).length}function qa(u,p){return u.length?p.length?u.concat(p):u:p}function za(u,p){if(u.length){var t=u[u.length-1],w=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-n));if(w.length&&w[w.length-1].eq(p))return u;w.push(p);return xa(u,u.length-1,1E9,t.setSelAfter(w))}return[O.selection([p])]}function ja(u){var p=u[u.length-1],t=u.slice();t[u.length-1]=p.setSelAfter(p.selectionsAfter.slice(0,p.selectionsAfter.length-1));return t}function La(u,p){if(!u.length)return u;
for(var t=u.length,w=A;t;){w=Ea(u[t-1],p,w);if(w.changes&&!w.changes.empty||w.effects.length)return u=u.slice(0,t),u[t-1]=w,u;p=w.mapped;t--;w=w.selectionsAfter}return w.length?[O.selection(w)]:A}function Ea(u,p,t){t=qa(u.selectionsAfter.length?u.selectionsAfter.map(function(T){return T.map(p)}):A,t);if(!u.changes)return O.selection(t);var w=u.changes.map(p),N=p.mapDesc(u.changes,!0);N=u.mapped?u.mapped.composeDesc(N):N;return new O(w,ka.StateEffect.mapEffects(u.effects,p),N,u.startSelection.map(p),
t)}Object.defineProperty(D,"__esModule",{value:!0});D.history=function(){return[q,r.of(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})]};D.undoSelection=D.undoDepth=D.undo=D.redoSelection=D.redoDepth=D.redo=D.isolateHistory=D.invertedEffects=D.historyKeymap=void 0;var ka=Ra(2),ba=ka.Annotation.define(),U=ka.Annotation.define();D.isolateHistory=U;var I=ka.Facet.define();D.invertedEffects=I;var r=ka.Facet.define({combine:function(u){return(0,ka.combineConfig)(u,{minDepth:100,newGroupDelay:500},
{minDepth:Math.max,newGroupDelay:Math.min})}}),q=ka.StateField.define({create:function(){return y.empty},update:function(u,p){var t=p.state.facet(r),w=p.annotation(ba);if(w){var N=O.fromTransaction(p),T=w.side;u=0==T?u.undone:u.done;u=N?xa(u,u.length,t.minDepth,N):za(u,p.startState.selection);return new y(0==T?w.rest:u,0==T?u:w.rest)}w=p.annotation(U);if("full"==w||"before"==w)u=u.isolate();if(!1===p.annotation(ka.Transaction.addToHistory))return p.changes.length?u.addMapping(p.changes.desc):u;N=
O.fromTransaction(p);T=p.annotation(ka.Transaction.time);var Q=p.annotation(ka.Transaction.userEvent);N?u=u.addChanges(N,T,Q,t.newGroupDelay,t.minDepth):p.selection&&(u=u.addSelection(p.startState.selection,T,Q,t.newGroupDelay));if("full"==w||"after"==w)u=u.isolate();return u}});sa=Ta(0,!1);D.undo=sa;Ra=Ta(1,!1);D.redo=Ra;ub=Ta(0,!0);D.undoSelection=ub;var B=Ta(1,!0);D.redoSelection=B;var L=wa(0);D.undoDepth=L;L=wa(1);D.redoDepth=L;var O=function(){function u(p,t,w,N,T){Na(this,u);this.changes=p;
this.effects=t;this.mapped=w;this.startSelection=N;this.selectionsAfter=T}Da(u,[{key:"setSelAfter",value:function(p){return new u(this.changes,this.effects,this.mapped,this.startSelection,p)}}],[{key:"fromTransaction",value:function(p){var t=A,w=!0,N=!1,T=void 0;try{for(var Q=p.startState.facet(I)[Symbol.iterator](),H;!(w=(H=Q.next()).done);w=!0){var M=H.value,P=M(p);P.length&&(t=t.concat(P))}}catch(Z){N=!0,T=Z}finally{try{if(!w&&null!=Q["return"])Q["return"]()}finally{if(N)throw T;}}return!t.length&&
p.changes.empty?null:new u(p.changes.invert(p.startState.doc),t,void 0,p.startState.selection,A)}},{key:"selection",value:function(p){return new u(void 0,A,void 0,void 0,p)}}]);return u}(),A=[],n=200,y=function(){function u(p,t){var w=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,N=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;Na(this,u);this.done=p;this.undone=t;this.prevTime=w;this.prevUserEvent=N}Da(u,[{key:"isolate",value:function(){return this.prevTime?new u(this.done,
this.undone):this}},{key:"addChanges",value:function(p,t,w,N,T){var Q=this.done,H=Q[Q.length-1];Q=H&&H.changes&&t-this.prevTime<N&&!H.selectionsAfter.length&&H.changes.length&&p.changes&&Ba(H.changes,p.changes)?xa(Q,Q.length-1,T,new O(p.changes.compose(H.changes),qa(p.effects,H.effects),H.mapped,H.startSelection,A)):xa(Q,Q.length,T,p);return new u(Q,A,t,w)}},{key:"addSelection",value:function(p,t,w,N){var T=this.done.length?this.done[this.done.length-1].selectionsAfter:A;return 0<T.length&&t-this.prevTime<
N&&"keyboardselection"==w&&this.prevUserEvent==w&&Ia(T[T.length-1],p)?this:new u(za(this.done,p),this.undone,t,w)}},{key:"addMapping",value:function(p){return new u(La(this.done,p),La(this.undone,p),this.prevTime,this.prevUserEvent)}},{key:"pop",value:function(p,t,w){var N=0==p?this.done:this.undone;if(0==N.length)return null;var T=N[N.length-1];return w&&T.selectionsAfter.length?t.update({selection:T.selectionsAfter[T.selectionsAfter.length-1],annotations:ba.of({side:p,rest:ja(N)})}):T.changes?(w=
1==N.length?A:N.slice(0,N.length-1),T.mapped&&(w=La(w,T.mapped)),t.update({changes:T.changes,selection:T.startSelection,effects:T.effects,annotations:ba.of({side:p,rest:w}),filter:!1})):null}}]);return u}();y.empty=new y(A,A);D.historyKeymap=[{key:"Mod-z",run:sa,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ra,preventDefault:!0},{key:"Mod-u",run:ub,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:B,preventDefault:!0}]};
shadow$provide[10]=function(sa,Ra,ub,D){function Na(Ea,ka,ba){var U=Ea.prop(0>ka?xa.NodeProp.openedBy:xa.NodeProp.closedBy);return U?U:1==Ea.name.length&&(Ea=ba.indexOf(Ea.name),-1<Ea&&Ea%2==(0>ka?1:0))?[ba[Ea+ka]]:null}function Ka(Ea,ka,ba){var U=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},I=U.maxScanDistance||Ba;U=U.brackets||Ia;var r=Ea.tree,q=r.resolve(ka,ba),B;if(B=Na(q.type,ba,U))return Da(Ea,ka,ba,q,B,U);a:if(q=q.type,B=0>ba?Ea.sliceDoc(ka-1,ka):Ea.sliceDoc(ka,ka+1),B=U.indexOf(B),
0>B||0==B%2!=0<ba)I=null;else{for(var L={from:0>ba?ka-1:ka,to:0<ba?ka+1:ka},O=Ea.doc.iterRange(ka,0<ba?Ea.doc.length:0),A=0,n=0;!O.next().done&&n<=I;){var y=O.value;0>ba&&(n+=y.length);for(var u=ka+n*ba,p=0<ba?0:y.length-1,t=0<ba?y.length:-1;p!=t;p+=ba){var w=U.indexOf(y[p]);if(!(0>w||r.resolve(u+p,1).type!=q))if(0==w%2==0<ba)A++;else if(1==A){I={start:L,end:{from:u+p,to:u+p+1},matched:w>>1==B>>1};break a}else A--}0<ba&&(n+=y.length)}I=O.done?{start:L,matched:!1}:null}return I}function Da(Ea,ka,ba,
U,I,r){Ea=U.parent;var q={from:U.start,to:U.end},B=0;return Ea&&Ea.iterate({from:0>ba?U.start:U.end,to:0>ba?Ea.start:Ea.end,enter:function(L,O,A){if(!(0>ba?A>U.start:O<U.end)){if(0==B&&-1<I.indexOf(L.name))return{start:q,end:{from:O,to:A},matched:!0};if(Na(L,ba,r))B++;else if(Na(L,-ba,r)&&(B--,0==B))return{start:q,end:{from:O,to:A},matched:!1};return!1}}})||{start:q,matched:!1}}Object.defineProperty(D,"__esModule",{value:!0});D.bracketMatching=function(){return[qa.of(0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{}),La]};D.matchBrackets=Ka;var Ta=Ra(2),wa=Ra(6),xa=Ra(1);sa=wa.EditorView.baseTheme({matchingBracket:{color:"#0b0"},nonmatchingBracket:{color:"#a22"}});var Ba=1E4,Ia="()[]{}",qa=Ta.Facet.define({combine:function(Ea){return(0,Ta.combineConfig)(Ea,{afterCursor:!0,brackets:Ia,maxScanDistance:Ba})}}),za=wa.Decoration.mark({"class":(0,wa.themeClass)("matchingBracket")}),ja=wa.Decoration.mark({"class":(0,wa.themeClass)("nonmatchingBracket")}),La=[Ta.StateField.define({create:function(){return wa.Decoration.none},
update:function(Ea,ka){if(!ka.docChanged&&!ka.selection)return Ea;Ea=[];var ba=ka.state.facet(qa),U=!0,I=!1,r=void 0;try{for(var q=ka.state.selection.ranges[Symbol.iterator](),B;!(U=(B=q.next()).done);U=!0){var L=B.value;if(L.empty){var O=Ka(ka.state,L.head,-1,ba)||0<L.head&&Ka(ka.state,L.head-1,1,ba)||ba.afterCursor&&(Ka(ka.state,L.head,1,ba)||L.head<ka.state.doc.length&&Ka(ka.state,L.head+1,-1,ba));if(O){var A=O.matched?za:ja;Ea.push(A.range(O.start.from,O.start.to));O.end&&Ea.push(A.range(O.end.from,
O.end.to))}}}}catch(n){I=!0,r=n}finally{try{if(!U&&null!=q["return"])q["return"]()}finally{if(I)throw r;}}return wa.Decoration.set(Ea,!0)},provide:[wa.EditorView.decorations]}),sa]};
shadow$provide[11]=function(sa,Ra,ub,D){function Na(p,t,w){t in p?Object.defineProperty(p,t,{value:w,enumerable:!0,configurable:!0,writable:!0}):p[t]=w;return p}function Ka(p){Ka="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return Ka(p)}function Da(p,t){if(!(p instanceof t))throw new TypeError("Cannot call a class as a function");}function Ta(p,
t){for(var w=0;w<t.length;w++){var N=t[w];N.enumerable=N.enumerable||!1;N.configurable=!0;"value"in N&&(N.writable=!0);Object.defineProperty(p,N.key,N)}}function wa(p,t,w){t&&Ta(p.prototype,t);w&&Ta(p,w);return p}function xa(p){xa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return xa(p)}function Ba(p,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(t&&
t.prototype,{constructor:{value:p,writable:!0,configurable:!0}});t&&Ia(p,t)}function Ia(p,t){Ia=Object.setPrototypeOf||function(w,N){w.__proto__=N;return w};return Ia(p,t)}function qa(p){return I.EditorState.indentation.of(function(t,w){a:{for(var N=p.getTree(t.state).resolve(w),T=N,Q=w;;){Q=T.childBefore(Q);if(!Q)break;Q.type.prop(U.NodeProp.error)&&Q.start==Q.end?(N=T,Q=Q.start):(T=Q,Q=T.end+1)}for(;N;N=N.parent)if(T=za(N)){t=T(new B(t,w,N));break a}t=-1}return t})}function za(p){var t=p.type.prop(q);
if(t)return t;t=p.firstChild;var w;if(t&&(w=t.type.prop(U.NodeProp.closedBy))){var N=p.lastChild,T=N&&-1<w.indexOf(N.name);return function(Q){var H;if(H=T){var M,P;H=!(Q.pos==(null===(M=Q.options)||void 0===M?void 0:M.simulateBreak)&&(null===(P=Q.options)||void 0===P?0:P.simulateDoubleBreak))}return La(Q,!0,1,void 0,H?N.start:void 0)}}return null==p.parent?ja:null}function ja(){return 0}function La(p,t,w,N,T){var Q=p.textAfter,H=Q.match(/^\s*/)[0].length;N=N&&Q.slice(H,H+N.length)==N||T==p.pos+H;
var M;if(t)a:if(t=p.node,T=t.childAfter(t.start),Q=t.lastChild,T)for(H=null===(M=p.options)||void 0===M?void 0:M.simulateBreak,M=p.state.doc.lineAt(T.start),M=null==H||H<=M.from?M.to:Math.min(M.to,H),H=T.end;;){H=t.childAfter(H);if(!H||H==Q){M=null;break a}if(!H.type.prop(U.NodeProp.skipped)){M=H.start<M?T:null;break a}H=H.end}else M=null;else M=null;return M?N?p.column(M.start):p.column(M.end):p.baseIndent+(N?0:p.unit*w)}function Ea(p){return I.EditorState.foldable.of(function(t,w,N){for(var T=null,
Q=p.getTree(t).resolve(N);Q;Q=Q.parent)if(!(Q.end<=N||Q.start>N)){if(T&&Q.start<w)break;var H=Q.type.prop(L);H&&(H=H(Q,t))&&H.from<=N&&H.from>=w&&H.to>N&&(T=H)}return T})}function ka(p,t){for(var w=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5E6,N=Date.now()+t;;){var T=p.advance();if(T)return T;if(p.pos>w||Date.now()>N)return null}}function ba(p,t){var w=p.forceFinish();p=w.applyChanges([{fromA:p.pos,toA:w.length,fromB:p.pos,toB:w.length}]).append(t.applyChanges([{fromA:0,toA:p.pos,fromB:0,
toB:p.pos}]));return{parsed:w,cache:p}}Object.defineProperty(D,"__esModule",{value:!0});D.continuedIndent=function(){var p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=p.except;p=p.units;var w=void 0===p?1:p;return function(N){var T=t&&t.test(N.textAfter);return N.baseIndent+(T?0:w*N.unit)}};D.delimitedIndent=function(p){var t=p.closing,w=p.align,N=void 0===w?!0:w;p=p.units;var T=void 0===p?1:p;return function(Q){return La(Q,N,T,t)}};D.indentNodeProp=D.foldNodeProp=D.flatIndent=D.TreeIndentContext=
D.LezerSyntax=void 0;var U=Ra(1),I=Ra(2),r=Ra(6),q=new U.NodeProp;D.indentNodeProp=q;var B=function(p){function t(w,N,T){Da(this,t);w=xa(t).call(this,w.state,w.options);if(!w||"object"!==Ka(w)&&"function"!==typeof w){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");w=this}w.pos=N;w.node=T;return w}Ba(t,p);wa(t,[{key:"textAfter",get:function(){return this.textAfterPos(this.pos)}},{key:"baseIndent",get:function(){for(var w=this.state.doc.lineAt(this.node.start);;){for(var N=
this.node.resolve(w.from);N.parent&&N.parent.start==N.start;)N=N.parent;var T;a:{for(T=this.node;T;T=T.parent)if(N==T){T=!0;break a}T=!1}if(T)break;w=this.state.doc.lineAt(N.start)}return this.lineIndent(w)}}]);return t}(I.IndentContext);D.TreeIndentContext=B;D.flatIndent=function(p){return p.baseIndent};var L=new U.NodeProp;D.foldNodeProp=L;sa=function(){function p(t,w,N){var T=this;Da(this,p);this.parser=t;this.dialect=w;this.languageData=N;var Q=I.StateEffect.define();this.field=I.StateField.define({create:function(H){return A.advance(U.Tree.empty,
T,H.doc)},update:function(H,M){return H.apply(M,T,Q)}});this.extension=[I.EditorState.syntax.of(this),this.field,r.ViewPlugin.define(function(H){return new u(H,T,Q)}),qa(this),Ea(this)]}wa(p,[{key:"withDialect",value:function(t){return new p(this.parser,t,this.languageData)}},{key:"getTree",value:function(t){return t.field(this.field).tree}},{key:"parsePos",value:function(t){return t.field(this.field).upto}},{key:"ensureTree",value:function(t,w){var N=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
100,T=t.field(this.field);if(T.upto>=w)return T.updatedTree;T.parse||T.startParse(this,t.doc);return T.parse.pos<w&&(N=ka(T.parse,N,w))?T.stopParse(N,t.doc.length):T.parse.pos<w?null:T.stopParse()}},{key:"languageDataFacetAt",value:function(t,w){if(this.parser.hasNested)for(t=this.getTree(t).resolve(w,-1);t;){if(w=t.type.prop(I.languageDataProp))return w;t=t.parent}return this.languageData}}],[{key:"define",value:function(t){var w=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},N=I.Facet.define({combine:w.languageData?
function(T){return T.concat(w.languageData)}:void 0});return new p(t.withProps(I.languageDataProp.add(Na({},t.topType.name,N))),w.dialect||"",N)}}]);return p}();D.LezerSyntax=sa;var O=function(){function p(t){var w=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t.length;Da(this,p);this.doc=t;this.length=w;this.cursorPos=0;this.string="";this.cursor=t.iter()}wa(p,[{key:"get",value:function(t){if(t>=this.length)return-1;var w=this.cursorPos-this.string.length;if(t<w||t>=this.cursorPos)t<this.cursorPos&&
(this.cursor=this.doc.iter(),this.cursorPos=0),this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,w=this.cursorPos-this.string.length;return this.string.charCodeAt(t-w)}},{key:"read",value:function(t,w){var N=this.cursorPos-this.string.length;return t<N||w>=this.cursorPos?this.doc.sliceString(t,w):this.string.slice(t-N,w-N)}},{key:"clip",value:function(t){return new p(this.doc,t)}}]);return p}(),A=function(){function p(t,w,N){Da(this,p);this.tree=t;this.upto=
w;this.cache=N;this.parse=null;this.updatedTree=t}wa(p,[{key:"apply",value:function(t,w,N){var T=!0,Q=!1,H=void 0;try{for(var M=t.effects[Symbol.iterator](),P;!(T=(P=M.next()).done);T=!0){var Z=P.value;if(Z.is(N))return Z.value}}catch(Ca){Q=!0,H=Ca}finally{try{if(!T&&null!=M["return"])M["return"]()}finally{if(Q)throw H;}}if(!t.docChanged)return this;var ha=[];t.changes.iterChangedRanges(function(Ca,Fa,Ma,Xa){return ha.push({fromA:Ca,toA:Fa,fromB:Ma,toB:Xa})});return p.advance((this.parse?ba(this.parse,
this.updatedTree).cache:this.cache).applyChanges(ha),w,t.state.doc)}},{key:"startParse",value:function(t,w){this.parse=t.parser.startParse(new O(w),{cache:this.cache,dialect:t.dialect})}},{key:"stopParse",value:function(t,w){if(t)this.cache=t;else{var N=ba(this.parse,this.updatedTree);t=N.parsed;this.cache=N.cache}this.updatedTree=t;this.upto=null!==w&&void 0!==w?w:this.parse.pos;this.parse=null;return t}}],[{key:"advance",value:function(t,w,N){w=w.parser.startParse(new O(N),{cache:t,dialect:w.dialect});
var T=ka(w,25);if(T)return new p(T,N.length,T);t=ba(w,t);return new p(t.parsed,w.pos,t.cache)}}]);return p}(),n="undefined"!=typeof window&&window.requestIdleCallback||function(p,t){return setTimeout(p,t.timeout)},y="undefined"!=typeof window&&window.cancelIdleCallback||clearTimeout,u=function(){function p(t,w,N){Da(this,p);this.view=t;this.syntax=w;this.setSyntax=N;this.working=-1;this.work=this.work.bind(this);this.scheduleWork()}wa(p,[{key:"update",value:function(t){t.docChanged&&this.scheduleWork()}},
{key:"scheduleWork",value:function(){if(!(-1<this.working)){var t=this.view.state;t.field(this.syntax.field).upto>=t.doc.length||(this.working=n(this.work,{timeout:200}))}}},{key:"work",value:function(t){this.working=-1;var w=this.view.state,N=w.field(this.syntax.field);N.upto>=w.doc.length||(N.parse||N.startParse(this.syntax,w.doc),(t=ka(N.parse,t?Math.max(25,t.timeRemaining()):100))||.8<N.parse.badness?(t=N.stopParse(t,w.doc.length),this.view.dispatch({effects:this.setSyntax.of(new A(t,w.doc.length,
N.cache))})):this.scheduleWork())}},{key:"destroy",value:function(){0<=this.working&&y(this.working)}}]);return p}()};
shadow$provide[12]=function(sa,Ra,ub,D){function Na(){throw Error("setTimeout has not been defined");}function Ka(){throw Error("clearTimeout has not been defined");}function Da(ba){if(qa===setTimeout)return setTimeout(ba,0);if((qa===Na||!qa)&&setTimeout)return qa=setTimeout,setTimeout(ba,0);try{return qa(ba,0)}catch(U){try{return qa.call(null,ba,0)}catch(I){return qa.call(this,ba,0)}}}function Ta(ba){if(za===clearTimeout)return clearTimeout(ba);if((za===Ka||!za)&&clearTimeout)return za=clearTimeout,
clearTimeout(ba);try{return za(ba)}catch(U){try{return za.call(null,ba)}catch(I){return za.call(this,ba)}}}function wa(){La&&Ea&&(La=!1,Ea.length?ja=Ea.concat(ja):ka=-1,ja.length&&xa())}function xa(){if(!La){var ba=Da(wa);La=!0;for(var U=ja.length;U;){Ea=ja;for(ja=[];++ka<U;)Ea&&Ea[ka].run();ka=-1;U=ja.length}Ea=null;La=!1;Ta(ba)}}function Ba(ba,U){this.fun=ba;this.array=U}function Ia(){}sa=ub.exports={};try{var qa="function"===typeof setTimeout?setTimeout:Na}catch(ba){qa=Na}try{var za="function"===
typeof clearTimeout?clearTimeout:Ka}catch(ba){za=Ka}var ja=[],La=!1,Ea,ka=-1;sa.nextTick=function(ba){var U=Array(arguments.length-1);if(1<arguments.length)for(var I=1;I<arguments.length;I++)U[I-1]=arguments[I];ja.push(new Ba(ba,U));1!==ja.length||La||Da(xa)};Ba.prototype.run=function(){this.fun.apply(null,this.array)};sa.title="browser";sa.browser=!0;sa.env={};sa.argv=[];sa.version="";sa.versions={};sa.on=Ia;sa.addListener=Ia;sa.once=Ia;sa.off=Ia;sa.removeListener=Ia;sa.removeAllListeners=Ia;sa.emit=
Ia;sa.prependListener=Ia;sa.prependOnceListener=Ia;sa.listeners=function(ba){return[]};sa.binding=function(ba){throw Error("process.binding is not supported");};sa.cwd=function(){return"/"};sa.chdir=function(ba){throw Error("process.chdir is not supported");};sa.umask=function(){return 0}};
shadow$provide[13]=function(sa,Ra,ub,D){function Na(A,n){function y(){this.constructor=A}Ba(A,n);A.prototype=null===n?Object.create(n):(y.prototype=n.prototype,new y)}function Ka(A,n){void 0===n&&(n=Uint16Array);for(var y=null,u=0,p=0;u<A.length;){for(var t=0;;){var w=A.charCodeAt(u++),N=!1;if(126==w){t=65535;break}92<=w&&w--;34<=w&&w--;w-=32;46<=w&&(w-=46,N=!0);t+=w;if(N)break;t*=46}y?y[p++]=t:y=new n(t)}return y}function Da(A,n,y){for(var u=n,p;65535!=(p=A[u]);u++)if(p==y)return u-n;return-1}function Ta(A){for(var n=
null,y=0;y<A.length;y++){var u=A[y];u.pos==u.cx.input.length&&u.cx.parser.stateFlag(u.state,2)&&(!n||n.recovered>u.recovered)&&(n=u)}return n}function wa(A){if(-2==A.cx.wrapType)return null;var n=A.cx.parent,y=A.forceAll().toTree(),u=n.cx.parser,p=u.nested[u.startNested(n.state)];y=new xa.Tree(y.type,y.children,y.positions.map(function(t){return t-n.pos}),A.pos-n.pos);-1<A.cx.wrapType&&(y=new xa.Tree(u.group.types[A.cx.wrapType],[y],[0],y.length));A.cx.wrapType=-2;n.useNode(y,u.getGoto(n.state,p.placeholder,
!0));ka&&console.log(n+(" (via unnest "+(-1<A.cx.wrapType?u.getName(A.cx.wrapType):y.type.name)+")"));return n}sa=Ra(12);"use strict";Object.defineProperty(D,"__esModule",{value:!0});var xa=Ra(1),Ba=function(A,n){Ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,u){y.__proto__=u}||function(y,u){for(var p in u)u.hasOwnProperty(p)&&(y[p]=u[p])};return Ba(A,n)},Ia=function(){function A(n,y,u,p,t,w,N,T,Q){this.cx=n;this.stack=y;this.state=u;this.reducePos=p;this.pos=t;this.recovered=
w;this.buffer=N;this.bufferBase=T;this.parent=Q}A.prototype.toString=function(){return"["+this.stack.filter(function(n,y){return 0==y%3}).concat(this.state)+"]@"+this.pos+(this.recovered?"!"+this.recovered:"")};A.start=function(n,y,u){void 0===u&&(u=0);return new A(n,[],y,u,u,0,[],0,null)};A.prototype.pushState=function(n,y){this.stack.push(this.state,y,this.bufferBase+this.buffer.length);this.state=n};A.prototype.reduce=function(n){var y=n>>19,u=n&65535,p=this.cx.parser;if(0==y)u<p.minRepeatTerm&&
this.storeNode(u,this.reducePos,this.reducePos,4,!0),this.pushState(p.getGoto(this.state,u,!0),this.reducePos);else{y=this.stack.length-3*(y-1)-(n&262144?6:0);var t=this.stack[y-2],w=this.bufferBase+this.buffer.length-this.stack[y-1];if(u<p.minRepeatTerm||n&131072||u>p.maxNode&&u<=p.maxRepeatWrap){var N=p.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(u,t,N,w+4,!0)}for(this.state=n&262144?this.stack[y]:p.getGoto(this.stack[y-3],u,!0);this.stack.length>y;)this.stack.pop()}};A.prototype.storeNode=
function(n,y,u,p,t){void 0===p&&(p=4);void 0===t&&(t=!1);if(0==n){var w=this,N=this.buffer.length;0==N&&w.parent&&(N=w.bufferBase-w.parent.bufferBase,w=w.parent);if(0<N&&0==w.buffer[N-4]&&-1<w.buffer[N-1]){if(y==u)return;if(w.buffer[N-2]>=y){w.buffer[N-2]=u;return}}}if(t&&this.pos!=u){t=this.buffer.length;if(0<t&&0!=this.buffer[t-4])for(;0<t&&this.buffer[t-2]>u;)this.buffer[t]=this.buffer[t-4],this.buffer[t+1]=this.buffer[t-3],this.buffer[t+2]=this.buffer[t-2],this.buffer[t+3]=this.buffer[t-1],t-=
4,4<p&&(p-=4);this.buffer[t]=n;this.buffer[t+1]=y;this.buffer[t+2]=u;this.buffer[t+3]=p}else this.buffer.push(n,y,u,p)};A.prototype.shift=function(n,y,u){if(n&131072)this.pushState(n&65535,this.pos);else if(0==(n&262144)){var p=this.pos,t=this.cx.parser;if(u>this.pos||y<=t.maxNode)this.pos=u,t.stateFlag(n,1)||(this.reducePos=u);this.pushState(n,p);y<=t.maxNode&&this.buffer.push(y,p,u,4)}else y<=this.cx.parser.maxNode&&this.buffer.push(y,this.pos,u,4),this.pos=u};A.prototype.apply=function(n,y,u){n&
65536?this.reduce(n):this.shift(n,y,u)};A.prototype.useNode=function(n,y){var u=this.cx.reused.length-1;if(0>u||this.cx.reused[u]!=n)this.cx.reused.push(n),u++;var p=this.pos;this.reducePos=this.pos=p+n.length;this.pushState(y,p);this.buffer.push(u,p,this.reducePos,-1)};A.prototype.split=function(){for(var n=this,y=n.buffer.length;0<y&&n.buffer[y-2]>n.reducePos;)y-=4;var u=n.buffer.slice(y);for(y=n.bufferBase+y;n&&y==n.bufferBase;)n=n.parent;return new A(this.cx,this.stack.slice(),this.state,this.reducePos,
this.pos,this.recovered,u,y,n)};A.prototype.recoverByDelete=function(n,y){var u=n<=this.cx.parser.maxNode;u&&this.storeNode(n,this.pos,y);this.storeNode(0,this.pos,y,u?8:4);this.pos=this.reducePos=y;this.recovered+=2};A.prototype.canShift=function(n){for(var y=new za(this);;){var u=this.cx.parser.stateSlot(y.top,4)||this.cx.parser.hasAction(y.top,n);if(0==(u&65536))return!0;if(0==u)return!1;y.reduce(u)}};Object.defineProperty(A.prototype,"ruleStart",{get:function(){var n=this.cx.parser.stateSlot(this.state,
5);return n&65536?this.stack[this.stack.length-3*(n>>19)+1]:0},enumerable:!0,configurable:!0});A.prototype.startOf=function(n){for(var y=this.state,u=this.stack.length,p=this.cx.parser;;){y=p.stateSlot(y,5);var t=y>>19,w=y&65535;if(-1<n.indexOf(w))return this.stack[u-3*(y>>19)+1];if(0==u)return-1;0==t?(u-=3,y=this.stack[u]):(u-=3*(t-1),y=p.getGoto(this.stack[u-3],w,!0))}};A.prototype.recoverByInsert=function(n){var y=this,u=this.cx.parser.nextStates(this.state);if(4<u.length){for(var p=u.filter(function(N){return N!=
y.state&&y.cx.parser.hasAction(N,n)}),t=0;4>p.length&&t<u.length;t++)0>p.indexOf(u[t])&&p.push(u[t]);u=p}p=[];for(t=0;t<u.length&&4>p.length;t++)if(u[t]!=this.state){var w=this.split();w.storeNode(0,w.pos,w.pos,4,!0);w.pushState(u[t],this.pos);w.recovered+=2;p.push(w)}return p};A.prototype.forceReduce=function(){var n=this.cx.parser.stateSlot(this.state,5);if(0==(n&65536))return!1;this.cx.parser.validAction(this.state,n)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.recovered+=1);this.reduce(n);
return!0};A.prototype.forceAll=function(){for(;!this.cx.parser.stateFlag(this.state,2)&&this.forceReduce(););return this};A.prototype.toTree=function(){return xa.Tree.build({buffer:ja.create(this),group:this.cx.parser.group,topID:this.cx.topTerm,maxBufferLength:this.cx.maxBufferLength,reused:this.cx.reused,minRepeatType:this.cx.parser.minRepeatTerm})};Object.defineProperty(A.prototype,"parser",{get:function(){return this.cx.parser},enumerable:!0,configurable:!0});A.prototype.dialectEnabled=function(n){return this.cx.dialect.flags[n]};
return A}(),qa;(function(A){A[A.Token=2]="Token";A[A.Reduce=1]="Reduce";A[A.MaxNext=4]="MaxNext"})(qa||(qa={}));var za=function(){function A(n){this.stack=n;this.top=n.state;this.rest=n.stack;this.offset=this.rest.length}A.prototype.reduce=function(n){var y=n&65535;n>>=19;0==n?(this.rest==this.stack.stack&&(this.rest=this.rest.slice()),this.rest.push(this.top,0,0),this.offset+=3):this.offset-=3*(n-1);this.top=this.stack.cx.parser.getGoto(this.rest[this.offset-3],y,!0)};return A}(),ja=function(){function A(n,
y,u){this.stack=n;this.pos=y;this.index=u;this.buffer=n.buffer;0==this.index&&this.maybeNext()}A.create=function(n){return new A(n,n.bufferBase+n.buffer.length,n.buffer.length)};A.prototype.maybeNext=function(){var n=this.stack.parent;null!=n&&(this.index=this.stack.bufferBase-n.bufferBase,this.stack=n,this.buffer=n.buffer)};Object.defineProperty(A.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!0,configurable:!0});Object.defineProperty(A.prototype,"start",{get:function(){return this.buffer[this.index-
3]},enumerable:!0,configurable:!0});Object.defineProperty(A.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0});Object.defineProperty(A.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!0,configurable:!0});A.prototype.next=function(){this.index-=4;this.pos-=4;0==this.index&&this.maybeNext()};A.prototype.fork=function(){return new A(this.stack,this.pos,this.index)};return A}();Ra=function(){function A(){this.end=this.value=
this.start=-1}A.prototype.accept=function(n,y){this.value=n;this.end=y};return A}();var La=function(){function A(n,y){void 0===y&&(y=n.length);this.string=n;this.length=y}A.prototype.get=function(n){return 0>n||n>=this.length?-1:this.string.charCodeAt(n)};A.prototype.read=function(n,y){return this.string.slice(n,Math.min(this.length,y))};A.prototype.clip=function(n){return new A(this.string,n)};return A}(),Ea=function(){function A(n,y){this.data=n;this.id=y}A.prototype.token=function(n,y,u){var p=
this.data,t=0,w=1<<this.id,N=u.cx.dialect,T=y.start;a:for(;0!=(w&p[t]);){for(var Q=p[t+1],H=t+3;H<Q;H+=2)if(0<(p[H+1]&w)){var M=p[H];if(N.allows(M)&&(-1==y.value||y.value==M||u.cx.parser.overrides(M,y.value))){y.accept(M,T);break}}H=n.get(T++);M=0;for(t=p[t+2];M<t;){var P=M+t>>1,Z=Q+P+(P<<1),ha=p[Z+1];if(H<p[Z])t=P;else if(H>=ha)M=P+1;else{t=p[Z+2];continue a}}break}};return A}();Ea.prototype.contextual=Ea.prototype.fallback=!1;qa=function(){return function(A,n){void 0===n&&(n={});this.token=A;this.contextual=
!!n.contextual;this.fallback=!!n.fallback}}();var ka="undefined"!=typeof sa&&/\bparse\b/.test(sa.env.LOG),ba=function(){function A(n){this.start=[0];this.index=[0];this.nextStart=0;this.trees=[n]}A.prototype.nodeAt=function(n){if(n<this.nextStart)return null;for(;;){var y=this.trees.length-1;if(0>y)return this.nextStart=1E9,null;var u=this.trees[y],p=this.index[y];if(p==u.children.length)this.trees.pop(),this.start.pop(),this.index.pop();else{var t=u.children[p];u=this.start[y]+u.positions[p];if(u>=
n)return u==n?t:null;t instanceof xa.TreeBuffer?(this.index[y]++,this.nextStart=u+t.length):(this.index[y]++,u+t.length>=n&&(this.trees.push(t),this.start.push(u),this.index.push(0)))}}};return A}(),U=function(A){function n(){var y=null!==A&&A.apply(this,arguments)||this;y.extended=-1;y.mask=0;return y}Na(n,A);n.prototype.clear=function(y){this.start=y;this.value=this.extended=-1};return n}(Ra),I=new Ra,r=function(){function A(n){this.tokens=[];this.mainToken=I;this.actions=[];this.tokens=n.tokenizers.map(function(y){return new U})}
A.prototype.getActions=function(n,y){var u=0,p=null,t=n.cx.parser,w=t.tokenizers;t=t.stateSlot(n.state,3);for(var N=0;N<w.length;N++)if(0!=(1<<N&t)){var T=w[N],Q=this.tokens[N];if(!p||T.fallback){if(T.contextual||Q.start!=n.pos||Q.mask!=t)this.updateCachedToken(Q,T,n,y),Q.mask=t;if(0!=Q.value&&(p=Q,T=u,-1<Q.extended&&(u=this.addActions(n,Q.extended,Q.end,u)),u=this.addActions(n,Q.value,Q.end,u),u>T))break}}for(;this.actions.length>u;)this.actions.pop();p||(p=I,p.start=n.pos,n.pos==y.length?p.accept(n.cx.parser.eofTerm,
n.pos):p.accept(0,n.pos+1));this.mainToken=p;return this.actions};A.prototype.updateCachedToken=function(n,y,u,p){n.clear(u.pos);y.token(p,n,u);if(-1<n.value){y=u.cx.parser;for(var t=0;t<y.specialized.length;t++)if(y.specialized[t]==n.value){var w=y.specializers[t](p.read(n.start,n.end),u);if(0<=w&&u.cx.dialect.allows(w>>1)){0==(w&1)?n.value=w>>1:n.extended=w>>1;break}}}else u.pos==p.length?n.accept(u.cx.parser.eofTerm,u.pos):n.accept(0,u.pos+1)};A.prototype.putAction=function(n,y,u,p){for(var t=
0;t<p;t+=3)if(this.actions[t]==n)return p;this.actions[p++]=n;this.actions[p++]=y;this.actions[p++]=u;return p};A.prototype.addActions=function(n,y,u,p){var t=n.state;n=n.cx.parser;for(var w=n.data,N=0;2>N;N++)for(var T=n.stateSlot(t,N?2:1),Q;65535!=(Q=w[T]);T+=3)if(Q==y||0==Q&&0==p)p=this.putAction(w[T+1]|w[T+2]<<16,y,u,p);return p};return A}(),q=function(){return function(A,n,y,u,p,t,w){void 0===t&&(t=null);void 0===w&&(w=-1);this.parser=A;this.maxBufferLength=n;this.input=y;this.topTerm=u;this.dialect=
p;this.parent=t;this.wrapType=w;this.reused=[];this.tokens=new r(A)}}(),B=function(){function A(n,y,u){void 0===u&&(u={});this.tokenCount=this.recovering=this.pos=0;var p=u.cache;p=void 0===p?void 0:p;var t=u.strict;t=void 0===t?!1:t;var w=u.bufferLength;w=void 0===w?xa.DefaultBufferLength:w;var N=u.top;N=void 0===N?void 0:N;u=u.dialect;var T=N?n.topRules[N]:n.defaultTop;if(!T)throw new RangeError("Invalid top rule name "+N);this.stacks=[Ia.start(new q(n,w,y,T[1],n.parseDialect(u)),T[0])];this.strict=
t;this.cache=p?new ba(p):null}A.prototype.putStack=function(n){this.stacks.push(n);if(0>this.pos||n.pos<this.pos)this.pos=n.pos};A.prototype.advance=function(){var n=this.stacks,y=this.pos;this.stacks=[];this.pos=-1;for(var u=null,p=null,t=0;t<n.length;t++)for(var w=n[t];;){if(w.pos>y)this.putStack(w);else{var N=this.advanceStack(w,n);if(N){w=N;continue}else u||(u=[],p=[]),u.push(w),w=w.cx.tokens.mainToken,p.push(w.value,w.end)}break}if(!this.stacks.length){if(t=u&&Ta(u))return t.toTree();if(this.strict)throw new SyntaxError("No parse at "+
y);this.recovering||(this.recovering=5)}if(this.recovering&&u&&(t=this.runRecovery(u,p)))return t.forceAll().toTree();if(this.recovering)t=1==this.recovering?1:3*this.recovering,this.stacks.length>t&&(this.stacks.sort(function(T,Q){return T.recovered-Q.recovered}),this.stacks.length=t),this.stacks.some(function(T){return T.reducePos>y})&&this.recovering--;else if(1<this.stacks.length&&200<this.stacks[0].buffer.length){u=1E9;p=-1;for(t=0;t<this.stacks.length;t++)w=this.stacks[t],w.buffer.length<u&&
(u=w.buffer.length,p=t);200<u&&this.stacks.splice(p,1)}this.tokenCount++;return null};A.prototype.advanceStack=function(n,y){var u=n.pos,p=n.cx,t=p.input,w=p.parser;p=ka?n+" -\x3e ":"";if(this.cache)for(var N=this.cache.nodeAt(u);N;){var T=w.group.types[N.type.id]==N.type?w.getGoto(n.state,N.type.id):-1;if(-1<T)return n.useNode(N,T),ka&&console.log(p+n+(" (via reuse of "+w.getName(N.type.id)+")")),n;if(!(N instanceof xa.Tree)||0==N.children.length||0<N.positions[0])break;N=N.children[0];if(!(N instanceof
xa.Tree))break}N=w.startNested(n.state);a:if(-1<N){T=w.nested[N];var Q=T.grammar;N=T.end;T=T.placeholder;var H=void 0,M=null,P=void 0,Z=void 0,ha=void 0;if("function"==typeof Q){ha=Q(t,n);if(ha.stay)break a;M=ha.parseNode;y=ha.parser;P=ha.top;Z=ha.dialect;H=ha.filterEnd;ha=ha.wrapType}else y=Q;N=this.scanForNestEnd(n,N,H);u=n.cx.input.clip(N);if(M||!y)return p=M?M(u,n.pos):xa.Tree.empty,p.length!=N-n.pos&&(p=new xa.Tree(p.type,p.children,p.positions,N-n.pos)),null!=ha&&(p=new xa.Tree(w.group.types[ha],
[p],[0],p.length)),n.useNode(p,w.getGoto(n.state,T,!0)),n;w=P?y.topRules[P]:y.defaultTop;n=Ia.start(new q(y,n.cx.maxBufferLength,u,w[1],y.parseDialect(Z),n,ha),w[0],n.pos);ka&&console.log(p+n+" (nested)");return n}N=w.stateSlot(n.state,4);if(0<N)return n.reduce(N),ka&&console.log(p+n+(" (via always-reduce "+w.getName(N&65535)+")")),n;T=n.cx.tokens.getActions(n,t);for(Z=0;Z<T.length;){ha=T[Z++];M=T[Z++];N=T[Z++];H=(P=Z==T.length||!y)?n:n.split();H.apply(ha,M,N);ka&&console.log(p+H+(" (via "+(0==(ha&
65536)?"shift":"reduce of "+w.getName(ha&65535))+" for "+w.getName(M)+" @ "+u+(H==n?"":", split")+")"));if(P)return H;H.pos>u?this.putStack(H):y.push(H)}return n.cx.parent&&n.pos==t.length?wa(n):null};A.prototype.advanceFully=function(n){for(var y=n.pos;;){var u=this.advanceStack(n,null);if(!u)return n;if(u.pos>y)return this.putStack(u),null;n=u}};A.prototype.runRecovery=function(n,y){for(var u=null,p=0;p<n.length;p++){for(var t=n[p],w=y[p<<1],N=y[(p<<1)+1],T=ka?t+" -\x3e ":"",Q=t.split(),H=T,M=0;Q.forceReduce()&&
10>M;M++){ka&&console.log(H+Q+" (via force-reduce)");var P=this.advanceFully(Q);if(!P)break;Q=P;ka&&(H=P+" -\x3e ")}Q=0;for(H=t.recoverByInsert(w);Q<H.length;Q++)M=H[Q],ka&&console.log(T+M+" (via recover-insert)"),this.advanceFully(M);t.cx.input.length>t.pos?(N==t.pos&&(N++,w=0),t.recoverByDelete(w,N),ka&&console.log(T+t+(" (via recover-delete "+t.cx.parser.getName(w)+")")),this.putStack(t)):t.cx.parent||u&&!(u.recovered>t.recovered)||(u=t)}return u};A.prototype.forceFinish=function(){return this.stacks[0].split().forceAll().toTree()};
Object.defineProperty(A.prototype,"badness",{get:function(){return 2*this.stacks[0].recovered/this.tokenCount},enumerable:!0,configurable:!0});A.prototype.scanForNestEnd=function(n,y,u){for(var p=n.cx.input,t=n.pos;t<p.length;t++)if(I.start=t,I.value=-1,y.token(p,I,n),-1<I.value&&(!u||u(p.read(t,I.end))))return t;return p.length};return A}(),L=function(){function A(n,y,u){this.source=n;this.flags=y;this.disabled=u}A.prototype.allows=function(n){return!this.disabled||0==this.disabled[n]};return A}();
sa=function(){function A(n,y,u,p,t,w,N,T,Q,H,M,P,Z,ha){void 0===ha&&(ha=null);this.states=n;this.data=y;this.goto=u;this.group=p;this.maxTerm=t;this.minRepeatTerm=w;this.tokenizers=N;this.topRules=T;this.nested=Q;this.dialects=H;this.specialized=M;this.specializers=P;this.tokenPrecTable=Z;this.termNames=ha;this.nextStateCache=[];this.cachedDialect=null;this.maxNode=this.group.types.length-1;this.maxRepeatWrap=this.group.types.length+(this.group.types.length-w)-1;n=0;for(y=this.states.length/6;n<y;n++)this.nextStateCache[n]=
null}A.prototype.parse=function(n,y){"string"==typeof n&&(n=new La(n));for(n=new B(this,n,y);;)if(y=n.advance())return y};A.prototype.startParse=function(n,y){"string"==typeof n&&(n=new La(n));return new B(this,n,y)};A.prototype.getGoto=function(n,y,u){void 0===u&&(u=!1);var p=this.goto;if(y>=p[0])return-1;for(y=p[y+1];;){var t=p[y++],w=t&1,N=p[y++];if(w&&u)return N;for(t=y+(t>>1);y<t;y++)if(p[y]==n)return N;if(w)return-1}};A.prototype.hasAction=function(n,y){for(var u=this.data,p=0;2>p;p++)for(var t=
this.stateSlot(n,p?2:1),w;65535!=(w=u[t]);t+=3)if(w==y||0==w)return u[t+1]|u[t+2]<<16;return 0};A.prototype.stateSlot=function(n,y){return this.states[6*n+y]};A.prototype.stateFlag=function(n,y){return 0<(this.stateSlot(n,0)&y)};A.prototype.startNested=function(n){n=this.stateSlot(n,0);return n&4?n>>10:-1};A.prototype.validAction=function(n,y){if(y==this.stateSlot(n,4))return!0;for(n=this.stateSlot(n,1);;n+=3){if(65535==this.data[n])return!1;if(y==(this.data[n+1]|this.data[n+2]<<16))return!0}};A.prototype.nextStates=
function(n){var y=this.nextStateCache[n];if(y)return y;y=[];for(var u=this.stateSlot(n,1);65535!=this.data[u];u+=3)0==(this.data[u+2]&1)&&0>y.indexOf(this.data[u+1])&&y.push(this.data[u+1]);u=this.goto;for(var p=u[0],t=0;t<p;t++)for(var w=u[t+1];;){for(var N=u[w++],T=u[w++],Q=w+(N>>1);w<Q;w++)u[w]==n&&0>y.indexOf(T)&&y.push(T);if(N&1)break}return this.nextStateCache[n]=y};A.prototype.overrides=function(n,y){y=Da(this.data,this.tokenPrecTable,y);return 0>y||Da(this.data,this.tokenPrecTable,n)<y};A.prototype.withNested=
function(n){return new A(this.states,this.data,this.goto,this.group,this.maxTerm,this.minRepeatTerm,this.tokenizers,this.topRules,this.nested.map(function(y){return Object.prototype.hasOwnProperty.call(n,y.name)?{name:y.name,grammar:n[y.name],end:y.end,placeholder:y.placeholder}:y}),this.dialects,this.specialized,this.specializers,this.tokenPrecTable,this.termNames)};A.prototype.withProps=function(){for(var n,y=[],u=0;u<arguments.length;u++)y[u]=arguments[u];return new A(this.states,this.data,this.goto,
(n=this.group).extend.apply(n,y),this.maxTerm,this.minRepeatTerm,this.tokenizers,this.topRules,this.nested,this.dialects,this.specialized,this.specializers,this.tokenPrecTable,this.termNames)};A.prototype.getName=function(n){return this.termNames?this.termNames[n]:String(n<=this.maxNode&&this.group.types[n].name||n)};Object.defineProperty(A.prototype,"eofTerm",{get:function(){return this.maxRepeatWrap+1},enumerable:!0,configurable:!0});Object.defineProperty(A.prototype,"hasNested",{get:function(){return 0<
this.nested.length},enumerable:!0,configurable:!0});Object.defineProperty(A.prototype,"defaultTop",{get:function(){return this.topRules[Object.keys(this.topRules)[0]]},enumerable:!0,configurable:!0});Object.defineProperty(A.prototype,"topType",{get:function(){return this.group.types[this.defaultTop[1]]},enumerable:!0,configurable:!0});A.prototype.parseDialect=function(n){if(this.cachedDialect&&this.cachedDialect.source==n)return this.cachedDialect;var y=Object.keys(this.dialects),u=y.map(function(){return!1});
if(n)for(var p=0,t=n.split(" ");p<t.length;p++){var w=y.indexOf(t[p]);0<=w&&(u[w]=!0)}p=null;for(t=0;t<y.length;t++)if(!u[t]){var N=this.dialects[y[t]];for(w=void 0;65535!=(w=this.data[N++]);)(p||(p=new Uint8Array(this.maxTerm+1)))[w]=1}return this.cachedDialect=new L(n,u,p)};A.deserialize=function(n){function y(P,Z,ha){N[P]==O&&(N[P]=Object.create(null));Z.set(N[P],Z.deserialize(String(ha)))}for(var u=Ka(n.tokenData),p=n.nodeNames.split(" "),t=p.length,w=0;w<n.repeatNodeCount;w++)p.push("");var N=
[];for(w=0;w<p.length;w++)N.push(O);y(0,xa.NodeProp.error,"");if(n.nodeProps)for(var T=0,Q=n.nodeProps;T<Q.length;T++){var H=Q[T],M=H[0];for(w=1;w<H.length;w+=2)y(H[w],M,H[w+1])}p=new xa.NodeGroup(p.map(function(P,Z){return new xa.NodeType(P,N[Z],Z)}));T=new Uint16Array(n.specialized?n.specialized.length:0);Q=[];if(n.specialized)for(w=0;w<n.specialized.length;w++)T[w]=n.specialized[w].term,Q[w]=n.specialized[w].get;return new A(Ka(n.states,Uint32Array),Ka(n.stateData),Ka(n.goto),p,n.maxTerm,t,n.tokenizers.map(function(P){return"number"==
typeof P?new Ea(u,P):P}),n.topRules,(n.nested||[]).map(function(P){var Z=P[3];return{name:P[0],grammar:P[1],end:new Ea(Ka(P[2]),0),placeholder:Z}}),n.dialects||{},T,Q,n.tokenPrec,n.termNames)};return A}();sa.TokenGroup=Ea;var O=Object.create(null);D.NodeGroup=xa.NodeGroup;D.NodeProp=xa.NodeProp;D.NodeType=xa.NodeType;D.Subtree=xa.Subtree;D.Tree=xa.Tree;D.ExternalTokenizer=qa;D.ParseContext=B;D.Parser=sa;D.Stack=Ia;D.Token=Ra};
shadow$provide[14]=function(sa,Ra,ub,D){function Na(b,f){let l=null;for(let m=0;m<b.length;m++){let v=b[m].walk(f);v==b[m]||l||(l=b.slice(0,m));l&&l.push(v)}return l||b}function Ka(b,f){return b.constructor==f.constructor&&b.eq(f)}function Da(b,f){return b.length==f.length&&b.every((l,m)=>Ka(l,f[m]))}function Ta(b,f){return b.prec<f.prec?"("+b.toString()+")":b.toString()}function wa(b,f,l){if(b.length!=f.length)return b.length-f.length;for(let m=0;m<b.length;m++){let v=l(b[m],f[m]);if(v)return v}return 0}
function xa(b,f){if(0==b.length||b==f)return f;if(0==f.length)return b;let l=b.slice();for(let m of f)b.includes(m)||l.push(m);return l.sort()}function Ba(b){return 65534<b?"∞":55296<=b&&57343>b?"\\u{"+b.toString(16)+"}":String.fromCharCode(b)}function Ia(b){let f="";for(let l=0;l<b.length;l++)f+=String.fromCharCode(b[l].from);return f}function qa(b){let f="";for(let l of b)f+=(f.length?"-":"")+l.id;return f}function za(b){let f=[],l=[];for(var m of b)f.includes(m.from)||f.push(m.from),f.includes(m.to)||
f.push(m.to);f.sort((v,z)=>v-z);for(m=1;m<f.length;m++){let v=f[m-1],z=f[m],J=[];for(let R of b)if(R.to>v&&R.from<z)for(let ea of R.target.closure())J.includes(ea)||J.push(ea);J.length&&l.push(new pb(v,z,J))}return l}function ja(b,f){let l=f?f.start:b.start,m=b.eat("at","export");f=f||O(b);let v=La(b),z=[];if(b.eat("\x3c"))for(;!b.eat("\x3e");)z.length&&b.expect(","),z.push(O(b));b=ka(b);return new Ua(l,f,m,v,z,b)}function La(b){if("["!=b.type)return lc;let f=[];for(b.expect("[");!b.eat("]");)f.length&&
b.expect(","),f.push(Ea(b));return f}function Ea(b){let f=b.start,l=b.expect("id"),m=[];if(b.eat("\x3d"))for(;;)if("string"==b.type||"id"==b.type)m.push(new Za(b.start,b.value,null)),b.next();else if(b.eat("."))m.push(new Za(b.start,".",null));else if(b.eat("{"))m.push(new Za(b.start,null,b.expect("id"))),b.expect("}");else break;return new fb(f,l,m)}function ka(b){b.expect("{");let f=L(b);b.expect("}");return f}function ba(b){var f=b.start;if(b.eat("("))return f=L(b),b.expect(")"),f;if("string"==
b.type){var l=b.value;b.next();return 0==l.length?new ia(f,lc,[lc,lc]):new Ja(f,l)}if(b.eat("id","_"))return new eb(f);if("set"==b.type){l="!"==b.string[b.start];var m=w(b.value.replace(/\\.|-|"/g,z=>"-"==z?"﷚":'"'==z?'\\"':z));let v=[];for(let z=0;z<m.length;){let J=m.codePointAt(z);z+=65535<J?2:1;if(z<m.length-1&&"﷚"==m[z]){let R=m.codePointAt(z+1);z+=65535<R?3:2;R<J&&b.raise("Invalid character range",b.start);I(b,v,J,R+1)}else I(b,v,J,J+1)}b.next();return new db(f,v.sort((z,J)=>z[0]-J[0]),l)}if("at"!=
b.type||"specialize"!=b.value&&"extend"!=b.value){l=O(b);if("["==b.type||"{"==b.type)return l=ja(b,l),l.params.length&&b.raise("Inline rules can't have parameters",l.start),new Y(f,l);m=null;b.eat(".")&&(m=l,l=O(b));return new Ib(f,m,l,U(b))}{let {start:v,value:z}=b;b.next();f=La(b);b.expect("\x3c");l=L(b);b.expect(",");m=L(b);b.expect("\x3e");return new G(v,z,f,l,m)}}function U(b){let f=[];if(b.eat("\x3c"))for(;!b.eat("\x3e");)f.length&&b.expect(","),f.push(L(b));return f}function I(b,f,l,m){f.every(([v,
z])=>z<=l||v>=m)||b.raise("Overlapping character range",b.start);f.push([l,m])}function r(b){let f=b.start,l=ba(b);for(;;){let m=b.type;if(b.eat("*")||b.eat("?")||b.eat("+"))l=new pa(f,l,m);else return l}}function q(b){return"}"==b.type||")"==b.type||"|"==b.type||"/"==b.type||"/\\"==b.type||"{"==b.type||","==b.type||"\x3e"==b.type}function B(b){let f=b.start,l=[],m=[lc];do{for(;;){let v=b.start,z;if(b.eat("~"))z="ambig";else if(b.eat("!"))z="prec";else break;m[m.length-1]=m[m.length-1].concat(new na(v,
O(b),z))}if(q(b))break;l.push(r(b));m.push(lc)}while(!q(b));return 1==l.length&&m.every(v=>0==v.length)?l[0]:new ia(f,l,m)}function L(b){let f=b.start;var l=B(b);if(!b.eat("|"))return l;l=[l];do l.push(B(b));while(b.eat("|"));return new ma(f,l)}function O(b){"id"!=b.type&&b.unexpected();let f=b.start,l=b.value;b.next();return new Cb(f,l)}function A(b){let f=b.start;b.next();b.expect("{");let l=[];for(;!b.eat("}");){l.length&&b.expect(",");let m=ba(b);m instanceof Ja||m instanceof Ib?l.push(m):b.raise("Invalid expression in token precedences",
m.start)}return new ab(f,l)}function n(b){let f=[];for(b.expect("{");!b.eat("}");){f.length&&b.eat(",");let l=O(b),m=La(b);f.push({id:l,props:m})}return f}function y(b,f){let l=O(b);b.expect("id","from");let m=b.expect("string");return new Kb(f,l,m,n(b))}function u(b,f,l){b.expect("{");let m=L(b);b.expect("}");let v=O(b);b.expect("id","from");let z=b.expect("string");return new jc(l,f,m,v,z,n(b))}function p(b,f){let l=O(b),m=b.eat("id","as")?O(b):l,v=null;b.eat("id","from")?v=b.expect("string"):b.expect("id",
"empty");return new ya(f,m,l,v)}function t(b,f){let l=O(b),m=b.eat("id","as")?O(b):l;b.expect("id","from");b=b.expect("string");return new Lb(f,m,l,b)}function w(b){let f=/\\(?:u\{([\da-f]+)\}|u([\da-f]{4})|x([\da-f]{2})|([ntbrf0])|(.))|./yig,l="",m;for(;m=f.exec(b);){let [v,z,J,R,ea,fa]=m;l=z||J||R?l+String.fromCodePoint(parseInt(z||J||R,16)):ea?l+("n"==ea?"\n":"t"==ea?"\t":"0"==ea?"\x00":"r"==ea?"\r":"f"==ea?"\f":"\b"):fa?l+fa:l+v}return l}function N(b,f){return(b<<5)+b+f}function T(b,f){return b<
f?-1:b>f?1:0}function Q(b,f,l,m){let v=[];for(f+=1;f<b.parts.length;f++){let z=b.parts[f],J=!1;if(z.terminal)ha(z,v);else for(let R of m[z.name])null==R?J=!0:ha(R,v);if(!J)return v}for(let z of l)ha(z,v);return v}function H(b,f){if(b.length!=f.length)return!1;for(let l=0;l<b.length;l++)if(!b[l].eq(f[l]))return!1;return!0}function M(b,f){if(b.length!=f.length)return!1;for(let l=0;l<b.length;l++)if(b[l]!=f[l])return!1;return!0}function P(b){let f=5381;for(let l of b)f=N(f,l.hash);return f}function Z(b,
f){function l(J,R,ea,fa,Ha){for(let Ga of J.rules){if(J=m.find(Pa=>Pa.rule==Ga)){if(J.skipAhead!=fa)throw new Rb("Inconsistent skip sets after "+J.prev.trail());J.ambigAhead=xa(J.ambigAhead,ea)}else J=b.findIndex(Pa=>0==Pa.pos&&Pa.rule==Ga),J=new Jc(Ga,0>J?[]:b[J].ahead.slice(),J,ea,fa,Ha),m.push(J);for(let Pa of R)J.ahead.includes(Pa)||(J.ahead.push(Pa),J.rule.parts.length&&!J.rule.parts[0].terminal&&ha(J,v))}}let m=[],v=[];for(var z of b){let J=z.next;J&&!J.terminal&&l(J,Q(z.rule,z.pos,z.ahead,
f),z.conflicts(z.pos+1).ambigGroups,z.pos==z.rule.parts.length-1?z.skipAhead:z.rule.skip,z.prev)}for(;v.length;)z=v.pop(),l(z.rule.parts[0],Q(z.rule,0,z.ahead,f),xa(z.rule.conflicts[1].ambigGroups,1==z.rule.parts.length?z.ambigAhead:Fc),z.skipAhead,z.prev);f=b.slice();for(let J of m)z=new mc(J.rule,0,J.ahead.sort((R,ea)=>R.hash-ea.hash),J.ambigAhead,J.skipAhead,J.prev),-1<J.origIndex?f[J.origIndex]=z:f.push(z);return f.sort((J,R)=>J.cmp(R))}function ha(b,f){f.includes(b)||f.push(b)}function Ca(b){let f=
{};for(var l of b.terms)l.terminal||(f[l.name]=[]);for(;;){l=!1;for(let m of b.terms)if(!m.terminal)for(let v of m.rules){let z=f[m.name],J=!1,R=z.length;for(let ea of v.parts){J=!0;if(ea.terminal)ha(ea,z);else for(let fa of f[ea.name])null==fa?J=!1:ha(fa,z);if(J)break}J||ha(null,z);z.length>R&&(l=!0)}if(!l)return f}}function Fa(b,f,l){function m(Ga,Pa){if(0==Ga.length)return null;let Sa=P(Ga);var Ya=z[Sa];let nb;for(var mb of Ga)if(!nb)nb=mb.skip;else if(nb!=mb.skip)throw new Rb("Inconsistent skip sets after "+
mb.trail());if(Ya)for(let qb of Ya)if(H(Ga,qb.set)){if(qb.state.skip!=nb)throw new Rb("Inconsistent skip sets after "+qb.set[0].trail());return qb.state}Ya=Z(Ga,l);mb=P(Ya);let Ob;if(!Pa)for(let qb of v)qb.hash==mb&&qb.hasSet(Ya)&&(Ob=qb);Ob||(Ob=new uc(v.length,Ya,0,nb,mb,Pa),v.push(Ob));(z[Sa]||(z[Sa]=[])).push(new dd(Ga,Ob));return Ob}let v=[],z={};for(var J of f){const Ga=J.rules.length?J.rules[0].skip:b.names["%noskip"];m(J.rules.map(Pa=>new mc(Pa,0,[b.eof],Fc,Ga,null)),J)}for(f=0;f<v.length;f++){let Ga=
v[f];var R=[];let Pa=[];J=[];for(let Sa of Ga.set)if(Sa.pos==Sa.rule.parts.length)Sa.rule.name.top||J.push(Sa);else{var ea=Sa.rule.parts[Sa.pos],fa=R.indexOf(ea);0>fa?(R.push(ea),Pa.push([Sa.advance()])):Pa[fa].push(Sa.advance())}for(ea=0;ea<R.length;ea++)if(fa=R[ea],fa.terminal){var Ha=Ma(Pa[ea]);let Sa=m(Ha);Sa&&Ga.addAction(new fc(fa,Sa),Ha.map(Ya=>Ya.reverse()))}else(Ha=m(Pa[ea]))&&Ga.goto.push(new fc(fa,Ha));R=!1;for(let Sa of J)for(let Ya of Sa.ahead)J=Ga.actions.length,Ga.addAction(new gc(Ya,
Sa.rule),[Sa]),Ga.actions.length==J&&(R=!0);if(R)for(J=0;J<Ga.goto.length;J++)l[Ga.goto[J].term.name].some(Sa=>Ga.actions.some(Ya=>Ya.term==Sa&&Ya instanceof fc))||Ga.goto.splice(J--,1)}for(let Ga of v)Ga.finish();return v}function Ma(b){let f=null,l=1;for(let m of b){let v=m.rule.conflicts[m.pos-1].cut;if(!(v<l)){if(!f||v>l)l=v,f=[];f.push(m)}}return f||b}function Xa(b,f,l,m){if(l.defaultReduce)return!0;for(var v=0;v<l.actions.length;v++)if(m.addActionInner(l.actions[v].map(b,f),l.actionPositions[v]))return!1;
for(let z of l.goto)if(l=m.goto.find(J=>J.term==z.term),v=z.map(b,f),!l)m.goto.push(v);else if(l.target.id!=v.target.id)return!1;return!0}function bb(b,f,l,m,v){for(let z=0;z<b.length;z++)if(b[z]==f)for(let J=0;J<b.length;J++)if(J!=z&&b[J]==f){let R=new uc(0,l[z].set,0,l[z].skip,0);Xa(b,m,l[z],R);Xa(b,m,l[J],R)||v.push(z,J)}}function gb(b,f,l,m){for(let v=0;v<m.length;v++)if(m[v]==b&&l[m[v+(v%2?-1:1)]]==f)return!0;return!1}function Hb(b){let f=[];for(;;){let v=[],z=[];for(let J=0;J<b.length;J++){let R=
b[J];var {set:l}=R,m=v.findIndex((ea,fa)=>R.set.length==ea.set.length&&R.set.every((Ha,Ga)=>Ha.eqSimple(ea.set[Ga]))&&ea.tokenGroup==R.tokenGroup&&ea.skip==R.skip&&!gb(J,fa,z,f));0>m?(m=v.length,l=new uc(m,l,R.flags,R.skip,R.hash,R.topRule),l.tokenGroup=R.tokenGroup,l.defaultReduce=R.defaultReduce,v.push(l)):v[m].flags|=R.flags;z.push(m)}m=[];for(l=0;l<b.length;l++){let J=z[l];m.includes(J)||Xa(z,v,b[l],v[z[l]])||(m.push(J),bb(z,J,b,v,f))}if(!m.length)return v}}function Db(b){for(;;){let l=[],m=!1,
v=[];for(let z=0;z<b.length;z++){let J=b[z];var f=v.findIndex(R=>J.eq(R));if(0>f)l[z]=v.length,v.push(J);else{l[z]=f;m=!0;f=v[f];let R=null;for(let ea of J.set)f.set.some(fa=>fa.eqSimple(ea))||(R||(R=[])).push(ea);R&&(f.set=R.concat(f.set).sort((ea,fa)=>ea.cmp(fa)))}}if(!m)return b;for(let z of v)z.defaultReduce||(z.actions=z.actions.map(J=>J.map(l,v)),z.goto=z.goto.map(J=>J.map(l,v)));for(b=0;b<v.length;b++)v[b].id=b;b=v}}function yb(b,f=65535){if(b>f)throw Error("Trying to encode a number that's too big: "+
b);if(65535==b)return String.fromCharCode(126);f="";for(var l=46;;l=0){let m=b%46;b-=m;l=m+l+32;34<=l&&l++;92<=l&&l++;l=String.fromCharCode(l);f=l+f;if(0==b)break;b/=46}return f}function zb(b,f=65535){let l='"'+yb(b.length,4294967295);for(let m=0;m<b.length;m++)l+=yb(b[m],f);return l+'"'}function hb(...b){return new Zb(b,null)}function Ab(b,f,l){b.props==Fb&&(b.props=Object.create(null));let m=b.props[f];if(!m||0>m.split(" ").indexOf(l))b.props[f]=m?m+" "+l:l}function kb(b){let f=Object.create(null);
for(let {value:l,term:m,type:v}of b)f[l]=m.id<<1|("specialize"==v?0:1);return f}function vb(b,f,l=b.parts.length){return b.name.id|65536|(b.isRepeatLeaf&&l==b.parts.length?131072:0)|(b.name==f?262144:0)|l<<19}function sb(b,f){return b instanceof fc&&!!b.target.defaultReduce&&b.target.defaultReduce.name==f}function dc(b){let f={},l=0;for(var m of b)for(var v of m.goto)l=Math.max(v.term.id,l),b=f[v.term.id]||(f[v.term.id]={}),(b[v.target.id]||(b[v.target.id]=[])).push(m.id);m=new zc;v=[];b=l+2;for(let z=
0;z<=l;z++){let J=f[z];if(!J){v.push(1);continue}let R=[],ea=Object.keys(J);for(let fa of ea){let Ha=J[fa];R.push((fa==ea[ea.length-1]?1:0)+(Ha.length<<1));R.push(+fa);for(let Ga of Ha)R.push(Ga)}v.push(m.storeArray(R)+b)}if(v.some(z=>65535<z))throw new Rb("Goto table too large");return Uint16Array.from([l+1,...v,...m.data])}function Eb(b,f){b.includes(f)||b.push(f)}function ac(b){let f=Object.create(null);for(let l of b){b=1<<l.id;for(let m of l.tokens)f[m.id]=(f[m.id]||0)|b}return f}function ec(b,
f){function l(v){if(v instanceof ia){let z=v.exprs.indexOf(f);-1<z&&z<v.exprs.length-1&&(m=v.exprs[z+1])}return v}let m;for(let v of b.rules)v.expr.walk(l);for(let v of b.topRules)v.expr.walk(l);return m}function Bb(b,f,l){function m(z,J){return z.actions.some(R=>R.term==J)||z.skip!=f.noSkip&&l[f.skipRules.indexOf(z.skip)].includes(J)}let v=Object.create(null);return(z,J)=>{z.id<J.id&&([z,J]=[J,z]);let R=z.id|J.id<<16,ea=v[R];return null!=ea?ea:v[R]=b.some(fa=>m(fa,z)&&m(fa,J))}}function X(b){let f=
0,l=[];for(let [m,v]of b)m>f&&l.push([f,m]),f=v;1114111>=f&&l.push([f,1114112]);return l}function E(b,f,l,m){if(55296>l&&1114112==m)b.edge(l,65535,f);else if(65536>l&&(55296>l&&b.edge(l,Math.min(m,55296),f),57344<m&&b.edge(Math.max(l,57344),Math.min(m,65535),f),l=65536),!(65536>m)){l=String.fromCodePoint(l);var v=String.fromCodePoint(m-1);m=l.charCodeAt(0);l=l.charCodeAt(1);var z=v.charCodeAt(0);v=v.charCodeAt(1);if(m==z)z=new xb,b.edge(m,m+1,z),z.edge(l,v+1,f);else{let J=m,R=z;if(56320<l){J++;let ea=
new xb;b.edge(m,m+1,ea);ea.edge(l,57344,f)}57343>v&&(R--,m=new xb,b.edge(z,z+1,m),m.edge(56320,v+1,f));J<=R&&(m=new xb,b.edge(J,R+1,m),m.edge(56320,57344,f))}}}function F(b){return b instanceof ia&&0==b.exprs.length}function C(b,f){let l=Object.create(null);for(let m of f){b.unique(m.id);let {name:v,props:z,dialect:J}=b.nodeInfoInner(m.props,m.id.name);f=b.makeTerminal(m.id.name,v,z);null!=J&&(b.tokens.byDialect[J]||(b.tokens.byDialect[J]=[])).push(f);b.namedTerms[m.id.name]=l[m.id.name]=f}return l}
function S(b,f,l){f=f[l.id.name];if(!f)return null;l.args.length&&b.raise("External tokens cannot take arguments",l.args[0].start);b.used(l.id.name);return f}function W(b,f){let l=null,m=function(v,z){!l&&f.source&&(l=b.options.nestedGrammar?b.options.nestedGrammar(f.name,b.termTable):null);return l instanceof va.Parser?{parser:l}:l?l(v,z):{}};m.spec=f;return m}function ca(b,f){for(;;){let l=Object.create(null),m;for(let z=0;z<b.length;z++){let J=b[z];J.name.interesting||J.parts.includes(J.name)||
!(3>J.parts.length)||f.includes(J.name)||1!=J.parts.length&&!b.every(R=>R.skip==J.skip||!R.parts.includes(J.name))||J.parts.some(R=>!!l[R.name])||b.some((R,ea)=>ea!=z&&R.name==J.name)||(m=l[J.name.name]=J)}if(!m)return b;let v=[];for(let z of b){if(l[z.name.name])continue;if(!z.parts.some(R=>!!l[R.name])){v.push(z);continue}b=[z.conflicts[0]];let J=[];for(let R=0;R<z.parts.length;R++){let ea=l[z.parts[R].name];if(ea){b[b.length-1]=b[b.length-1].join(ea.conflicts[0]);for(let fa=0;fa<ea.parts.length;fa++)J.push(ea.parts[fa]),
b.push(ea.conflicts[fa+1]);b[b.length-1]=b[b.length-1].join(z.conflicts[R+1])}else J.push(z.parts[R]),b.push(z.conflicts[R+1])}v.push(new qc(z.name,J,b,z.skip))}b=v}}function la(b){let f=Object.create(null);var l;for(let m=0;m<b.length;){let v=m,z=b[m++].name;for(;m<b.length&&b[m].name==z;)m++;let J=m-v;if(!z.interesting)for(let R=m;R<b.length;){let ea=R,fa=b[R++].name;for(;R<b.length&&b[R].name==fa;)R++;if(R-ea!=J||fa.interesting)continue;let Ha=!0;for(let Ga=0;Ga<J&&Ha;Ga++)0!=b[v+Ga].cmpNoName(b[ea+
Ga])&&(Ha=!1);Ha&&(l=f[z.name]=fa)}}if(!l)return b;l=[];for(let m of b)f[m.name.name]||l.push(m.parts.every(v=>!f[v.name])?m:new qc(m.name,m.parts.map(v=>f[v.name]||v),m.conflicts,m.skip));return l}function ta(b,f){return la(ca(b,f))}var ua=Ra(12);"use strict";Object.defineProperty(D,"__esModule",{value:!0});var va=Ra(13);class oa{constructor(b){this.start=b}}class Oa extends oa{constructor(b,f,l,m,v,z,J,R,ea,fa,Ha,Ga,Pa){super(b);this.rules=f;this.topRules=l;this.tokens=m;this.externalTokens=v;this.externalSpecializers=
z;this.precedences=J;this.mainSkip=R;this.scopedSkip=ea;this.dialects=fa;this.grammars=Ha;this.externalProps=Ga;this.autoDelim=Pa}toString(){return Object.values(this.rules).join("\n")}}class Ua extends oa{constructor(b,f,l,m,v,z){super(b);this.id=f;this.exported=l;this.props=m;this.params=v;this.expr=z}toString(){return this.id.name+(this.params.length?`<${this.params.join()}>`:"")+" -\x3e "+this.expr}}class $a extends oa{constructor(b,f){super(b);this.items=f}}class ab extends oa{constructor(b,
f){super(b);this.items=f}}class cb extends oa{constructor(b,f,l,m){super(b);this.precedences=f;this.rules=l;this.literals=m}}class ob extends oa{constructor(b,f,l){super(b);this.literal=f;this.props=l}}class Kb extends oa{constructor(b,f,l,m){super(b);this.id=f;this.source=l;this.tokens=m}}class jc extends oa{constructor(b,f,l,m,v,z){super(b);this.type=f;this.token=l;this.id=m;this.source=v;this.tokens=z}}class ya extends oa{constructor(b,f,l,m){super(b);this.id=f;this.externalID=l;this.source=m}}
class Lb extends oa{constructor(b,f,l,m){super(b);this.id=f;this.externalID=l;this.source=m}}class Cb extends oa{constructor(b,f){super(b);this.name=f}toString(){return this.name}}class lb extends oa{walk(b){return b(this)}eq(b){return!1}}lb.prototype.prec=10;class Ib extends lb{constructor(b,f,l,m){super(b);this.namespace=f;this.id=l;this.args=m}toString(){return this.id.name+(this.args.length?`<${this.args.join()}>`:"")}eq(b){return(this.namespace?null!=b.namespace&&b.namespace.name==this.namespace.name:
!b.namespace)&&this.id.name==b.id.name&&Da(this.args,b.args)}walk(b){let f=Na(this.args,b);return b(f==this.args?this:new Ib(this.start,this.namespace,this.id,f))}}class G extends lb{constructor(b,f,l,m,v){super(b);this.type=f;this.props=l;this.token=m;this.content=v}toString(){return`@${this.type}[${this.props.join(",")}]<${this.token}, ${this.content}>`}eq(b){return this.type==b.type&&fb.eqProps(this.props,b.props)&&Ka(this.token,b.token)&&Ka(this.content,b.content)}walk(b){let f=this.token.walk(b),
l=this.content.walk(b);return b(f==this.token&&l==this.content?this:new G(this.start,this.type,this.props,f,l))}}class Y extends lb{constructor(b,f){super(b);this.rule=f}toString(){let b=this.rule;return`${b.id}${b.props.length?`[${b.props.join(",")}]`:""} { ${b.expr} }`}eq(b){let f=this.rule;b=b.rule;return Ka(f.expr,b.expr)&&f.id.name==b.id.name&&fb.eqProps(f.props,b.props)}walk(b){let f=this.rule,l=f.expr.walk(b);return b(l==f.expr?this:new Y(this.start,new Ua(f.start,f.id,!1,f.props,[],l)))}}
class ma extends lb{constructor(b,f){super(b);this.exprs=f}toString(){return this.exprs.map(b=>Ta(b,this)).join(" | ")}eq(b){return Da(this.exprs,b.exprs)}walk(b){let f=Na(this.exprs,b);return b(f==this.exprs?this:new ma(this.start,f))}}ma.prototype.prec=1;class ia extends lb{constructor(b,f,l){super(b);this.exprs=f;this.markers=l}toString(){return this.exprs.map(b=>Ta(b,this)).join(" ")}eq(b){return Da(this.exprs,b.exprs)&&this.markers.every((f,l)=>{let m=b.markers[l];return f.length==m.length&&
f.every((v,z)=>v.eq(m[z]))})}walk(b){let f=Na(this.exprs,b);return b(f==this.exprs?this:new ia(this.start,f,this.markers))}}ia.prototype.prec=2;class na extends oa{constructor(b,f,l){super(b);this.id=f;this.type=l}toString(){return("ambig"==this.type?"~":"!")+this.id.name}eq(b){return this.id.name==b.id.name&&this.type==b.type}}class pa extends lb{constructor(b,f,l){super(b);this.expr=f;this.kind=l}toString(){return Ta(this.expr,this)+this.kind}eq(b){return Ka(this.expr,b.expr)&&this.kind==b.kind}walk(b){let f=
this.expr.walk(b);return b(f==this.expr?this:new pa(this.start,f,this.kind))}}pa.prototype.prec=3;class Ja extends lb{constructor(b,f){super(b);this.value=f}toString(){return JSON.stringify(this.value)}eq(b){return this.value==b.value}}class db extends lb{constructor(b,f,l){super(b);this.ranges=f;this.inverted=l}toString(){return`[${this.inverted?"^":""}${this.ranges.map(([b,f])=>String.fromCodePoint(b)+(f==b+1?"":"-"+String.fromCodePoint(f)))}]`}eq(b){return this.inverted==b.inverted&&this.ranges.length==
b.ranges.length&&this.ranges.every(([f,l],m)=>{let [v,z]=b.ranges[m];return f==v&&l==z})}}class eb extends lb{constructor(b){super(b)}toString(){return"_"}eq(){return!0}}class fb extends oa{constructor(b,f,l){super(b);this.name=f;this.value=l}eq(b){return this.name==b.name&&this.value.length==b.value.length&&this.value.every((f,l)=>f.value==b.value[l].value&&f.name==b.value[l].name)}toString(){let b=this.name;if(this.value.length){b+="\x3d";for(let {name:f,value:l}of this.value)b+=f?`{${f}}`:/[^\w-]/.test(l)?
JSON.stringify(l):l}return b}static eqProps(b,f){return b.length==f.length&&b.every((l,m)=>l.eq(f[m]))}}class Za extends oa{constructor(b,f,l){super(b);this.value=f;this.name=l}}class Rb extends Error{}const Fb=Object.create(null);let bc=0;class bd{constructor(b,f,l,m=Fb){this.name=b;this.flags=f;this.nodeName=l;this.props=m;this.hash=++bc;this.id=-1;this.rules=[];a:{for(let v in m)break a;this.props=Fb}}toString(){return this.name}get nodeType(){return this.top||null!=this.nodeName||this.props!=
Fb||this.repeatRelated}get terminal(){return 0<(this.flags&1)}get eof(){return 0<(this.flags&4)}get error(){return"error"in this.props}get top(){return 0<(this.flags&2)}get interesting(){return 0<this.flags||null!=this.nodeName}get repeated(){return 0<(this.flags&16)}get repeatWrap(){return 0<(this.flags&32)}get repeatRelated(){return 0<(this.flags&48)}set preserve(b){this.flags=b?this.flags|8:this.flags&-9}get preserve(){return 0<(this.flags&8)}cmp(b){return this.hash-b.hash}}class Qb{constructor(){this.terms=
[];this.names=Object.create(null);this.repeatMap=Object.create(null);this.tops=[];this.eof=this.term("␄",null,5);this.error=this.term("⚠","⚠",8,{error:""})}term(b,f,l=0,m=Fb){f=new bd(b,l,f,m);this.terms.push(f);return this.names[b]=f}makeTop(b,f){b=this.term("@top",b,2,f);this.tops.push(b);return b}makeTerminal(b,f,l=Fb){return this.term(b,f,1,l)}makeNonTerminal(b,f,l=Fb){return this.term(b,f,0,l)}makeRepeat(b){let f=this.term(b,null,16);b=this.term(b+"-wrap",null,32);this.repeatMap[f.name]=b;return{inner:f,
outer:b}}uniqueName(b){for(let f=0;;f++){let l=f?`${b}-${f}`:b;if(!this.names[l])return l}}finish(b){for(var f of b)f.name.rules.push(f);this.terms=this.terms.filter(z=>z.terminal||z.preserve||b.some(J=>J.name==z||J.parts.includes(z)));f={};let l=[this.error];this.error.id=0;let m=1;for(var v of this.terms)0>v.id&&v.nodeType&&!v.repeatRelated&&(v.id=m++,l.push(v));v=m;for(let z of this.terms)z.repeated&&(z.id=m++,l.push(z));for(let z of this.terms)z.repeated&&(this.repeatMap[z.name].id=m++);this.eof.id=
m++;for(let z of this.terms)0>z.id&&(z.id=m++),z.name&&(f[z.id]=z.name);if(65534<=m)throw new Rb("Too many terms");return{nodeTypes:l,names:f,minRepeatTerm:v,maxTerm:m-1}}}const Nc=[];class Jb{constructor(b,f=Nc,l=0){this.precedence=b;this.ambigGroups=f;this.cut=l}join(b){return this==Jb.none||this==b?b:b==Jb.none?this:new Jb(Math.max(this.precedence,b.precedence),xa(this.ambigGroups,b.ambigGroups),Math.max(this.cut,b.cut))}cmp(b){return this.precedence-b.precedence||wa(this.ambigGroups,b.ambigGroups,
(f,l)=>f<l?-1:f>l?1:0)||this.cut-b.cut}}Jb.none=new Jb(0);let Bc=0;class qc{constructor(b,f,l,m){this.name=b;this.parts=f;this.conflicts=l;this.skip=m;this.id=Bc++}cmp(b){return this.id-b.id}cmpNoName(b){return this.parts.length-b.parts.length||this.skip.hash-b.skip.hash||this.parts.reduce((f,l,m)=>f||l.cmp(b.parts[m]),0)||wa(this.conflicts,b.conflicts,(f,l)=>f.cmp(l))}toString(){return this.name+" -\x3e "+this.parts.join(" ")}get isRepeatLeaf(){return this.name.repeated&&!(2==this.parts.length&&
this.parts[0]==this.name)}sameReduce(b){return this.name==b.name&&this.parts.length==b.parts.length&&this.isRepeatLeaf==b.isRepeatLeaf}}class Cc{constructor(b,f=b+1,l){this.from=b;this.to=f;this.target=l}toString(){return`-> ${this.target.id}[label=${JSON.stringify(0>this.from?"ε":Ba(this.from)+(this.to>this.from+1?"-"+Ba(this.to-1):""))}]`}}let cd=1;class xb{constructor(b=[],f=cd++){this.accepting=b;this.id=f;this.edges=[]}edge(b,f=b+1,l){this.edges.push(new Cc(b,f,l))}nullEdge(b){this.edge(-1,-1,
b)}compile(){function b(m){let v=f[qa(m)]=new xb(m.reduce((J,R)=>xa(J,R.accepting),[]),l++),z=[];for(let J of m)for(let R of J.edges)0<=R.from&&z.push(R);m=za(z);for(let J of m)m=J.targets.sort((R,ea)=>R.id-ea.id),v.edge(J.from,J.to,f[qa(m)]||b(m));return v}let f=Object.create(null),l=0;return b(this.closure().sort((m,v)=>m.id-v.id))}closure(){function b(l){if(!f.includes(l)){(l.edges.some(m=>0<=m.from)||0<l.accepting.length&&!l.edges.some(m=>{a:{var v=l.accepting;m=m.target.accepting;if(v.length!=
m.length)v=!1;else{for(let z=0;z<v.length;z++)if(v[z]!=m[z]){v=!1;break a}v=!0}}return v}))&&f.push(l);for(let m of l.edges)0>m.from&&b(m.target)}}let f=[];b(this);return f}findConflicts(b){function f(v,z,J,R){v.id<z.id&&([v,z]=[z,v]);l.some(ea=>ea.a==v&&ea.b==z)||l.push(new Mb(v,z,Ia(J),R&&Ia(R)))}let l=[],m=this.cycleTerms();this.reachable((v,z)=>{if(0!=v.accepting.length){for(let J=0;J<v.accepting.length;J++)for(let R=J+1;R<v.accepting.length;R++)f(v.accepting[J],v.accepting[R],z);v.reachable((J,
R)=>{if(J!=v)for(let ea of J.accepting){J=m.includes(ea);for(let fa of v.accepting)ea==fa||!J&&!m.includes(fa)&&b(ea,fa)||f(ea,fa,z,z.concat(R))}})}});return l}cycleTerms(){let b=[],f=[];(function z(m,v){let J=v.indexOf(m);if(-1<J)for(m=J;m<v.length;m++)b.includes(v[m])||(b.push(v[m]),v[m].reachable(R=>{for(let ea of R.accepting)f.includes(ea)||f.push(ea)}));else{v.push(m);for(let R of m.edges)z(R.target,v);v.pop()}})(this,[]);return f}reachable(b){let f=[],l=[];(function z(v){b(v,l);f.push(v);for(let J of v.edges)f.includes(J.target)||
(l.push(J),z(J.target),l.pop())})(this)}toString(){let b="digraph {\n";this.reachable(f=>{f.accepting.length&&(b+=`  ${f.id} [label=${JSON.stringify(f.accepting.join())}];\n`);for(let l of f.edges)b+=`  ${f.id} ${l};\n`});return b+"}"}toArray(b,f){let l=[],m=[];this.reachable(v=>{let z=m.length,J=z+3+2*v.accepting.length;l[v.id]=z;m.push(v.stateMask(b),J,v.edges.length);v.accepting.sort((R,ea)=>f.indexOf(R.id)-f.indexOf(ea.id));for(let R of v.accepting)m.push(R.id,b[R.id]||65535);for(let R of v.edges)m.push(R.from,
R.to,-R.target.id-1)});for(let v=0;v<m.length;v++)0>m[v]&&(m[v]=l[-m[v]-1]);if(65536<m.length)throw new Rb("Tokenizer tables too big to represent with 16-bit offsets.");return Uint16Array.from(m)}stateMask(b){let f=0;this.reachable(l=>{for(let m of l.accepting)f|=b[m.id]||65535});return f}}class Mb{constructor(b,f,l,m){this.a=b;this.b=f;this.exampleA=l;this.exampleB=m}}class pb{constructor(b,f,l){this.from=b;this.to=f;this.targets=l}}let rc=/[\w_]+/gy;try{rc=/[\p{Alphabetic}\d_]+/ugy}catch(b){}const lc=
[];class Ec{constructor(b,f=null){this.string=b;this.fileName=f;this.type="sof";this.value=null;this.end=this.start=0;this.next()}lineInfo(b){for(let f=1,l=0;;){let m=this.string.indexOf("\n",l);if(-1<m&&m<b)++f,l=m+1;else return{line:f,ch:b-l}}}message(b,f=-1){let l=this.fileName||"";-1<f&&(f=this.lineInfo(f),l+=(l?" ":"")+f.line+":"+f.ch);return l?b+` (${l})`:b}raise(b,f=-1){throw new Rb(this.message(b,f));}match(b,f){return(f=f.exec(this.string.slice(b)))?b+f[0].length:-1}next(){let b=this.match(this.end,
/^(\s|\/\/.*|\/\*[^]*?\*\/)*/);if(b==this.string.length)return this.set("eof",null,b,b);var f=this.string[b];if('"'==f)return f=this.match(b+1,/^(\\.|[^"])*"/),-1==f&&this.raise("Unterminated string literal",b),this.set("string",w(this.string.slice(b+1,f-1)),b,f);if("'"==f)return f=this.match(b+1,/^(\\.|[^'])*'/),-1==f&&this.raise("Unterminated string literal",b),this.set("string",w(this.string.slice(b+1,f-1)),b,f);if("@"==f)return rc.lastIndex=b+1,(f=rc.exec(this.string))?this.set("at",f[0],b,b+
1+f[0].length):this.raise("@ without a name",b);if("$"!=f&&"!"!=f||"["!=this.string[b+1]){if(/[\[\]()!~+*?{}<>\.,|:$=]/.test(f))return this.set(f,null,b,b+1);{rc.lastIndex=b;let l=rc.exec(this.string);return l?this.set("id",l[0],b,b+l[0].length):this.raise("Unexpected character "+JSON.stringify(f),b)}}f=this.match(b+2,/^(?:\\.|[^\]])*\]/);-1==f&&this.raise("Unterminated character set",b);return this.set("set",this.string.slice(b+2,f-1),b,f)}set(b,f,l,m){this.type=b;this.value=f;this.start=l;this.end=
m}eat(b,f=null){if(this.type!=b||null!=f&&this.value!==f)return!1;this.next();return!0}unexpected(){return this.raise(`Unexpected token '${this.string.slice(this.start,this.end)}'`,this.start)}expect(b,f=null){let l=this.value;(this.type!=b||null!=f&&l!==f)&&this.unexpected();this.next();return l}parse(){{var b=this.start;let z=[];var f=null,l=null;let J=null,R=[],ea=[],fa=[],Ha=[],Ga=[],Pa=[],Sa=!1;for(;"eof"!=this.type;){var m=this.start;if("at"==this.type&&"top"==this.value)this.next(),m="id"==
this.type?O(this):new Cb(m,"@top"),Pa.length&&"@top"===m.name&&this.raise("Unnamed secondary @top declaration",this.start),Pa.push(ja(this,m));else if("at"==this.type&&"tokens"==this.value)if(l)this.raise("Multiple @tokens declaractions",this.start);else{{l=this.start;this.next();this.expect("{");m=[];var v=[];let Ya=[];for(;!this.eat("}");)"at"==this.type&&"precedence"==this.value?Ya.push(A(this)):"string"==this.type?v.push(new ob(this.start,this.expect("string"),La(this))):m.push(ja(this));l=new cb(l,
Ya,m,v)}}else if(this.eat("at","external"))this.eat("id","tokens")?fa.push(y(this,m)):this.eat("id","grammar")?Ga.push(p(this,m)):this.eat("id","prop")?Ga.push(t(this,m)):this.eat("id","extend")?Ha.push(u(this,"extend",m)):this.eat("id","specialize")?Ha.push(u(this,"specialize",m)):this.unexpected();else if(this.eat("at","dialects"))for(this.expect("{"),m=!0;!this.eat("}");m=!1)m||this.eat(","),ea.push(O(this));else if("at"==this.type&&"precedence"==this.value)if(f)this.raise("Multiple precedence declarations",
this.start);else{f=this.start;this.next();this.expect("{");for(m=[];!this.eat("}");)m.length&&this.eat(","),m.push({id:O(this),type:this.eat("at","left")?"left":this.eat("at","right")?"right":this.eat("at","cut")?"cut":null});f=new $a(f,m)}else if(this.eat("at","detectDelim"))Sa=!0;else if(this.eat("at","skip"))if(m=ka(this),"{"==this.type){this.next();for(v=[];!this.eat("}");)v.push(ja(this));R.push({expr:m,rules:v})}else J&&this.raise("Multiple top-level skip declarations",this.start),J=m;else z.push(ja(this))}b=
Pa.length?new Oa(b,z,Pa,l,fa,Ha,f,J,R,ea,Ga,[],Sa):this.raise("Missing @top declaration")}return b}}class mc{constructor(b,f,l,m,v,z){this.rule=b;this.pos=f;this.ahead=l;this.ambigAhead=m;this.skipAhead=v;this.prev=z;b=N(N(b.id,f),v.hash);for(var J of this.ahead)b=N(b,J.hash);for(let R of m){m=b;J=R;for(b=0;b<J.length;b++)m=N(m,J.charCodeAt(b));b=m}this.hash=b}get next(){return this.pos<this.rule.parts.length?this.rule.parts[this.pos]:null}advance(){return new mc(this.rule,this.pos+1,this.ahead,this.ambigAhead,
this.skipAhead,this)}reverse(){return new mc(this.rule,this.pos-1,this.ahead,this.ambigAhead,this.skipAhead,this.prev.prev)}get skip(){return this.pos==this.rule.parts.length?this.skipAhead:this.rule.skip}cmp(b){return this.rule.cmp(b.rule)||this.pos-b.pos||this.skipAhead.hash-b.skipAhead.hash||wa(this.ahead,b.ahead,(f,l)=>f.cmp(l))||wa(this.ambigAhead,b.ambigAhead,T)}eqSimple(b){return b.rule==this.rule&&b.pos==this.pos}toString(){let b=this.rule.parts.map(f=>f.name);b.splice(this.pos,0,"·");return`${this.rule.name} -> ${b.join(" ")}`}eq(b){return this==
b||this.hash==b.hash&&this.rule==b.rule&&this.pos==b.pos&&this.skipAhead==b.skipAhead&&M(this.ahead,b.ahead)&&M(this.ambigAhead,b.ambigAhead)}trail(){let b=[];for(let f=this.prev;f;f=f.prev)b.push(f.next);return b.reverse().join(" ")}conflicts(b=this.pos){let f=this.rule.conflicts[b];b==this.rule.parts.length&&this.ambigAhead.length&&(f=f.join(new Jb(0,this.ambigAhead)));return f}static conflictsAt(b,f){let l=Jb.none,m=[];for(var v of b)l=l.join(v.conflicts()),0==v.pos&&ha(v.rule.name,m);for(b=0;b<
m.length;b++){v=m[b];for(let z of f)z.next==v&&(l=l.join(z.conflicts()),0==z.pos&&ha(z.rule.name,m))}return l}}class fc{constructor(b,f){this.term=b;this.target=f}eq(b){return b instanceof fc&&this.term==b.term&&b.target.id==this.target.id}cmp(b){return b instanceof gc?-1:this.term.id-b.term.id||this.target.id-b.target.id}toString(){return"s"+this.target.id}map(b,f){b=b[this.target.id];return b==this.target.id?this:new fc(this.term,f[b])}}class gc{constructor(b,f){this.term=b;this.rule=f}eq(b){return b instanceof
gc&&this.term==b.term&&b.rule.sameReduce(this.rule)}cmp(b){return b instanceof fc?1:this.term.id-b.term.id||this.rule.name.id-b.rule.name.id||this.rule.parts.length-b.rule.parts.length}toString(){return`${this.rule.name.name}(${this.rule.parts.length})`}map(){return this}}class uc{constructor(b,f,l=0,m,v=P(f),z=null){this.id=b;this.set=f;this.flags=l;this.skip=m;this.hash=v;this.topRule=z;this.actions=[];this.actionPositions=[];this.goto=[];this.tokenGroup=-1;this.partOfSkip=this.defaultReduce=null;
this.nested=-1}toString(){let b=this.actions.map(f=>f.term+"\x3d"+f).join(",")+(this.goto.length?" | "+this.goto.map(f=>f.term+"\x3d"+f).join(","):"");return this.id+": "+this.set.filter(f=>0<f.pos).join()+(this.defaultReduce?`\n  always ${this.defaultReduce.name}(${this.defaultReduce.parts.length})`:b.length?"\n  "+b:"")}addActionInner(b,f){for(let l=0;l<this.actions.length;l++){let m=this.actions[l];if(m.term==b.term){if(m.eq(b))return null;let v=mc.conflictsAt(f,this.set),z=mc.conflictsAt(this.actionPositions[l],
this.set),J=v.precedence-z.precedence;if(0<J)this.actions.splice(l,1),this.actionPositions.splice(l,1),l--;else{if(0>J)return null;if(!v.ambigGroups.some(R=>z.ambigGroups.includes(R)))return m}}}this.actions.push(b);this.actionPositions.push(f);return null}addAction(b,f){var l=this.addActionInner(b,f);if(l){let m=this.actionPositions[this.actions.indexOf(l)][0];l=l instanceof fc?`shift/reduce conflict between\n  ${m}\nand\n  ${f[0].rule}`:`reduce/reduce conflict between\n  ${f[0].rule}\nand\n  ${m.rule}`;
f=f[0].trail();50<f.length&&(f=f.slice(f.length-50).replace(/.*? /,"… "));l+=`\nWith input:\n  ${f} · ${b.term} …`;throw new Rb(l);}}getGoto(b){return this.goto.find(f=>f.term==b)}hasSet(b){return H(this.set,b)}finish(){if(this.actions.length){let b=this.actions[0];if(b instanceof gc){let {rule:f}=b;this.actions.every(l=>l instanceof gc&&l.rule.sameReduce(f))&&(this.defaultReduce=f)}}this.actions.sort((b,f)=>b.cmp(f));this.goto.sort((b,f)=>b.cmp(f))}eq(b){let f=this.defaultReduce,l=b.defaultReduce;
return f||l?f&&l?f.sameReduce(l):!1:this.skip==b.skip&&this.tokenGroup==b.tokenGroup&&H(this.actions,b.actions)&&H(this.goto,b.goto)}}class Jc{constructor(b,f,l,m,v,z){this.rule=b;this.ahead=f;this.origIndex=l;this.ambigAhead=m;this.skipAhead=v;this.prev=z}}class dd{constructor(b,f){this.set=b;this.state=f}}const Fc=[],ib=[],Gc="undefined"!=typeof ua&&ua.env.LOG||"";class Zb{constructor(b,f){this.terms=b;this.conflicts=f}concat(b){if(this==Zb.none)return b;if(b==Zb.none)return this;let f=null;if(this.conflicts||
b.conflicts){f=this.conflicts?this.conflicts.slice():this.ensureConflicts();let l=b.ensureConflicts();f[f.length-1]=f[f.length-1].join(l[0]);for(let m=1;m<l.length;m++)f.push(l[m])}return new Zb(this.terms.concat(b.terms),f)}withConflicts(b,f){if(f==Jb.none)return this;let l=this.conflicts?this.conflicts.slice():this.ensureConflicts();l[b]=l[b].join(f);return new Zb(this.terms,l)}ensureConflicts(){if(this.conflicts)return this.conflicts;let b=[];for(let f=0;f<=this.terms.length;f++)b.push(Jb.none);
return b}}Zb.none=new Zb(ib,null);class xc{constructor(b,f,l){this.id=b;this.args=f;this.term=l}matches(b){return this.id==b.id.name&&Da(b.args,this.args)}matchesRepeat(b){return this.id==b.kind&&Ka(b.expr,this.args[0])}}class Hc{constructor(b,f){this.options=f;this.terms=new Qb;this.nestedGrammars=[];this.specialized=Object.create(null);this.tokenOrigins=Object.create(null);this.rules=[];this.built=[];this.ruleNames=Object.create(null);this.namespaces=Object.create(null);this.namedTerms=Object.create(null);
this.termTable=Object.create(null);this.knownProps=Object.create(null);this.astRules=[];this.currentSkip=[];this.skipRules=[];this.input=new Ec(b,f.fileName);this.ast=this.input.parse();b=va.NodeProp;for(var l in b)b[l]instanceof va.NodeProp&&(this.knownProps[l]={prop:b[l],source:{name:l,from:null}});for(var m of this.ast.externalProps)this.knownProps[m.id.name]={prop:this.options.externalProp?this.options.externalProp(m.id.name):va.NodeProp.string(),source:{name:m.externalID.name,from:m.source}};
this.dialects=this.ast.dialects.map(fa=>fa.name);this.tokens=new Gb(this,this.ast.tokens);this.externalTokens=this.ast.externalTokens.map(fa=>new Ic(this,fa));this.externalSpecializers=this.ast.externalSpecializers.map(fa=>new Oc(this,fa));this.defineNamespace("nest",new Sc);this.noSkip=this.newName("%noskip",!0);this.defineRule(this.noSkip,[]);for(let fa of this.ast.grammars)this.ast.grammars.some(Ha=>Ha!=fa&&Ha.id.name==fa.id.name)&&this.raise(`Duplicate external grammar name '${fa.id.name}'`,fa.id.start);
l=this.ast.mainSkip?this.newName("%mainskip",!0):this.noSkip;let v=[];for(var z of this.ast.rules)this.astRules.push({skip:l,rule:z});for(let fa of this.ast.scopedSkip){z=this.noSkip;m=this.ast.scopedSkip.findIndex((Ha,Ga)=>Ga<v.length&&Ka(Ha.expr,fa.expr));-1<m?z=v[m]:this.ast.mainSkip&&Ka(fa.expr,this.ast.mainSkip)?z=l:F(fa.expr)||(z=this.newName("%skip",!0));v.push(z);for(var J of fa.rules)this.astRules.push({skip:z,rule:J})}for(var {rule:R}of this.astRules)this.unique(R.id),this.namespaces[R.id.name]&&
this.raise(`Rule name '${R.id.name}' conflicts with a defined namespace`,R.id.start);this.currentSkip.push(this.noSkip);l!=this.noSkip&&(this.skipRules.push(l),this.defineRule(l,this.normalizeExpr(this.ast.mainSkip)));for(J=0;J<this.ast.scopedSkip.length;J++)R=v[J],R==this.noSkip||R==l||0!=J&&-1!=v.lastIndexOf(R,J-1)||(this.skipRules.push(v[J]),this.defineRule(v[J],this.normalizeExpr(this.ast.scopedSkip[J].expr)));this.currentSkip.pop();for(var ea of this.ast.topRules){this.currentSkip.push(l);let {name:fa,
props:Ha}=this.nodeInfo(ea.props,"@top"==ea.id.name?null:ea.id.name,ib,ib,ea.expr,{top:"true"});this.defineRule(this.terms.makeTop(fa,Ha),this.normalizeExpr(ea.expr));this.currentSkip.pop()}for(let fa of this.externalSpecializers)fa.finish();for(let fa of this.ast.rules)if(fa.exported&&this.ruleNames[fa.id.name]&&0==fa.params.length){let {name:Ha,props:Ga}=this.nodeInfo(fa.props,fa.id.name);(this.namedTerms[fa.id.name]=this.newName(fa.id.name,Ha,Ga)).preserve=!0;fa.expr instanceof ia&&0==fa.expr.exprs.length&&
this.used(fa.id.name)}for(let fa in this.ruleNames)(ea=this.ruleNames[fa])&&this.warn(`Unused rule '${ea.name}'`,ea.start);this.tokens.takePrecedences()}unique(b){b.name in this.ruleNames&&this.raise(`Duplicate definition of rule '${b.name}'`,b.start);this.ruleNames[b.name]=b}used(b){this.ruleNames[b]=null}defineNamespace(b,f,l=0){this.namespaces[b]&&this.raise(`Duplicate definition of namespace '${b}'`,l);this.namespaces[b]=f}newName(b,f=null,l=Fb){for(let m=f?0:1;;m++){let v=m?`${b}-${m}`:b;if(!this.terms.names[v])return this.terms.makeNonTerminal(v,
!0===f?null:f,l)}}getParser(){var b=ta(this.rules,[...this.skipRules,...this.nestedGrammars.map(Aa=>Aa.placeholder),...this.terms.tops]);let {nodeTypes:f,names:l,minRepeatTerm:m,maxTerm:v}=this.terms.finish(b);for(var z in this.namedTerms)this.termTable[z]=this.namedTerms[z].id;/\bgrammar\b/.test(Gc)&&console.log(b.join("\n"));let J=Ca(this.terms);b=this.skipRules.map(Aa=>Aa.rules.some(Wa=>0<Wa.parts.length)?Fa(this.terms,[Aa],J):null);var R=b.map(Aa=>Aa?Aa[0].actions.map(Wa=>Wa.term):ib);z=Fa(this.terms,
this.terms.tops,J);let {tokenMasks:ea,tokenGroups:fa,tokenPrec:Ha}=this.tokens.buildTokenGroups(z,b,R),Ga=Db(Hb(z));var Pa=Ga.length+1,Sa=b.map((Aa,Wa)=>{if(!Aa)return null;if(!Aa[0].actions.every(rb=>sb(rb,this.skipRules[Wa]))){let rb=Ga.length;for(let wb of Aa)Ga.push(wb),wb.partOfSkip=this.skipRules[Wa],wb.id+=rb}return Aa[0]});this.addNestedGrammars(Ga);/\blr\b/.test(Gc)&&console.log(Ga.join("\n"));b=new Uint16Array(this.externalSpecializers.length+Object.keys(this.specialized).length);z=[];for(let Aa of this.externalSpecializers)b[z.length]=
Aa.term.id,z.push((Wa,rb)=>this.options.externalSpecializer(Aa.ast.id.name,this.termTable)(Wa,rb)<<1|("extend"==Aa.ast.type?1:0));for(var Ya in this.specialized){b[z.length]=this.terms.names[Ya].id;let Aa=kb(this.specialized[Ya]);z.push(Wa=>Aa[Wa]||-1)}let nb=this.tokens.tokenizer(ea,Ha),mb=Aa=>Aa instanceof sc?Aa.set.ast.start:this.tokens.ast?this.tokens.ast.start:-1;Ya=fa.map(Aa=>new va.Parser.TokenGroup(nb,Aa.id)).concat(this.externalTokens.map(Aa=>new sc(Aa,this.termTable))).sort((Aa,Wa)=>mb(Aa)-
mb(Wa));let Ob=new zc;var qb=Sa.map((Aa,Wa)=>{let rb=[];if(Aa){for(let wb of Aa.actions)sb(wb,this.skipRules[Wa])?rb.push(wb.term.id,0,4):rb.push(wb.term.id,Aa.id,2);Aa.actions=Aa.actions.filter(wb=>!sb(wb,this.skipRules[Wa]))}rb.push(65535);return Ob.storeArray(rb)}),$b=Ob.storeArray([65535]);Sa=new Uint32Array(6*Ga.length);let Yb=this.computeForceReductions(Ga);for(var Nb of Ga){let Aa=$b;var Pb=ib;Nb.skip!=this.noSkip&&(Pb=this.skipRules.indexOf(Nb.skip),Aa=qb[Pb],Pb=R[Pb]);this.finishState(Nb,
Ya,Ob,Aa,Pb,Nb.id>=Pa,Yb[Nb.id],Sa)}Nb=Object.create(null);for(R=0;R<this.dialects.length;R++)Nb[this.dialects[R]]=Ob.storeArray((this.tokens.byDialect[R]||ib).map(Aa=>Aa.id).concat(65535));R=this.nestedGrammars.map(Aa=>({name:Aa.name,grammar:W(this,Aa),end:new va.Parser.TokenGroup(Aa.end.compile().toArray({},ib),0),placeholder:Aa.placeholder.id}));Pa=Object.create(null);for(let Aa of this.terms.tops)Pa[Aa.nodeName||"@top"]=[Ga.find(Wa=>Wa.topRule==Aa).id,Aa.id];let cc=this.gatherSkippedTerms();qb=
new va.NodeGroup(f.map((Aa,Wa)=>this.toNodeType(Aa,cc,Wa)));$b=Ob.storeArray(Ha.concat(65535));return new va.Parser(Sa,Ob.finish(),dc(Ga),qb,v,m,Ya,Pa,R,Nb,b,z,$b,l)}toNodeType(b,f,l){let m=[],v={propData:m};f.includes(b)&&va.NodeProp.skipped.set(v,!0);for(let z in b.props){f=this.knownProps[z];if(!f)throw new Rb("No known prop type for "+z);let J=f.prop.deserialize(b.props[z]);f.prop.set(v,J);m.push(f.source,b.props[z])}return new va.NodeType(b.nodeName||"",v,l)}addNestedGrammars(b){for(let f of b)if(b=
f.set.filter(l=>this.nestedGrammars.some(m=>m.placeholder==l.next)),b.length){let l=b[0].next;b.every(m=>m.next==l)||this.raise(`Multiple nested grammars possible after ${b[0].trail()}`);f.set.every(m=>m.next==l||0==m.pos&&f.set.some(v=>v.next==m.rule.name))||this.raise(`Nested grammar in ambiguous position after ${b[0].trail()} `+f.set);f.nested=this.nestedGrammars.findIndex(m=>m.placeholder==l)}}makeTerminal(b,f,l){return this.terms.makeTerminal(this.terms.uniqueName(b),f,l)}gatherSkippedTerms(){let b=
this.skipRules.slice();for(let f=0;f<b.length;f++)for(let l of b[f].rules)for(let m of l.parts)m.nodeType&&!b.includes(m)&&b.push(m);return b}computeForceReductions(b){function f(fa,Ha,Ga=null){return(fa=v[fa])?fa.some(Pa=>{let Sa=Ga?Ga.filter(nb=>Pa.parents.includes(nb)):Pa.parents;if(0==Sa.length)return!1;if(Pa.target==Ha)return!0;let Ya=ea[Pa.target];return null!=Ya&&f(Ya,Ha,Sa)}):!1}let l=[],m=[],v=Object.create(null);for(var z of b){l.push(0);for(let fa of z.goto){var J=v[fa.term.id]||(v[fa.term.id]=
[]),R=J.find(Ha=>Ha.target==fa.target.id);R?R.parents.push(z.id):J.push({parents:[z.id],target:fa.target.id})}m[z.id]=z.set.filter(fa=>0<fa.pos&&!fa.rule.name.top).sort((fa,Ha)=>Ha.pos-fa.pos||fa.rule.parts.length-Ha.rule.parts.length)}let ea=Object.create(null);for(let fa of b)fa.defaultReduce&&0<fa.defaultReduce.parts.length&&(l[fa.id]=vb(fa.defaultReduce,fa.partOfSkip),1==fa.defaultReduce.parts.length&&(ea[fa.id]=fa.defaultReduce.name.id));for(z=1;;z++){J=!0;for(let fa of b)if(!fa.defaultReduce)if(R=
m[fa.id],R.length!=z)R.length>z&&(J=!1);else for(let Ha of R)if(1!=Ha.pos||!f(Ha.rule.name.id,fa.id)){l[fa.id]=vb(Ha.rule,fa.partOfSkip,Ha.pos);1==Ha.pos&&(ea[fa.id]=Ha.rule.name.id);break}if(J)break}return l}finishState(b,f,l,m,v,z,J,R){let ea=[],fa=b.defaultReduce?vb(b.defaultReduce,b.partOfSkip):0;z=(z?1:0)|(-1<b.nested?4|b.nested<<10:0);var Ha=-1;if(0==fa)for(var Ga of b.actions)if(Ga instanceof fc)ea.push(Ga.term.id,Ga.target.id,0);else{var Pa=vb(Ga.rule,b.partOfSkip);b.partOfSkip&&Ga.term.eof?
Ha=Pa:ea.push(Ga.term.id,Pa&65535,Pa>>16)}-1<Ha&&ea.push(0,Ha&65535,Ha>>16);ea.push(65535);b.set.some(Sa=>Sa.rule.name.top&&Sa.pos==Sa.rule.parts.length)&&(z|=2);Ga=[];for(Ha=0;Ha<b.actions.length+v.length;Ha++)for(Pa=Ha<b.actions.length?b.actions[Ha].term:v[Ha-b.actions.length];;)if((Pa=this.tokenOrigins[Pa.name])&&Pa.spec)Pa=Pa.spec;else{Pa&&Pa.external instanceof Ic&&Eb(Ga,Pa.external);break}Ga.sort((Sa,Ya)=>Sa.ast.start-Ya.ast.start);v=0;for(Ha=0;Ha<f.length;Ha++)if(Pa=f[Ha],Pa instanceof sc?
Ga.includes(Pa.set):Pa.id==b.tokenGroup)v|=1<<Ha;b=6*b.id;R[b+0]=z;R[b+1]=l.storeArray(ea);R[b+2]=m;R[b+3]=v;R[b+4]=fa;R[b+5]=J}substituteArgs(b,f,l){return 0==f.length?b:b.walk(m=>{var v;if(m instanceof Ib&&!m.namespace&&-1<(v=l.findIndex(z=>z.name==m.id.name))){v=f[v];if(m.args.length){if(v instanceof Ib&&!v.args.length)return new Ib(m.start,v.namespace,v.id,m.args);this.raise("Passing arguments to a parameter that already has arguments",m.start)}return v}if(m instanceof Y){v=m.rule;let z=this.substituteArgsInProps(v.props,
f,l);return z==v.props?m:new Y(m.start,new Ua(v.start,v.id,v.exported,z,v.params,v.expr))}return m instanceof G?(v=this.substituteArgsInProps(m.props,f,l),v==m.props?m:new G(m.start,m.type,v,m.token,m.content)):m})}substituteArgsInProps(b,f,l){let m=z=>{let J=z;for(let ea=0;ea<z.length;ea++){let fa=z[ea];if(fa.name){var R=l.findIndex(Ha=>Ha.name==fa.name);0>R||(J==z&&(J=z.slice()),R=f[R],R instanceof Ib&&!R.namespace&&!R.args.length?J[ea]=new Za(fa.start,R.id.name,null):R instanceof Ja?J[ea]=new Za(fa.start,
R.value,null):this.raise(`Trying to interpolate expression '${R}' into a prop`,fa.start))}}return J},v=b;for(let z=0;z<b.length;z++){let J=b[z],R=m(J.value);R!=J.value&&(v==b&&(v=b.slice()),v[z]=new fb(J.start,J.name,R))}return v}conflictsFor(b){let f=Jb.none,l=Jb.none;for(let v of b)if("ambig"==v.type)f=f.join(new Jb(0,[v.id.name]));else{var m=this.ast.precedences;let z=m?m.items.findIndex(J=>J.id.name==v.id.name):-1;0>z&&this.raise(`Reference to unknown precedence: '${v.id.name}'`,v.id.start);b=
m.items[z];m=m.items.length-z;"cut"==b.type?f=f.join(new Jb(0,ib,m)):(f=f.join(new Jb(m<<2)),l=l.join(new Jb((m<<2)+("left"==b.type?1:"right"==b.type?-1:0))))}return{here:f,atEnd:l}}raise(b,f=1){return this.input.raise(b,f)}warn(b,f=-1){b=this.input.message(b,f);this.options.warn?this.options.warn(b):console.warn(b)}defineRule(b,f){let l=this.currentSkip[this.currentSkip.length-1];for(let m of f)this.rules.push(new qc(b,m.terms,m.ensureConflicts(),l));return b}resolve(b){if(b.namespace){var f=this.namespaces[b.namespace.name];
f||this.raise(`Reference to undefined namespace '${b.namespace.name}'`,b.start);return f.resolve(b,this)}for(var l of this.built)if(l.matches(b))return[hb(l.term)];if(l=this.tokens.getToken(b))return[hb(l)];for(var m of this.externalTokens)if(l=m.getToken(b))return[hb(l)];for(f of this.externalSpecializers)if(m=f.getToken(b))return[hb(m)];f=this.astRules.find(v=>v.rule.id.name==b.id.name);if(!f)return this.raise(`Reference to undefined rule '${b.id.name}'`,b.start);f.rule.params.length!=b.args.length&&
this.raise(`Wrong number or arguments for '${b.id.name}'`,b.start);this.used(f.rule.id.name);return[hb(this.buildRule(f.rule,b.args,f.skip))]}normalizeRepeat(b){var f=this.built.find(v=>v.matchesRepeat(b));if(f)return hb(f.term);let {inner:l,outer:m}=this.terms.makeRepeat(this.terms.uniqueName(b.expr instanceof ia||b.expr instanceof ma?`(${b.expr})${b.kind}`:b.toString()));this.defineRule(m,"*"==b.kind?[Zb.none,hb(l)]:[hb(l)]);this.built.push(new xc(b.kind,[b.expr],m));f=this.normalizeExpr(b.expr);
f.push(new Zb([l,l],[Jb.none,new Jb(2E8-1,ib),new Jb(2E8,ib)]));this.defineRule(l,f);return hb(m)}normalizeSequence(b){function f(v,z,J){let {here:R,atEnd:ea}=m.conflictsFor(b.markers[z]);if(z==l.length)return[v.withConflicts(v.terms.length,R.join(J))];let fa=[];for(let Ha of l[z])for(let Ga of f(v.concat(Ha).withConflicts(v.terms.length,R),z+1,J.join(ea)))fa.push(Ga);return fa}let l=b.exprs.map(v=>this.normalizeExpr(v)),m=this;return f(Zb.none,0,Jb.none)}normalizeExpr(b){return b instanceof pa&&
"?"==b.kind?[Zb.none,...this.normalizeExpr(b.expr)]:b instanceof pa?[this.normalizeRepeat(b)]:b instanceof ma?b.exprs.reduce((f,l)=>f.concat(this.normalizeExpr(l)),[]):b instanceof ia?this.normalizeSequence(b):b instanceof Ja?[hb(this.tokens.getLiteral(b))]:b instanceof Ib?this.resolve(b):b instanceof G?[hb(this.resolveSpecialization(b))]:b instanceof Y?[hb(this.buildRule(b.rule,ib,this.currentSkip[this.currentSkip.length-1],!0))]:this.raise(`This type of expression ('${b}') may not occur in non-token rules`,
b.start)}buildRule(b,f,l,m=!1){let v=this.substituteArgs(b.expr,f,b.params),{name:z,props:J}=this.nodeInfo(b.props||ib,b.id.name,f,b.params,b.expr);b.exported&&b.params.length&&this.warn("Can't export parameterized rules",b.start);let R=this.newName(b.id.name+(f.length?"\x3c"+f.join(",")+"\x3e":""),z||!0,J);(R.nodeType||b.exported)&&0==b.params.length&&(z||(R.preserve=!0),this.namedTerms[b.id.name]=R);m||this.built.push(new xc(b.id.name,f,R));this.currentSkip.push(l);b=this.defineRule(R,this.normalizeExpr(v));
this.currentSkip.pop();return b}nodeInfo(b,f=null,l=ib,m=ib,v,z){f=this.nodeInfoInner(b,f,l,m,v,z);null!=f.dialect&&this.raise("Can't specify a dialect on non-token rules",b[0].start);return f}nodeInfoInner(b,f=null,l=ib,m=ib,v,z){let J=Fb;var R;if(R=f)R=f[0],R="_"==R||R.toUpperCase()!=R,R=!R;f=R&&!/ /.test(f)?f:null;R=null;for(let ea of b)"name"==ea.name?(f=this.finishProp(ea,l,m),/ /.test(f)&&this.raise(`Node names cannot have spaces ('${f}')`,ea.start)):"dialect"==ea.name?(1==ea.value.length||
ea.value[0].value||this.raise("The 'dialect' rule prop must hold a plain string value"),R=this.dialects.indexOf(ea.value[0].value),0>R&&this.raise(`Unknown dialect '${ea.value[0].value}'`,ea.value[0].start)):Xb.includes(ea.name)?this.raise(`Prop name '${ea.name}' is reserved`,ea.start):this.knownProps[ea.name]?(J==Fb&&(J=Object.create(null)),J[ea.name]=this.finishProp(ea,l,m)):this.raise(`Unknown prop name '${ea.name}'`,ea.start);v&&this.ast.autoDelim&&(f||J!=Fb)&&(l=this.findDelimiters(v))&&(Ab(l[0],
"closedBy",l[1].nodeName),Ab(l[1],"openedBy",l[0].nodeName));if(z&&z!=Fb){J==Fb&&(J=Object.create(null));for(let ea in z)ea in J||(J[ea]=z[ea])}J==Fb||f||J.top||this.raise("Node has properties but no name",b.length?b[0].start:v.start);return{name:f,props:J,dialect:R}}finishProp(b,f,l){return b.value.map(m=>{if(m.value)return m.value;var v=l.findIndex(z=>z.name==m.name);0>v&&this.raise(`Property refers to '${m.name}', but no parameter by that name is in scope`,m.start);v=f[v];return v instanceof Ib&&
!v.args.length&&!v.namespace?v.id.name:v instanceof Ja?v.value:this.raise(`Expression '${v}' can not be used as part of a property value`,m.start)}).join("")}resolveSpecialization(b){let f=b.type,{name:l,props:m,dialect:v}=this.nodeInfoInner(b.props);var z=this.normalizeExpr(b.token);1==z.length&&1==z[0].terms.length&&z[0].terms[0].terminal||this.raise(`The first argument to '${f}' must resolve to a token`,b.token.start);if(b.content instanceof Ja)var J=[b.content.value];else if(b.content instanceof
ma&&b.content.exprs.every(fa=>fa instanceof Ja))J=b.content.exprs.map(fa=>fa.value);else return this.raise(`The second argument to '${b.type}' must be a literal or choice of literals`,b.content.start);z=z[0].terms[0];let R=null,ea=this.specialized[z.name]||(this.specialized[z.name]=[]);for(let fa of J)J=ea.find(Ha=>Ha.value==fa),null==J?(R||(R=this.makeTerminal(z.name+"/"+JSON.stringify(fa),l,m),null!=v&&(this.tokens.byDialect[v]||(this.tokens.byDialect[v]=[])).push(R)),ea.push({value:fa,term:R,type:f,
dialect:v}),this.tokenOrigins[R.name]={spec:z}):(J.type!=f&&this.raise(`Conflicting specialization types for ${JSON.stringify(fa)} of ${z.name} (${f} vs ${J.type})`,b.start),J.dialect!=v&&this.raise(`Conflicting dialects for specialization ${JSON.stringify(fa)} of ${z.name}`,b.start),R&&J.term!=R&&this.raise(`Conflicting specialization tokens for ${JSON.stringify(fa)} of ${z.name}`,b.start),R=J.term);return R}findDelimiters(b){if(!(b instanceof ia)||2>b.exprs.length)return null;let f=v=>{if(v instanceof
Ja)return{term:this.tokens.getLiteral(v),str:v.value};if(v instanceof Ib&&0==v.args.length){var z=this.ast.rules.find(J=>J.id.name==v.id.name);if(z)return f(z.expr);if((z=this.tokens.rules.find(J=>J.id.name==v.id.name))&&z.expr instanceof Ja)return{term:this.tokens.getToken(v),str:z.expr.value}}return null},l=f(b.exprs[b.exprs.length-1]);if(!l||!l.term.nodeName)return null;let m=["()","[]","{}","\x3c\x3e"].find(v=>-1<l.str.indexOf(v[1])&&0>l.str.indexOf(v[0]));if(!m)return null;b=f(b.exprs[0]);return!b||
!b.term.nodeName||0>b.str.indexOf(m[0])||-1<b.str.indexOf(m[1])?null:[b.term,l.term]}}const Xb=["error","repeated"];class zc{constructor(){this.data=[]}storeArray(b){a:{var f=this.data;b:for(var l=0;;){l=f.indexOf(b[0],l);if(-1==l||l+b.length>f.length)break;for(let m=1;m<b.length;m++)if(b[m]!=f[l+m]){l+=1;continue b}f=l;break a}f=-1}if(-1<f)return f;f=this.data.length;for(let m of b)this.data.push(m);return f}finish(){return Uint16Array.from(this.data)}}class ed{constructor(b,f){this.tokens=b;this.id=
f}}class Rc{constructor(b,f,l,m,v){this.placeholder=b;this.name=f;this.extName=l;this.source=m;this.end=v}}class Sc{resolve(b,f){2<b.args.length&&f.raise(`Too many arguments to 'nest.${b.id.name}'`,b.start);let [l,m]=b.args,v=f.ast.grammars.find(ea=>ea.id.name==b.id.name);if(!v)return f.raise(`No external grammar '${b.id.name}' defined`,b.id.start);let z=f.newName(b.id.name+"-placeholder",!0);f.defineRule(z,m?f.normalizeExpr(m):[]);if(!l&&!(l=ec(f.ast,b)))return f.raise("No end token specified, and no token found directly after the nest expression",
b.start);let J=new xb,R=new xb([f.terms.eof]);try{f.tokens.build(l,J,R,ib)}catch(ea){if(!(ea instanceof SyntaxError))throw ea;f.raise(`End token '${l}' for nested grammar is not a valid token expression`,l.start)}f.nestedGrammars.push(new Rc(z,v.id.name,v.externalID.name,v.source,J));f.nestedGrammars.length>=2**20&&f.raise("Too many nested grammars used");return[hb(z)]}}class Qc{constructor(b,f,l){this.name=b;this.expr=f;this.scope=l}}class hc{constructor(b,f,l,m){this.name=b;this.start=f;this.to=
l;this.args=m}}class Gb{constructor(b,f){this.b=b;this.ast=f;this.startState=new xb;this.built=[];this.building=[];this.byDialect=Object.create(null);this.precedences=[];this.precedenceRelations=[];this.rules=f?f.rules:ib;for(let l of this.rules)this.b.unique(l.id)}getToken(b){for(var f of this.built)if(f.matches(b))return f.term;let l=b.id.name;f=this.rules.find(R=>R.id.name==l);if(!f)return null;let {name:m,props:v,dialect:z}=this.b.nodeInfoInner(f.props,l,b.args,f.params.length!=b.args.length?
ib:f.params),J=this.b.makeTerminal(b.toString(),m,v);null!=z&&(this.byDialect[z]||(this.byDialect[z]=[])).push(J);(J.nodeType||f.exported)&&0==f.params.length&&(J.nodeType||(J.preserve=!0),this.b.namedTerms[l]=J);this.buildRule(f,b,this.startState,new xb([J]));this.built.push(new xc(l,b.args,J));return J}getLiteral(b){let f=JSON.stringify(b.value);for(var l of this.built)if(l.id==f)return l.term;var m=null;let v=Fb;l=null;let z=this.ast?this.ast.literals.find(J=>J.literal==b.value):null;z&&({name:m,
props:v,dialect:l}=this.b.nodeInfoInner(z.props,b.value));m=this.b.makeTerminal(f,m,v);null!=l&&(this.byDialect[l]||(this.byDialect[l]=[])).push(m);this.build(b,this.startState,new xb([m]),ib);this.built.push(new xc(f,ib,m));return m}buildRule(b,f,l,m,v=ib){let z=f.id.name;b.params.length!=f.args.length&&this.b.raise(`Incorrect number of arguments for token '${z}'`,f.start);var J=this.building.find(R=>R.name==z&&Da(f.args,R.args));if(J){if(J.to==m){l.nullEdge(J.start);return}for(J=this.building.length-
1;this.building[J].name!=z;)J--;this.b.raise(`Invalid (non-tail) recursion in token rules: ${this.building.slice(J).map(R=>R.name).join(" -\x3e ")}`,f.start)}this.b.used(b.id.name);J=new xb;l.nullEdge(J);this.building.push(new hc(z,J,m,f.args));this.build(this.b.substituteArgs(b.expr,f.args,b.params),J,m,f.args.map((R,ea)=>new Qc(b.params[ea].name,R,v)));this.building.pop()}build(b,f,l,m){if(b instanceof Ib){if(b.namespace){if("std"==b.namespace.name)return this.buildStd(b,f,l);this.b.raise(`Unknown namespace '${b.namespace.name}'`,
b.start)}let J=b.id.name;var v=m.find(R=>R.name==J);if(v)return this.build(v.expr,f,l,v.scope);v=this.rules.find(R=>R.id.name==J);if(!v)return this.b.raise(`Reference to rule '${b.id.name}', which isn't found in this token group`,b.start);this.buildRule(v,b,f,l,m)}else if(b instanceof ma)for(v of b.exprs)this.build(v,f,l,m);else if(F(b))f.nullEdge(l);else if(b instanceof ia)for((v=b.markers.find(J=>0<J.length))&&this.b.raise("Conflict marker in token expression",v[0].start),v=0;v<b.exprs.length;v++){var z=
v==b.exprs.length-1?l:new xb;this.build(b.exprs[v],f,z,m);f=z}else if(b instanceof pa)"*"==b.kind?(v=new xb,f.nullEdge(v),this.build(b.expr,v,v,m),v.nullEdge(l)):"+"==b.kind?(v=new xb,this.build(b.expr,f,v,m),this.build(b.expr,v,v,m),v.nullEdge(l)):(f.nullEdge(l),this.build(b.expr,f,l,m));else if(b instanceof db)for(let [J,R]of b.inverted?X(b.ranges):b.ranges)E(f,l,J,R);else if(b instanceof Ja)for(m=0;m<b.value.length;m++)v=b.value.charCodeAt(m),z=m==b.value.length-1?l:new xb,f.edge(v,v+1,z),f=z;
else if(b instanceof eb)f.edge(0,65535,l);else return this.b.raise("Unrecognized expression type in token",b.start)}buildStd(b,f,l){b.args.length&&this.b.raise(`'std.${b.id.name}' does not take arguments`,b.args[0].start);Ac.hasOwnProperty(b.id.name)||this.b.raise(`There is no builtin rule 'std.${b.id.name}'`,b.start);for(let [m,v]of Ac[b.id.name])f.edge(m,v,l)}tokenizer(b,f){let l=this.startState.compile();l.accepting.length&&this.b.raise(`Grammar contains zero-length tokens (in '${l.accepting[0].name}')`,
this.rules.find(m=>m.id.name==l.accepting[0].name).start);/\btokens\b/.test(Gc)&&console.log(l.toString());return l.toArray(b,f)}takePrecedences(){let b=[];if(this.ast)for(var f of this.ast.precedences){let v=[];for(let z of f.items){var l=void 0;if(z instanceof Ib)l=this.built.find(J=>J.matches(z));else{let J=JSON.stringify(z.value);l=this.built.find(R=>R.id==J)}l?v.push(l.term):this.b.warn(`Precedence specified for unknown token ${z}`,z.start)}for(let z=0;z<v.length;z++)if(l=b.find(J=>J.term==v[z]))for(let J=
0;J<z;J++)Eb(l.after,v[J]);else b.push(l={term:v[z],after:v.slice(0,z)})}this.precedenceRelations=b.slice();let m=[];a:for(;;){for(f=0;f<b.length;f++)if(l=b[f],l.after.every(v=>m.includes(v))){m.push(l.term);l=b.pop();f<b.length&&(b[f]=l);continue a}b.length&&this.b.raise(`Cyclic token precedence relation between ${b.map(v=>v.term).join(", ")}`);break}this.precedences=m}precededBy(b,f){let l=this.precedenceRelations.find(m=>m.term==b);return l&&l.after.includes(f)}buildTokenGroups(b,f,l){let m=[],
v=this.startState.compile().findConflicts(Bb(b,this.b,l)).filter(({a:R,b:ea})=>{Eb(m,R);Eb(m,ea);return!this.precededBy(R,ea)&&!this.precededBy(ea,R)}),z=[],J=R=>{if(!R.defaultReduce){var ea=[],fa=!1,Ha=[],Ga=R.skip==this.b.noSkip?ib:l[this.b.skipRules.indexOf(R.skip)];for(let Sa of Ga)R.actions.some(Ya=>Ya.term==Sa)&&this.b.raise(`Use of token ${Sa.name} conflicts with skip rule`);for(let Sa=0;Sa<R.actions.length+(Ga?Ga.length:0);Sa++){let Ya=Sa<R.actions.length?R.actions[Sa].term:Ga[Sa-R.actions.length];
var Pa=this.b.tokenOrigins[Ya.name];if(Pa&&Pa.spec){if(ea.includes(Pa.spec))continue;Ya=Pa.spec}else if(Pa&&Pa.external)continue;fa=!0;Pa=!1;for(let nb of v){let mb=nb.a==Ya?nb.b:nb.b==Ya?nb.a:null;mb&&(Pa=!0,Ha.includes(mb)||(R.actions.some(Ob=>Ob.term==mb)&&this.b.raise(`Overlapping tokens ${Ya.name} and ${mb.name} used in same context `+`(example: ${JSON.stringify(nb.exampleA)}${nb.exampleB?` vs ${JSON.stringify(nb.exampleB)}`:""})\n\n`),Ha.push(mb)))}Pa&&ea.push(Ya)}if(fa){fa=null;for(let Sa of z)if(!Ha.some(Ya=>
Sa.tokens.includes(Ya))){for(let Ya of ea)Eb(Sa.tokens,Ya);fa=Sa;break}fa||(fa=new ed(ea,z.length),z.push(fa));R.tokenGroup=fa.id}}};for(let R of b)J(R);for(let R of f)if(R)for(let ea of R)J(ea);16<z.length&&this.b.raise(`Too many different token groups (${z.length}) to represent them as a 16-bit bitfield`);b=this.precedences.filter(R=>m.includes(R)).map(R=>R.id);return{tokenMasks:ac(z),tokenGroups:z,tokenPrec:b}}}const Ac={asciiLetter:[[65,91],[97,123]],asciiLowercase:[[97,123]],asciiUppercase:[[65,
91]],digit:[[48,58]],whitespace:[[9,14],[32,33],[133,134],[160,161],[5760,5761],[8192,8203],[8232,8234],[8239,8240],[8287,8288],[12288,12289]]};class Ic{constructor(b,f){this.b=b;this.ast=f;this.tokens=C(b,f.tokens);for(let l in this.tokens)this.b.tokenOrigins[this.tokens[l].name]={external:this}}getToken(b){return S(this.b,this.tokens,b)}}class Oc{constructor(b,f){this.b=b;this.ast=f;this.term=null;this.tokens=C(b,f.tokens)}finish(){let b=this.b.normalizeExpr(this.ast.token);1==b.length&&1==b[0].terms.length&&
b[0].terms[0].terminal||this.b.raise(`The token expression to '@external ${this.ast.type}' must resolve to a token`,this.ast.token.start);this.term=b[0].terms[0];for(let f in this.tokens)this.b.tokenOrigins[this.tokens[f].name]={spec:this.term,external:this}}getToken(b){return S(this.b,this.tokens,b)}}class sc{constructor(b,f){this.set=b;this.terms=f;this._inner=null}get inner(){if(!this._inner){let b=this.set.b.options.externalTokenizer;this._inner=b?b(this.set.ast.id.name,this.terms):null;if(!this._inner)return this.set.b.raise("Using external tokenizer without passing externalTokenizer option")}return this._inner}token(b,
f,l){this.inner.token(b,f,l)}get contextual(){return this.inner.contextual}get fallback(){return this.inner.fallback}}const pc="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super enum implements interface let package private protected public static yield".split(" ");D.GenError=Rb;D.buildParser=function(b,f={}){return(new Hc(b,f)).getParser()};
D.buildParserFile=function(b,f={}){function l(Aa){return"{__proto__:null,"+Object.keys(Aa).map(Wa=>`${/\W/.test(Wa)?JSON.stringify(Wa):Wa}:${Aa[Wa]}`).join(", ")+"}"}function m(Aa){return"string"!=typeof Aa||/^(true|false|\d+(\.\d+)?|\.\d+)$/.test(Aa)?Aa:JSON.stringify(Aa)}let v=new Hc(b,f),z=v.getParser(),J=f.moduleStyle||"cjs";b="// This file was generated by lezer-generator. You probably shouldn't edit it.\n"+("cjs"==J?'const {Parser} \x3d require("lezer")\n':'import {Parser} from "lezer"\n');
let R=null,ea={},fa=Object.create(null),Ha=Object.create(null);Ha.Parser=!0;let Ga=Aa=>{for(let Wa=0;;Wa++){let rb=Aa+(Wa?"_"+Wa:"");if(!Ha[rb])return rb}},Pa=(Aa,Wa,rb)=>{let wb=Aa+" from "+Wa;if(fa[wb])return fa[wb];Wa=JSON.stringify(Wa);let tc=Aa;Aa in Ha&&(tc=Ga(rb),Aa+=`${"cjs"==J?":":" as"} ${tc}`);(ea[Wa]||(ea[Wa]=[])).push(Aa);return fa[wb]=tc};var Sa=z.tokenizers.map(Aa=>{if(Aa instanceof sc){let {source:Wa,id:{name:rb}}=Aa.set.ast;return Pa(rb,Wa,"tok")}R=Aa.data;return Aa.id}),Ya=z.nested.map(({name:Aa,
grammar:Wa,end:rb,placeholder:wb})=>{Wa=Wa.spec;if(!Wa)throw new Rb("Spec-less nested grammar in parser");return`[${JSON.stringify(Aa)}, ${Wa.source?Pa(Wa.extName,Wa.source,Wa.name):"null"},\
${zb(rb.data)}, ${wb}]`}),nb=[],mb=[];let Ob=z.group.types.length-z.minRepeatTerm;for(var qb of z.group.types){qb.id<z.minRepeatTerm&&nb.push(qb.name);var $b=qb.props.propData;for(let Aa=0;Aa<$b.length;Aa+=2){var Yb=$b[Aa];let Wa=$b[Aa+1];if(null==Yb.from&&("repeated"==Yb.name||"error"==Yb.name))continue;let rb=Yb.from?Pa(Yb.name,Yb.from,"prop"):Pa("NodeProp","lezer","NodeProp")+"."+Yb.name;(Yb=mb.find(wb=>wb.prop==rb))||mb.push(Yb={prop:rb,terms:[]});Yb.terms.push(qb.id,Wa)}}qb=[];for(var Nb of v.externalSpecializers)$b=
Pa(Nb.ast.id.name,Nb.ast.source,Nb.ast.id.name),qb.push(`{term: ${Nb.term.id}, get: (value, stack) => (${$b}(value, stack) << 1)${"extend"==Nb.ast.type?" | 1":""}}`);for(let Aa in ea)b="cjs"==J?b+`const {${ea[Aa].join(", ")}} = require(${Aa})\n`:b+`import {${ea[Aa].join(", ")}} from ${Aa}\n`;for(var Pb in v.specialized)Nb=Ga("spec"+Pb),b+=`const ${Nb} = ${l(kb(v.specialized[Pb]))}\n`,qb.push(`{term: ${v.terms.names[Pb].id}, get: value => ${Nb}[value] || -1}`);Pb=Object.keys(z.dialects).map(Aa=>`${Aa}: ${z.dialects[Aa]}`);
Sa=`Parser.deserialize({
  states: ${zb(z.states,4294967295)},
  stateData: ${zb(z.data)},
  goto: ${zb(z.goto)},
  nodeNames: ${JSON.stringify(nb.join(" "))},
  maxTerm: ${z.maxTerm},${mb.length?`
  nodeProps: [
    ${mb.map(Aa=>`[${Aa.prop}, ${Aa.terms.map(m).join(",")}]`).join(",\n    ")}
  ],`:""}
  repeatNodeCount: ${Ob},
  tokenData: ${zb(R||[])},
  tokenizers: [${Sa.join(", ")}],
  topRules: ${JSON.stringify(z.topRules)}${Ya.length?`,
  nested: [${Ya.join(", ")}]`:""}${Pb.length?`,
  dialects: {${Pb.join(", ")}}`:""}${qb.length?`,
  specialized: [${qb.join(",")}]`:""},
  tokenPrec: ${z.tokenPrecTable}${f.includeNames?`,
  termNames: ${JSON.stringify(z.termNames)}`:""}
})`;Ya=[];for(var cc in v.termTable){nb=cc;if(pc.includes(nb))for(mb=1;nb="_".repeat(mb)+cc,nb in v.termTable;mb++);Ya.push(`${nb}${"cjs"==J?":":" \x3d"} ${v.termTable[cc]}`)}for(cc=0;cc<v.dialects.length;cc++)Ya.push(`Dialect_${v.dialects[cc]}${"cjs"==J?":":" \x3d"} ${cc}`);f=f.exportName||"parser";return{parser:b+("cjs"==J?`exports.${f} = ${Sa}\n`:`export const ${f} = ${Sa}\n`),terms:"cjs"==J?`${"// This file was generated by lezer-generator. You probably shouldn't edit it.\n"}module.exports = {\n  ${Ya.join(",\n  ")}\n}`:
`${"// This file was generated by lezer-generator. You probably shouldn't edit it.\n"}export const\n  ${Ya.join(",\n  ")}\n`}}};
shadow$provide[15]=function(sa,Ra,ub,D){function Na(G,Y){return O.EditorSelection.create(G.ranges.map(Y),G.primaryIndex)}function Ka(G,Y){return G.update({selection:Y,scrollIntoView:!0,annotations:O.Transaction.userEvent.of("keyboardselection")})}function Da(G,Y){var ma=G.state;G=G.dispatch;Y=Na(ma.selection,Y);if(Y.eq(ma.selection))return!1;G(Ka(ma,Y));return!0}function Ta(G,Y){return Da(G,function(ma){return ma.empty?G.moveByChar(ma,Y):O.EditorSelection.cursor(Y?ma.to:ma.from)})}function wa(G,Y){return Da(G,
function(ma){return ma.empty?G.moveByGroup(ma,Y):O.EditorSelection.cursor(Y?ma.to:ma.from)})}function xa(G,Y,ma){var ia=G.tree.resolve(Y.head),na=ma?u.NodeProp.closedBy:u.NodeProp.openedBy;for(Y=Y.head;;){var pa=ma?ia.childAfter(Y):ia.childBefore(Y);if(!pa)break;var Ja=G;var db=pa;if(db.type.prop(na))Ja=!0;else{var eb=db.end-db.start;Ja=eb&&(2<eb||/[^\s,.;:]/.test(Ja.sliceDoc(db.start,db.end)))||db.firstChild}Ja?ia=pa:Y=ma?pa.end:pa.start}var fb;G=ia.type.prop(na)&&(fb=ma?(0,y.matchBrackets)(G,ia.start,
1):(0,y.matchBrackets)(G,ia.end,-1))&&fb.matched?ma?fb.end.to:fb.end.from:ma?ia.end:ia.start;return O.EditorSelection.cursor(G,ma?-1:1)}function Ba(G,Y){return Da(G,function(ma){return G.moveVertically(ma,Y)})}function Ia(G,Y){return Da(G,function(ma){return G.moveVertically(ma,Y,G.dom.clientHeight)})}function qa(G,Y,ma){var ia=G.visualLineAt(Y.head),na=G.moveToLineBoundary(Y,ma);na.head==Y.head&&na.head!=(ma?ia.to:ia.from)&&(na=G.moveToLineBoundary(Y,ma,!1));!ma&&na.head==ia.from&&ia.length&&(G=
/^\s*/.exec(G.state.sliceDoc(ia.from,Math.min(ia.from+100,ia.to)))[0].length)&&Y.head>ia.from+G&&(na=O.EditorSelection.cursor(ia.from+G));return na}function za(G,Y,ma){var ia=!1,na=Na(G.selection,function(pa){var Ja=(0,y.matchBrackets)(G,pa.head,-1)||(0,y.matchBrackets)(G,pa.head,1)||0<pa.head&&(0,y.matchBrackets)(G,pa.head-1,1)||pa.head<G.doc.length&&(0,y.matchBrackets)(G,pa.head+1,-1);if(!Ja||!Ja.end)return pa;ia=!0;Ja=Ja.start.from==pa.head?Ja.end.to:Ja.end.from;return ma?O.EditorSelection.range(pa.anchor,
Ja):O.EditorSelection.cursor(Ja)});if(!ia)return!1;Y(Ka(G,na));return!0}function ja(G,Y){var ma=Na(G.state.selection,function(ia){var na=Y(ia);return O.EditorSelection.range(ia.anchor,na.head,na.goalColumn)});if(ma.eq(G.state.selection))return!1;G.dispatch(Ka(G.state,ma));return!0}function La(G,Y){return ja(G,function(ma){return G.moveByChar(ma,Y)})}function Ea(G,Y){return ja(G,function(ma){return G.moveByGroup(ma,Y)})}function ka(G,Y){return ja(G,function(ma){return G.moveVertically(ma,Y)})}function ba(G,
Y){return ja(G,function(ma){return G.moveVertically(ma,Y,G.dom.clientHeight)})}function U(G,Y){var ma=G.state.changeByRange(function(ia){var na=ia.from,pa=ia.to;if(na==pa){var Ja=Y(na);na=Math.min(na,Ja);pa=Math.max(pa,Ja)}return na==pa?{range:ia}:{changes:{from:na,to:pa},range:O.EditorSelection.cursor(na)}});if(ma.changes.empty)return!1;G.dispatch(ma,{scrollIntoView:!0,annotations:O.Transaction.userEvent.of("delete")});return!0}function I(G){var Y=[],ma=-1,ia=!0,na=!1,pa=void 0;try{for(var Ja=G.selection.ranges[Symbol.iterator](),
db;!(ia=(db=Ja.next()).done);ia=!0){var eb=db.value,fb=G.doc.lineAt(eb.from),Za=G.doc.lineAt(eb.to);ma==fb.number?Y[Y.length-1].to=Za.to:Y.push({from:fb.from,to:Za.to});ma=Za.number}}catch(Rb){na=!0,pa=Rb}finally{try{if(!ia&&null!=Ja["return"])Ja["return"]()}finally{if(na)throw pa;}}return Y}function r(G,Y,ma){var ia=[],na=!0,pa=!1,Ja=void 0;try{for(var db=I(G)[Symbol.iterator](),eb;!(na=(eb=db.next()).done);na=!0){var fb=eb.value;if(ma?fb.to!=G.doc.length:0!=fb.from){var Za=G.doc.lineAt(ma?fb.to+
1:fb.from-1);ma?ia.push({from:fb.to,to:Za.to},{from:fb.from,insert:Za.slice()+G.lineBreak}):ia.push({from:Za.from,to:fb.from},{from:fb.to,insert:G.lineBreak+Za.slice()})}}}catch(Rb){pa=!0,Ja=Rb}finally{try{if(!na&&null!=db["return"])db["return"]()}finally{if(pa)throw Ja;}}if(!ia.length)return!1;Y(G.update({changes:ia,scrollIntoView:!0}));return!0}function q(G,Y,ma){var ia=[],na=!0,pa=!1,Ja=void 0;try{for(var db=I(G)[Symbol.iterator](),eb;!(na=(eb=db.next()).done);na=!0){var fb=eb.value;ma?ia.push({from:fb.from,
insert:G.doc.slice(fb.from,fb.to)+G.lineBreak}):ia.push({from:fb.to,insert:G.lineBreak+G.doc.slice(fb.from,fb.to)})}}catch(Za){pa=!0,Ja=Za}finally{try{if(!na&&null!=db["return"])db["return"]()}finally{if(pa)throw Ja;}}Y(G.update({changes:ia,scrollIntoView:!0}));return!0}function B(G,Y){var ma=!0,ia=!1,na=void 0;try{for(var pa=G.state.facet(O.EditorState.indentation)[Symbol.iterator](),Ja;!(ma=(Ja=pa.next()).done);ma=!0){var db=Ja.value,eb=db(G,Y);if(-1<eb)return eb}}catch(fb){ia=!0,na=fb}finally{try{if(!ma&&
null!=pa["return"])pa["return"]()}finally{if(ia)throw na;}}return-1}function L(G,Y){var ma=-1;return G.changeByRange(function(ia){for(var na=[],pa=G.doc.lineAt(ia.from);;){pa.number>ma&&(Y(pa,na,ia),ma=pa.number);if(ia.to<=pa.to)break;pa=G.doc.lineAt(pa.to+1)}pa=G.changes(na);return{changes:na,range:O.EditorSelection.range(pa.mapPos(ia.anchor,1),pa.mapPos(ia.head,1))}})}Object.defineProperty(D,"__esModule",{value:!0});D.transposeChars=D.standardKeymap=D.splitLine=D.simplifySelection=D.selectSyntaxRight=
D.selectSyntaxLeft=D.selectParentSyntax=D.selectPageUp=D.selectPageDown=D.selectMatchingBracket=D.selectLineUp=D.selectLineStart=D.selectLineEnd=D.selectLineDown=D.selectLineBoundaryForward=D.selectLineBoundaryBackward=D.selectLine=D.selectGroupRight=D.selectGroupLeft=D.selectGroupForward=D.selectGroupBackward=D.selectDocStart=D.selectDocEnd=D.selectCharRight=D.selectCharLeft=D.selectCharForward=D.selectCharBackward=D.selectAll=D.moveLineUp=D.moveLineDown=D.insertNewlineAndIndent=D.insertNewline=
D.indentSelection=D.indentMore=D.indentLess=D.emacsStyleKeymap=D.deleteTrailingWhitespace=D.deleteToLineEnd=D.deleteLine=D.deleteGroupForward=D.deleteGroupBackward=D.deleteCharForward=D.deleteCharBackward=D.defaultKeymap=D.cursorSyntaxRight=D.cursorSyntaxLeft=D.cursorPageUp=D.cursorPageDown=D.cursorMatchingBracket=D.cursorLineUp=D.cursorLineStart=D.cursorLineEnd=D.cursorLineDown=D.cursorLineBoundaryForward=D.cursorLineBoundaryBackward=D.cursorGroupRight=D.cursorGroupLeft=D.cursorGroupForward=D.cursorGroupBackward=
D.cursorDocStart=D.cursorDocEnd=D.cursorCharRight=D.cursorCharLeft=D.cursorCharForward=D.cursorCharBackward=D.copyLineUp=D.copyLineDown=void 0;var O=Ra(2),A=Ra(0),n=Ra(6),y=Ra(10),u=Ra(1),p=function(G){return Ta(G,G.textDirection!=n.Direction.LTR)};D.cursorCharLeft=p;var t=function(G){return Ta(G,G.textDirection==n.Direction.LTR)};D.cursorCharRight=t;D.cursorCharForward=function(G){return Ta(G,!0)};D.cursorCharBackward=function(G){return Ta(G,!1)};var w=function(G){return wa(G,G.textDirection!=n.Direction.LTR)};
D.cursorGroupLeft=w;var N=function(G){return wa(G,G.textDirection==n.Direction.LTR)};D.cursorGroupRight=N;var T=function(G){return wa(G,!0)};D.cursorGroupForward=T;var Q=function(G){return wa(G,!1)};D.cursorGroupBackward=Q;sa=function(G){return Da(G,function(Y){return xa(G.state,Y,G.textDirection!=n.Direction.LTR)})};D.cursorSyntaxLeft=sa;Ra=function(G){return Da(G,function(Y){return xa(G.state,Y,G.textDirection==n.Direction.LTR)})};D.cursorSyntaxRight=Ra;var H=function(G){return Ba(G,!1)};D.cursorLineUp=
H;var M=function(G){return Ba(G,!0)};D.cursorLineDown=M;var P=function(G){return Ia(G,!1)};D.cursorPageUp=P;var Z=function(G){return Ia(G,!0)};D.cursorPageDown=Z;var ha=function(G){return Da(G,function(Y){return qa(G,Y,!0)})};D.cursorLineBoundaryForward=ha;var Ca=function(G){return Da(G,function(Y){return qa(G,Y,!1)})};D.cursorLineBoundaryBackward=Ca;var Fa=function(G){return Da(G,function(Y){return O.EditorSelection.cursor(G.visualLineAt(Y.head).from,1)})};D.cursorLineStart=Fa;var Ma=function(G){return Da(G,
function(Y){return O.EditorSelection.cursor(G.visualLineAt(Y.head).to,-1)})};D.cursorLineEnd=Ma;ub=function(G){return za(G.state,G.dispatch,!1)};D.cursorMatchingBracket=ub;D.selectMatchingBracket=function(G){return za(G.state,G.dispatch,!0)};var Xa=function(G){return La(G,G.textDirection!=n.Direction.LTR)};D.selectCharLeft=Xa;var bb=function(G){return La(G,G.textDirection==n.Direction.LTR)};D.selectCharRight=bb;D.selectCharForward=function(G){return La(G,!0)};D.selectCharBackward=function(G){return La(G,
!1)};var gb=function(G){return Ea(G,G.textDirection!=n.Direction.LTR)};D.selectGroupLeft=gb;var Hb=function(G){return Ea(G,G.textDirection==n.Direction.LTR)};D.selectGroupRight=Hb;var Db=function(G){return Ea(G,!0)};D.selectGroupForward=Db;var yb=function(G){return Ea(G,!1)};D.selectGroupBackward=yb;var zb=function(G){return ja(G,function(Y){return xa(G.state,Y,G.textDirection!=n.Direction.LTR)})};D.selectSyntaxLeft=zb;var hb=function(G){return ja(G,function(Y){return xa(G.state,Y,G.textDirection==
n.Direction.LTR)})};D.selectSyntaxRight=hb;var Ab=function(G){return ka(G,!1)};D.selectLineUp=Ab;var kb=function(G){return ka(G,!0)};D.selectLineDown=kb;var vb=function(G){return ba(G,!1)};D.selectPageUp=vb;var sb=function(G){return ba(G,!0)};D.selectPageDown=sb;var dc=function(G){return ja(G,function(Y){return qa(G,Y,!0)})};D.selectLineBoundaryForward=dc;var Eb=function(G){return ja(G,function(Y){return qa(G,Y,!1)})};D.selectLineBoundaryBackward=Eb;var ac=function(G){return ja(G,function(Y){return O.EditorSelection.cursor(G.visualLineAt(Y.head).from)})};
D.selectLineStart=ac;var ec=function(G){return ja(G,function(Y){return O.EditorSelection.cursor(G.visualLineAt(Y.head).to)})};D.selectLineEnd=ec;var Bb=function(G){var Y=G.dispatch;Y(Ka(G.state,{anchor:0}));return!0};D.cursorDocStart=Bb;var X=function(G){var Y=G.state;G=G.dispatch;G(Ka(Y,{anchor:Y.doc.length}));return!0};D.cursorDocEnd=X;var E=function(G){var Y=G.state;G=G.dispatch;G(Ka(Y,{anchor:Y.selection.primary.anchor,head:0}));return!0};D.selectDocStart=E;var F=function(G){var Y=G.state;G=G.dispatch;
G(Ka(Y,{anchor:Y.selection.primary.anchor,head:Y.doc.length}));return!0};D.selectDocEnd=F;var C=function(G){var Y=G.state;G=G.dispatch;G(Y.update({selection:{anchor:0,head:Y.doc.length},annotations:O.Transaction.userEvent.of("keyboarselection")}));return!0};D.selectAll=C;var S=function(G){var Y=G.state;G=G.dispatch;var ma=I(Y).map(function(ia){return O.EditorSelection.range(ia.from,Math.min(ia.to+1,Y.doc.length))});G(Y.update({selection:new O.EditorSelection(ma),annotations:O.Transaction.userEvent.of("keyboardselection")}));
return!0};D.selectLine=S;var W=function(G){var Y=G.state;G=G.dispatch;var ma=Na(Y.selection,function(ia){for(var na,pa=Y.tree.resolve(ia.head,1);!(pa.start<ia.from&&pa.end>=ia.to||pa.end>ia.to&&pa.start<=ia.from)&&(null===(na=pa.parent)||void 0===na?0:na.parent);)pa=pa.parent;return O.EditorSelection.range(pa.end,pa.start)});G(Ka(Y,ma));return!0};D.selectParentSyntax=W;var ca=function(G){var Y=G.state;G=G.dispatch;var ma=Y.selection,ia=null;1<ma.ranges.length?ia=new O.EditorSelection([ma.primary]):
ma.primary.empty||(ia=new O.EditorSelection([O.EditorSelection.cursor(ma.primary.head)]));if(!ia)return!1;G(Ka(Y,ia));return!0};D.simplifySelection=ca;var la=function(G,Y){return U(G,function(ma){var ia=G.state,na=ia.doc.lineAt(ma),pa;if(!Y&&ma>na.from&&ma<na.from+200&&!/[^ \t]/.test(pa=na.slice(0,ma-na.from))){if("\t"==pa[pa.length-1])return ma-1;ia=(0,A.countColumn)(pa,0,ia.tabSize)%ia.indentUnit||ia.indentUnit;for(na=0;na<ia&&" "==pa[pa.length-1-na];na++)ma--;return ma}pa=na.findClusterBreak(ma-
na.from,Y)+na.from;pa==ma&&na.number!=(Y?ia.doc.lines:1)&&(pa+=Y?1:-1);return pa})},ta=function(G){return la(G,!1)};D.deleteCharBackward=ta;var ua=function(G){return la(G,!0)};D.deleteCharForward=ua;var va=function(G,Y){return U(G,function(ma){for(var ia=G.state,na=ia.doc.lineAt(ma),pa=ia.charCategorizer(ma),Ja=null;;){if(ma==(Y?na.to:na.from)){if(na.number==(Y?ia.doc.lines:1))break;na=ia.doc.line(na.number+(Y?1:-1));var db=Y?na.from:na.to;var eb="\n"}else db=na.findClusterBreak(ma-na.from,Y)+na.from,
eb=na.slice(Math.min(ma,db)-na.from,Math.max(ma,db)-na.from);eb=pa(eb);if(null!=Ja&&eb!=Ja)break;eb!=O.CharCategory.Space&&(Ja=eb);ma=db}return ma})},oa=function(G){return va(G,!1)};D.deleteGroupBackward=oa;var Oa=function(G){return va(G,!0)};D.deleteGroupForward=Oa;var Ua=function(G){return U(G,function(Y){var ma=G.visualLineAt(Y).to;return Y<ma?ma:Math.max(G.state.doc.length,Y+1)})};D.deleteToLineEnd=Ua;D.deleteTrailingWhitespace=function(G){var Y=G.state;G=G.dispatch;for(var ma=[],ia=0,na=Y.doc.iterLines();!na.next().done;){var pa=
na.value.search(/\s+$/);-1<pa&&ma.push({from:ia+pa,to:ia+na.value.length});ia+=na.value.length+1}if(!ma.length)return!1;G(Y.update({changes:ma}));return!0};var $a=function(G){var Y=G.state;G=G.dispatch;var ma=Y.changeByRange(function(ia){return{changes:{from:ia.from,to:ia.to,insert:A.Text.of(["",""])},range:O.EditorSelection.cursor(ia.from)}});G(Y.update(ma,{scrollIntoView:!0,annotations:O.Transaction.userEvent.of("input")}));return!0};D.splitLine=$a;var ab=function(G){var Y=G.state;G=G.dispatch;
var ma=Y.changeByRange(function(ia){if(!ia.empty||0==ia.from||ia.from==Y.doc.length)return{range:ia};ia=ia.from;var na=Y.doc.lineAt(ia),pa=ia==na.from?ia-1:na.findClusterBreak(ia-na.from,!1)+na.from;na=ia==na.to?ia+1:na.findClusterBreak(ia-na.from,!0)+na.from;return{changes:{from:pa,to:na,insert:Y.doc.slice(ia,na).append(Y.doc.slice(pa,ia))},range:O.EditorSelection.cursor(na)}});if(ma.changes.empty)return!1;G(Y.update(ma,{scrollIntoView:!0}));return!0};D.transposeChars=ab;var cb=function(G){return r(G.state,
G.dispatch,!1)};D.moveLineUp=cb;var ob=function(G){return r(G.state,G.dispatch,!0)};D.moveLineDown=ob;var Kb=function(G){return q(G.state,G.dispatch,!1)};D.copyLineUp=Kb;var jc=function(G){return q(G.state,G.dispatch,!0)};D.copyLineDown=jc;var ya=function(G){var Y=G.state,ma=Y.changes(I(Y).map(function(na){var pa=na.from;na=na.to;0<pa?pa--:na<Y.doc.length&&na++;return{from:pa,to:na}})),ia=Na(Y.selection,function(na){return G.moveVertically(na,!0)}).map(ma);G.dispatch({changes:ma,selection:ia,scrollIntoView:!0});
return!0};D.deleteLine=ya;D.insertNewline=function(G){var Y=G.state;G=G.dispatch;G(Y.update(Y.replaceSelection(Y.lineBreak),{scrollIntoView:!0}));return!0};var Lb=function(G){var Y=G.state;G=G.dispatch;var ma=Y.changeByRange(function(ia){var na=ia.from;ia=ia.to;var pa;if(pa=na==ia)if(pa=na,/\(\)|\[\]|\{\}/.test(Y.sliceDoc(pa-1,pa+1)))pa={from:pa,to:pa};else{var Ja=Y.tree.resolve(pa),db=Ja.childBefore(pa);Ja=Ja.childAfter(pa);var eb;pa=db&&Ja&&db.end<=pa&&Ja.start>=pa&&(eb=db.type.prop(u.NodeProp.closedBy))&&
-1<eb.indexOf(Ja.name)?{from:db.end,to:Ja.start}:null}eb=pa;pa=new O.IndentContext(Y,{simulateBreak:na,simulateDoubleBreak:!!eb});db=B(pa,na);0>db&&(db=/^\s*/.exec(Y.doc.lineAt(na).slice(0,50))[0].length);for(Ja=Y.doc.lineAt(na);ia<Ja.to&&/\s/.test(Ja.slice(ia-Ja.from,ia+1-Ja.from));)ia++;eb?(na=eb.from,ia=eb.to):na>Ja.from&&na<Ja.from+100&&!/\S/.test(Ja.slice(0,na))&&(na=Ja.from);var fb=["",Y.indentString(db)];eb&&fb.push(Y.indentString(pa.lineIndent(Ja)));return{changes:{from:na,to:ia,insert:A.Text.of(fb)},
range:O.EditorSelection.cursor(na+1+db)}});G(Y.update(ma,{scrollIntoView:!0}));return!0};D.insertNewlineAndIndent=Lb;var Cb=function(G){var Y=G.state;G=G.dispatch;var ma=Object.create(null),ia=new O.IndentContext(Y,{overrideIndentation:function(pa){pa=ma[pa];return null==pa?-1:pa}}),na=L(Y,function(pa,Ja,db){var eb=B(ia,pa.from);if(!(0>eb)){var fb=/^\s*/.exec(pa.slice(0,Math.min(pa.length,200)))[0],Za=Y.indentString(eb);if(fb!=Za||db.from<pa.from+fb.length)ma[pa.from]=eb,Ja.push({from:pa.from,to:pa.from+
fb.length,insert:Za})}});na.changes.empty||G(Y.update(na));return!0};D.indentSelection=Cb;var lb=function(G){var Y=G.state;G=G.dispatch;G(Y.update(L(Y,function(ma,ia){ia.push({from:ma.from,insert:Y.facet(O.EditorState.indentUnit)})})));return!0};D.indentMore=lb;var Ib=function(G){var Y=G.state;G=G.dispatch;G(Y.update(L(Y,function(ma,ia){var na=ma.slice(0,Math.min(ma.length,200));if(na=/^\s*/.exec(na)[0]){var pa=(0,A.countColumn)(na,0,Y.tabSize);pa=Y.indentString(Math.max(0,pa-Y.indentUnit));for(var Ja=
0;Ja<na.length&&Ja<pa.length&&na.charCodeAt(Ja)==pa.charCodeAt(Ja);)Ja++;ia.push({from:ma.from+Ja,to:ma.from+na.length,insert:pa.slice(Ja)})}})));return!0};D.indentLess=Ib;T=[{key:"Ctrl-b",run:p,shift:Xa},{key:"Ctrl-f",run:t,shift:bb},{key:"Ctrl-p",run:H,shift:Ab},{key:"Ctrl-n",run:M,shift:kb},{key:"Ctrl-a",run:Fa,shift:ac},{key:"Ctrl-e",run:Ma,shift:ec},{key:"Ctrl-d",run:ua},{key:"Ctrl-h",run:ta},{key:"Ctrl-k",run:Ua},{key:"Alt-d",run:Oa},{key:"Ctrl-Alt-h",run:oa},{key:"Ctrl-o",run:$a},{key:"Ctrl-t",
run:ab},{key:"Alt-f",run:T,shift:Db},{key:"Alt-b",run:Q,shift:yb},{key:"Alt-\x3c",run:Bb},{key:"Alt-\x3e",run:X},{key:"Ctrl-v",run:Z},{key:"Alt-v",run:P}];D.emacsStyleKeymap=T;p=[{key:"ArrowLeft",run:p,shift:Xa},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:w,shift:gb},{mac:"Cmd-ArrowLeft",run:Fa,shift:ac},{key:"ArrowRight",run:t,shift:bb},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:N,shift:Hb},{mac:"Cmd-ArrowRight",run:Ma,shift:ec},{key:"ArrowUp",run:H,shift:Ab},{mac:"Cmd-ArrowUp",run:Bb,shift:E},
{mac:"Ctrl-ArrowUp",run:P,shift:vb},{key:"ArrowDown",run:M,shift:kb},{mac:"Cmd-ArrowDown",run:X,shift:F},{mac:"Ctrl-ArrowDown",run:Z,shift:sb},{key:"PageUp",run:P,shift:vb},{key:"PageDown",run:Z,shift:sb},{key:"Home",run:Ca,shift:Eb},{key:"Mod-Home",run:Bb,shift:E},{key:"End",run:ha,shift:dc},{key:"Mod-End",run:X,shift:F},{key:"Enter",run:Lb},{key:"Mod-a",run:C},{key:"Backspace",run:ta},{key:"Delete",run:ua},{key:"Mod-Backspace",mac:"Alt-Backspace",run:oa},{key:"Mod-Delete",mac:"Alt-Delete",run:Oa}].concat(T.map(function(G){return{mac:G.key,
run:G.run,shift:G.shift}}));D.standardKeymap=p;sa=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:sa,shift:zb},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Ra,shift:hb},{key:"Alt-ArrowUp",run:cb},{key:"Shift-Alt-ArrowUp",run:Kb},{key:"Alt-ArrowDown",run:ob},{key:"Shift-Alt-ArrowDown",run:jc},{key:"Escape",run:ca},{key:"Mod-l",run:S},{key:"Mod-i",run:W},{key:"Mod-[",run:Ib},{key:"Mod-]",run:lb},{key:"Mod-Alt-\\",run:Cb},{key:"Shift-Mod-k",run:ya},{key:"Shift-Mod-\\",run:ub}].concat(p);D.defaultKeymap=
sa};
var aa="codemirror-next.clojure.commands",Ci="codemirror-next.clojure.extensions.formatting",g,ca=this||self;
function t(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}var da="closure_uid_"+(1E9*Math.random()>>>0),ea=0;function fa(a,b){a.sort(b||ha)}function ja(a,b){for(var c=Array(a.length),d=0;d<a.length;d++)c[d]={index:d,value:a[d]};var e=b||ha;fa(c,function(f,h){return e(f.value,h.value)||f.index-h.index});for(d=0;d<a.length;d++)a[d]=c[d].value}function ha(a,b){return a>b?1:a<b?-1:0};function la(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b};function ma(a,b){null!=a&&this.append.apply(this,arguments)}g=ma.prototype;g.La="";g.set=function(a){this.La=""+a};g.append=function(a,b,c){this.La+=String(a);if(null!=b)for(let d=1;d<arguments.length;d++)this.La+=arguments[d];return this};g.clear=function(){this.La=""};g.toString=function(){return this.La};var na={},oa={},Ma,u={},qa=null;function ra(){return new v(null,5,[sa,!0,ta,!0,ua,!1,va,!1,wa,null],null)}function w(a){return null!=a&&!1!==a}function xa(a){return a instanceof Array}function ya(a){return null==a?!0:!1===a?!0:!1}function Qi(a){return null!=a}function y(a,b){return a[t(null==b?null:b)]?!0:a._?!0:!1}function z(a,b){var c=null==b?null:b.constructor;c=w(w(c)?c.Cb:c)?c.mb:t(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}
function za(a){var b=a.mb;return w(b)?b:A.c(a)}var Aa="undefined"!==typeof Symbol&&"function"===t(Symbol)?Symbol.iterator:"@@iterator";function Ba(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function Ca(a){return"symbol"===t(a)||"undefined"!==typeof Symbol&&a instanceof Symbol}function Da(){}
function Ea(a){if(null!=a&&null!=a.U)a=a.U(a);else{var b=Ea[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Ea._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("ICounted.-count",a);}return a}function Fa(){}function Ga(a){if(null!=a&&null!=a.V)a=a.V(a);else{var b=Ga[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Ga._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IEmptyableCollection.-empty",a);}return a}function Ha(){}
function Ia(a,b){if(null!=a&&null!=a.Z)a=a.Z(a,b);else{var c=Ia[t(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Ia._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw z("ICollection.-conj",a);}return a}function Ka(){}
var Sa=function(){function a(d,e,f){var h=La[t(null==d?null:d)];if(null!=h)return h.j?h.j(d,e,f):h.call(null,d,e,f);h=La._;if(null!=h)return h.j?h.j(d,e,f):h.call(null,d,e,f);throw z("IIndexed.-nth",d);}function b(d,e){var f=La[t(null==d?null:d)];if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);f=La._;if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);throw z("IIndexed.-nth",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.g=b;c.j=a;return c}(),La=function La(a){switch(arguments.length){case 2:return La.g(arguments[0],arguments[1]);case 3:return La.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}};La.g=function(a,b){return null!=a&&null!=a.W?a.W(a,b):Sa(a,b)};La.j=function(a,b,c){return null!=a&&null!=a.la?a.la(a,b,c):Sa(a,b,c)};La.F=3;
function B(a){if(null!=a&&null!=a.Y)a=a.Y(a);else{var b=B[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=B._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("ISeq.-first",a);}return a}function Na(a){if(null!=a&&null!=a.da)a=a.da(a);else{var b=Na[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Na._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("ISeq.-rest",a);}return a}function Oa(){}
function Pa(a){if(null!=a&&null!=a.$)a=a.$(a);else{var b=Pa[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Pa._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("INext.-next",a);}return a}function Qa(){}
var gb=function(){function a(d,e,f){var h=Ra[t(null==d?null:d)];if(null!=h)return h.j?h.j(d,e,f):h.call(null,d,e,f);h=Ra._;if(null!=h)return h.j?h.j(d,e,f):h.call(null,d,e,f);throw z("ILookup.-lookup",d);}function b(d,e){var f=Ra[t(null==d?null:d)];if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);f=Ra._;if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);throw z("ILookup.-lookup",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.g=b;c.j=a;return c}(),Ra=function Ra(a){switch(arguments.length){case 2:return Ra.g(arguments[0],arguments[1]);case 3:return Ra.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}};Ra.g=function(a,b){return null!=a&&null!=a.ia?a.ia(a,b):gb(a,b)};Ra.j=function(a,b,c){return null!=a&&null!=a.M?a.M(a,b,c):gb(a,b,c)};Ra.F=3;
function Ta(a,b,c){if(null!=a&&null!=a.Ja)a=a.Ja(a,b,c);else{var d=Ta[t(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=Ta._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw z("IAssociative.-assoc",a);}return a}function Ua(a,b){if(null!=a&&null!=a.Ya)a=a.Ya(a,b);else{var c=Ua[t(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Ua._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw z("IFind.-find",a);}return a}function Va(){}
function Wa(a,b){if(null!=a&&null!=a.tb)a=a.tb(a,b);else{var c=Wa[t(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Wa._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw z("IMap.-dissoc",a);}return a}function Xa(a){if(null!=a&&null!=a.Lb)a=a.key;else{var b=Xa[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Xa._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IMapEntry.-key",a);}return a}
function Ya(a){if(null!=a&&null!=a.Mb)a=a.m;else{var b=Ya[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Ya._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IMapEntry.-val",a);}return a}function Za(){}function vi(a){if(null!=a&&null!=a.Cc)a=a.Cc(a);else{var b=vi[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=vi._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IStack.-peek",a);}return a}
function wi(a){if(null!=a&&null!=a.Dc)a=a.Dc(a);else{var b=wi[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=wi._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IStack.-pop",a);}return a}function $a(){}function ab(a){if(null!=a&&null!=a.jb)a=a.jb(a);else{var b=ab[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=ab._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IDeref.-deref",a);}return a}function bb(){}
function cb(a){if(null!=a&&null!=a.R)a=a.R(a);else{var b=cb[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=cb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IMeta.-meta",a);}return a}function db(a,b){if(null!=a&&null!=a.T)a=a.T(a,b);else{var c=db[t(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=db._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw z("IWithMeta.-with-meta",a);}return a}function eb(){}
var Gb=function(){function a(d,e,f){var h=fb[t(null==d?null:d)];if(null!=h)return h.j?h.j(d,e,f):h.call(null,d,e,f);h=fb._;if(null!=h)return h.j?h.j(d,e,f):h.call(null,d,e,f);throw z("IReduce.-reduce",d);}function b(d,e){var f=fb[t(null==d?null:d)];if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);f=fb._;if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);throw z("IReduce.-reduce",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.g=b;c.j=a;return c}(),fb=function fb(a){switch(arguments.length){case 2:return fb.g(arguments[0],arguments[1]);case 3:return fb.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}};fb.g=function(a,b){return null!=a&&null!=a.ba?a.ba(a,b):Gb(a,b)};fb.j=function(a,b,c){return null!=a&&null!=a.ca?a.ca(a,b,c):Gb(a,b,c)};fb.F=3;function hb(){}
function ib(a,b,c){if(null!=a&&null!=a.kb)a=a.kb(a,b,c);else{var d=ib[t(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=ib._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw z("IKVReduce.-kv-reduce",a);}return a}function jb(a,b){if(null!=a&&null!=a.P)a=a.P(a,b);else{var c=jb[t(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=jb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw z("IEquiv.-equiv",a);}return a}
function kb(a){if(null!=a&&null!=a.S)a=a.S(a);else{var b=kb[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=kb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IHash.-hash",a);}return a}function lb(){}function mb(a){if(null!=a&&null!=a.O)a=a.O(a);else{var b=mb[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=mb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("ISeqable.-seq",a);}return a}function nb(){}function ob(){}function pb(){}function qb(){}
function rb(a){if(null!=a&&null!=a.lb)a=a.lb(a);else{var b=rb[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=rb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IReversible.-rseq",a);}return a}function sb(a,b){if(null!=a&&null!=a.Bb)a=a.Bb(a,b);else{var c=sb[t(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=sb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw z("IWriter.-write",a);}return a}function tb(){}
function ub(a,b,c){if(null!=a&&null!=a.N)a=a.N(a,b,c);else{var d=ub[t(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=ub._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw z("IPrintWithWriter.-pr-writer",a);}return a}function vb(a){if(null!=a&&null!=a.Sa)a=a.Sa(a);else{var b=vb[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=vb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IEditableCollection.-as-transient",a);}return a}
function wb(a,b){if(null!=a&&null!=a.Ua)a=a.Ua(a,b);else{var c=wb[t(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=wb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw z("ITransientCollection.-conj!",a);}return a}function xb(a){if(null!=a&&null!=a.$a)a=a.$a(a);else{var b=xb[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=xb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("ITransientCollection.-persistent!",a);}return a}
function yb(a,b,c){if(null!=a&&null!=a.Ta)a=a.Ta(a,b,c);else{var d=yb[t(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=yb._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw z("ITransientAssociative.-assoc!",a);}return a}function zb(){}function Ab(a,b){if(null!=a&&null!=a.Ra)a=a.Ra(a,b);else{var c=Ab[t(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Ab._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw z("IComparable.-compare",a);}return a}
function Bb(a){if(null!=a&&null!=a.xb)a=a.xb(a);else{var b=Bb[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Bb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IChunk.-drop-first",a);}return a}function Cb(a){if(null!=a&&null!=a.qb)a=a.qb(a);else{var b=Cb[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Cb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IChunkedSeq.-chunked-first",a);}return a}
function Db(a){if(null!=a&&null!=a.ib)a=a.ib(a);else{var b=Db[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Db._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IChunkedSeq.-chunked-rest",a);}return a}function Eb(a,b){if(null!=a&&null!=a.Qb)a=a.Qb(a,b);else{var c=Eb[t(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Eb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw z("IReset.-reset!",a);}return a}
var Ld=function(){function a(f,h,k,l,m){var n=Fb[t(null==f?null:f)];if(null!=n)return n.aa?n.aa(f,h,k,l,m):n.call(null,f,h,k,l,m);n=Fb._;if(null!=n)return n.aa?n.aa(f,h,k,l,m):n.call(null,f,h,k,l,m);throw z("ISwap.-swap!",f);}function b(f,h,k,l){var m=Fb[t(null==f?null:f)];if(null!=m)return m.H?m.H(f,h,k,l):m.call(null,f,h,k,l);m=Fb._;if(null!=m)return m.H?m.H(f,h,k,l):m.call(null,f,h,k,l);throw z("ISwap.-swap!",f);}function c(f,h,k){var l=Fb[t(null==f?null:f)];if(null!=l)return l.j?l.j(f,h,k):l.call(null,
f,h,k);l=Fb._;if(null!=l)return l.j?l.j(f,h,k):l.call(null,f,h,k);throw z("ISwap.-swap!",f);}function d(f,h){var k=Fb[t(null==f?null:f)];if(null!=k)return k.g?k.g(f,h):k.call(null,f,h);k=Fb._;if(null!=k)return k.g?k.g(f,h):k.call(null,f,h);throw z("ISwap.-swap!",f);}var e=null;e=function(f,h,k,l,m){switch(arguments.length){case 2:return d.call(this,f,h);case 3:return c.call(this,f,h,k);case 4:return b.call(this,f,h,k,l);case 5:return a.call(this,f,h,k,l,m)}throw Error("Invalid arity: "+arguments.length);
};e.g=d;e.j=c;e.H=b;e.aa=a;return e}(),Fb=function Fb(a){switch(arguments.length){case 2:return Fb.g(arguments[0],arguments[1]);case 3:return Fb.j(arguments[0],arguments[1],arguments[2]);case 4:return Fb.H(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Fb.aa(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}};Fb.g=function(a,b){return null!=a&&null!=a.Sb?a.Sb(a,b):Ld(a,b)};
Fb.j=function(a,b,c){return null!=a&&null!=a.Tb?a.Tb(a,b,c):Ld(a,b,c)};Fb.H=function(a,b,c,d){return null!=a&&null!=a.Ub?a.Ub(a,b,c,d):Ld(a,b,c,d)};Fb.aa=function(a,b,c,d,e){return null!=a&&null!=a.Vb?a.Vb(a,b,c,d,e):Ld(a,b,c,d,e)};Fb.F=5;function Hb(){}function Ib(a){if(null!=a&&null!=a.Ca)a=a.Ca(a);else{var b=Ib[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Ib._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IIterable.-iterator",a);}return a}
function Jb(a){this.ac=a;this.l=1073741824;this.A=0}Jb.prototype.Bb=function(a,b){return this.ac.append(b)};function Kb(a){var b=new ma;a.N(null,new Jb(b),ra());return A.c(b)}var Lb="undefined"!==typeof Math&&"undefined"!==typeof Math.imul&&0!==Math.imul(4294967295,5)?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function Mb(a){a=Lb(a|0,-862048943);return Lb(a<<15|a>>>-15,461845907)}
function Nb(a,b){a=(a|0)^(b|0);return Lb(a<<13|a>>>-13,5)+-430675100|0}function Ob(a,b){a=(a|0)^b;a=Lb(a^a>>>16,-2048144789);a=Lb(a^a>>>13,-1028477387);return a^a>>>16}var Pb={},Qb=0;function Rb(a){255<Qb&&(Pb={},Qb=0);if(null==a)return 0;var b=Pb[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b)d=Lb(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a}else b=0;else b=0;Pb[a]=b;Qb+=1;a=b}return a}
function Sb(a){if(null!=a&&(a.l&4194304||u===a.qc))return a.S(null)^0;if("number"===typeof a){if(w(isFinite(a)))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=Rb(a),a=0===a?a:Ob(Nb(0,Mb(a)),4)):a=a instanceof Date?a.valueOf()^0:null==a?0:kb(a)^0,a}
function Tb(a){var b=a.name;a:{var c=1;for(var d=0;;)if(c<b.length)d=Nb(d,Mb(b.charCodeAt(c-1)|b.charCodeAt(c)<<16)),c+=2;else{c=d;break a}}b=Ob(1===(b.length&1)?c^Mb(b.charCodeAt(b.length-1)):c,Lb(2,b.length));a=Rb(a.ja);return b^a+2654435769+(b<<6)+(b>>2)}function Ub(a,b){if(a.str===b.str)return 0;if(w(ya(a.ja)?b.ja:!1))return-1;if(w(a.ja)){if(ya(b.ja))return 1;var c=ha(a.ja,b.ja);return 0===c?ha(a.name,b.name):c}return ha(a.name,b.name)}
function Vb(a,b,c,d,e){this.ja=a;this.name=b;this.str=c;this.Qa=d;this.ma=e;this.l=2154168321;this.A=4096}g=Vb.prototype;g.toString=function(){return this.str};g.P=function(a,b){return b instanceof Vb?this.str===b.str:!1};g.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};
g.c=function(a){return Wb.g?Wb.g(a,this):Wb.call(null,a,this)};g.g=function(a,b){return Wb.j?Wb.j(a,this,b):Wb.call(null,a,this,b)};g.R=function(){return this.ma};g.T=function(a,b){return new Vb(this.ja,this.name,this.str,this.Qa,b)};g.S=function(){var a=this.Qa;return null!=a?a:this.Qa=a=Tb(this)};g.N=function(a,b){return sb(b,this.str)};
var Xb=function Xb(a){switch(arguments.length){case 1:return Xb.c(arguments[0]);case 2:return Xb.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}};Xb.c=function(a){for(;;){if(a instanceof Vb)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?Xb.g(null,a):Xb.g(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof Yb)return a.Oa;if(a instanceof E)a=a.Da;else throw Error("no conversion to symbol");}};
Xb.g=function(a,b){var c=null!=a?[A.c(a),"/",A.c(b)].join(""):b;return new Vb(a,b,c,null,null)};Xb.F=2;function Yb(a,b,c){this.m=a;this.Oa=b;this.ma=c;this.l=6717441;this.A=0}g=Yb.prototype;g.toString=function(){return["#'",A.c(this.Oa)].join("")};g.jb=function(){return this.m.o?this.m.o():this.m.call(null)};g.R=function(){return this.ma};g.T=function(a,b){return new Yb(this.m,this.Oa,b)};g.P=function(a,b){return b instanceof Yb?(a=this.Oa,b=b.Oa,F.g?F.g(a,b):F.call(null,a,b)):!1};g.S=function(){return Tb(this.Oa)};
g.call=function(a){switch(arguments.length-1){case 0:return this.o();case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);case 3:return this.j(arguments[1],arguments[2],arguments[3]);case 4:return this.H(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.ya(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.za(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Ba(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.oa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.sa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.ta(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.ua(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.va(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.wa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.xa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.rb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};g.o=function(){var a=this.m.o?this.m.o():this.m.call(null);return a.o?a.o():a.call(null)};g.c=function(a){var b=this.m.o?this.m.o():this.m.call(null);return b.c?b.c(a):b.call(null,a)};g.g=function(a,b){var c=this.m.o?this.m.o():this.m.call(null);return c.g?c.g(a,b):c.call(null,a,b)};
g.j=function(a,b,c){var d=this.m.o?this.m.o():this.m.call(null);return d.j?d.j(a,b,c):d.call(null,a,b,c)};g.H=function(a,b,c,d){var e=this.m.o?this.m.o():this.m.call(null);return e.H?e.H(a,b,c,d):e.call(null,a,b,c,d)};g.aa=function(a,b,c,d,e){var f=this.m.o?this.m.o():this.m.call(null);return f.aa?f.aa(a,b,c,d,e):f.call(null,a,b,c,d,e)};g.ya=function(a,b,c,d,e,f){var h=this.m.o?this.m.o():this.m.call(null);return h.ya?h.ya(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f)};
g.za=function(a,b,c,d,e,f,h){var k=this.m.o?this.m.o():this.m.call(null);return k.za?k.za(a,b,c,d,e,f,h):k.call(null,a,b,c,d,e,f,h)};g.Aa=function(a,b,c,d,e,f,h,k){var l=this.m.o?this.m.o():this.m.call(null);return l.Aa?l.Aa(a,b,c,d,e,f,h,k):l.call(null,a,b,c,d,e,f,h,k)};g.Ba=function(a,b,c,d,e,f,h,k,l){var m=this.m.o?this.m.o():this.m.call(null);return m.Ba?m.Ba(a,b,c,d,e,f,h,k,l):m.call(null,a,b,c,d,e,f,h,k,l)};
g.na=function(a,b,c,d,e,f,h,k,l,m){var n=this.m.o?this.m.o():this.m.call(null);return n.na?n.na(a,b,c,d,e,f,h,k,l,m):n.call(null,a,b,c,d,e,f,h,k,l,m)};g.oa=function(a,b,c,d,e,f,h,k,l,m,n){var p=this.m.o?this.m.o():this.m.call(null);return p.oa?p.oa(a,b,c,d,e,f,h,k,l,m,n):p.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.pa=function(a,b,c,d,e,f,h,k,l,m,n,p){var q=this.m.o?this.m.o():this.m.call(null);return q.pa?q.pa(a,b,c,d,e,f,h,k,l,m,n,p):q.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.qa=function(a,b,c,d,e,f,h,k,l,m,n,p,q){var r=this.m.o?this.m.o():this.m.call(null);return r.qa?r.qa(a,b,c,d,e,f,h,k,l,m,n,p,q):r.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};g.ra=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){var x=this.m.o?this.m.o():this.m.call(null);return x.ra?x.ra(a,b,c,d,e,f,h,k,l,m,n,p,q,r):x.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r)};
g.sa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x){var C=this.m.o?this.m.o():this.m.call(null);return C.sa?C.sa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x):C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x)};g.ta=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C){var D=this.m.o?this.m.o():this.m.call(null);return D.ta?D.ta(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C):D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C)};
g.ua=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D){var I=this.m.o?this.m.o():this.m.call(null);return I.ua?I.ua(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D):I.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D)};g.va=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I){var O=this.m.o?this.m.o():this.m.call(null);return O.va?O.va(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I):O.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I)};
g.wa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O){var V=this.m.o?this.m.o():this.m.call(null);return V.wa?V.wa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O):V.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O)};g.xa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V){var ia=this.m.o?this.m.o():this.m.call(null);return ia.xa?ia.xa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V):ia.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V)};
g.rb=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V,ia){var Ja=this.m.o?this.m.o():this.m.call(null);return Zb.sb?Zb.sb(Ja,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V,ia):Zb.call(null,Ja,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V,ia)};function $b(a){return null!=a?a.A&131072||u===a.rc?!0:a.A?!1:y(Hb,a):y(Hb,a)}
function G(a){if(null==a)return null;if(null!=a&&(a.l&8388608||u===a.Rb))return a.O(null);if(xa(a)||"string"===typeof a)return 0===a.length?null:new H(a,0,null);if(null!=a&&null!=a[Aa])return a=(null!==a&&Aa in a?a[Aa]:void 0).call(a),ac.c?ac.c(a):ac.call(null,a);if(y(lb,a))return mb(a);throw Error([A.c(a)," is not ISeqable"].join(""));}function J(a){if(null==a)return null;if(null!=a&&(a.l&64||u===a.I))return a.Y(null);a=G(a);return null==a?null:B(a)}
function bc(a){return null!=a?null!=a&&(a.l&64||u===a.I)?a.da(null):(a=G(a))?a.da(null):K:K}function M(a){return null==a?null:null!=a&&(a.l&128||u===a.Za)?a.$(null):G(bc(a))}var F=function F(a){switch(arguments.length){case 1:return F.c(arguments[0]);case 2:return F.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return F.v(arguments[0],arguments[1],new H(c.slice(2),0,null))}};F.c=function(){return!0};
F.g=function(a,b){return null==a?null==b:a===b||jb(a,b)};F.v=function(a,b,c){for(;;)if(F.g(a,b))if(M(c))a=b,b=J(c),c=M(c);else return F.g(b,J(c));else return!1};F.C=function(a){var b=J(a),c=M(a);a=J(c);c=M(c);return this.v(b,a,c)};F.F=2;function cc(a){this.D=a}cc.prototype.next=function(){if(null!=this.D){var a=J(this.D);this.D=M(this.D);return{value:a,done:!1}}return{value:null,done:!0}};function dc(a){return new cc(G(a))}
function ec(a,b){this.value=a;this.Wa=b;this.ob=null;this.l=8388672;this.A=0}ec.prototype.O=function(){return this};ec.prototype.Y=function(){return this.value};ec.prototype.da=function(){null==this.ob&&(this.ob=ac.c?ac.c(this.Wa):ac.call(null,this.Wa));return this.ob};function ac(a){var b=a.next();return w(b.done)?null:new ec(b.value,a)}function fc(a){var b=0,c=1;for(a=G(a);;)if(null!=a)b+=1,c=Lb(31,c)+Sb(J(a))|0,a=M(a);else return Ob(Nb(0,Mb(c)),b)}var gc=Ob(Nb(0,Mb(1)),0);
function hc(a){var b=0,c=0;for(a=G(a);;)if(null!=a)b+=1,c=c+Sb(J(a))|0,a=M(a);else return Ob(Nb(0,Mb(c)),b)}var ic=Ob(Nb(0,Mb(0)),0);Da["null"]=!0;Ea["null"]=function(){return 0};Date.prototype.P=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};Date.prototype.Xa=u;Date.prototype.Ra=function(a,b){if(b instanceof Date)return ha(this.valueOf(),b.valueOf());throw Error(["Cannot compare ",A.c(this)," to ",A.c(b)].join(""));};jb.number=function(a,b){return a===b};bb["function"]=!0;
cb["function"]=function(){return null};kb._=function(a){return a[da]||(a[da]=++ea)};function jc(a){this.m=a;this.l=32768;this.A=0}jc.prototype.jb=function(){return this.m};function kc(a){return a instanceof jc}function lc(a){return ab(a)}function mc(a,b){var c=a.length;if(0===a.length)return b.o?b.o():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.g?b.g(d,f):b.call(null,d,f);if(kc(d))return ab(d);e+=1}else return d}
function nc(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.g?b.g(e,f):b.call(null,e,f);if(kc(e))return ab(e);c+=1}else return e}function oc(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.g?b.g(c,f):b.call(null,c,f);if(kc(c))return ab(c);d+=1}else return c}function pc(a){return null!=a?a.l&2||u===a.Fb?!0:a.l?!1:y(Da,a):y(Da,a)}function qc(a){return null!=a?a.l&16||u===a.zb?!0:a.l?!1:y(Ka,a):y(Ka,a)}
function N(a,b,c){var d=P.c?P.c(a):P.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(F.g(rc?rc(a,c):sc.call(null,a,c),b))return c;c+=1}else return-1}function Q(a,b,c){var d=P.c?P.c(a):P.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(F.g(rc?rc(a,c):sc.call(null,a,c),b))return c;--c}else return-1}function tc(a,b){this.h=a;this.i=b}tc.prototype.fa=function(){return this.i<this.h.length};
tc.prototype.next=function(){var a=this.h[this.i];this.i+=1;return a};function H(a,b,c){this.h=a;this.i=b;this.meta=c;this.l=166592766;this.A=139264}g=H.prototype;g.toString=function(){return Kb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P.c?P.c(this):P.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.W=function(a,b){a=b+this.i;if(0<=a&&a<this.h.length)return this.h[a];throw Error("Index out of bounds");};g.la=function(a,b,c){a=b+this.i;return 0<=a&&a<this.h.length?this.h[a]:c};
g.Ca=function(){return new tc(this.h,this.i)};g.R=function(){return this.meta};g.$=function(){return this.i+1<this.h.length?new H(this.h,this.i+1,null):null};g.U=function(){var a=this.h.length-this.i;return 0>a?0:a};g.lb=function(){var a=this.U(null);return 0<a?new uc(this,a-1,null):null};g.S=function(){return fc(this)};g.P=function(a,b){return vc.g?vc.g(this,b):vc.call(null,this,b)};g.V=function(){return K};g.ba=function(a,b){return oc(this.h,b,this.h[this.i],this.i+1)};
g.ca=function(a,b,c){return oc(this.h,b,c,this.i)};g.Y=function(){return this.h[this.i]};g.da=function(){return this.i+1<this.h.length?new H(this.h,this.i+1,null):K};g.O=function(){return this.i<this.h.length?this:null};g.T=function(a,b){return b===this.meta?this:new H(this.h,this.i,b)};g.Z=function(a,b){return R.g?R.g(b,this):R.call(null,b,this)};H.prototype[Aa]=function(){return dc(this)};function wc(a){return 0<a.length?new H(a,0,null):null}
function uc(a,b,c){this.hb=a;this.i=b;this.meta=c;this.l=32374990;this.A=8192}g=uc.prototype;g.toString=function(){return Kb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P.c?P.c(this):P.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.meta};g.$=function(){return 0<this.i?new uc(this.hb,this.i-1,null):null};g.U=function(){return this.i+1};g.S=function(){return fc(this)};
g.P=function(a,b){return vc.g?vc.g(this,b):vc.call(null,this,b)};g.V=function(){return K};g.ba=function(a,b){return xc?xc(b,this):yc.call(null,b,this)};g.ca=function(a,b,c){return zc?zc(b,c,this):yc.call(null,b,c,this)};g.Y=function(){return La(this.hb,this.i)};g.da=function(){return 0<this.i?new uc(this.hb,this.i-1,null):K};g.O=function(){return this};g.T=function(a,b){return b===this.meta?this:new uc(this.hb,this.i,b)};g.Z=function(a,b){return R.g?R.g(b,this):R.call(null,b,this)};
uc.prototype[Aa]=function(){return dc(this)};function Ac(a){for(;;){var b=M(a);if(null!=b)a=b;else return J(a)}}jb._=function(a,b){return a===b};var Bc=function Bc(a){switch(arguments.length){case 0:return Bc.o();case 1:return Bc.c(arguments[0]);case 2:return Bc.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Bc.v(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Bc.o=function(){return Cc};Bc.c=function(a){return a};
Bc.g=function(a,b){return null!=a?Ia(a,b):new Dc(null,b,null,1,null)};Bc.v=function(a,b,c){for(;;)if(w(c))a=Bc.g(a,b),b=J(c),c=M(c);else return Bc.g(a,b)};Bc.C=function(a){var b=J(a),c=M(a);a=J(c);c=M(c);return this.v(b,a,c)};Bc.F=2;
function P(a){if(null!=a)if(null!=a&&(a.l&2||u===a.Fb))a=a.U(null);else if(xa(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.l&8388608||u===a.Rb))a:{a=G(a);for(var b=0;;){if(pc(a)){a=b+Ea(a);break a}a=M(a);b+=1}}else a=Ea(a);else a=0;return a}function Ec(a,b,c){for(;;){if(null==a)return c;if(0===b)return G(a)?J(a):c;if(qc(a))return La(a,b,c);if(G(a))a=M(a),--b;else return c}}
function sc(a){switch(arguments.length){case 2:return rc(arguments[0],arguments[1]);case 3:return S(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}}
function rc(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.l&16||u===a.zb))return a.W(null,b);if(xa(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.l&64||u===a.I)||null!=a&&(a.l&16777216||u===a.Ab)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(G(a)){a=J(a);break a}throw Error("Index out of bounds");}if(qc(a)){a=La(a,b);break a}if(G(a))a=M(a),--b;else throw Error("Index out of bounds");}return a}if(y(Ka,a))return La(a,b);throw Error(["nth not supported on this type ",A.c(za(null==a?null:a.constructor))].join(""));}
function S(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.l&16||u===a.zb))return a.la(null,b,c);if(xa(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.l&64||u===a.I)||null!=a&&(a.l&16777216||u===a.Ab))return 0>b?c:Ec(a,b,c);if(y(Ka,a))return La(a,b,c);throw Error(["nth not supported on this type ",A.c(za(null==a?null:a.constructor))].join(""));}
var Wb=function Wb(a){switch(arguments.length){case 2:return Wb.g(arguments[0],arguments[1]);case 3:return Wb.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}};Wb.g=function(a,b){return null==a?null:null!=a&&(a.l&256||u===a.Kb)?a.ia(null,b):xa(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:y(Qa,a)?Ra(a,b):null};
Wb.j=function(a,b,c){return null!=a?null!=a&&(a.l&256||u===a.Kb)?a.M(null,b,c):xa(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:y(Qa,a)?Ra(a,b,c):c:c};Wb.F=3;var Fc=function Fc(a){switch(arguments.length){case 3:return Fc.j(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Fc.v(arguments[0],arguments[1],arguments[2],new H(c.slice(3),0,null))}};
Fc.j=function(a,b,c){if(null!=a&&(a.l&512||u===a.nc))a=a.Ja(null,b,c);else if(null!=a)a=Ta(a,b,c);else{a=[b,c];b=[];for(c=0;;)if(c<a.length){var d=a[c],e=a[c+1],f=Gc(b,d);-1===f?(f=b,f.push(d),f.push(e)):b[f+1]=e;c+=2}else break;a=new v(null,b.length/2,b,null)}return a};Fc.v=function(a,b,c,d){for(;;)if(a=Fc.j(a,b,c),w(d))b=J(d),c=J(M(d)),d=M(M(d));else return a};Fc.C=function(a){var b=J(a),c=M(a);a=J(c);var d=M(c);c=J(d);d=M(d);return this.v(b,a,c,d)};Fc.F=3;
var Hc=function Hc(a){switch(arguments.length){case 1:return Hc.c(arguments[0]);case 2:return Hc.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Hc.v(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Hc.c=function(a){return a};Hc.g=function(a,b){return null==a?null:Wa(a,b)};Hc.v=function(a,b,c){for(;;){if(null==a)return null;a=Hc.g(a,b);if(w(c))b=J(c),c=M(c);else return a}};
Hc.C=function(a){var b=J(a),c=M(a);a=J(c);c=M(c);return this.v(b,a,c)};Hc.F=2;function Ic(a,b){this.u=a;this.meta=b;this.l=393217;this.A=0}g=Ic.prototype;g.R=function(){return this.meta};g.T=function(a,b){return new Ic(this.u,b)};
g.call=function(a){switch(arguments.length-1){case 0:return this.o();case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);case 3:return this.j(arguments[1],arguments[2],arguments[3]);case 4:return this.H(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.ya(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.za(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Ba(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.oa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.pa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.ra(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.sa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.ta(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.ua(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.va(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.wa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.xa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.rb(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};g.o=function(){return this.u.o?this.u.o():this.u.call(null)};g.c=function(a){return this.u.c?this.u.c(a):this.u.call(null,a)};g.g=function(a,b){return this.u.g?this.u.g(a,b):this.u.call(null,a,b)};g.j=function(a,b,c){return this.u.j?this.u.j(a,b,c):this.u.call(null,a,b,c)};
g.H=function(a,b,c,d){return this.u.H?this.u.H(a,b,c,d):this.u.call(null,a,b,c,d)};g.aa=function(a,b,c,d,e){return this.u.aa?this.u.aa(a,b,c,d,e):this.u.call(null,a,b,c,d,e)};g.ya=function(a,b,c,d,e,f){return this.u.ya?this.u.ya(a,b,c,d,e,f):this.u.call(null,a,b,c,d,e,f)};g.za=function(a,b,c,d,e,f,h){return this.u.za?this.u.za(a,b,c,d,e,f,h):this.u.call(null,a,b,c,d,e,f,h)};g.Aa=function(a,b,c,d,e,f,h,k){return this.u.Aa?this.u.Aa(a,b,c,d,e,f,h,k):this.u.call(null,a,b,c,d,e,f,h,k)};
g.Ba=function(a,b,c,d,e,f,h,k,l){return this.u.Ba?this.u.Ba(a,b,c,d,e,f,h,k,l):this.u.call(null,a,b,c,d,e,f,h,k,l)};g.na=function(a,b,c,d,e,f,h,k,l,m){return this.u.na?this.u.na(a,b,c,d,e,f,h,k,l,m):this.u.call(null,a,b,c,d,e,f,h,k,l,m)};g.oa=function(a,b,c,d,e,f,h,k,l,m,n){return this.u.oa?this.u.oa(a,b,c,d,e,f,h,k,l,m,n):this.u.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.pa=function(a,b,c,d,e,f,h,k,l,m,n,p){return this.u.pa?this.u.pa(a,b,c,d,e,f,h,k,l,m,n,p):this.u.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.qa=function(a,b,c,d,e,f,h,k,l,m,n,p,q){return this.u.qa?this.u.qa(a,b,c,d,e,f,h,k,l,m,n,p,q):this.u.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};g.ra=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){return this.u.ra?this.u.ra(a,b,c,d,e,f,h,k,l,m,n,p,q,r):this.u.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r)};g.sa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x){return this.u.sa?this.u.sa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x):this.u.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x)};
g.ta=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C){return this.u.ta?this.u.ta(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C):this.u.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C)};g.ua=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D){return this.u.ua?this.u.ua(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D):this.u.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D)};g.va=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I){return this.u.va?this.u.va(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I):this.u.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I)};
g.wa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O){return this.u.wa?this.u.wa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O):this.u.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O)};g.xa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V){return this.u.xa?this.u.xa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V):this.u.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V)};
g.rb=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V,ia){return Zb.sb?Zb.sb(this.u,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V,ia):Zb.call(null,this.u,a,b,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V,ia)};function Jc(a,b){return"function"==t(a)?new Ic(a,b):null==a?null:db(a,b)}function Kc(a){return null!=a&&(null!=a?a.l&131072||u===a.Nb||(a.l?0:y(bb,a)):y(bb,a))?cb(a):null}function Lc(a){return null==a?!1:null!=a?a.l&4096||u===a.yc?!0:a.l?!1:y(Za,a):y(Za,a)}
function Mc(a){return null!=a?a.l&16777216||u===a.Ab?!0:a.l?!1:y(nb,a):y(nb,a)}function Nc(a){return null==a?!1:null!=a?a.l&1024||u===a.uc?!0:a.l?!1:y(Va,a):y(Va,a)}function Oc(a){return null!=a?a.l&67108864||u===a.wc?!0:a.l?!1:y(pb,a):y(pb,a)}function Pc(a){return null!=a?a.l&16384||u===a.zc?!0:a.l?!1:y($a,a):y($a,a)}function Qc(a){return null!=a?a.A&512||u===a.oc?!0:!1:!1}function Rc(a,b,c,d,e){for(;0!==e;)c[d]=a[b],d+=1,--e,b+=1}var Sc={};function Tc(a){return null==a?!1:!1===a?!1:!0}
function Uc(a,b){return Wb.j(a,b,Sc)===Sc?!1:!0}
function Vc(a,b){if(a===b)return 0;if(null==a)return-1;if(null==b)return 1;if("number"===typeof a){if("number"===typeof b)return ha(a,b);throw Error(["Cannot compare ",A.c(a)," to ",A.c(b)].join(""));}if(null!=a?a.A&2048||u===a.Xa||(a.A?0:y(zb,a)):y(zb,a))return Ab(a,b);if("string"!==typeof a&&!xa(a)&&!0!==a&&!1!==a||(null==a?null:a.constructor)!==(null==b?null:b.constructor))throw Error(["Cannot compare ",A.c(a)," to ",A.c(b)].join(""));return ha(a,b)}
function Wc(a,b){var c=P(a),d=P(b);if(c<d)a=-1;else if(c>d)a=1;else if(0===c)a=0;else a:for(d=0;;){var e=Vc(rc(a,d),rc(b,d));if(0===e&&d+1<c)d+=1;else{a=e;break a}}return a}function ka(a){return F.g(a,Vc)?Vc:function(b,c){var d=a.g?a.g(b,c):a.call(null,b,c);return"number"===typeof d?d:w(d)?-1:w(a.g?a.g(c,b):a.call(null,c,b))?1:0}}function Xc(a,b){return G(b)?(b=Yc.c?Yc.c(b):Yc.call(null,b),ja(b,ka(a)),G(b)):K}
function Di(){return Xc(function(a,b){a=J.c?J.c(a):J.call(null,a);b=J.c?J.c(b):J.call(null,b);var c=ka(Vc);return c.g?c.g(a,b):c.call(null,a,b)},qj)}function yc(a){switch(arguments.length){case 2:return xc(arguments[0],arguments[1]);case 3:return zc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}}function xc(a,b){var c=G(b);return c?(b=J(c),c=M(c),Zc?Zc(a,b,c):$c.call(null,a,b,c)):a.o?a.o():a.call(null)}
function zc(a,b,c){for(c=G(c);;)if(c){var d=J(c);b=a.g?a.g(b,d):a.call(null,b,d);if(kc(b))return ab(b);c=M(c)}else return b}function ad(a,b){a=Ib(a);if(w(a.fa()))for(var c=a.next();;)if(a.fa()){var d=a.next();c=b.g?b.g(c,d):b.call(null,c,d);if(kc(c))return ab(c)}else return c;else return b.o?b.o():b.call(null)}function bd(a,b,c){for(a=Ib(a);;)if(a.fa()){var d=a.next();c=b.g?b.g(c,d):b.call(null,c,d);if(kc(c))return ab(c)}else return c}
function $c(a){switch(arguments.length){case 2:return cd(arguments[0],arguments[1]);case 3:return Zc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}}function cd(a,b){return null!=b&&(b.l&524288||u===b.Pb)?b.ba(null,a):xa(b)?mc(b,a):"string"===typeof b?mc(b,a):y(eb,b)?fb(b,a):$b(b)?ad(b,a):xc(a,b)}
function Zc(a,b,c){return null!=c&&(c.l&524288||u===c.Pb)?c.ca(null,a,b):xa(c)?nc(c,a,b):"string"===typeof c?nc(c,a,b):y(eb,c)?fb(c,a,b):$b(c)?bd(c,a,b):zc(a,b,c)}function dd(a,b,c){return null!=c?ib(c,a,b):b}function ed(a){return a}function fd(a,b,c,d){a=a.c?a.c(b):a.call(null,b);c=Zc(a,c,d);return a.c?a.c(c):a.call(null,c)}function gd(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}
function hd(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}function yj(a){return 0>a}var A=function A(a){switch(arguments.length){case 0:return A.o();case 1:return A.c(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return A.v(arguments[0],new H(c.slice(1),0,null))}};A.o=function(){return""};A.c=function(a){return null==a?"":[a].join("")};
A.v=function(a,b){for(a=new ma(A.c(a));;)if(w(b))a=a.append(A.c(J(b))),b=M(b);else return a.toString()};A.C=function(a){var b=J(a);a=M(a);return this.v(b,a)};A.F=1;function vc(a,b){if(Mc(b))if(pc(a)&&pc(b)&&P(a)!==P(b))a=!1;else a:for(a=G(a),b=G(b);;){if(null==a){a=null==b;break a}if(null!=b&&F.g(J(a),J(b)))a=M(a),b=M(b);else{a=!1;break a}}else a=null;return Tc(a)}function Dc(a,b,c,d,e){this.meta=a;this.first=b;this.rest=c;this.count=d;this.B=e;this.l=65937646;this.A=8192}g=Dc.prototype;
g.toString=function(){return Kb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.meta};g.$=function(){return 1===this.count?null:this.rest};g.U=function(){return this.count};g.Cc=function(){return this.first};g.Dc=function(){return this.da(null)};
g.S=function(){var a=this.B;return null!=a?a:this.B=a=fc(this)};g.P=function(a,b){return vc(this,b)};g.V=function(){return db(K,this.meta)};g.ba=function(a,b){return xc(b,this)};g.ca=function(a,b,c){return zc(b,c,this)};g.Y=function(){return this.first};g.da=function(){return 1===this.count?K:this.rest};g.O=function(){return this};g.T=function(a,b){return b===this.meta?this:new Dc(b,this.first,this.rest,this.count,this.B)};g.Z=function(a,b){return new Dc(this.meta,b,this,this.count+1,null)};
Dc.prototype[Aa]=function(){return dc(this)};function id(a){this.meta=a;this.l=65937614;this.A=8192}g=id.prototype;g.toString=function(){return Kb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.meta};g.$=function(){return null};g.U=function(){return 0};g.Cc=function(){return null};g.Dc=function(){throw Error("Can't pop empty list");};g.S=function(){return gc};
g.P=function(a,b){return(null!=b?b.l&33554432||u===b.tc||(b.l?0:y(ob,b)):y(ob,b))||Mc(b)?null==G(b):!1};g.V=function(){return this};g.ba=function(a,b){return xc(b,this)};g.ca=function(a,b,c){return zc(b,c,this)};g.Y=function(){return null};g.da=function(){return K};g.O=function(){return null};g.T=function(a,b){return b===this.meta?this:new id(b)};g.Z=function(a,b){return new Dc(this.meta,b,null,1,null)};var K=new id(null);id.prototype[Aa]=function(){return dc(this)};
function jd(a){return(null!=a?a.l&134217728||u===a.xc||(a.l?0:y(qb,a)):y(qb,a))?(a=rb(a))?a:K:Zc(Bc,K,a)}function kd(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;a:{c=0<b.length?new H(b.slice(0),0,null):null;if(c instanceof H&&0===c.i)b=c.h;else b:for(b=[];;)if(null!=c)b.push(B(c)),c=Pa(c);else break b;c=b.length;for(var e=K;;)if(0<c)d=c-1,e=Ia(e,b[c-1]),c=d;else break a}return e}
function ld(a,b,c,d){this.meta=a;this.first=b;this.rest=c;this.B=d;this.l=65929452;this.A=8192}g=ld.prototype;g.toString=function(){return Kb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.meta};g.$=function(){return null==this.rest?null:G(this.rest)};g.S=function(){var a=this.B;return null!=a?a:this.B=a=fc(this)};g.P=function(a,b){return vc(this,b)};g.V=function(){return K};
g.ba=function(a,b){return xc(b,this)};g.ca=function(a,b,c){return zc(b,c,this)};g.Y=function(){return this.first};g.da=function(){return null==this.rest?K:this.rest};g.O=function(){return this};g.T=function(a,b){return b===this.meta?this:new ld(b,this.first,this.rest,this.B)};g.Z=function(a,b){return new ld(null,b,this,null)};ld.prototype[Aa]=function(){return dc(this)};
function R(a,b){return null==b?new Dc(null,a,null,1,null):null!=b&&(b.l&64||u===b.I)?new ld(null,a,b,null):new ld(null,a,G(b),null)}function md(a,b){if(a.Da===b.Da)return 0;if(w(ya(a.ja)?b.ja:!1))return-1;if(w(a.ja)){if(ya(b.ja))return 1;var c=ha(a.ja,b.ja);return 0===c?ha(a.name,b.name):c}return ha(a.name,b.name)}function E(a,b,c,d){this.ja=a;this.name=b;this.Da=c;this.Qa=d;this.l=2153775105;this.A=4096}g=E.prototype;g.toString=function(){return[":",A.c(this.Da)].join("")};
g.P=function(a,b){return b instanceof E?this.Da===b.Da:!1};g.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};g.c=function(a){return Wb.g(a,this)};g.g=function(a,b){return Wb.j(a,this,b)};g.S=function(){var a=this.Qa;return null!=a?a:this.Qa=a=Tb(this)+2654435769|0};
g.N=function(a,b){return sb(b,[":",A.c(this.Da)].join(""))};function nd(a){if(null!=a&&(a.A&4096||u===a.Ob))return a.ja;throw Error(["Doesn't support namespace: ",A.c(a)].join(""));}var od=function od(a){switch(arguments.length){case 1:return od.c(arguments[0]);case 2:return od.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}};
od.c=function(a){if(a instanceof E)return a;if(a instanceof Vb)return new E(nd(a),pd.c?pd.c(a):pd.call(null,a),a.str,null);if(F.g("/",a))return new E(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new E(b[0],b[1],a,null):new E(null,b[0],a,null)}return null};
od.g=function(a,b){a=a instanceof E?pd.c?pd.c(a):pd.call(null,a):a instanceof Vb?pd.c?pd.c(a):pd.call(null,a):a;b=b instanceof E?pd.c?pd.c(b):pd.call(null,b):b instanceof Vb?pd.c?pd.c(b):pd.call(null,b):b;return new E(a,b,[w(a)?[A.c(a),"/"].join(""):null,A.c(b)].join(""),null)};od.F=2;function qd(a,b,c){this.meta=a;this.ab=b;this.D=null;this.B=c;this.l=32374988;this.A=1}g=qd.prototype;g.toString=function(){return Kb(this)};
function rd(a){null!=a.ab&&(a.D=a.ab.o?a.ab.o():a.ab.call(null),a.ab=null);return a.D}g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.meta};g.$=function(){this.O(null);return null==this.D?null:M(this.D)};g.S=function(){var a=this.B;return null!=a?a:this.B=a=fc(this)};g.P=function(a,b){return vc(this,b)};
g.V=function(){return db(K,this.meta)};g.ba=function(a,b){return xc(b,this)};g.ca=function(a,b,c){return zc(b,c,this)};g.Y=function(){this.O(null);return null==this.D?null:J(this.D)};g.da=function(){this.O(null);return null!=this.D?bc(this.D):K};g.O=function(){rd(this);if(null==this.D)return null;for(var a=this.D;;)if(a instanceof qd)a=rd(a);else return this.D=a,G(this.D)};g.T=function(a,b){var c=this;return b===this.meta?c:new qd(b,function(){return c.O(null)},this.B)};
g.Z=function(a,b){return R(b,this)};qd.prototype[Aa]=function(){return dc(this)};function sd(a){this.pb=a;this.end=0;this.l=2;this.A=0}sd.prototype.add=function(a){this.pb[this.end]=a;return this.end+=1};sd.prototype.chunk=function(){var a=new td(this.pb,0,this.end);this.pb=null;return a};sd.prototype.U=function(){return this.end};function td(a,b,c){this.h=a;this.off=b;this.end=c;this.l=524306;this.A=0}g=td.prototype;g.U=function(){return this.end-this.off};
g.W=function(a,b){return this.h[this.off+b]};g.la=function(a,b,c){return 0<=b&&b<this.end-this.off?this.h[this.off+b]:c};g.xb=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new td(this.h,this.off+1,this.end)};g.ba=function(a,b){return oc(this.h,b,this.h[this.off],this.off+1)};g.ca=function(a,b,c){return oc(this.h,b,c,this.off)};function ud(a,b,c,d){this.chunk=a;this.Ga=b;this.meta=c;this.B=d;this.l=31850732;this.A=1536}g=ud.prototype;g.toString=function(){return Kb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.meta};g.$=function(){return 1<Ea(this.chunk)?new ud(Bb(this.chunk),this.Ga,null,null):null==this.Ga?null:mb(this.Ga)};g.S=function(){var a=this.B;return null!=a?a:this.B=a=fc(this)};
g.P=function(a,b){return vc(this,b)};g.V=function(){return K};g.Y=function(){return La(this.chunk,0)};g.da=function(){return 1<Ea(this.chunk)?new ud(Bb(this.chunk),this.Ga,null,null):null==this.Ga?K:this.Ga};g.O=function(){return this};g.qb=function(){return this.chunk};g.ib=function(){return null==this.Ga?K:this.Ga};g.T=function(a,b){return b===this.meta?this:new ud(this.chunk,this.Ga,b,this.B)};g.Z=function(a,b){return R(b,this)};g.yb=function(){return null==this.Ga?null:this.Ga};
ud.prototype[Aa]=function(){return dc(this)};function vd(a,b){return 0===Ea(a)?b:new ud(a,b,null,null)}function wd(a,b){a.add(b)}function Yc(a){var b=[];for(a=G(a);;)if(null!=a)b.push(J(a)),a=M(a);else return b}function xd(a,b){if(pc(b))return P(b);var c=0;for(b=G(b);;)if(null!=b&&c<a)c+=1,b=M(b);else return c}
var yd=function yd(a){if(null==a)return null;var c=M(a);return null==c?G(J(a)):R(J(a),yd.c?yd.c(c):yd.call(null,c))},zd=function zd(a){switch(arguments.length){case 0:return zd.o();case 1:return zd.c(arguments[0]);case 2:return zd.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return zd.v(arguments[0],arguments[1],new H(c.slice(2),0,null))}};zd.o=function(){return new qd(null,function(){return null},null)};
zd.c=function(a){return new qd(null,function(){return a},null)};zd.g=function(a,b){return new qd(null,function(){var c=G(a);return c?Qc(c)?vd(Cb(c),zd.g(Db(c),b)):R(J(c),zd.g(bc(c),b)):b},null)};zd.v=function(a,b,c){return function h(e,f){return new qd(null,function(){var k=G(e);return k?Qc(k)?vd(Cb(k),h(Db(k),f)):R(J(k),h(bc(k),f)):w(f)?h(J(f),M(f)):null},null)}(zd.g(a,b),c)};zd.C=function(a){var b=J(a),c=M(a);a=J(c);c=M(c);return this.v(b,a,c)};zd.F=2;
var Ad=function Ad(a){switch(arguments.length){case 0:return Ad.o();case 1:return Ad.c(arguments[0]);case 2:return Ad.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ad.v(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Ad.o=function(){return vb(Cc)};Ad.c=function(a){return a};Ad.g=function(a,b){return wb(a,b)};Ad.v=function(a,b,c){for(;;)if(a=wb(a,b),w(c))b=J(c),c=M(c);else return a};
Ad.C=function(a){var b=J(a),c=M(a);a=J(c);c=M(c);return this.v(b,a,c)};Ad.F=2;
function Bd(a,b,c){var d=G(c);if(0===b)return a.o?a.o():a.call(null);c=B(d);var e=Na(d);if(1===b)return a.c?a.c(c):a.call(null,c);d=B(e);var f=Na(e);if(2===b)return a.g?a.g(c,d):a.call(null,c,d);e=B(f);var h=Na(f);if(3===b)return a.j?a.j(c,d,e):a.call(null,c,d,e);f=B(h);var k=Na(h);if(4===b)return a.H?a.H(c,d,e,f):a.call(null,c,d,e,f);h=B(k);var l=Na(k);if(5===b)return a.aa?a.aa(c,d,e,f,h):a.call(null,c,d,e,f,h);k=B(l);var m=Na(l);if(6===b)return a.ya?a.ya(c,d,e,f,h,k):a.call(null,c,d,e,f,h,k);l=
B(m);var n=Na(m);if(7===b)return a.za?a.za(c,d,e,f,h,k,l):a.call(null,c,d,e,f,h,k,l);m=B(n);var p=Na(n);if(8===b)return a.Aa?a.Aa(c,d,e,f,h,k,l,m):a.call(null,c,d,e,f,h,k,l,m);n=B(p);var q=Na(p);if(9===b)return a.Ba?a.Ba(c,d,e,f,h,k,l,m,n):a.call(null,c,d,e,f,h,k,l,m,n);p=B(q);var r=Na(q);if(10===b)return a.na?a.na(c,d,e,f,h,k,l,m,n,p):a.call(null,c,d,e,f,h,k,l,m,n,p);q=B(r);var x=Na(r);if(11===b)return a.oa?a.oa(c,d,e,f,h,k,l,m,n,p,q):a.call(null,c,d,e,f,h,k,l,m,n,p,q);r=B(x);var C=Na(x);if(12===
b)return a.pa?a.pa(c,d,e,f,h,k,l,m,n,p,q,r):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r);x=B(C);var D=Na(C);if(13===b)return a.qa?a.qa(c,d,e,f,h,k,l,m,n,p,q,r,x):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x);C=B(D);var I=Na(D);if(14===b)return a.ra?a.ra(c,d,e,f,h,k,l,m,n,p,q,r,x,C):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,C);D=B(I);var O=Na(I);if(15===b)return a.sa?a.sa(c,d,e,f,h,k,l,m,n,p,q,r,x,C,D):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D);I=B(O);var V=Na(O);if(16===b)return a.ta?a.ta(c,d,e,f,h,k,l,m,n,p,q,r,x,
C,D,I):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I);O=B(V);var ia=Na(V);if(17===b)return a.ua?a.ua(c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O);V=B(ia);var Ja=Na(ia);if(18===b)return a.va?a.va(c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V);ia=B(Ja);Ja=Na(Ja);if(19===b)return a.wa?a.wa(c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V,ia):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V,ia);var Kf=B(Ja);Na(Ja);if(20===b)return a.xa?a.xa(c,
d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V,ia,Kf):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,x,C,D,I,O,V,ia,Kf);throw Error("Only up to 20 arguments supported on functions");}function Cd(a){return null!=a&&(a.l&128||u===a.Za)?a.$(null):G(bc(a))}function Dd(a,b,c){return null==c?a.c?a.c(b):a.call(a,b):Ed(a,b,B(c),Cd(c))}function Ed(a,b,c,d){return null==d?a.g?a.g(b,c):a.call(a,b,c):Fd(a,b,c,B(d),Cd(d))}function Fd(a,b,c,d,e){return null==e?a.j?a.j(b,c,d):a.call(a,b,c,d):Gd(a,b,c,d,B(e),Cd(e))}
function Gd(a,b,c,d,e,f){if(null==f)return a.H?a.H(b,c,d,e):a.call(a,b,c,d,e);var h=B(f),k=M(f);if(null==k)return a.aa?a.aa(b,c,d,e,h):a.call(a,b,c,d,e,h);f=B(k);var l=M(k);if(null==l)return a.ya?a.ya(b,c,d,e,h,f):a.call(a,b,c,d,e,h,f);k=B(l);var m=M(l);if(null==m)return a.za?a.za(b,c,d,e,h,f,k):a.call(a,b,c,d,e,h,f,k);l=B(m);var n=M(m);if(null==n)return a.Aa?a.Aa(b,c,d,e,h,f,k,l):a.call(a,b,c,d,e,h,f,k,l);m=B(n);var p=M(n);if(null==p)return a.Ba?a.Ba(b,c,d,e,h,f,k,l,m):a.call(a,b,c,d,e,h,f,k,l,m);
n=B(p);var q=M(p);if(null==q)return a.na?a.na(b,c,d,e,h,f,k,l,m,n):a.call(a,b,c,d,e,h,f,k,l,m,n);p=B(q);var r=M(q);if(null==r)return a.oa?a.oa(b,c,d,e,h,f,k,l,m,n,p):a.call(a,b,c,d,e,h,f,k,l,m,n,p);q=B(r);var x=M(r);if(null==x)return a.pa?a.pa(b,c,d,e,h,f,k,l,m,n,p,q):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q);r=B(x);var C=M(x);if(null==C)return a.qa?a.qa(b,c,d,e,h,f,k,l,m,n,p,q,r):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r);x=B(C);var D=M(C);if(null==D)return a.ra?a.ra(b,c,d,e,h,f,k,l,m,n,p,q,r,x):a.call(a,b,c,d,
e,h,f,k,l,m,n,p,q,r,x);C=B(D);var I=M(D);if(null==I)return a.sa?a.sa(b,c,d,e,h,f,k,l,m,n,p,q,r,x,C):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,x,C);D=B(I);var O=M(I);if(null==O)return a.ta?a.ta(b,c,d,e,h,f,k,l,m,n,p,q,r,x,C,D):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,x,C,D);I=B(O);var V=M(O);if(null==V)return a.ua?a.ua(b,c,d,e,h,f,k,l,m,n,p,q,r,x,C,D,I):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,x,C,D,I);O=B(V);var ia=M(V);if(null==ia)return a.va?a.va(b,c,d,e,h,f,k,l,m,n,p,q,r,x,C,D,I,O):a.call(a,b,c,d,e,h,f,k,l,m,n,p,
q,r,x,C,D,I,O);V=B(ia);var Ja=M(ia);if(null==Ja)return a.wa?a.wa(b,c,d,e,h,f,k,l,m,n,p,q,r,x,C,D,I,O,V):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,x,C,D,I,O,V);ia=B(Ja);Ja=M(Ja);if(null==Ja)return a.xa?a.xa(b,c,d,e,h,f,k,l,m,n,p,q,r,x,C,D,I,O,V,ia):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,x,C,D,I,O,V,ia);b=[b,c,d,e,h,f,k,l,m,n,p,q,r,x,C,D,I,O,V,ia];for(c=Ja;;)if(c)b.push(B(c)),c=M(c);else break;return a.apply(a,b)}
function Zb(a){switch(arguments.length){case 2:return T(arguments[0],arguments[1]);case 3:return Hd(arguments[0],arguments[1],arguments[2]);case 4:return Id(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Jd(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=arguments[0];d=arguments[1];var e=arguments[2],f=arguments[3],h=arguments[4];b=new H(b.slice(5),0,null);c.C?(b=yd(b),
d=R(d,R(e,R(f,R(h,b)))),e=c.F,b=4+xd(e-3,b),c=b<=e?Bd(c,b,d):c.C(d)):c=Gd(c,d,e,f,h,yd(b));return c}}function T(a,b){if(a.C){var c=a.F,d=xd(c+1,b);return d<=c?Bd(a,d,b):a.C(b)}b=G(b);return null==b?a.o?a.o():a.call(a):Dd(a,B(b),Cd(b))}function Hd(a,b,c){if(a.C){b=R(b,c);var d=a.F;c=xd(d,c)+1;return c<=d?Bd(a,c,b):a.C(b)}return Dd(a,b,G(c))}function Id(a,b,c,d){return a.C?(b=R(b,R(c,d)),c=a.F,d=2+xd(c-1,d),d<=c?Bd(a,d,b):a.C(b)):Ed(a,b,c,G(d))}
function Jd(a,b,c,d,e){return a.C?(b=R(b,R(c,R(d,e))),c=a.F,e=3+xd(c-2,e),e<=c?Bd(a,e,b):a.C(b)):Fd(a,b,c,d,G(e))}
function Kd(){if("undefined"===typeof na||"undefined"===typeof oa||"undefined"===typeof Ma)Ma=function(a){this.Zb=a;this.l=393216;this.A=0},Ma.prototype.T=function(a,b){return new Ma(b)},Ma.prototype.R=function(){return this.Zb},Ma.prototype.fa=function(){return!1},Ma.prototype.next=function(){return Error("No such element")},Ma.prototype.remove=function(){return Error("Unsupported operation")},Ma.Bc=function(){return new U(null,1,5,W,[wj],null)},Ma.Cb=!0,Ma.mb="cljs.core/t_cljs$core19718",Ma.Wb=
function(a){return sb(a,"cljs.core/t_cljs$core19718")};return new Ma(Md)}function Nd(a,b){for(;;){if(null==G(b))return!0;var c=J(b);c=a.c?a.c(c):a.call(null,c);if(w(c))b=M(b);else return!1}}function Od(a,b){for(;;)if(b=G(b)){var c=J(b);c=a.c?a.c(c):a.call(null,c);if(w(c))return c;b=M(b)}else return null}
function Pd(a){return function(){function b(h,k){return ya(a.g?a.g(h,k):a.call(null,h,k))}function c(h){return ya(a.c?a.c(h):a.call(null,h))}function d(){return ya(a.o?a.o():a.call(null))}var e=null,f=function(){function h(l,m,n){var p=null;if(2<arguments.length){p=0;for(var q=Array(arguments.length-2);p<q.length;)q[p]=arguments[p+2],++p;p=new H(q,0,null)}return k.call(this,l,m,p)}function k(l,m,n){return ya(Id(a,l,m,n))}h.F=2;h.C=function(l){var m=J(l);l=M(l);var n=J(l);l=bc(l);return k(m,n,l)};
h.v=k;return h}();e=function(h,k,l){switch(arguments.length){case 0:return d.call(this);case 1:return c.call(this,h);case 2:return b.call(this,h,k);default:var m=null;if(2<arguments.length){m=0;for(var n=Array(arguments.length-2);m<n.length;)n[m]=arguments[m+2],++m;m=new H(n,0,null)}return f.v(h,k,m)}throw Error("Invalid arity: "+arguments.length);};e.F=2;e.C=f.C;e.o=d;e.c=c;e.g=b;e.v=f.v;return e}()}
var Qd=function Qd(a){switch(arguments.length){case 0:return Qd.o();case 1:return Qd.c(arguments[0]);case 2:return Qd.g(arguments[0],arguments[1]);case 3:return Qd.j(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Qd.v(arguments[0],arguments[1],arguments[2],new H(c.slice(3),0,null))}};Qd.o=function(){return ed};Qd.c=function(a){return a};
Qd.g=function(a,b){return function(){function c(l,m,n){l=b.j?b.j(l,m,n):b.call(null,l,m,n);return a.c?a.c(l):a.call(null,l)}function d(l,m){l=b.g?b.g(l,m):b.call(null,l,m);return a.c?a.c(l):a.call(null,l)}function e(l){l=b.c?b.c(l):b.call(null,l);return a.c?a.c(l):a.call(null,l)}function f(){var l=b.o?b.o():b.call(null);return a.c?a.c(l):a.call(null,l)}var h=null,k=function(){function l(n,p,q,r){var x=null;if(3<arguments.length){x=0;for(var C=Array(arguments.length-3);x<C.length;)C[x]=arguments[x+
3],++x;x=new H(C,0,null)}return m.call(this,n,p,q,x)}function m(n,p,q,r){n=Jd(b,n,p,q,r);return a.c?a.c(n):a.call(null,n)}l.F=3;l.C=function(n){var p=J(n);n=M(n);var q=J(n);n=M(n);var r=J(n);n=bc(n);return m(p,q,r,n)};l.v=m;return l}();h=function(l,m,n,p){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,l);case 2:return d.call(this,l,m);case 3:return c.call(this,l,m,n);default:var q=null;if(3<arguments.length){q=0;for(var r=Array(arguments.length-3);q<r.length;)r[q]=arguments[q+
3],++q;q=new H(r,0,null)}return k.v(l,m,n,q)}throw Error("Invalid arity: "+arguments.length);};h.F=3;h.C=k.C;h.o=f;h.c=e;h.g=d;h.j=c;h.v=k.v;return h}()};
Qd.j=function(a,b,c){return function(){function d(m,n,p){m=c.j?c.j(m,n,p):c.call(null,m,n,p);m=b.c?b.c(m):b.call(null,m);return a.c?a.c(m):a.call(null,m)}function e(m,n){m=c.g?c.g(m,n):c.call(null,m,n);m=b.c?b.c(m):b.call(null,m);return a.c?a.c(m):a.call(null,m)}function f(m){m=c.c?c.c(m):c.call(null,m);m=b.c?b.c(m):b.call(null,m);return a.c?a.c(m):a.call(null,m)}function h(){var m=c.o?c.o():c.call(null);m=b.c?b.c(m):b.call(null,m);return a.c?a.c(m):a.call(null,m)}var k=null,l=function(){function m(p,
q,r,x){var C=null;if(3<arguments.length){C=0;for(var D=Array(arguments.length-3);C<D.length;)D[C]=arguments[C+3],++C;C=new H(D,0,null)}return n.call(this,p,q,r,C)}function n(p,q,r,x){p=Jd(c,p,q,r,x);p=b.c?b.c(p):b.call(null,p);return a.c?a.c(p):a.call(null,p)}m.F=3;m.C=function(p){var q=J(p);p=M(p);var r=J(p);p=M(p);var x=J(p);p=bc(p);return n(q,r,x,p)};m.v=n;return m}();k=function(m,n,p,q){switch(arguments.length){case 0:return h.call(this);case 1:return f.call(this,m);case 2:return e.call(this,
m,n);case 3:return d.call(this,m,n,p);default:var r=null;if(3<arguments.length){r=0;for(var x=Array(arguments.length-3);r<x.length;)x[r]=arguments[r+3],++r;r=new H(x,0,null)}return l.v(m,n,p,r)}throw Error("Invalid arity: "+arguments.length);};k.F=3;k.C=l.C;k.o=h;k.c=f;k.g=e;k.j=d;k.v=l.v;return k}()};
Qd.v=function(a,b,c,d){var e=jd(R(a,R(b,R(c,d))));return function(){function f(k){var l=null;if(0<arguments.length){l=0;for(var m=Array(arguments.length-0);l<m.length;)m[l]=arguments[l+0],++l;l=new H(m,0,null)}return h.call(this,l)}function h(k){k=T(J(e),k);for(var l=M(e);;)if(l){var m=J(l);k=m.c?m.c(k):m.call(null,k);l=M(l)}else return k}f.F=0;f.C=function(k){k=G(k);return h(k)};f.v=h;return f}()};Qd.C=function(a){var b=J(a),c=M(a);a=J(c);var d=M(c);c=J(d);d=M(d);return this.v(b,a,c,d)};Qd.F=3;
function Rd(a){this.state=a;this.Eb=this.cc=this.meta=null;this.A=16386;this.l=6455296}Rd.prototype.P=function(a,b){return this===b};Rd.prototype.jb=function(){return this.state};Rd.prototype.R=function(){return this.meta};Rd.prototype.S=function(){return this[da]||(this[da]=++ea)};
function Sd(a,b){if(a instanceof Rd){var c=a.cc;if(null!=c&&!w(c.c?c.c(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;if(null!=a.Eb)a:for(var d=G(a.Eb),e=null,f=0,h=0;;)if(h<f){var k=e.W(null,h),l=S(k,0,null);k=S(k,1,null);k.H?k.H(l,a,c,b):k.call(null,l,a,c,b);h+=1}else if(d=G(d))Qc(d)?(e=Cb(d),d=Db(d),l=e,f=P(e),e=l):(e=J(d),l=S(e,0,null),k=S(e,1,null),k.H?k.H(l,a,c,b):k.call(null,l,a,c,b),d=M(d),e=null,f=0),h=0;else break a;return b}return Eb(a,b)}
var Td=function Td(a){switch(arguments.length){case 2:return Td.g(arguments[0],arguments[1]);case 3:return Td.j(arguments[0],arguments[1],arguments[2]);case 4:return Td.H(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Td.v(arguments[0],arguments[1],arguments[2],arguments[3],new H(c.slice(4),0,null))}};
Td.g=function(a,b){if(a instanceof Rd){var c=a.state;b=b.c?b.c(c):b.call(null,c);a=Sd(a,b)}else a=Fb(a,b);return a};Td.j=function(a,b,c){if(a instanceof Rd){var d=a.state;b=b.g?b.g(d,c):b.call(null,d,c);a=Sd(a,b)}else a=Fb(a,b,c);return a};Td.H=function(a,b,c,d){if(a instanceof Rd){var e=a.state;b=b.j?b.j(e,c,d):b.call(null,e,c,d);a=Sd(a,b)}else a=Fb(a,b,c,d);return a};Td.v=function(a,b,c,d,e){return a instanceof Rd?Sd(a,Jd(b,a.state,c,d,e)):Fb(a,b,c,d,e)};
Td.C=function(a){var b=J(a),c=M(a);a=J(c);var d=M(c);c=J(d);var e=M(d);d=J(e);e=M(e);return this.v(b,a,c,d,e)};Td.F=4;
function Ud(a){return function(){function b(h,k,l){h=a.c?a.c(h):a.call(null,h);w(h)?(k=a.c?a.c(k):a.call(null,k),l=w(k)?a.c?a.c(l):a.call(null,l):k):l=h;return Tc(l)}function c(h,k){h=a.c?a.c(h):a.call(null,h);k=w(h)?a.c?a.c(k):a.call(null,k):h;return Tc(k)}function d(h){return Tc(a.c?a.c(h):a.call(null,h))}var e=null,f=function(){function h(l,m,n,p){var q=null;if(3<arguments.length){q=0;for(var r=Array(arguments.length-3);q<r.length;)r[q]=arguments[q+3],++q;q=new H(r,0,null)}return k.call(this,l,
m,n,q)}function k(l,m,n,p){l=e.j(l,m,n);p=w(l)?Nd(a,p):l;return Tc(p)}h.F=3;h.C=function(l){var m=J(l);l=M(l);var n=J(l);l=M(l);var p=J(l);l=bc(l);return k(m,n,p,l)};h.v=k;return h}();e=function(h,k,l,m){switch(arguments.length){case 0:return!0;case 1:return d.call(this,h);case 2:return c.call(this,h,k);case 3:return b.call(this,h,k,l);default:var n=null;if(3<arguments.length){n=0;for(var p=Array(arguments.length-3);n<p.length;)p[n]=arguments[n+3],++n;n=new H(p,0,null)}return f.v(h,k,l,n)}throw Error("Invalid arity: "+
arguments.length);};e.F=3;e.C=f.C;e.o=function(){return!0};e.c=d;e.g=c;e.j=b;e.v=f.v;return e}()}
function Vd(a,b){return function(){function c(k,l,m){return Tc(function(){var n=a.c?a.c(k):a.call(null,k);return w(n)?(n=a.c?a.c(l):a.call(null,l),w(n)?(n=a.c?a.c(m):a.call(null,m),w(n)?(n=b.c?b.c(k):b.call(null,k),w(n)?(n=b.c?b.c(l):b.call(null,l),w(n)?b.c?b.c(m):b.call(null,m):n):n):n):n):n}())}function d(k,l){return Tc(function(){var m=a.c?a.c(k):a.call(null,k);return w(m)?(m=a.c?a.c(l):a.call(null,l),w(m)?(m=b.c?b.c(k):b.call(null,k),w(m)?b.c?b.c(l):b.call(null,l):m):m):m}())}function e(k){var l=
a.c?a.c(k):a.call(null,k);k=w(l)?b.c?b.c(k):b.call(null,k):l;return Tc(k)}var f=null,h=function(){function k(m,n,p,q){var r=null;if(3<arguments.length){r=0;for(var x=Array(arguments.length-3);r<x.length;)x[r]=arguments[r+3],++r;r=new H(x,0,null)}return l.call(this,m,n,p,r)}function l(m,n,p,q){return Tc(function(){var r=f.j(m,n,p);return w(r)?Nd(function(x){var C=a.c?a.c(x):a.call(null,x);return w(C)?b.c?b.c(x):b.call(null,x):C},q):r}())}k.F=3;k.C=function(m){var n=J(m);m=M(m);var p=J(m);m=M(m);var q=
J(m);m=bc(m);return l(n,p,q,m)};k.v=l;return k}();f=function(k,l,m,n){switch(arguments.length){case 0:return!0;case 1:return e.call(this,k);case 2:return d.call(this,k,l);case 3:return c.call(this,k,l,m);default:var p=null;if(3<arguments.length){p=0;for(var q=Array(arguments.length-3);p<q.length;)q[p]=arguments[p+3],++p;p=new H(q,0,null)}return h.v(k,l,m,p)}throw Error("Invalid arity: "+arguments.length);};f.F=3;f.C=h.C;f.o=function(){return!0};f.c=e;f.g=d;f.j=c;f.v=h.v;return f}()}
var Xd=function Xd(a){switch(arguments.length){case 1:return Xd.c(arguments[0]);case 2:return Xd.g(arguments[0],arguments[1]);case 3:return Xd.j(arguments[0],arguments[1],arguments[2]);case 4:return Xd.H(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Xd.v(arguments[0],arguments[1],arguments[2],arguments[3],new H(c.slice(4),0,null))}};
Xd.c=function(a){return function(b){return function(){function c(k,l){l=a.c?a.c(l):a.call(null,l);return b.g?b.g(k,l):b.call(null,k,l)}function d(k){return b.c?b.c(k):b.call(null,k)}function e(){return b.o?b.o():b.call(null)}var f=null,h=function(){function k(m,n,p){var q=null;if(2<arguments.length){q=0;for(var r=Array(arguments.length-2);q<r.length;)r[q]=arguments[q+2],++q;q=new H(r,0,null)}return l.call(this,m,n,q)}function l(m,n,p){n=Hd(a,n,p);return b.g?b.g(m,n):b.call(null,m,n)}k.F=2;k.C=function(m){var n=
J(m);m=M(m);var p=J(m);m=bc(m);return l(n,p,m)};k.v=l;return k}();f=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new H(p,0,null)}return h.v(k,l,n)}throw Error("Invalid arity: "+arguments.length);};f.F=2;f.C=h.C;f.o=e;f.c=d;f.g=c;f.v=h.v;return f}()}};
Xd.g=function(a,b){return new qd(null,function(){var c=G(b);if(c){if(Qc(c)){for(var d=Cb(c),e=P(d),f=new sd(Array(e)),h=0;;)if(h<e)wd(f,function(){var k=La(d,h);return a.c?a.c(k):a.call(null,k)}()),h+=1;else break;return vd(f.chunk(),Xd.g(a,Db(c)))}return R(function(){var k=J(c);return a.c?a.c(k):a.call(null,k)}(),Xd.g(a,bc(c)))}return null},null)};
Xd.j=function(a,b,c){return new qd(null,function(){var d=G(b),e=G(c);if(d&&e){var f=J(d);var h=J(e);f=a.g?a.g(f,h):a.call(null,f,h);d=R(f,Xd.j(a,bc(d),bc(e)))}else d=null;return d},null)};Xd.H=function(a,b,c,d){return new qd(null,function(){var e=G(b),f=G(c),h=G(d);if(e&&f&&h){var k=J(e);var l=J(f),m=J(h);k=a.j?a.j(k,l,m):a.call(null,k,l,m);e=R(k,Xd.H(a,bc(e),bc(f),bc(h)))}else e=null;return e},null)};
Xd.v=function(a,b,c,d,e){return Xd.g(function(f){return T(a,f)},function k(h){return new qd(null,function(){var l=Xd.g(G,h);return Nd(ed,l)?R(Xd.g(J,l),k(Xd.g(bc,l))):null},null)}(Bc.v(e,d,wc([c,b]))))};Xd.C=function(a){var b=J(a),c=M(a);a=J(c);var d=M(c);c=J(d);var e=M(d);d=J(e);e=M(e);return this.v(b,a,c,d,e)};Xd.F=4;function zj(a,b){return new qd(null,function(){if(0<a){var c=G(b);return c?R(J(c),zj(a-1,bc(c))):null}return null},null)}
function Aj(a,b){return new qd(null,function(){a:for(var c=a,d=b;;)if(d=G(d),0<c&&d)--c,d=bc(d);else break a;return d},null)}var Yd={};function Zd(a,b,c,d,e){this.meta=a;this.f=b;this.vb=c;this.nb=d;this.next=e;this.l=26083532;this.A=1}g=Zd.prototype;g.toString=function(){return Kb(this)};g.R=function(){return this.meta};g.$=function(){return this.da(null)};g.V=function(){return K};
g.ba=function(a,b){a=this.Y(null);var c=this.f.c?this.f.c(a):this.f.call(null,a);for(a=b.g?b.g(a,c):b.call(null,a,c);;){if(kc(a))return ab(a);c=this.f.c?this.f.c(c):this.f.call(null,c);a=b.g?b.g(a,c):b.call(null,a,c)}};g.ca=function(a,b,c){a=this.Y(null);for(c=b.g?b.g(c,a):b.call(null,c,a);;){if(kc(c))return ab(c);a=this.f.c?this.f.c(a):this.f.call(null,a);c=b.g?b.g(c,a):b.call(null,c,a)}};g.Y=function(){Yd===this.nb&&(this.nb=this.f.c?this.f.c(this.vb):this.f.call(null,this.vb));return this.nb};
g.da=function(){null==this.next&&(this.next=new Zd(null,this.f,this.Y(null),Yd,null));return this.next};g.O=function(){return this};g.T=function(a,b){return b===this.meta?this:new Zd(b,this.f,this.vb,this.nb,this.next)};g.Z=function(a,b){return R(b,this)};function $d(a,b){return new Zd(null,a,null,b,null)}function Vi(a,b){return T(zd,Hd(Xd,a,b))}
function ae(a,b){return new qd(null,function(){var c=G(b);if(c){if(Qc(c)){for(var d=Cb(c),e=P(d),f=new sd(Array(e)),h=0;;)if(h<e){var k=La(d,h);k=a.c?a.c(k):a.call(null,k);w(k)&&(k=La(d,h),f.add(k));h+=1}else break;return vd(f.chunk(),ae(a,Db(c)))}d=J(c);c=bc(c);return w(a.c?a.c(d):a.call(null,d))?R(d,ae(a,c)):ae(a,c)}return null},null)}function Ei(a,b){return ae(Pd(a),b)}
var be=function be(a){switch(arguments.length){case 0:return be.o();case 1:return be.c(arguments[0]);case 2:return be.g(arguments[0],arguments[1]);case 3:return be.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}};be.o=function(){return Cc};be.c=function(a){return a};be.g=function(a,b){return null!=a?null!=a&&(a.A&4||u===a.Gb)?db(xb(Zc(wb,vb(a),b)),Kc(a)):Zc(Ia,a,b):Zc(Bc,a,b)};
be.j=function(a,b,c){return null!=a&&(a.A&4||u===a.Gb)?db(xb(fd(b,Ad,vb(a),c)),Kc(a)):fd(b,Bc,a,c)};be.F=3;function Bj(a,b,c){return new qd(null,function(){var d=G(c);if(d){var e=zj(a,d);return a===P(e)?R(e,Bj(a,b,Aj(b,d))):null}return null},null)}function ce(a,b){this.J=a;this.h=b}function de(a){return new ce(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}
function xi(a){return new ce(a.J,Ba(a.h))}function ee(a){a=a.s;return 32>a?0:a-1>>>5<<5}function fe(a,b,c){for(;;){if(0===b)return c;var d=de(a);d.h[0]=c;c=d;b-=5}}var ge=function ge(a,b,c,d){var f=xi(c),h=a.s-1>>>b&31;5===b?f.h[h]=d:(c=c.h[h],null!=c?(b-=5,a=ge.H?ge.H(a,b,c,d):ge.call(null,a,b,c,d)):a=fe(null,b-5,d),f.h[h]=a);return f};function he(a,b){if(b>=ee(a))return a.ha;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.h[b>>>a&31];a=d}else return c.h}
function ie(a,b){if(0<=b&&b<a.s)b=he(a,b);else throw a=a.s,Error(["No item ",A.c(b)," in vector of length ",A.c(a)].join(""));return b}
var je=function je(a,b,c,d,e){var h=xi(c);if(0===b)h.h[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.h[k];a=je.aa?je.aa(a,b,c,d,e):je.call(null,a,b,c,d,e);h.h[k]=a}return h},yi=function yi(a,b,c){var e=a.s-2>>>b&31;if(5<b){b-=5;var f=c.h[e];a=yi.j?yi.j(a,b,f):yi.call(null,a,b,f);if(null==a&&0===e)return null;c=xi(c);c.h[e]=a;return c}if(0===e)return null;c=xi(c);c.h[e]=null;return c};function ke(a,b,c){this.base=this.i=0;this.h=a;this.bc=b;this.start=0;this.end=c}ke.prototype.fa=function(){return this.i<this.end};
ke.prototype.next=function(){32===this.i-this.base&&(this.h=he(this.bc,this.i),this.base+=32);var a=this.h[this.i&31];this.i+=1;return a};function le(a,b,c,d){return c<d?me(a,b,rc(a,c),c+1,d):b.o?b.o():b.call(null)}function me(a,b,c,d,e){var f=c;c=d;for(d=he(a,d);;)if(c<e){var h=c&31;d=0===h?he(a,c):d;h=d[h];f=b.g?b.g(f,h):b.call(null,f,h);if(kc(f))return ab(f);c+=1}else return f}
function U(a,b,c,d,e,f){this.meta=a;this.s=b;this.shift=c;this.root=d;this.ha=e;this.B=f;this.l=167666463;this.A=139268}g=U.prototype;g.Ya=function(a,b){return 0<=b&&b<this.s?new ne(b,he(this,b)[b&31]):null};g.toString=function(){return Kb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.ia=function(a,b){return this.M(null,b,null)};g.M=function(a,b,c){return"number"===typeof b?this.la(null,b,c):c};
g.kb=function(a,b,c){a=0;for(var d=c;;)if(a<this.s){var e=he(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=f+a,k=e[f];d=b.j?b.j(d,h,k):b.call(null,d,h,k);if(kc(d)){e=d;break a}f+=1}else{e=d;break a}if(kc(e))return ab(e);a+=c;d=e}else return d};g.W=function(a,b){return ie(this,b)[b&31]};g.la=function(a,b,c){return 0<=b&&b<this.s?he(this,b)[b&31]:c};
g.ub=function(a,b){if(0<=a&&a<this.s){if(ee(this)<=a){var c=Ba(this.ha);c[a&31]=b;return new U(this.meta,this.s,this.shift,this.root,c,null)}return new U(this.meta,this.s,this.shift,je(this,this.shift,this.root,a,b),this.ha,null)}if(a===this.s)return this.Z(null,b);throw Error(["Index ",A.c(a)," out of bounds  [0,",A.c(this.s),"]"].join(""));};g.Ca=function(){var a=this.s;return new ke(0<P(this)?he(this,0):null,this,a)};g.R=function(){return this.meta};g.U=function(){return this.s};
g.Cc=function(){return 0<this.s?this.W(null,this.s-1):null};g.Dc=function(){if(0===this.s)throw Error("Can't pop empty vector");if(1===this.s)return db(Cc,this.meta);if(1<this.s-ee(this))return new U(this.meta,this.s-1,this.shift,this.root,this.ha.slice(0,-1),null);var a=he(this,this.s-2),b=yi(this,this.shift,this.root);b=null==b?W:b;var c=this.s-1;return 5<this.shift&&null==b.h[1]?new U(this.meta,c,this.shift-5,b.h[0],a,null):new U(this.meta,c,this.shift,b,a,null)};
g.lb=function(){return 0<this.s?new uc(this,this.s-1,null):null};g.S=function(){var a=this.B;return null!=a?a:this.B=a=fc(this)};g.P=function(a,b){if(b instanceof U)if(this.s===P(b))for(a=this.Ca(null),b=b.Ca(null);;)if(a.fa()){var c=a.next(),d=b.next();if(!F.g(c,d))return!1}else return!0;else return!1;else return vc(this,b)};g.Sa=function(){return new oe(this.s,this.shift,pe.c?pe.c(this.root):pe.call(null,this.root),qe.c?qe.c(this.ha):qe.call(null,this.ha))};g.V=function(){return db(Cc,this.meta)};
g.ba=function(a,b){return le(this,b,0,this.s)};g.ca=function(a,b,c){a=0;for(var d=c;;)if(a<this.s){var e=he(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=e[f];d=b.g?b.g(d,h):b.call(null,d,h);if(kc(d)){e=d;break a}f+=1}else{e=d;break a}if(kc(e))return ab(e);a+=c;d=e}else return d};g.Ja=function(a,b,c){if("number"===typeof b)return this.ub(b,c);throw Error("Vector's key for assoc must be a number.");};
g.O=function(){if(0===this.s)return null;if(32>=this.s)return new H(this.ha,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.h[0];else{a=a.h;break a}}return re?re(this,a,0,0):se.call(null,this,a,0,0)};g.T=function(a,b){return b===this.meta?this:new U(b,this.s,this.shift,this.root,this.ha,this.B)};
g.Z=function(a,b){if(32>this.s-ee(this)){a=this.ha.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.ha[d],d+=1;else break;c[a]=b;return new U(this.meta,this.s+1,this.shift,this.root,c,null)}a=(c=this.s>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=de(null),c.h[0]=this.root,d=fe(null,this.shift,new ce(null,this.ha)),c.h[1]=d):c=ge(this,this.shift,this.root,new ce(null,this.ha));return new U(this.meta,this.s+1,a,c,[b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};g.c=function(a){return this.W(null,a)};g.g=function(a,b){return this.la(null,a,b)};
var W=new ce(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),Cc=new U(null,0,5,W,[],gc);U.prototype[Aa]=function(){return dc(this)};
function te(a){if(w(ue.c?ue.c(a):ue.call(null,a)))a=new U(null,2,5,W,[ve.c?ve.c(a):ve.call(null,a),we.c?we.c(a):we.call(null,a)],null);else if(Pc(a))a=Jc(a,null);else if(xa(a))a:{var b=a.length;if(32>b)a=new U(null,b,5,W,a,null);else for(var c=32,d=(new U(null,32,5,W,a.slice(0,32),null)).Sa(null);;)if(c<b){var e=c+1;d=Ad.g(d,a[c]);c=e}else{a=xb(d);break a}}else a=xb(Zc(wb,vb(Cc),a));return a}
function xe(a,b,c,d,e){this.ka=a;this.node=b;this.i=c;this.off=d;this.meta=e;this.B=null;this.l=32375020;this.A=1536}g=xe.prototype;g.toString=function(){return Kb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.meta};g.$=function(){if(this.off+1<this.node.length){var a=this.ka;var b=this.node,c=this.i,d=this.off+1;a=re?re(a,b,c,d):se.call(null,a,b,c,d);return null==a?null:a}return this.yb()};
g.S=function(){var a=this.B;return null!=a?a:this.B=a=fc(this)};g.P=function(a,b){return vc(this,b)};g.V=function(){return K};g.ba=function(a,b){return le(this.ka,b,this.i+this.off,P(this.ka))};g.ca=function(a,b,c){return me(this.ka,b,c,this.i+this.off,P(this.ka))};g.Y=function(){return this.node[this.off]};g.da=function(){if(this.off+1<this.node.length){var a=this.ka;var b=this.node,c=this.i,d=this.off+1;a=re?re(a,b,c,d):se.call(null,a,b,c,d);return null==a?K:a}return this.ib(null)};g.O=function(){return this};
g.qb=function(){var a=this.node;return new td(a,this.off,a.length)};g.ib=function(){var a=this.i+this.node.length;if(a<Ea(this.ka)){var b=this.ka,c=he(this.ka,a);return re?re(b,c,a,0):se.call(null,b,c,a,0)}return K};g.T=function(a,b){return b===this.meta?this:ye?ye(this.ka,this.node,this.i,this.off,b):se.call(null,this.ka,this.node,this.i,this.off,b)};g.Z=function(a,b){return R(b,this)};
g.yb=function(){var a=this.i+this.node.length;if(a<Ea(this.ka)){var b=this.ka,c=he(this.ka,a);return re?re(b,c,a,0):se.call(null,b,c,a,0)}return null};xe.prototype[Aa]=function(){return dc(this)};
function se(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new xe(b,ie(b,c),c,d,null);case 4:return re(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return ye(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}}function re(a,b,c,d){return new xe(a,b,c,d,null)}function ye(a,b,c,d,e){return new xe(a,b,c,d,e)}
function ze(a,b){return a===b.J?b:new ce(a,Ba(b.h))}function pe(a){return new ce({},Ba(a.h))}function qe(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];Rc(a,0,b,0,a.length);return b}var Ae=function Ae(a,b,c,d){c=ze(a.root.J,c);var f=a.s-1>>>b&31;if(5===b)a=d;else{var h=c.h[f];null!=h?(b-=5,a=Ae.H?Ae.H(a,b,h,d):Ae.call(null,a,b,h,d)):a=fe(a.root.J,b-5,d)}c.h[f]=a;return c};
function oe(a,b,c,d){this.s=a;this.shift=b;this.root=c;this.ha=d;this.A=88;this.l=275}g=oe.prototype;
g.Ua=function(a,b){if(this.root.J){if(32>this.s-ee(this))this.ha[this.s&31]=b;else{a=new ce(this.root.J,this.ha);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.ha=c;this.s>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=fe(this.root.J,this.shift,a),this.root=new ce(this.root.J,b),this.shift=c):this.root=Ae(this,this.shift,this.root,a)}this.s+=1;return this}throw Error("conj! after persistent!");};g.$a=function(){if(this.root.J){this.root.J=null;var a=this.s-ee(this),b=Array(a);Rc(this.ha,0,b,0,a);return new U(null,this.s,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
g.Ta=function(a,b,c){if("number"===typeof b)return Be(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function Be(a,b,c){if(a.root.J){if(0<=b&&b<a.s){if(ee(a)<=b)a.ha[b&31]=c;else{var d=function k(f,h){h=ze(a.root.J,h);if(0===f)h.h[b&31]=c;else{var l=b>>>f&31;f=k(f-5,h.h[l]);h.h[l]=f}return h}(a.shift,a.root);a.root=d}return a}if(b===a.s)return a.Ua(null,c);throw Error(["Index ",A.c(b)," out of bounds for TransientVector of length",A.c(a.s)].join(""));}throw Error("assoc! after persistent!");}g.U=function(){if(this.root.J)return this.s;throw Error("count after persistent!");};
g.W=function(a,b){if(this.root.J)return ie(this,b)[b&31];throw Error("nth after persistent!");};g.la=function(a,b,c){return 0<=b&&b<this.s?this.W(null,b):c};g.ia=function(a,b){return this.M(null,b,null)};g.M=function(a,b,c){if(this.root.J)return"number"===typeof b?this.la(null,b,c):c;throw Error("lookup after persistent!");};
g.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};g.c=function(a){return this.ia(null,a)};g.g=function(a,b){return this.M(null,a,b)};function Ce(){this.l=2097152;this.A=0}Ce.prototype.P=function(){return!1};var De=new Ce;
function Ee(a,b){return Tc(Nc(b)&&!Oc(b)?P(a)===P(b)?(null!=a?a.l&1048576||u===a.sc||(a.l?0:y(hb,a)):y(hb,a))?dd(function(c,d,e){return F.g(Wb.j(b,d,De),e)?!0:new jc(!1)},!0,a):Nd(function(c){return F.g(Wb.j(b,J(c),De),J(M(c)))},a):null:null)}function Fe(a){this.D=a}Fe.prototype.next=function(){if(null!=this.D){var a=J(this.D),b=S(a,0,null);a=S(a,1,null);this.D=M(this.D);return{value:[b,a],done:!1}}return{value:null,done:!0}};function Ge(a){this.D=a}
Ge.prototype.next=function(){if(null!=this.D){var a=J(this.D);this.D=M(this.D);return{value:[a,a],done:!1}}return{value:null,done:!0}};
function Gc(a,b){if(b instanceof E)a:{var c=a.length;b=b.Da;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof E&&b===a[d].Da){a=d;break a}d+=2}}else if("string"==typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof Vb)a:for(c=a.length,b=b.str,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof Vb&&b===a[d].str){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(F.g(b,a[d])){a=d;break a}d+=2}return a}function ne(a,b){this.key=a;this.m=b;this.B=null;this.l=166619935;this.A=0}g=ne.prototype;g.Ya=function(a,b){switch(b){case 0:return new ne(0,this.key);case 1:return new ne(1,this.m);default:return null}};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.ia=function(a,b){return this.la(null,b,null)};g.M=function(a,b,c){return this.la(null,b,c)};g.W=function(a,b){if(0===b)return this.key;if(1===b)return this.m;throw Error("Index out of bounds");};
g.la=function(a,b,c){return 0===b?this.key:1===b?this.m:c};g.ub=function(a,b){return(new U(null,2,5,W,[this.key,this.m],null)).ub(a,b)};g.R=function(){return null};g.U=function(){return 2};g.Lb=function(){return this.key};g.Mb=function(){return this.m};g.Cc=function(){return this.m};g.Dc=function(){return new U(null,1,5,W,[this.key],null)};g.lb=function(){return new H([this.m,this.key],0,null)};g.S=function(){var a=this.B;return null!=a?a:this.B=a=fc(this)};g.P=function(a,b){return vc(this,b)};
g.V=function(){return null};g.ba=function(a,b){a:if(a=this.U(null),0===a)b=b.o?b.o():b.call(null);else for(var c=this.W(null,0),d=1;;)if(d<a){var e=this.W(null,d);c=b.g?b.g(c,e):b.call(null,c,e);if(kc(c)){b=ab(c);break a}d+=1}else{b=c;break a}return b};g.ca=function(a,b,c){a:{a=this.U(null);var d=c;for(c=0;;)if(c<a){var e=this.W(null,c);d=b.g?b.g(d,e):b.call(null,d,e);if(kc(d)){b=ab(d);break a}c+=1}else{b=d;break a}}return b};
g.Ja=function(a,b,c){return Fc.j(new U(null,2,5,W,[this.key,this.m],null),b,c)};g.O=function(){return new H([this.key,this.m],0,null)};g.T=function(a,b){return Jc(new U(null,2,5,W,[this.key,this.m],null),b)};g.Z=function(a,b){return new U(null,3,5,W,[this.key,this.m,b],null)};g.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};g.c=function(a){return this.W(null,a)};g.g=function(a,b){return this.la(null,a,b)};function ue(a){return null!=a?a.l&2048||u===a.vc?!0:!1:!1}function He(a,b,c){this.h=a;this.i=b;this.ma=c;this.l=32374990;this.A=0}g=He.prototype;g.toString=function(){return Kb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.ma};g.$=function(){return this.i<this.h.length-2?new He(this.h,this.i+2,null):null};g.U=function(){return(this.h.length-this.i)/2};g.S=function(){return fc(this)};g.P=function(a,b){return vc(this,b)};
g.V=function(){return K};g.ba=function(a,b){return xc(b,this)};g.ca=function(a,b,c){return zc(b,c,this)};g.Y=function(){return new ne(this.h[this.i],this.h[this.i+1])};g.da=function(){return this.i<this.h.length-2?new He(this.h,this.i+2,null):K};g.O=function(){return this};g.T=function(a,b){return b===this.ma?this:new He(this.h,this.i,b)};g.Z=function(a,b){return R(b,this)};He.prototype[Aa]=function(){return dc(this)};function Ie(a,b){this.h=a;this.i=0;this.s=b}
Ie.prototype.fa=function(){return this.i<this.s};Ie.prototype.next=function(){var a=new ne(this.h[this.i],this.h[this.i+1]);this.i+=2;return a};function v(a,b,c,d){this.meta=a;this.s=b;this.h=c;this.B=d;this.l=16647951;this.A=139268}g=v.prototype;g.Ya=function(a,b){a=Gc(this.h,b);return-1===a?null:new ne(this.h[a],this.h[a+1])};g.toString=function(){return Kb(this)};g.keys=function(){return dc(Je.c?Je.c(this):Je.call(null,this))};g.entries=function(){return new Fe(G(G(this)))};
g.values=function(){return dc(Ke.c?Ke.c(this):Ke.call(null,this))};g.has=function(a){return Uc(this,a)};g.get=function(a,b){return this.M(null,a,b)};g.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.W(null,e),h=S(f,0,null);f=S(f,1,null);a.g?a.g(f,h):a.call(null,f,h);e+=1}else if(b=G(b))Qc(b)?(c=Cb(b),b=Db(b),h=c,d=P(c),c=h):(c=J(b),h=S(c,0,null),f=S(c,1,null),a.g?a.g(f,h):a.call(null,f,h),b=M(b),c=null,d=0),e=0;else return null};g.ia=function(a,b){return this.M(null,b,null)};
g.M=function(a,b,c){a=Gc(this.h,b);return-1===a?c:this.h[a+1]};g.kb=function(a,b,c){a=this.h.length;for(var d=0;;)if(d<a){var e=this.h[d],f=this.h[d+1];c=b.j?b.j(c,e,f):b.call(null,c,e,f);if(kc(c))return ab(c);d+=2}else return c};g.Ca=function(){return new Ie(this.h,2*this.s)};g.R=function(){return this.meta};g.U=function(){return this.s};g.S=function(){var a=this.B;return null!=a?a:this.B=a=hc(this)};
g.P=function(a,b){if(Nc(b)&&!Oc(b))if(a=this.h.length,this.s===b.U(null))for(var c=0;;)if(c<a){var d=b.M(null,this.h[c],Sc);if(d!==Sc)if(F.g(this.h[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};g.Sa=function(){return new Le(this.h.length,Ba(this.h))};g.V=function(){return db(Md,this.meta)};g.ba=function(a,b){return ad(this,b)};g.ca=function(a,b,c){return bd(this,b,c)};
g.tb=function(a,b){if(0<=Gc(this.h,b)){a=this.h.length;var c=a-2;if(0===c)return this.V(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new v(this.meta,this.s-1,c,null);F.g(b,this.h[d])?d+=2:(c[e]=this.h[d],c[e+1]=this.h[d+1],e+=2,d+=2)}}else return this};
g.Ja=function(a,b,c){a=Gc(this.h,b);if(-1===a){if(this.s<Me){a=this.h;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new v(this.meta,this.s+1,e,null)}return db(Ta(be.g(Ne,this),b,c),this.meta)}if(c===this.h[a+1])return this;b=Ba(this.h);b[a+1]=c;return new v(this.meta,this.s,b,null)};g.O=function(){var a=this.h;return 0<=a.length-2?new He(a,0,null):null};g.T=function(a,b){return b===this.meta?this:new v(b,this.s,this.h,this.B)};
g.Z=function(a,b){if(Pc(b))return this.Ja(null,La(b,0),La(b,1));a=this;for(b=G(b);;){if(null==b)return a;var c=J(b);if(Pc(c))a=Ta(a,La(c,0),La(c,1)),b=M(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};g.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};
g.c=function(a){return this.ia(null,a)};g.g=function(a,b){return this.M(null,a,b)};var Md=new v(null,0,[],ic),Me=8;v.prototype[Aa]=function(){return dc(this)};function Le(a,b){this.Va={};this.len=a;this.h=b;this.l=259;this.A=56}g=Le.prototype;g.U=function(){if(this.Va)return gd(this.len);throw Error("count after persistent!");};g.ia=function(a,b){return this.M(null,b,null)};g.M=function(a,b,c){if(this.Va)return a=Gc(this.h,b),-1===a?c:this.h[a+1];throw Error("lookup after persistent!");};
g.Ua=function(a,b){if(this.Va){if(ue(b))return this.Ta(null,ve.c?ve.c(b):ve.call(null,b),we.c?we.c(b):we.call(null,b));if(Pc(b))return this.Ta(null,b.c?b.c(0):b.call(null,0),b.c?b.c(1):b.call(null,1));a=G(b);for(b=this;;){var c=J(a);if(w(c))a=M(a),b=yb(b,ve.c?ve.c(c):ve.call(null,c),we.c?we.c(c):we.call(null,c));else return b}}else throw Error("conj! after persistent!");};g.$a=function(){if(this.Va)return this.Va=!1,new v(null,gd(this.len),this.h,null);throw Error("persistent! called twice");};
g.Ta=function(a,b,c){if(this.Va){a=Gc(this.h,b);if(-1===a){if(this.len+2<=2*Me)return this.len+=2,this.h.push(b),this.h.push(c),this;a=Oe.g?Oe.g(this.len,this.h):Oe.call(null,this.len,this.h);return yb(a,b,c)}c!==this.h[a+1]&&(this.h[a+1]=c);return this}throw Error("assoc! after persistent!");};g.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};g.c=function(a){return this.M(null,a,null)};g.g=function(a,b){return this.M(null,a,b)};function Oe(a,b){for(var c=vb(Ne),d=0;;)if(d<a)c=yb(c,b[d],b[d+1]),d+=2;else return c}function Pe(){this.m=!1}function Qe(a,b){return a===b?!0:a===b||a instanceof E&&b instanceof E&&a.Da===b.Da?!0:F.g(a,b)}function Re(a,b,c){a=Ba(a);a[b]=c;return a}
function Se(a,b){var c=Array(a.length-2);Rc(a,0,c,0,2*b);Rc(a,2*(b+1),c,2*b,c.length-2*b);return c}function Te(a,b,c,d){a=a.Ma(b);a.h[c]=d;return a}function Ue(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var h=a[e+1];c=b.j?b.j(f,c,h):b.call(null,f,c,h)}else c=a[e+1],c=null!=c?c.fb(b,f):f;if(kc(c))return c;e+=2;f=c}else return f}function Ve(a){this.h=a;this.i=0;this.Ha=this.gb=null}
Ve.prototype.advance=function(){for(var a=this.h.length;;)if(this.i<a){var b=this.h[this.i],c=this.h[this.i+1];null!=b?b=this.gb=new ne(b,c):null!=c?(b=Ib(c),b=b.fa()?this.Ha=b:!1):b=!1;this.i+=2;if(b)return!0}else return!1};Ve.prototype.fa=function(){var a=null!=this.gb;return a?a:(a=null!=this.Ha)?a:this.advance()};
Ve.prototype.next=function(){if(null!=this.gb){var a=this.gb;this.gb=null;return a}if(null!=this.Ha)return a=this.Ha.next(),this.Ha.fa()||(this.Ha=null),a;if(this.advance())return this.next();throw Error("No such element");};Ve.prototype.remove=function(){return Error("Unsupported operation")};function We(a,b,c){this.J=a;this.K=b;this.h=c;this.A=131072;this.l=0}g=We.prototype;
g.Ma=function(a){if(a===this.J)return this;var b=hd(this.K),c=Array(0>b?4:2*(b+1));Rc(this.h,0,c,0,2*b);return new We(a,this.K,c)};g.cb=function(){return Xe?Xe(this.h):Ye.call(null,this.h)};g.fb=function(a,b){return Ue(this.h,a,b)};g.Na=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.K&e))return d;var f=hd(this.K&e-1);e=this.h[2*f];f=this.h[2*f+1];return null==e?f.Na(a+5,b,c,d):Qe(c,e)?f:d};
g.Fa=function(a,b,c,d,e,f){var h=1<<(c>>>b&31),k=hd(this.K&h-1);if(0===(this.K&h)){var l=hd(this.K);if(2*l<this.h.length){a=this.Ma(a);b=a.h;f.m=!0;c=2*(l-k);f=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[f],--l,--c,--f;b[2*k]=d;b[2*k+1]=e;a.K|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Ze.Fa(a,b+5,c,d,e,f);for(e=d=0;;)if(32>d)0===(this.K>>>d&1)?
d+=1:(k[d]=null!=this.h[e]?Ze.Fa(a,b+5,Sb(this.h[e]),this.h[e],this.h[e+1],f):this.h[e+1],e+=2,d+=1);else break;return new $e(a,l+1,k)}b=Array(2*(l+4));Rc(this.h,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;Rc(this.h,2*k,b,2*(k+1),2*(l-k));f.m=!0;a=this.Ma(a);a.h=b;a.K|=h;return a}l=this.h[2*k];h=this.h[2*k+1];if(null==l)return l=h.Fa(a,b+5,c,d,e,f),l===h?this:Te(this,a,2*k+1,l);if(Qe(d,l))return e===h?this:Te(this,a,2*k+1,e);f.m=!0;f=b+5;d=af?af(a,f,l,h,c,d,e):bf.call(null,a,f,l,h,c,d,e);e=2*k;k=2*k+1;a=this.Ma(a);
a.h[e]=null;a.h[k]=d;return a};
g.Ea=function(a,b,c,d,e){var f=1<<(b>>>a&31),h=hd(this.K&f-1);if(0===(this.K&f)){var k=hd(this.K);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=Ze.Ea(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.K>>>c&1)?c+=1:(h[c]=null!=this.h[d]?Ze.Ea(a+5,Sb(this.h[d]),this.h[d],this.h[d+1],e):this.h[d+1],d+=2,c+=1);else break;return new $e(null,k+1,h)}a=Array(2*(k+1));Rc(this.h,
0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;Rc(this.h,2*h,a,2*(h+1),2*(k-h));e.m=!0;return new We(null,this.K|f,a)}var l=this.h[2*h];f=this.h[2*h+1];if(null==l)return k=f.Ea(a+5,b,c,d,e),k===f?this:new We(null,this.K,Re(this.h,2*h+1,k));if(Qe(c,l))return d===f?this:new We(null,this.K,Re(this.h,2*h+1,d));e.m=!0;e=this.K;k=this.h;a+=5;a=cf?cf(a,l,f,b,c,d):bf.call(null,a,l,f,b,c,d);c=2*h;h=2*h+1;d=Ba(k);d[c]=null;d[h]=a;return new We(null,e,d)};
g.bb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.K&e))return d;var f=hd(this.K&e-1);e=this.h[2*f];f=this.h[2*f+1];return null==e?f.bb(a+5,b,c,d):Qe(c,e)?new ne(e,f):d};g.eb=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.K&d))return this;var e=hd(this.K&d-1),f=this.h[2*e],h=this.h[2*e+1];return null==f?(a=h.eb(a+5,b,c),a===h?this:null!=a?new We(null,this.K,Re(this.h,2*e+1,a)):this.K===d?null:new We(null,this.K^d,Se(this.h,e))):Qe(c,f)?new We(null,this.K^d,Se(this.h,e)):this};g.Ca=function(){return new Ve(this.h)};
var Ze=new We(null,0,[]);function df(a){this.h=a;this.i=0;this.Ha=null}df.prototype.fa=function(){for(var a=this.h.length;;){if(null!=this.Ha&&this.Ha.fa())return!0;if(this.i<a){var b=this.h[this.i];this.i+=1;null!=b&&(this.Ha=Ib(b))}else return!1}};df.prototype.next=function(){if(this.fa())return this.Ha.next();throw Error("No such element");};df.prototype.remove=function(){return Error("Unsupported operation")};function $e(a,b,c){this.J=a;this.s=b;this.h=c;this.A=131072;this.l=0}g=$e.prototype;
g.Ma=function(a){return a===this.J?this:new $e(a,this.s,Ba(this.h))};g.cb=function(){return ef?ef(this.h):ff.call(null,this.h)};g.fb=function(a,b){for(var c=this.h.length,d=0;;)if(d<c){var e=this.h[d];if(null!=e){b=e.fb(a,b);if(kc(b))return b;d+=1}else d+=1}else return b};g.Na=function(a,b,c,d){var e=this.h[b>>>a&31];return null!=e?e.Na(a+5,b,c,d):d};
g.Fa=function(a,b,c,d,e,f){var h=c>>>b&31,k=this.h[h];if(null==k)return a=Te(this,a,h,Ze.Fa(a,b+5,c,d,e,f)),a.s+=1,a;b=k.Fa(a,b+5,c,d,e,f);return b===k?this:Te(this,a,h,b)};g.Ea=function(a,b,c,d,e){var f=b>>>a&31,h=this.h[f];if(null==h)return new $e(null,this.s+1,Re(this.h,f,Ze.Ea(a+5,b,c,d,e)));a=h.Ea(a+5,b,c,d,e);return a===h?this:new $e(null,this.s,Re(this.h,f,a))};g.bb=function(a,b,c,d){var e=this.h[b>>>a&31];return null!=e?e.bb(a+5,b,c,d):d};
g.eb=function(a,b,c){var d=b>>>a&31,e=this.h[d];if(null!=e){a=e.eb(a+5,b,c);if(a===e)d=this;else if(null==a)if(8>=this.s)a:{e=this.h;a=e.length;b=Array(2*(this.s-1));c=0;for(var f=1,h=0;;)if(c<a)c!==d&&null!=e[c]?(b[f]=e[c],f+=2,h|=1<<c,c+=1):c+=1;else{d=new We(null,h,b);break a}}else d=new $e(null,this.s-1,Re(this.h,d,a));else d=new $e(null,this.s,Re(this.h,d,a));return d}return this};g.Ca=function(){return new df(this.h)};
function gf(a,b,c){b*=2;for(var d=0;;)if(d<b){if(Qe(c,a[d]))return d;d+=2}else return-1}function hf(a,b,c,d){this.J=a;this.Ia=b;this.s=c;this.h=d;this.A=131072;this.l=0}g=hf.prototype;g.Ma=function(a){if(a===this.J)return this;var b=Array(2*(this.s+1));Rc(this.h,0,b,0,2*this.s);return new hf(a,this.Ia,this.s,b)};g.cb=function(){return Xe?Xe(this.h):Ye.call(null,this.h)};g.fb=function(a,b){return Ue(this.h,a,b)};
g.Na=function(a,b,c,d){a=gf(this.h,this.s,c);return 0>a?d:Qe(c,this.h[a])?this.h[a+1]:d};
g.Fa=function(a,b,c,d,e,f){if(c===this.Ia){b=gf(this.h,this.s,d);if(-1===b){if(this.h.length>2*this.s)return b=2*this.s,c=2*this.s+1,a=this.Ma(a),a.h[b]=d,a.h[c]=e,f.m=!0,a.s+=1,a;c=this.h.length;b=Array(c+2);Rc(this.h,0,b,0,c);b[c]=d;b[c+1]=e;f.m=!0;d=this.s+1;a===this.J?(this.h=b,this.s=d,a=this):a=new hf(this.J,this.Ia,d,b);return a}return this.h[b+1]===e?this:Te(this,a,b+1,e)}return(new We(a,1<<(this.Ia>>>b&31),[null,this,null,null])).Fa(a,b,c,d,e,f)};
g.Ea=function(a,b,c,d,e){return b===this.Ia?(a=gf(this.h,this.s,c),-1===a?(a=2*this.s,b=Array(a+2),Rc(this.h,0,b,0,a),b[a]=c,b[a+1]=d,e.m=!0,new hf(null,this.Ia,this.s+1,b)):F.g(this.h[a+1],d)?this:new hf(null,this.Ia,this.s,Re(this.h,a+1,d))):(new We(null,1<<(this.Ia>>>a&31),[null,this])).Ea(a,b,c,d,e)};g.bb=function(a,b,c,d){a=gf(this.h,this.s,c);return 0>a?d:Qe(c,this.h[a])?new ne(this.h[a],this.h[a+1]):d};
g.eb=function(a,b,c){a=gf(this.h,this.s,c);return-1===a?this:1===this.s?null:new hf(null,this.Ia,this.s-1,Se(this.h,gd(a)))};g.Ca=function(){return new Ve(this.h)};function bf(a){switch(arguments.length){case 6:return cf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return af(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}}
function cf(a,b,c,d,e,f){var h=Sb(b);if(h===d)return new hf(null,h,2,[b,c,e,f]);var k=new Pe;return Ze.Ea(a,h,b,c,k).Ea(a,d,e,f,k)}function af(a,b,c,d,e,f,h){var k=Sb(c);if(k===e)return new hf(null,k,2,[c,d,f,h]);var l=new Pe;return Ze.Fa(a,b,k,c,d,l).Fa(a,b,e,f,h,l)}function jf(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.D=d;this.B=e;this.l=32374988;this.A=0}g=jf.prototype;g.toString=function(){return Kb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.meta};g.$=function(){if(null==this.D){var a=this.nodes,b=this.i+2;return kf?kf(a,b,null):Ye.call(null,a,b,null)}a=this.nodes;b=this.i;var c=M(this.D);return kf?kf(a,b,c):Ye.call(null,a,b,c)};
g.S=function(){var a=this.B;return null!=a?a:this.B=a=fc(this)};g.P=function(a,b){return vc(this,b)};g.V=function(){return K};g.ba=function(a,b){return xc(b,this)};g.ca=function(a,b,c){return zc(b,c,this)};g.Y=function(){return null==this.D?new ne(this.nodes[this.i],this.nodes[this.i+1]):J(this.D)};
g.da=function(){var a=this,b=null==a.D?function(){var c=a.nodes,d=a.i+2;return kf?kf(c,d,null):Ye.call(null,c,d,null)}():function(){var c=a.nodes,d=a.i,e=M(a.D);return kf?kf(c,d,e):Ye.call(null,c,d,e)}();return null!=b?b:K};g.O=function(){return this};g.T=function(a,b){return b===this.meta?this:new jf(b,this.nodes,this.i,this.D,this.B)};g.Z=function(a,b){return R(b,this)};jf.prototype[Aa]=function(){return dc(this)};
function Ye(a){switch(arguments.length){case 1:return Xe(arguments[0]);case 3:return kf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}}function Xe(a){return kf(a,0,null)}function kf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new jf(null,a,b,null,null);var d=a[b+1];if(w(d)&&(d=d.cb(),w(d)))return new jf(null,a,b+2,d,null);b+=2}else return null;else return new jf(null,a,b,c,null)}
function lf(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.D=d;this.B=e;this.l=32374988;this.A=0}g=lf.prototype;g.toString=function(){return Kb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.meta};g.$=function(){var a=this.nodes,b=this.i,c=M(this.D);return mf?mf(a,b,c):ff.call(null,a,b,c)};g.S=function(){var a=this.B;return null!=a?a:this.B=a=fc(this)};
g.P=function(a,b){return vc(this,b)};g.V=function(){return K};g.ba=function(a,b){return xc(b,this)};g.ca=function(a,b,c){return zc(b,c,this)};g.Y=function(){return J(this.D)};g.da=function(){var a=this.nodes;var b=this.i,c=M(this.D);a=mf?mf(a,b,c):ff.call(null,a,b,c);return null!=a?a:K};g.O=function(){return this};g.T=function(a,b){return b===this.meta?this:new lf(b,this.nodes,this.i,this.D,this.B)};g.Z=function(a,b){return R(b,this)};lf.prototype[Aa]=function(){return dc(this)};
function ff(a){switch(arguments.length){case 1:return ef(arguments[0]);case 3:return mf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}}function ef(a){return mf(a,0,null)}function mf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(w(d)&&(d=d.cb(),w(d)))return new lf(null,a,b+1,d,null);b+=1}else return null;else return new lf(null,a,b,c,null)}function nf(a,b){this.ea=a;this.Db=b;this.wb=!1}
nf.prototype.fa=function(){return!this.wb||this.Db.fa()};nf.prototype.next=function(){if(this.wb)return this.Db.next();this.wb=!0;return new ne(null,this.ea)};nf.prototype.remove=function(){return Error("Unsupported operation")};function of(a,b,c,d,e,f){this.meta=a;this.s=b;this.root=c;this.ga=d;this.ea=e;this.B=f;this.l=16123663;this.A=139268}g=of.prototype;g.Ya=function(a,b){return null==b?this.ga?new ne(null,this.ea):null:null==this.root?null:this.root.bb(0,Sb(b),b,null)};g.toString=function(){return Kb(this)};
g.keys=function(){return dc(Je.c?Je.c(this):Je.call(null,this))};g.entries=function(){return new Fe(G(G(this)))};g.values=function(){return dc(Ke.c?Ke.c(this):Ke.call(null,this))};g.has=function(a){return Uc(this,a)};g.get=function(a,b){return this.M(null,a,b)};
g.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.W(null,e),h=S(f,0,null);f=S(f,1,null);a.g?a.g(f,h):a.call(null,f,h);e+=1}else if(b=G(b))Qc(b)?(c=Cb(b),b=Db(b),h=c,d=P(c),c=h):(c=J(b),h=S(c,0,null),f=S(c,1,null),a.g?a.g(f,h):a.call(null,f,h),b=M(b),c=null,d=0),e=0;else return null};g.ia=function(a,b){return this.M(null,b,null)};g.M=function(a,b,c){return null==b?this.ga?this.ea:c:null==this.root?c:this.root.Na(0,Sb(b),b,c)};
g.kb=function(a,b,c){a=this.ga?b.j?b.j(c,null,this.ea):b.call(null,c,null,this.ea):c;kc(a)?b=ab(a):null!=this.root?(b=this.root.fb(b,a),b=kc(b)?lc.c?lc.c(b):lc.call(null,b):b):b=a;return b};g.Ca=function(){var a=this.root?Ib(this.root):Kd();return this.ga?new nf(this.ea,a):a};g.R=function(){return this.meta};g.U=function(){return this.s};g.S=function(){var a=this.B;return null!=a?a:this.B=a=hc(this)};g.P=function(a,b){return Ee(this,b)};g.Sa=function(){return new pf(this.root,this.s,this.ga,this.ea)};
g.V=function(){return db(Ne,this.meta)};g.tb=function(a,b){if(null==b)return this.ga?new of(this.meta,this.s-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.eb(0,Sb(b),b);return a===this.root?this:new of(this.meta,this.s-1,a,this.ga,this.ea,null)};
g.Ja=function(a,b,c){if(null==b)return this.ga&&c===this.ea?this:new of(this.meta,this.ga?this.s:this.s+1,this.root,!0,c,null);a=new Pe;b=(null==this.root?Ze:this.root).Ea(0,Sb(b),b,c,a);return b===this.root?this:new of(this.meta,a.m?this.s+1:this.s,b,this.ga,this.ea,null)};g.O=function(){if(0<this.s){var a=null!=this.root?this.root.cb():null;return this.ga?R(new ne(null,this.ea),a):a}return null};g.T=function(a,b){return b===this.meta?this:new of(b,this.s,this.root,this.ga,this.ea,this.B)};
g.Z=function(a,b){if(Pc(b))return this.Ja(null,La(b,0),La(b,1));a=this;for(b=G(b);;){if(null==b)return a;var c=J(b);if(Pc(c))a=Ta(a,La(c,0),La(c,1)),b=M(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};g.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};
g.c=function(a){return this.ia(null,a)};g.g=function(a,b){return this.M(null,a,b)};var Ne=new of(null,0,null,!1,null,ic);function qf(a,b){for(var c=a.length,d=0,e=vb(Ne);;)if(d<c){var f=d+1;e=yb(e,a[d],b[d]);d=f}else return xb(e)}of.prototype[Aa]=function(){return dc(this)};function pf(a,b,c,d){this.J={};this.root=a;this.count=b;this.ga=c;this.ea=d;this.l=259;this.A=56}
function rf(a,b,c){if(a.J){if(null==b)a.ea!==c&&(a.ea=c),a.ga||(a.count+=1,a.ga=!0);else{var d=new Pe;b=(null==a.root?Ze:a.root).Fa(a.J,0,Sb(b),b,c,d);b!==a.root&&(a.root=b);d.m&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}g=pf.prototype;g.U=function(){if(this.J)return this.count;throw Error("count after persistent!");};g.ia=function(a,b){return null==b?this.ga?this.ea:null:null==this.root?null:this.root.Na(0,Sb(b),b)};
g.M=function(a,b,c){return null==b?this.ga?this.ea:c:null==this.root?c:this.root.Na(0,Sb(b),b,c)};g.Ua=function(a,b){a:if(this.J)if(ue(b))a=rf(this,ve.c?ve.c(b):ve.call(null,b),we.c?we.c(b):we.call(null,b));else if(Pc(b))a=rf(this,b.c?b.c(0):b.call(null,0),b.c?b.c(1):b.call(null,1));else for(a=G(b),b=this;;){var c=J(a);if(w(c))a=M(a),b=rf(b,ve.c?ve.c(c):ve.call(null,c),we.c?we.c(c):we.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
g.$a=function(){if(this.J){this.J=null;var a=new of(null,this.count,this.root,this.ga,this.ea,null)}else throw Error("persistent! called twice");return a};g.Ta=function(a,b,c){return rf(this,b,c)};g.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};
g.c=function(a){return this.ia(null,a)};g.g=function(a,b){return this.M(null,a,b)};var X=function X(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return X.v(0<c.length?new H(c.slice(0),0,null):null)};X.v=function(a){for(var b=G(a),c=vb(Ne);;)if(b){a=M(M(b));var d=J(b);b=J(M(b));c=yb(c,d,b);b=a}else return xb(c)};X.F=0;X.C=function(a){return this.v(G(a))};function sf(a,b){this.G=a;this.ma=b;this.l=32374988;this.A=0}g=sf.prototype;g.toString=function(){return Kb(this)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.ma};g.$=function(){var a=(null!=this.G?this.G.l&128||u===this.G.Za||(this.G.l?0:y(Oa,this.G)):y(Oa,this.G))?this.G.$(null):M(this.G);return null==a?null:new sf(a,null)};g.S=function(){return fc(this)};
g.P=function(a,b){return vc(this,b)};g.V=function(){return K};g.ba=function(a,b){return xc(b,this)};g.ca=function(a,b,c){return zc(b,c,this)};g.Y=function(){return this.G.Y(null).key};g.da=function(){var a=(null!=this.G?this.G.l&128||u===this.G.Za||(this.G.l?0:y(Oa,this.G)):y(Oa,this.G))?this.G.$(null):M(this.G);return null!=a?new sf(a,null):K};g.O=function(){return this};g.T=function(a,b){return b===this.ma?this:new sf(this.G,b)};g.Z=function(a,b){return R(b,this)};sf.prototype[Aa]=function(){return dc(this)};
function Je(a){return(a=G(a))?new sf(a,null):null}function ve(a){return Xa(a)}function tf(a,b){this.G=a;this.ma=b;this.l=32374988;this.A=0}g=tf.prototype;g.toString=function(){return Kb(this)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Q(this,c,P(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Q(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return Q(this,c,d)};return b}();g.R=function(){return this.ma};g.$=function(){var a=(null!=this.G?this.G.l&128||u===this.G.Za||(this.G.l?0:y(Oa,this.G)):y(Oa,this.G))?this.G.$(null):M(this.G);return null==a?null:new tf(a,null)};g.S=function(){return fc(this)};
g.P=function(a,b){return vc(this,b)};g.V=function(){return K};g.ba=function(a,b){return xc(b,this)};g.ca=function(a,b,c){return zc(b,c,this)};g.Y=function(){return this.G.Y(null).m};g.da=function(){var a=(null!=this.G?this.G.l&128||u===this.G.Za||(this.G.l?0:y(Oa,this.G)):y(Oa,this.G))?this.G.$(null):M(this.G);return null!=a?new tf(a,null):K};g.O=function(){return this};g.T=function(a,b){return b===this.ma?this:new tf(this.G,b)};g.Z=function(a,b){return R(b,this)};tf.prototype[Aa]=function(){return dc(this)};
function Ke(a){return(a=G(a))?new tf(a,null):null}function we(a){return Ya(a)}function uf(a){this.Wa=a}uf.prototype.fa=function(){return this.Wa.fa()};uf.prototype.next=function(){if(this.Wa.fa())return this.Wa.next().key;throw Error("No such element");};uf.prototype.remove=function(){return Error("Unsupported operation")};function vf(a,b,c){this.meta=a;this.Ka=b;this.B=c;this.l=15077647;this.A=139268}g=vf.prototype;g.toString=function(){return Kb(this)};g.keys=function(){return dc(G(this))};
g.entries=function(){return new Ge(G(G(this)))};g.values=function(){return dc(G(this))};g.has=function(a){return Uc(this,a)};g.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.W(null,e),h=S(f,0,null);f=S(f,1,null);a.g?a.g(f,h):a.call(null,f,h);e+=1}else if(b=G(b))Qc(b)?(c=Cb(b),b=Db(b),h=c,d=P(c),c=h):(c=J(b),h=S(c,0,null),f=S(c,1,null),a.g?a.g(f,h):a.call(null,f,h),b=M(b),c=null,d=0),e=0;else return null};g.ia=function(a,b){return this.M(null,b,null)};
g.M=function(a,b,c){a=Ua(this.Ka,b);return w(a)?Xa(a):c};g.Ca=function(){return new uf(Ib(this.Ka))};g.R=function(){return this.meta};g.U=function(){return Ea(this.Ka)};g.S=function(){var a=this.B;return null!=a?a:this.B=a=hc(this)};g.P=function(a,b){if(Lc(b))if(P(this)===P(b))try{return dd(function(c,d){return(c=Uc(b,d))?c:new jc(!1)},!0,this.Ka)}catch(c){if(c instanceof Error)return!1;throw c;}else return!1;else return!1};g.Sa=function(){return new wf(vb(this.Ka))};g.V=function(){return db(xf,this.meta)};
g.O=function(){return Je(this.Ka)};g.T=function(a,b){return b===this.meta?this:new vf(b,this.Ka,this.B)};g.Z=function(a,b){return new vf(this.meta,Fc.j(this.Ka,b,null),null)};g.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};g.c=function(a){return this.ia(null,a)};
g.g=function(a,b){return this.M(null,a,b)};var xf=new vf(null,Md,ic);vf.prototype[Aa]=function(){return dc(this)};function wf(a){this.Pa=a;this.A=136;this.l=259}g=wf.prototype;g.Ua=function(a,b){this.Pa=yb(this.Pa,b,null);return this};g.$a=function(){return new vf(null,xb(this.Pa),null)};g.U=function(){return P(this.Pa)};g.ia=function(a,b){return this.M(null,b,null)};g.M=function(a,b,c){return Ra(this.Pa,b,Sc)===Sc?c:b};
g.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ba(b)))};g.c=function(a){return Ra(this.Pa,a,Sc)===Sc?null:a};g.g=function(a,b){return Ra(this.Pa,a,Sc)===Sc?b:a};
function pd(a){if(null!=a&&(a.A&4096||u===a.Ob))return a.name;if("string"===typeof a)return a;throw Error(["Doesn't support name: ",A.c(a)].join(""));}function zf(a,b){return new qd(null,function(){var c=G(b);if(c){var d=J(c);d=a.c?a.c(d):a.call(null,d);c=w(d)?R(J(c),zf(a,bc(c))):null}else c=null;return c},null)}
function Yi(){var a=Zi;return function(){function b(k,l,m){return new U(null,2,5,W,[a.j?a.j(k,l,m):a.call(null,k,l,m),ed.j?ed.j(k,l,m):ed.call(null,k,l,m)],null)}function c(k,l){return new U(null,2,5,W,[a.g?a.g(k,l):a.call(null,k,l),ed.g?ed.g(k,l):ed.call(null,k,l)],null)}function d(k){return new U(null,2,5,W,[a.c?a.c(k):a.call(null,k),ed.c?ed.c(k):ed.call(null,k)],null)}function e(){return new U(null,2,5,W,[a.o?a.o():a.call(null),ed.o?ed.o():ed.call(null)],null)}var f=null,h=function(){function k(m,
n,p,q){var r=null;if(3<arguments.length){r=0;for(var x=Array(arguments.length-3);r<x.length;)x[r]=arguments[r+3],++r;r=new H(x,0,null)}return l.call(this,m,n,p,r)}function l(m,n,p,q){return new U(null,2,5,W,[Jd(a,m,n,p,q),Jd(ed,m,n,p,q)],null)}k.F=3;k.C=function(m){var n=J(m);m=M(m);var p=J(m);m=M(m);var q=J(m);m=bc(m);return l(n,p,q,m)};k.v=l;return k}();f=function(k,l,m,n){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);case 3:return b.call(this,
k,l,m);default:var p=null;if(3<arguments.length){p=0;for(var q=Array(arguments.length-3);p<q.length;)q[p]=arguments[p+3],++p;p=new H(q,0,null)}return h.v(k,l,m,p)}throw Error("Invalid arity: "+arguments.length);};f.F=3;f.C=h.C;f.o=e;f.c=d;f.g=c;f.j=b;f.v=h.v;return f}()}
var Af=function Af(a,b){var d=a.exec(b);if(null==d)return null;var e=d[0],f=1===d.length?e:te(d);return R(f,new qd(null,function(){var h=e.length;h=d.index+(1>h?1:h);return h<=b.length?(h=b.substring(h),Af.g?Af.g(a,h):Af.call(null,a,h)):null},null))};
function Bf(a,b,c,d,e,f,h){var k=qa;qa=null==qa?null:qa-1;try{if(null!=qa&&0>qa)return sb(a,"#");sb(a,c);if(0===wa.c(f))G(h)&&sb(a,function(){var r=Cf.c(f);return w(r)?r:"..."}());else{if(G(h)){var l=J(h);b.j?b.j(l,a,f):b.call(null,l,a,f)}for(var m=M(h),n=wa.c(f)-1;;)if(!m||null!=n&&0===n){G(m)&&0===n&&(sb(a,d),sb(a,function(){var r=Cf.c(f);return w(r)?r:"..."}()));break}else{sb(a,d);var p=J(m);c=a;h=f;b.j?b.j(p,c,h):b.call(null,p,c,h);var q=M(m);c=n-1;m=q;n=c}}return sb(a,e)}finally{qa=k}}
function Df(a,b){b=G(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.W(null,e);sb(a,f);e+=1}else if(b=G(b))c=b,Qc(c)?(b=Cb(c),d=Db(c),c=b,f=P(b),b=d,d=f):(f=J(c),sb(a,f),b=M(c),c=null,d=0),e=0;else return null}var Ef={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function Ff(a){return['"',A.c(a.replace(/[\\"\b\f\n\r\t]/g,function(b){return Ef[b]})),'"'].join("")}function Gf(a,b){return Tc(Wb.g(a,ua))?null!=b&&(b.l&131072||u===b.Nb)?null!=Kc(b):!1:!1}
function Hf(a,b,c){if(null==a)return sb(b,"nil");if(Gf(c,a)){sb(b,"^");var d=Kc(a);Y.j?Y.j(d,b,c):Y.call(null,d,b,c);sb(b," ")}if(a.Cb)return a.Wb(b);if(null!=a?a.l&2147483648||u===a.X||(a.l?0:y(tb,a)):y(tb,a))return ub(a,b,c);if(!0===a||!1===a)return sb(b,A.c(a));if("number"===typeof a)return sb(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":A.c(a));if(null!=a&&a.constructor===Object)return sb(b,"#js "),d=Xd.g(function(f){var h=/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/;
if("string"===typeof f)h=h.exec(f),h=null!=h&&F.g(h[0],f)?1===h.length?h[0]:te(h):null;else throw new TypeError("re-matches must match against a string.");return new ne(null!=h?od.c(f):f,a[f])},la(a)),If.H?If.H(d,Y,b,c):If.call(null,d,Y,b,c);if(xa(a))return Bf(b,Y,"#js ["," ","]",c,a);if("string"==typeof a)return w(ta.c(c))?sb(b,Ff(a)):sb(b,a);if("function"==t(a)){var e=a.name;c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Function":e;return Df(b,wc(["#object[",c,w(!1)?[' "',A.c(a),
'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(f,h){for(f=A.c(f);;)if(f.length<h)f=["0",f].join("");else return f},Df(b,wc(['#inst "',A.c(a.getUTCFullYear()),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return Df(b,wc(['#"',a.source,'"']));if(Ca(a))return Df(b,wc(["#object[",a.toString(),"]"]));if(w(function(){var f=null==a?null:
a.constructor;return null==f?null:f.mb}()))return Df(b,wc(["#object[",a.constructor.mb.replace(/\//g,"."),"]"]));e=function(){var f=null==a?null:a.constructor;return null==f?null:f.name}();c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Object":e;return null==a.constructor?Df(b,wc(["#object[",c,"]"])):Df(b,wc(["#object[",c," ",A.c(a),"]"]))}function Y(a,b,c){var d=Jf.c(c);return w(d)?(c=Fc.j(c,Lf,Hf),d.j?d.j(a,b,c):d.call(null,a,b,c)):Hf(a,b,c)}
function Mf(a,b){var c=new ma;a:{var d=new Jb(c);Y(J(a),d,b);a=G(M(a));for(var e=null,f=0,h=0;;)if(h<f){var k=e.W(null,h);sb(d," ");Y(k,d,b);h+=1}else if(a=G(a))e=a,Qc(e)?(a=Cb(e),f=Db(e),e=a,k=P(a),a=f,f=k):(k=J(e),sb(d," "),Y(k,d,b),a=M(e),e=null,f=0),h=0;else break a}return c}function Nf(a){return a instanceof Vb?Xb.g(null,pd(a)):od.g(null,pd(a))}
function Of(a){if(w(!1)){var b=G(a),c=G(b),d=J(c);M(c);S(d,0,null);S(d,1,null);c=null==a?null:null!=a&&(a.l&4||u===a.Hb)?a.V(null):(null!=a?a.l&4||u===a.Hb||(a.l?0:y(Fa,a)):y(Fa,a))?Ga(a):null;for(a=null;;){d=a;b=G(b);a=J(b);var e=M(b),f=a;a=S(f,0,null);b=S(f,1,null);if(w(f))if(a instanceof E||a instanceof Vb)if(w(d))if(F.g(d,nd(a)))c=Fc.j(c,Nf(a),b),a=d,b=e;else return null;else if(d=nd(a),w(d))c=Fc.j(c,Nf(a),b),a=d,b=e;else return null;else return null;else return new U(null,2,5,W,[d,c],null)}}else return null}
function Pf(a,b,c,d,e){return Bf(d,function(f,h,k){var l=Xa(f);c.j?c.j(l,h,k):c.call(null,l,h,k);sb(h," ");f=Ya(f);return c.j?c.j(f,h,k):c.call(null,f,h,k)},[A.c(a),"{"].join(""),", ","}",e,G(b))}function If(a,b,c,d){var e=Nc(a)?Of(a):null,f=S(e,0,null);e=S(e,1,null);return w(f)?Pf(["#:",A.c(f)].join(""),e,b,c,d):Pf(null,a,b,c,d)}Yb.prototype.X=u;Yb.prototype.N=function(a,b,c){sb(b,"#'");return Y(this.Oa,b,c)};H.prototype.X=u;H.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};
qd.prototype.X=u;qd.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};ne.prototype.X=u;ne.prototype.N=function(a,b,c){return Bf(b,Y,"["," ","]",c,this)};jf.prototype.X=u;jf.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};He.prototype.X=u;He.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};ec.prototype.X=u;ec.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};xe.prototype.X=u;xe.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};
ld.prototype.X=u;ld.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};Zd.prototype.X=u;Zd.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};uc.prototype.X=u;uc.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};of.prototype.X=u;of.prototype.N=function(a,b,c){return If(this,Y,b,c)};lf.prototype.X=u;lf.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};vf.prototype.X=u;vf.prototype.N=function(a,b,c){return Bf(b,Y,"#{"," ","}",c,this)};
ud.prototype.X=u;ud.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};Rd.prototype.X=u;Rd.prototype.N=function(a,b,c){sb(b,"#object[cljs.core.Atom ");Y(new v(null,1,[Qf,this.state],null),b,c);return sb(b,"]")};tf.prototype.X=u;tf.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};U.prototype.X=u;U.prototype.N=function(a,b,c){return Bf(b,Y,"["," ","]",c,this)};id.prototype.X=u;id.prototype.N=function(a,b){return sb(b,"()")};v.prototype.X=u;
v.prototype.N=function(a,b,c){return If(this,Y,b,c)};sf.prototype.X=u;sf.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};Dc.prototype.X=u;Dc.prototype.N=function(a,b,c){return Bf(b,Y,"("," ",")",c,this)};Vb.prototype.Xa=u;Vb.prototype.Ra=function(a,b){if(b instanceof Vb)return Ub(this,b);throw Error(["Cannot compare ",A.c(this)," to ",A.c(b)].join(""));};E.prototype.Xa=u;
E.prototype.Ra=function(a,b){if(b instanceof E)return md(this,b);throw Error(["Cannot compare ",A.c(this)," to ",A.c(b)].join(""));};U.prototype.Xa=u;U.prototype.Ra=function(a,b){if(Pc(b))return Wc(this,b);throw Error(["Cannot compare ",A.c(this)," to ",A.c(b)].join(""));};ne.prototype.Xa=u;ne.prototype.Ra=function(a,b){if(Pc(b))return Wc(this,b);throw Error(["Cannot compare ",A.c(this)," to ",A.c(b)].join(""));};function Rf(){}
function Sf(a){if(null!=a&&null!=a.Jb)a=a.Jb(a);else{var b=Sf[t(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Sf._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw z("IEncodeJS.-clj-\x3ejs",a);}return a}function Tf(a,b){(null!=a?u===a.Ib||(a.Xb?0:y(Rf,a)):y(Rf,a))?a=Sf(a):"string"===typeof a||"number"===typeof a||a instanceof E||a instanceof Vb?a=b.c?b.c(a):b.call(null,a):(a=wc([a]),b=ra(),a=null==a||ya(G(a))?"":A.c(Mf(a,b)));return a}
var Uf=function Uf(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Uf.v(arguments[0],1<c.length?new H(c.slice(1),0,null):null)};
Uf.v=function(a,b){b=null!=b&&(b.l&64||u===b.I)?T(X,b):b;var c=Wb.j(b,Vf,pd),d=function h(f){if(null==f)return null;if(null!=f?u===f.Ib||(f.Xb?0:y(Rf,f)):y(Rf,f))return Sf(f);if(f instanceof E)return c.c?c.c(f):c.call(null,f);if(f instanceof Vb)return A.c(f);if(Nc(f)){var k={};f=G(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.W(null,n),q=S(p,0,null);p=S(p,1,null);q=Tf(q,d);p=h(p);k[q]=p;n+=1}else if(f=G(f))Qc(f)?(m=Cb(f),f=Db(f),l=m,m=P(m)):(m=J(f),l=S(m,0,null),m=S(m,1,null),l=Tf(l,d),m=h(m),k[l]=
m,f=M(f),l=null,m=0),n=0;else break;return k}if(null==f?0:null!=f?f.l&8||u===f.pc||(f.l?0:y(Ha,f)):y(Ha,f)){k=[];f=G(Xd.g(h,f));l=null;for(n=m=0;;)if(n<m)q=l.W(null,n),k.push(q),n+=1;else if(f=G(f))l=f,Qc(l)?(f=Cb(l),n=Db(l),l=f,m=P(f),f=n):(f=J(l),k.push(f),f=M(l),l=null,m=0),n=0;else break;return k}return f};return d(a)};Uf.F=1;Uf.C=function(a){var b=J(a);a=M(a);return this.v(b,a)};var Wf=new E(null,"cursorGroupBackward","cursorGroupBackward",-1004717331),Xf=new E(null,"ns","ns",441598760),Cj=new E("cursor","mapped","cursor/mapped",1625530272),Yf=new E(null,"slurp-forward","slurp-forward",-866284566),Zf=new E(null,"selectLine","selectLine",1983247755),yf=new E(null,"selection-return","selection-return",267226206),$f=new E(null,"selectGroupForward","selectGroupForward",1344873433),ag=new E(null,"table","table",-564943036),Qf=new E(null,"val","val",128701612),bg=new E(null,"redo",
"redo",501190664),cg=new E(null,"doc","doc",1913296891),dg=new E(null,"moveLineUp","moveLineUp",-529618675),eg=new E(null,"line","line",212345235),fg=new E(null,"arglists","arglists",1661989754),gg=new E(null,"selectLineEnd","selectLineEnd",-1578526086),hg=new E(null,"cursorDocStart","cursorDocStart",2008312830),ig=new E(null,"deleteToLineEnd","deleteToLineEnd",-1184097633),jg=new E(null,"indentMore","indentMore",-290419447),Ij=new Vb(Ci,"format","codemirror-next.clojure.extensions.formatting/format",
41831636,null),ua=new E(null,"meta","meta",1499536964),kg=new E(null,"barf-backward","barf-backward",434854195),lg=new E(null,"cursorPageDown","cursorPageDown",-1143253131),mg=new E(null,"mac","mac",-1879391650),ng=new E(null,"barf-forward","barf-forward",1278612337),og=new E(null,"from","from",1815293044),pg=new E(null,"selectPageDown","selectPageDown",226562613),qg=new E(null,"deleteCharBackward","deleteCharBackward",-618312025),rg=new E(null,"cursorPageUp","cursorPageUp",-716828715),sg=new E(null,
"cursorGroupLeft","cursorGroupLeft",1639995020),tg=new E(null,"selectGroupLeft","selectGroupLeft",347862780),ug=new E(null,"selectCharLeft","selectCharLeft",1894248154),vg=new E(null,"end-line","end-line",1837326455),wg=new E(null,"copyLineDown","copyLineDown",735523711),xg=new E(null,"cursorGroupRight","cursorGroupRight",-2025899051),yg=new E(null,"nav-left","nav-left",845947876),zg=new E(null,"start","start",-355208981),Ag=new E(null,"tag","tag",-1290361223),Bg=new E(null,"cursorLineDown","cursorLineDown",
180576864),Cg=new E(null,"selectSyntaxLeft","selectSyntaxLeft",807644921),Dg=new E(null,"range","range",1639692286),Eg=new Vb(aa,"unwrap","codemirror-next.clojure.commands/unwrap",-1222968235,null),Fg=new E(null,"selectDocEnd","selectDocEnd",496449813),Vj=new E(null,"cursor","cursor",1011937484),Gg=new E(null,"name","name",1843675177),Hg=new E(null,"test","test",577538877),Ig=new E(null,"end-column","end-column",1425389514),Jg=new E(null,"nav-right","nav-right",591041267),Kg=new E(null,"shift","shift",
997140064),Lg=new E(null,"cursorSyntaxRight","cursorSyntaxRight",636695810),wj=new Vb(null,"meta19719","meta19719",1333101962,null),Jf=new E(null,"alt-impl","alt-impl",670969595),ti=new Vb(null,"selection-return","selection-return",1907757733,null),Mg=new E(null,"selectDocStart","selectDocStart",-217268371),Ng=new E(null,"deleteCharForward","deleteCharForward",823474956),Og=new E(null,"deleteGroupBackward","deleteGroupBackward",616768113),Pg=new E(null,"selectLineUp","selectLineUp",-255594686),Qg=
new E(null,"selectAll","selectAll",869127842),Rg=new E(null,"cursorDocEnd","cursorDocEnd",-1298653903),Sg=new E(null,"simplifySelection","simplifySelection",-449871290),ui=new Vb(aa,"selection-return","codemirror-next.clojure.commands/selection-return",183378793,null),va=new E(null,"dup","dup",556298533),Tg=new Vb(aa,"kill","codemirror-next.clojure.commands/kill",676830540,null),Ug=new E(null,"selectParentSyntax","selectParentSyntax",1969233071),Vg=new E(null,"indentSelection","indentSelection",1509202288),
Wg=new E(null,"cursorGroupForward","cursorGroupForward",1231480632),Xg=new E(null,"nav-select-right","nav-select-right",-455278613),Fj=new E(null,"cellpadding","cellpadding",-1752450238),wa=new E(null,"print-length","print-length",1931866356),Yg=new E(null,"unwrap","unwrap",-1399175462),Zg=new E(null,"selectLineDown","selectLineDown",1741100604),sa=new E(null,"flush-on-newline","flush-on-newline",-151457939),$g=new E(null,"undo","undo",-1818036302),ah=new E(null,"selectGroupBackward","selectGroupBackward",
1569543117),bh=new E(null,"nav-select-left","nav-select-left",-1033285138),ch=new E(null,"selectSyntaxRight","selectSyntaxRight",327843753),dh=new E(null,"moveLineDown","moveLineDown",1443953910),Fi=new E(null,"selection-grow","selection-grow",1627169352),eh=new E(null,"cursorLineUp","cursorLineUp",-1375841219),fh=new E(null,"selectCharRight","selectCharRight",1049825195),gh=new E(null,"i","i",-1386841315),hh=new E(null,"column","column",2078222095),ih=new E(null,"key","key",-1516042587),jh=new E(null,
"tr","tr",-1424774646),kh=new E(null,"selectLineBoundaryForward","selectLineBoundaryForward",904508598),lh=new E(null,"to","to",192099007),mh=new E(null,"b","b",1482224470),nh=new E(null,"selectPageUp","selectPageUp",152840428),oh=new E(null,"splitLine","splitLine",-1338533189),ph=new E(null,"td","td",1479933353),qh=new Vb(null,"state","state",-348086572,null),rh=new E(null,"run","run",-1821166653),sh=new E(null,"redoSelection","redoSelection",412268254),th=new E(null,"cursorLineBoundaryForward",
"cursorLineBoundaryForward",-1283359997),uh=new E(null,"deleteLine","deleteLine",-1681049426),vh=new E(null,"changes","changes",1492088),wh=new Vb(null,"kill","kill",1628195952,null),Dj=new Vb(aa,"selection-grow","codemirror-next.clojure.commands/selection-grow",135101379,null),xh=new E(null,"cursorLineBoundaryBackward","cursorLineBoundaryBackward",1373049802),yh=new E(null,"kill","kill",-12335575),zi=new E(null,"div","div",1057191632),Lf=new E(null,"fallback-impl","fallback-impl",-1501286995),zh=
new E(null,"insertNewlineAndIndent","insertNewlineAndIndent",-542382007),Ah=new E(null,"preventDefault","preventDefault",-1714933772),Ai=new E(null,"pre","pre",2118456869),ta=new E(null,"readably","readably",1129599760),Bh=new E(null,"deleteGroupForward","deleteGroupForward",596007091),Ch=new E(null,"selectLineBoundaryBackward","selectLineBoundaryBackward",-1443564123),Vf=new E(null,"keyword-fn","keyword-fn",-64566675),Dh=new E(null,"cursorCharRight","cursorCharRight",-739900583),Eh=new E(null,"transposeChars",
"transposeChars",1566260285),Fh=new E(null,"file","file",-1269645878),Gh=new E(null,"cursorCharLeft","cursorCharLeft",-1572589780),Hh=new E(null,"copyLineUp","copyLineUp",-1013016402),Ih=new E(null,"cursorMatchingBracket","cursorMatchingBracket",-1943122872),Jh=new E(null,"selectGroupRight","selectGroupRight",482375806),Kh=new E(null,"end","end",-268185958),Lh=new E(null,"cursorSyntaxLeft","cursorSyntaxLeft",-558944440),Mh=new Vb(null,aa,aa,1149809327,null),Nh=new E(null,"indent","indent",-148200125),
Oh=new E(null,"insert","insert",1286475395),Ph=new E(null,"cursorLineStart","cursorLineStart",-1505072960),Qh=new E(null,"slurp-backward","slurp-backward",-1615745159),Hj=new Vb(null,"selection-grow","selection-grow",-1027266417,null),Lj=new Vb(null,Ci,Ci,-1229249038,null),Rh=new E(null,"undoSelection","undoSelection",628691449),Sh=new Vb(null,"js","js",-886355190,null),Th=new E(null,"indentLess","indentLess",-115385364),hk=new E(null,"from-to","from-to",-640428401),bk=new Vb(null,"format","format",
333606761,null),Uh=new E(null,"cursorLineEnd","cursorLineEnd",-234219178),Vh=new E(null,"selectLineStart","selectLineStart",1211557745),Wh=new Vb(null,"unwrap","unwrap",241356065,null),Cf=new E(null,"more-marker","more-marker",-14717935);var Xh={},Yh={},Zh=[];function $h(a,b){var c=Yh[a];if(void 0!==c)return c;try{Zh.push(a);var d=Xh[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};Xh[a]=d}if(e){delete shadow$provide[a];try{e.call(d,ca,$h,d,d.exports)}catch(h){throw console.warn("shadow-cljs - failed to load",a),h;}if(b){var f=b.globals;if(f)for(a=0;a<f.length;a++)window[f[a]]=d.exports}}}finally{Zh.pop()}return d.exports}$h.cache={};$h.resolve=function(a){return a};
function ai(a){return $h(a,{})};ai(0);var Jj=ai(1);var ci=ai(2);var di=ai(5);var ei=ai(6);ai(7);var fi=ai(8);var gi=ai(9);var hi=ai(10);var ii=ai(11);ai(13);var ji=ai(14);function ki(a){return a instanceof E?pd(a):a};function Ej(){var a=/----/;a="/(?:)/"===A.c(a)?Bc.g(te(R("",Xd.g(A,G("# codemirror-clojure\n\nLive demo (auto-build): https://nextjournal.github.io/codemirror.next-clojure/\n\ndev: `shadow-cljs watch app`\n\n----\n\nIn progress:\n\n\nNext:\n- [ ] Copy/paste (only first line copies to clipboard?)\n- [ ] \"Yank\" after kill (https://www.howtogeek.com/293850/how-to-use-macos-built-in-kill-and-yank-as-an-alternative-cut-and-paste/)\n- [ ] Ctrl-A \x3d\x3e move to beginning of line (first non-whitespace char)\n\n\nDone\n\n- [x] Expand/contract region\n- [x] Barf\n- [x] Slurp\n- [x] Format whitespace (necessary for commands like Slurp to behave nicely)\n- [x] Navigate left/right by sexp\n- [x] cannot 'indent-all', changes on one line don't affect measurements taken on subsequent lines\n- [x] operators are recognized (lists with symbol in 1st position)\n- [x] Unwrap current collection\n- [x] Kill (remove all children of current node starting on current line)\n- [x] GitHub Action to publish demo site to github.io\n- [x] indentation\n- [x] odd error recovery behaviour - a `#` token can't be deleted\n- [x] deletion\n")))),
""):te(A.c("# codemirror-clojure\n\nLive demo (auto-build): https://nextjournal.github.io/codemirror.next-clojure/\n\ndev: `shadow-cljs watch app`\n\n----\n\nIn progress:\n\n\nNext:\n- [ ] Copy/paste (only first line copies to clipboard?)\n- [ ] \"Yank\" after kill (https://www.howtogeek.com/293850/how-to-use-macos-built-in-kill-and-yank-as-an-alternative-cut-and-paste/)\n- [ ] Ctrl-A \x3d\x3e move to beginning of line (first non-whitespace char)\n\n\nDone\n\n- [x] Expand/contract region\n- [x] Barf\n- [x] Slurp\n- [x] Format whitespace (necessary for commands like Slurp to behave nicely)\n- [x] Navigate left/right by sexp\n- [x] cannot 'indent-all', changes on one line don't affect measurements taken on subsequent lines\n- [x] operators are recognized (lists with symbol in 1st position)\n- [x] Unwrap current collection\n- [x] Kill (remove all children of current node starting on current line)\n- [x] GitHub Action to publish demo site to github.io\n- [x] indentation\n- [x] odd error recovery behaviour - a `#` token can't be deleted\n- [x] deletion\n").split(a));
if(1<P(a))a:for(;;)if(""===(null==a?null:vi(a)))a=null==a?null:wi(a);else break a;return a};function mi(a,b){b=0<b?b:0;a=a.doc.length;return b<a?b:a};function ni(a,b){return w(b.c?b.c(a):b.call(null,a))?a:null}function oi(a,b){return a>b?{from:b,to:a}:{from:a,to:b}}function pi(a,b){return null!=b?(a.dispatch(b),!0):!1}
function qi(a,b){return a.update(a.changeByRange(function(c){var d=b.c?b.c(c):b.call(null,c);if(null==d)d=null;else{d=ni(d,Nc);d=null!=d&&(d.l&64||u===d.I)?T(X,d):d;var e=Wb.g(d,Cj),f=Wb.g(d,Vj),h=Wb.g(d,hk),k=Wb.g(d,Dg);d=Wb.g(d,vh);d=w(d)?a.changes(Uf(d)):null;w(e)?h=ci.EditorSelection.cursor(d.mapPos(e)):w(f)?h=ci.EditorSelection.cursor(f):w(h)?(e=h.c?h.c(0):h.call(null,0),h=h.c?h.c(1):h.call(null,1),h=ci.EditorSelection.range(e,h)):h=w(k)?k:void 0;e={};w(d)&&(e.changes=d);w(h)&&(e.range=h);d=
e}return w(d)?d:{range:c}}))}function ri(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;return Kj(arguments[0],arguments[1],2<b.length?new H(b.slice(2),0,null):null)}
function Kj(a,b,c){c=S(c,0,null);c=null!=c&&(c.l&64||u===c.I)?T(X,c):c;var d=Wb.j(c,og,0),e=Wb.g(c,lh);c=a.doc.iterLines(0);for(var f=c.next(),h=[],k=d,l=1;;){var m=f,n=null!=m&&(m.l&64||u===m.I)?T(X,m):m,p=function(){var C=n;if(null!=C&&"done"in C)return C.done}(),q=function(){var C=n;if(null!=C&&"value"in C)return C.value}();if(w(function(){var C=p;return w(C)?C:d>e}()))return a.update({changes:a.changes(h)});f=c.next();m=function(){var C=b.j?b.j(k,q,l):b.call(null,k,q,l);if(w(C)){var D=h;D.push(C);
return D}return h}();var r=k+1+q.length,x=l+1;h=m;k=r;l=x}}
function ck(a,b){var c=new Rd(-1),d=a.doc;return a.update(a.changeByRange(function(e){var f=null!=e&&(e.l&64||u===e.I)?T(X,e):e;var h=null!=f&&"to"in f?f.to:void 0;e=null!=f&&"anchor"in f?f.anchor:void 0;var k=null!=f&&"head"in f?f.head:void 0;var l=null!=f&&"from"in f?f.from:void 0;l=d.lineAt(l);var m=null!=l&&(l.l&64||u===l.I)?T(X,l):l;var n=null!=m&&"number"in m?m.number:void 0;var p=null!=m&&"to"in m?m.to:void 0;for(l=[];;){n>ab(c)&&(Sd(c,n),b.j?b.j(m,l,f):b.call(null,m,l,f));if(h<=p)return f=
a.changes(l),{changes:l,range:ci.EditorSelection.range(f.mapPos(e,1),f.mapPos(k,1))};m=d.lineAt(p+1)}}))}
function li(a,b){var c=null!=a&&(a.l&64||u===a.I)?T(X,a):a;a=null!=c&&"state"in c?c.state:void 0;a=null!=a&&(a.l&64||u===a.I)?T(X,a):a;var d=null!=a&&"doc"in a?a.doc:void 0;c=null!=c&&"changes"in c?c.changes:void 0;var e=new Rd(-1),f=[];c.iterChanges(function(k,l,m,n){k=d.lineAt(m);m=null!=k&&(k.l&64||u===k.I)?T(X,k):k;k=null!=m&&"number"in m?m.number:void 0;l=null!=m&&"to"in m?m.to:void 0;for(;;){k>ab(e)&&(Sd(e,k),b.g?b.g(m,f):b.call(null,m,f));if(n<=l)return null;var p=d.lineAt(l+1),q=p;if(w(w(q)?
p.number>m.number:q))m=p;else return null}});var h=a.changes(f);a=a.selection.map(h);return{changes:c.compose(h),selection:a}}function si(a){a=null!=a&&(a.l&64||u===a.I)?T(X,a):a;a=null!=a&&"selection"in a?a.selection:void 0;a=null!=a&&(a.l&64||u===a.I)?T(X,a):a;a=null!=a&&"ranges"in a?a.ranges:void 0;return!Nd(function(b){return b.empty},a)};function ak(a){return a.parent.childBefore(a.start)}function Gj(a){return a.parent.childAfter(a.end)}var ba=new v(null,3,"()[]{}".split(""),null),pa;a:for(var bi=Ke(ba),xj=Je(ba),Mj=vb(Md),dk=G(bi),gk=G(xj);;)if(dk&&gk){var nk,qk=J(dk),rk=J(gk);nk=yb(Mj,qk,rk);var sk=M(dk),tk=M(gk);Mj=nk;dk=sk;gk=tk}else{pa=xb(Mj);break a}
var uk=function(a){return w(Od(ed,a))?cd(function(b,c){return Bc.g(w(b)?b:Md,c)},a):null}(wc([ba,new v(null,1,['"','"'],null)])),Yj=new vf(null,new v(null,13,["#?",null,"#'",null,"'",null,"`",null,'"',null,"~@",null,"~",null,"#^",null,"##",null,"#",null,"^",null,"#_",null,"@",null],null),null),ik=be.g(new vf(null,new v(null,3,["(",null,"{",null,"[",null],null),null),Yj),jk=new vf(null,new v(null,4,["]",null,")",null,'"',null,"}",null],null),null),xk=new vf(null,new v(null,4,["Map",null,"Vector",null,
"List",null,"Set",null],null),null),ek=new vf(null,new v(null,12,["Ignored",null,"ReaderConditional",null,"Meta",null,"RegExp",null,"Unquote",null,"Deref",null,"AnonymousFunction",null,"Var",null,"SyntaxQuote",null,"NamespacedMap",null,"UnquoteSplice",null,"Quote",null],null),null),kk=be.g(ik,jk);function Gi(a){return a.name}var vk=Qd.j(Tc,ik,Gi),wk=Qd.j(Tc,jk,Gi);Qd.j(Tc,kk,Gi);var Ii=Qd.j(Tc,ik,Gi),Ji=Qd.j(Tc,jk,Gi);
function Wd(a){var b=Uc(xk,a.name);if(b)return b;a=a.firstChild;a=null==a?null:a.name;return null==a?null:Yj.c?Yj.c(a):Yj.call(null,a)}function Ki(a){return"String"===a.name}function Zj(a){return"LineComment"===a.name}function Li(a){var b=null!=a&&(a.l&64||u===a.I)?T(X,a):a;a=null!=b&&"firstChild"in b?b.firstChild:void 0;b=null!=b&&"lastChild"in b?b.lastChild:void 0;var c=a.name;c=uk.c?uk.c(c):uk.call(null,c);return w(c)?F.g(c,b.name)&&!F.g(a.end,b.end):!0}
var Mi=function Mi(a){var c=a.parent;return null==c?null:R(c,new qd(null,function(){return Mi.c?Mi.c(c):Mi.call(null,c)},null))};function Ni(a,b){return w(b.c?b.c(a):b.call(null,a))?a:Zc(function(c,d){return w(b.c?b.c(d):b.call(null,d))?new jc(d):null},null,Mi(a))}
function yk(a,b,c){a:switch(c){case 1:var d=a.childAfter(b);break a;case -1:d=a.childBefore(b);break a;default:throw Error(["No matching clause: ",A.c(c)].join(""));}return null==d?null:R(d,new qd(null,function(){var e=yk;a:switch(c){case 1:var f=d.end;break a;case -1:f=d.start;break a;default:throw Error(["No matching clause: ",A.c(c)].join(""));}return e(a,f,c)},null))}function Oi(a,b){return a.start===b.start&&a.end===b.end&&a.depth===b.depth}
function Pi(a){var b=a.name;return Uc(xk,b)?Oi(Gj(a.firstChild),a.lastChild):F.g("String",b)?a.firstChild.end===a.lastChild.start:!1}function zk(a){return new v(null,2,[og,a.start,lh,a.end],null)}function Ri(a,b){return Tc(a.depth<b.depth&&a.start<=b.start&&a.end>=b.end)}
function Wj(a,b,c){var d=new Rd(Cc);a.iterate({from:b,to:c,enter:function(e,f,h){var k=e.name;if(("Program"===k?0:Uc(xk,k)?0:!w(ek.c?ek.c(k):ek.call(null,k)))&&ya(e.prop(Jj.NodeProp.error)))return Td.j(d,Bc,[e.name,f,h]),!1}});return ab(d)}
function Si(a,b){if(Oi(a,b))return null;var c=Vc(b.start,a.start);switch(c){case 0:return Ri(b,a)?a.parent:Ri(a,b)?a.firstChild:null;case -1:if(Ri(a,b))return a.lastChild;b=ak(a);return w(b)?b:a.parent;case 1:if(Ri(a,b))return a.firstChild;b=Gj(a);return w(b)?b:a.parent;default:throw Error(["No matching clause: ",A.c(c)].join(""));}}function Ti(a,b){return zf(ed,$d(function(c){return Si(c,b)},a))}function Ui(a){var b=Wd(a);return w(b)?b:Ki(a)||"RegExp"===a.name}
function $i(a){switch(arguments.length){case 1:return arguments[0].tree;case 2:return arguments[0].tree.resolve(arguments[1]);case 3:return arguments[0].tree.resolve(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",A.c(arguments.length)].join(""));}}
function Ak(a,b,c){c=Xc(Vc,new U(null,2,5,W,[b,c],null));b=S(c,0,null);c=S(c,1,null);var d=$i(a,b,1),e=$i(a,c,-1);a=w(Ui(d))?d.start:b;b=w(Ui(e))?e.end:c;b=Zc(function(f,h){var k=S(f,0,null);f=S(f,1,null);return new U(null,2,5,W,[Ri(h,d)?h.start:k,Ri(h,e)?h.end:f],null)},new U(null,2,5,W,[a,b],null),Xd.g(function(f){var h=f.name;h=kk.c?kk.c(h):kk.call(null,h);return w(h)?f.parent:f},Ti(d,e)));a=S(b,0,null);b=S(b,1,null);return ci.EditorSelection.range(a,b)}
function Zi(a){a=null!=a&&(a.l&64||u===a.I)?T(X,a):a;var b=null!=a&&"firstChild"in a?a.firstChild:void 0;var c=null!=a&&"lastChild"in a?a.lastChild:void 0;return{start:w(vk(b))?b.end:a.start,end:w(wk(c))?c.start:a.end}}function fk(a){a=a.parent;a=null==a?null:a.firstChild;a=null==a?null:a.name;return null==a?null:ni(a,Yj)}function lk(a){return[A.c(fk(a)),a.firstChild.name].join("")}function mk(a){return w(fk(a))?a.parent:a};(function(a){if(Lc(a))return Jc(a,null);a=G(a);if(null==a)return xf;if(a instanceof H&&0===a.i){a=a.h;for(var b=a.length,c=vb(xf),d=0;;)if(d<b)wb(c,a[d]),d+=1;else break;return xb(c)}for(c=vb(xf);;)if(null!=a)b=M(a),c=wb(c,B(a)),a=b;else return xb(c)})(Xd.g(function(a){return a.charCodeAt(0)},new U(null,4,5,W,[" ","n","r",","],null)));var Z=ai(15);var Nj=ii.indentNodeProp.add(function(a){a=null!=a&&(a.l&64||u===a.I)?T(X,a):a;var b=null!=a&&"name"in a?a.name:void 0;return function(c){c=null!=c&&(c.l&64||u===c.I)?T(X,c):c;var d=null!=c&&"node"in c?c.node:void 0;return F.g("Program",b)?0:Uc(xk,b)?(c=c.column(d.firstChild.end),F.g("List",d.name)&&F.g("Operator",function(){var e=null==d?null:d.childAfter(d.firstChild.end);return null==e?null:e.name}())?c+1:c):-1}});
function Oj(a,b){return Zc(function(c,d){d=d.g?d.g(a,b):d.call(null,a,b);return-1<d?new jc(d):c},-1,a.state.facet(ci.EditorState.indentation))}function Pj(a){var b={};return new ci.IndentContext(a,function(c){c=ki(c);return null!=b&&c in b?b[c]:-1})}
function Qj(a,b,c){return Zc(function(d,e){var f=S(e,0,null),h=null!=f,k=h?f[0]:null;f=h?f[1]:null;h=S(e,1,null);var l=null!=h;e=l?h[2]:null;h=l?h[0]:null;k=w(jk.c?jk.c(k):jk.call(null,k))?0:w(ik.c?ik.c(h):ik.call(null,h))?0:"KeywordPrefix"===h?0:1;switch(Vc(f-e,k)){case 0:return d;case 1:return d.push({from:0===k?e:e+1,to:f}),d;case -1:return d.push({from:e,insert:" "}),d;default:return d}},[],Bj(2,1,Wj(a.tree,c,b)))}
function Rj(a,b){b=G(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.W(null,e);a.push(f);e+=1}else if(b=G(b))c=b,Qc(c)?(b=Cb(c),e=Db(c),c=b,d=P(b),b=e):(b=J(c),a.push(b),b=M(c),c=null,d=0),e=0;else break;return a}
function Sj(a,b,c,d,e,f){var h=/^\s*/.exec(d)[0].length,k=function(){var l=ni(Oj(b,c),Pd(yj));if(null==l)return null;var m=Vc(l,h);switch(m){case 0:return null;case 1:return{from:c+h,insert:a.indentString(l-h)};case -1:return{from:c+l,to:c+h};default:throw Error(["No matching clause: ",A.c(m)].join(""));}}();d=w(f)?Qj(a,c+h,c+P(d)):null;e=w(d)?Rj(e,d):e;w(k)&&e.push(k);return e}
function Tj(a){var b=Pj(a);return ck(a,function(c,d){var e=null!=c&&(c.l&64||u===c.I)?T(X,c):c;c=null!=e&&"from"in e?e.from:void 0;e=null!=e&&"content"in e?e.content:void 0;return Sj(a,b,c,e,d,!0)})}function Uj(a){var b=Pj(a);return ri(a,function(c,d){return Sj(a,b,c,d,[],!0)})}function Xj(a){return si(a)?Tj(a):Uj(a)}
var Bi=ci.EditorState.transactionFilter.of(function(a){var b=a.state,c=Pj(b),d=a.annotation(ci.Transaction.userEvent),e=li(a,function(f,h){a:switch(d){case "input":case "delete":case "keyboardselection":case "pointerselection":case "cut":var k=!1;break a;default:k=!0}return Sj(b,c,f.from,f.content,h,k)});return a.startState.update(function(){var f=null!=e?e:{};f.filter=!1;return f}())});function Wi(){var a=Xi,b=new U(null,2,5,W,["",Cc],null);a:{var c=Af(/\||<[^>]*?>|[^<>|]+/,'(defn lezer-clojure\n  "This is a showcase for `lezer-clojure`, an grammar for Clojure/Script to\n  enable a decent editor experience in the browser."\n  {:added "0.1"}\n  [demo]\n  nil ;; nil\n  (+ 1 1.0 1/5 1E3 042 +042 -042) ;; numbers\n  :hi :hi/ho ::ho :*+!-_? :abc:def:ghi ;; keywords\n  true false ;; booleans\n  :hello #_ :ignored ;; ignore next form\n  #"[A-Z]" ;; regex\n  ^{:meta/data \'is-data} \'too\n  (if (test? \x3cdemo\x3e)\n    (inc demo)|\n    (dec demo)))\n  #\n    [ ]\n    #"a"\na b(c|)d e');
break a;throw new TypeError("re-seq must match against a string.");}c=Zc(function(d,e){var f=S(d,0,null);d=S(d,1,null);if(F.g(e,"|"))e=new U(null,2,5,W,[f,Bc.g(d,ci.EditorSelection.cursor(f.length))],null);else if(0==e.lastIndexOf("\x3c",0)){var h=W,k=P(e)-1;e=new U(null,2,5,h,[[f,e.substring(1,k)].join(""),Bc.g(d,ci.EditorSelection.range(f.length,f.length+(P(e)-2)))],null)}else e=new U(null,2,5,W,[[f,A.c(e)].join(""),d],null);return e},b,c);b=S(c,0,null);c=S(c,1,null);return ci.EditorState.create({doc:b,
selection:G(c)?ci.EditorSelection.create(Yc(c)):void 0,extensions:function(){var d=[ci.EditorState.allowMultipleSelections.of(!0)];w(a)&&d.push(a);return d}()})};function Bk(a){return Od(function(b){return ya(b.empty)},a.ranges)}
var Ck=ci.StateField.define({create:function(a){return function(){function b(c){if(0<arguments.length)for(var d=0,e=Array(arguments.length-0);d<e.length;)e[d]=arguments[d+0],++d;return a}b.F=0;b.C=function(c){G(c);return a};b.v=function(){return a};return b}()}(K),update:function(a,b){b=null!=b&&(b.l&64||u===b.I)?T(X,b):b;var c=null!=b&&"state"in b?b.state:void 0;c=null!=c&&(c.l&64||u===c.I)?T(X,c):c;var d=null!=c&&"selection"in c?c.selection:void 0;b=null!=b&&"docChanged"in b?b.docChanged:void 0;
return w(b)?K:ya(Bk(d))?new Dc(null,d,null,1,null):w(function(){var e=null==a?null:J(M(a));return null==e?null:e.$b(d)}())?Aj(1,a):w(function(){var e=null==a?null:J(a);return null==e?null:e.$b(d)}())?a:Bc.g(a,d)}}),Dk=[Ck];function Hi(a){return function(b){var c=null!=b&&(b.l&64||u===b.I)?T(X,b):b;b=null!=c&&"state"in c?c.state:void 0;c=null!=c&&"dispatch"in c?c.dispatch:void 0;b=a.c?a.c(b):a.call(null,b);null!=b&&(c.c?c.c(b):c.call(null,b));return!0}}
function bj(a){return qi(a,function(b){var c=null!=b&&(b.l&64||u===b.I)?T(X,b):b;b=null!=c&&"from"in c?c.from:void 0;c=null!=c&&"empty"in c?c.empty:void 0;return w(c)?(c=$i(a,b,-1),c=null==c?null:Ni(c,Wd),c=null==c?null:ni(c,Li),w(c)?new v(null,2,[Vj,b-1,vh,new U(null,2,5,W,[zk(c.firstChild),zk(c.lastChild)],null)],null):null):null})}
function cj(a){return qi(a,function(b){var c=null!=b&&(b.l&64||u===b.I)?T(X,b):b;var d=null!=c&&"from"in c?c.from:void 0;b=null!=c&&"to"in c?c.to:void 0;c=null!=c&&"empty"in c?c.empty:void 0;var e=w(c)?function(){var f=$i(a,d),h=Ni(f,function(m){var n=Wd(m);return w(n)?n:F.g("String",m.name)||F.g("Program",m.name)}),k=a.doc.lineAt(d).to,l=w(h)?yk(h,d,1):null;f=w(h)?function(){var m=null==l?null:zf(Ud(function(n){return n.start<=k}),l);return null==m?null:Ac(m)}():null;f=Ki(h)?function(){var m=A.c(a.doc.slice(h.start,
h.end)).substring(d-h.start).indexOf("\n");return 0>m?h.end-1:d+m+1}():w(f)?w(Ji(f))?f.start:f.end:w(function(){var m=J(l);m=null==m?null:m.start;return null==m?null:m>k}())?J(l).start:null;return w(f)?new v(null,2,[Vj,d,vh,new v(null,2,[og,d,lh,f],null)],null):null}():null;return w(e)?e:w(c)?null:new v(null,2,[Vj,d,vh,oi(d,b)],null)})}
function dj(a,b,c){var d=function(){var e=Ni($i(a,b),function(h){var k=Wd(h);return w(k)?k:null==h.parent});e=null==e?null:yk(e,b,c);e=null==e?null:J(e);if(null==e)return null;a:switch(c){case -1:var f=zg;break a;case 1:f=Kh;break a;default:throw Error(["No matching clause: ",A.c(c)].join(""));}f=ki(f);if(null!=e&&f in e)return e[f]}();return w(d)?d:mi(a,b+c)}
function ej(a){return function(b){return qi(b,function(c){var d=null!=c&&(c.l&64||u===c.I)?T(X,c):c;c=null!=d&&"from"in d?d.from:void 0;var e=null!=d&&"to"in d?d.to:void 0;d=null!=d&&"empty"in d?d.empty:void 0;if(w(d))c=new v(null,1,[Vj,dj(b,c,a)],null);else{c=oi(c,e);b:switch(a){case -1:e=og;break b;case 1:e=lh;break b;default:throw Error(["No matching clause: ",A.c(a)].join(""));}e=ki(e);c=null!=c&&e in c?c[e]:void 0;c=new v(null,1,[Vj,c],null)}return c})}}
function fj(a){return function(b){return qi(b,function(c){var d=null!=c&&(c.l&64||u===c.I)?T(X,c):c;c=null!=d&&"from"in d?d.from:void 0;var e=null!=d&&"to"in d?d.to:void 0;d=null!=d&&"empty"in d?d.empty:void 0;if(w(d))c=new v(null,1,[Dg,Ak(b,c,dj(b,c,a))],null);else{a:switch(c=oi(c,e),e=null!=c&&(c.l&64||u===c.I)?T(X,c):c,c=null!=e&&"from"in e?e.from:void 0,e=null!=e&&"to"in e?e.to:void 0,a){case 1:c=Ak(b,c,dj(b,e,a));break a;case -1:c=Ak(b,dj(b,c,a),e);break a;default:throw Error(["No matching clause: ",
A.c(a)].join(""));}c=new v(null,1,[Dg,c],null)}return c})}}function Ek(a,b){var c=function(){var h=$i(a,b,-1);return null==h?null:ni(h,function(k){k=null!=k&&(k.l&64||u===k.I)?T(X,k):k;k=null!=k&&"end"in k?k.end:void 0;return F.g(b,k)})}(),d=function(){var h=$i(a,b,1);return null==h?null:ni(h,function(k){k=null!=k&&(k.l&64||u===k.I)?T(X,k):k;k=null!=k&&"start"in k?k.start:void 0;return F.g(b,k)})}(),e=$i(a,b);var f=ni(c,Vd(Qi,Pd(vk)));return w(f)?f:w(d)?d:w(c)?c:e}
function Fk(a,b,c){a=Ek(a,c);return J(ae(function(d){var e=null!=d&&(d.l&64||u===d.I)?T(X,d):d;d=null!=e&&"start"in e?e.start:void 0;e=null!=e&&"end"in e?e.end:void 0;return d<=b&&e>=c&&!(d===b&&e===c)},R(a,Vi(Yi(),wc([Mi(a)])))))}
function ok(a){return qi(a,function(b){var c=null!=b&&(b.l&64||u===b.I)?T(X,b):b;var d=null!=c&&"from"in c?c.from:void 0;var e=null!=c&&"to"in c?c.to:void 0;b=null!=c&&"empty"in c?c.empty:void 0;return w(b)?new v(null,1,[Dg,function(){var f=Ek(a,d);f=null==f?null:Ak(a,f.start,f.end);return w(f)?f:c}()],null):new v(null,1,[Dg,function(){var f=Fk(a,d,e);f=null==f?null:ci.EditorSelection.range(f.start,f.end);return w(f)?f:c}()],null)})}
function pk(a){var b=J(M(a.field(Ck)));return w(b)?a.update({selection:b}):qi(a,function(c){return new v(null,1,[Vj,c.from],null)})}
function gj(a){return function(b){return qi(b,function(c){var d=null!=c&&(c.l&64||u===c.I)?T(X,c):c;c=null!=d&&"from"in d?d.from:void 0;d=null!=d&&"empty"in d?d.empty:void 0;if(w(d)){var e=Ni($i(b,c),Vd(Wd,function(h){a:switch(a){case 1:h=null==h?null:mk(h);h=null==h?null:Gj(h);h=null==h?null:Ji(h);break a;case -1:h=null==h?null:mk(h);h=null==h?null:ak(h);h=null==h?null:Ii(h);break a;default:throw Error(["No matching clause: ",A.c(a)].join(""));}return ya(h)}));if(w(e)){a:switch(a){case 1:var f=J(Ei(Zj,
zf(ed,$d(Gj,Gj(mk(e))))));break a;case -1:f=J(Ei(Zj,zf(ed,$d(ak,ak(mk(e))))));break a;default:throw Error(["No matching clause: ",A.c(a)].join(""));}return w(f)?new v(null,2,[Cj,c,vh,function(){switch(a){case 1:var h=e.lastChild;return new U(null,2,5,W,[new v(null,2,[og,f.end,Oh,h.name],null),Fc.j(zk(h),Oh," ")],null);case -1:h=lk(e);var k=mk(e).start;return new U(null,2,5,W,[new v(null,3,[og,k,lh,k+h.length,Oh," "],null),new v(null,2,[og,f.start,Oh,h],null)],null);default:throw Error(["No matching clause: ",
A.c(a)].join(""));}}()],null):null}}return null})}}
function hj(a){return function(b){return qi(b,function(c){c=null!=c&&(c.l&64||u===c.I)?T(X,c):c;var d=null!=c&&"from"in c?c.from:void 0;c=null!=c&&"empty"in c?c.empty:void 0;if(w(c)){var e=Ni($i(b,d),Wd);if(w(e))switch(a){case 1:c=function(){var l=e.lastChild;l=null==l?null:zf(ed,$d(ak,ak(l)));l=null==l?null:Ei(Zj,l);l=null==l?null:Aj(1,l);return null==l?null:J(l)}();if(w(c)){var f=c;return new v(null,2,[Vj,function(){var l=f.end;return l<d?l:d}(),vh,new U(null,2,5,W,[new v(null,2,[og,f.end,Oh,e.lastChild.name],
null),Fc.j(zk(e.lastChild),Oh," ")],null)],null)}return null;case -1:c=function(){var l=e.firstChild;l=null==l?null:zf(ed,$d(Gj,Gj(l)));l=null==l?null:Ei(Zj,l);l=null==l?null:Aj(1,l);return null==l?null:J(l)}();if(w(c)){var h=c,k=lk(e);c=mk(e).start;return new v(null,2,[Vj,function(){var l=h.start+k.length;return d>l?d:l}(),vh,new U(null,2,5,W,[new v(null,2,[og,h.start,Oh,k],null),new v(null,3,[og,c,lh,c+k.length,Oh,b.indentString(k.length)],null)],null)],null)}return null;default:throw Error(["No matching clause: ",
A.c(a)].join(""));}else return null}else return null})}}
var ij=qf([Ph,Bg,Lg,Qg,Pg,Nh,th,yg,Ch,Sg,qg,bg,Ih,Fi,Lh,zh,jg,yh,ch,xh,Yf,Zf,fh,Xg,nh,sg,Ng,Gh,Th,dg,Wf,Mg,ah,Hh,uh,bh,Ug,Vg,Rg,Og,ng,Vh,$g,Bh,kg,Jg,Fg,pg,lg,rg,xg,kh,dh,Uh,Wg,Rh,Cg,Dh,Qh,$f,gg,Yg,ug,oh,Zg,tg,Eh,eh,yf,Jh,sh,hg,ig,wg],[Z.cursorLineStart,Z.cursorLineDown,Z.cursorSyntaxRight,Z.selectAll,Z.selectLineUp,Hi(new Yb(function(){return Xj},Ij,qf([Xf,Gg,Fh,Ig,hh,eg,vg,fg,cg,Hg],[Lj,bk,"codemirror_next/clojure/extensions/formatting.cljs",13,1,156,156,kd(new U(null,1,5,W,[qh],null)),null,w(Xj)?
Xj.Yb:null]))),Z.cursorLineBoundaryForward,Hi(ej(-1)),Z.selectLineBoundaryBackward,Z.simplifySelection,Z.deleteCharBackward,gi.redo,Z.cursorMatchingBracket,Hi(new Yb(function(){return ok},Dj,qf([Xf,Gg,Fh,Ig,hh,eg,vg,fg,cg,Hg],[Mh,Hj,"codemirror_next/clojure/commands.cljs",21,1,122,122,kd(new U(null,1,5,W,[Jc(qh,new v(null,1,[Ag,Sh],null))],null)),null,w(ok)?ok.Yb:null]))),Z.cursorSyntaxLeft,Z.insertNewlineAndIndent,Z.indentMore,Hi(new Yb(function(){return cj},Tg,qf([Xf,Gg,Fh,Ig,hh,eg,vg,fg,cg,Hg],
[Mh,wh,"codemirror_next/clojure/commands.cljs",11,1,31,31,kd(new U(null,1,5,W,[Jc(qh,new v(null,1,[Ag,Sh],null))],null)),null,w(cj)?cj.Yb:null]))),Z.selectSyntaxRight,Z.cursorLineBoundaryBackward,Hi(gj(1)),Z.selectLine,Z.selectCharRight,Hi(fj(1)),Z.selectPageUp,Z.cursorGroupLeft,Z.deleteCharForward,Z.cursorCharLeft,Z.indentLess,Z.moveLineUp,Z.cursorGroupBackward,Z.selectDocStart,Z.selectGroupBackward,Z.copyLineUp,Z.deleteLine,Hi(fj(-1)),Z.selectParentSyntax,Z.indentSelection,Z.cursorDocEnd,Z.deleteGroupBackward,
Hi(hj(1)),Z.selectLineStart,gi.undo,Z.deleteGroupForward,Hi(hj(-1)),Hi(ej(1)),Z.selectDocEnd,Z.selectPageDown,Z.cursorPageDown,Z.cursorPageUp,Z.cursorGroupRight,Z.selectLineBoundaryForward,Z.moveLineDown,Z.cursorLineEnd,Z.cursorGroupForward,gi.undoSelection,Z.selectSyntaxLeft,Z.cursorCharRight,Hi(gj(-1)),Z.selectGroupForward,Z.selectLineEnd,Hi(new Yb(function(){return bj},Eg,qf([Xf,Gg,Fh,Ig,hh,eg,vg,fg,cg,Hg],[Mh,Wh,"codemirror_next/clojure/commands.cljs",13,1,19,19,kd(new U(null,1,5,W,[qh],null)),
null,w(bj)?bj.Yb:null]))),Z.selectCharLeft,Z.splitLine,Z.selectLineDown,Z.selectGroupLeft,Z.transposeChars,Z.cursorLineUp,Hi(new Yb(function(){return pk},ui,qf([Xf,Gg,Fh,Ig,hh,eg,vg,fg,cg,Hg],[Mh,ti,"codemirror_next/clojure/commands.cljs",23,1,133,133,kd(new U(null,1,5,W,[Jc(qh,new v(null,1,[Ag,Sh],null))],null)),null,w(pk)?pk.Yb:null]))),Z.selectGroupRight,gi.redoSelection,Z.cursorDocStart,Z.deleteToLineEnd,Z.copyLineDown]);dd(function(a,b,c){return Fc.j(a,c,b)},Md,ij);function jj(a){var b=null!=a&&(a.l&64||u===a.I)?T(X,a):a;return qi(b,function(c){var d=null!=c&&(c.l&64||u===c.I)?T(X,c):c;c=null!=d&&"empty"in d?d.empty:void 0;var e=null!=d&&"head"in d?d.head:void 0;d=null!=d&&"anchor"in d?d.anchor:void 0;e=oi(e,d);e=null!=e&&(e.l&64||u===e.I)?T(X,e):e;var f=null!=e&&"from"in e?e.from:void 0;if(ya(c))return new v(null,2,[Vj,f,vh,e],null);var h=b.tree.resolve(f,-1),k=h.name,l=h.parent;c=w(w(l)?!Li(l):l)?null:w(function(){var m=Ji(h);return w(m)?f===l.end:m}())?new v(null,
1,[Vj,f-1],null):w(function(){var m=uk.c?uk.c(k):uk.call(null,k);return w(m)?h.start===l.start:m}())?Pi(h.parent)?new v(null,2,[Vj,l.start,vh,new U(null,1,5,W,[oi(l.start,l.end)],null)],null):new v(null,1,[Vj,f],null):w(function(){var m=$i(b,f-1,-1);return null==m?null:ni(m,Vd(function(n){return F.g(f-1,n.end)},Zj))}())?new v(null,1,[Vj,f-1],null):null;return w(c)?c:new v(null,2,[Vj,mi(b,f-1),vh,oi(mi(b,f-1),f)],null)})}
function Gk(a,b){return new v(null,2,[vh,new v(null,2,[Oh,b,og,a],null),Vj,a+b.length],null)}
function lj(a,b){var c=uk.c?uk.c(b):uk.call(null,b);return qi(a,function(d){var e=null!=d&&(d.l&64||u===d.I)?T(X,d):d;var f=null!=e&&"from"in e?e.from:void 0;d=null!=e&&"head"in e?e.head:void 0;var h=null!=e&&"empty"in e?e.empty:void 0;ya(h)?(h=null!=e&&"to"in e?e.to:void 0,e=null!=e&&"anchor"in e?e.anchor:void 0,f=new v(null,2,[vh,new U(null,2,5,W,[new v(null,2,[Oh,b,og,f],null),new v(null,2,[Oh,c,og,h],null)],null),hk,new U(null,2,5,W,[e+b.length,d+b.length],null)],null)):f=w(F.g(b,'"')?Ni($i(a,
f),Ki):!1)?Gk(d,'\\"'):null;return w(f)?f:new v(null,2,[vh,new v(null,2,[Oh,[b,c].join(""),og,d],null),Vj,d+b.length],null)})}function mj(a,b){return qi(a,function(c){c=null!=c&&(c.l&64||u===c.I)?T(X,c):c;var d=null!=c&&"empty"in c?c.empty:void 0;var e=null!=c&&"head"in c?c.head:void 0;c=function(){return w(d)?$i(a).iterate({from:e+1,enter:function(f,h,k){f=f.name;f=pa.c?pa.c(f):pa.call(null,f);if(w(f))return k}}):d}();return w(c)?new v(null,1,[Vj,c],null):Gk(e,b)})}
var nj=ei.EditorView.domEventHandlers({keydown:function(a,b){a=null!=a&&(a.l&64||u===a.I)?T(X,a):a;var c=null!=a&&"metaKey"in a?a.metaKey:void 0;var d=null!=a&&"ctrlKey"in a?a.ctrlKey:void 0;var e=null!=a&&"keyCode"in a?a.keyCode:void 0;b=null!=b&&(b.l&64||u===b.I)?T(X,b):b;var f=null!=b&&"state"in b?b.state:void 0;if(w(w(c)?c:d))return!1;if(8===e)return pi(b,jj(f));a=di.keyName(a);return pi(b,w(uk.c?uk.c(a):uk.call(null,a))?lj(f,a):w(jk.c?jk.c(a):jk.call(null,a))?mj(f,a):null)}});function oj(a){return dd(function(b,c,d){var e=Wb.g(b,c);return null==e?Hc.g(b,c):Fc.j(b,c,d.c?d.c(e):d.call(null,e))},a,new v(null,2,[rh,ij,Kg,ij],null))}
var pj=qf([Ph,Bg,Qg,th,qg,bg,zh,xh,Ng,Gh,Wf,Rg,Og,$g,Bh,lg,rg,Uh,Wg,Rh,Dh,oh,Eh,eh,sh,hg],[new U(null,2,5,W,[new v(null,1,[mg,"Cmd-ArrowLeft"],null),new v(null,2,[mg,"Ctrl-a",Kg,Vh],null)],null),new U(null,2,5,W,[new v(null,2,[ih,"ArrowDown",Kg,Zg],null),new v(null,2,[mg,"Ctrl-n",Kg,Zg],null)],null),new U(null,1,5,W,[new v(null,1,[ih,"Mod-a"],null)],null),new U(null,1,5,W,[new v(null,2,[ih,"End",Kg,kh],null)],null),new U(null,2,5,W,[new v(null,1,[ih,"Backspace"],null),new v(null,1,[mg,"Ctrl-h"],null)],
null),new U(null,1,5,W,[new v(null,3,[ih,"Mod-y",mg,"Mod-Shift-z",Ah,!0],null)],null),new U(null,1,5,W,[new v(null,1,[ih,"Enter"],null)],null),new U(null,1,5,W,[new v(null,2,[ih,"Home",Kg,Ch],null)],null),new U(null,2,5,W,[new v(null,1,[ih,"Delete"],null),new v(null,1,[mg,"Ctrl-d"],null)],null),new U(null,2,5,W,[new v(null,2,[ih,"ArrowLeft",Kg,ug],null),new v(null,2,[mg,"Ctrl-b",Kg,ug],null)],null),new U(null,1,5,W,[new v(null,2,[mg,"Alt-b",Kg,ah],null)],null),new U(null,3,5,W,[new v(null,2,[mg,"Cmd-ArrowDown",
Kg,Fg],null),new v(null,2,[ih,"Mod-End",Kg,Fg],null),new v(null,1,[mg,"Alt-\x3e"],null)],null),new U(null,2,5,W,[new v(null,2,[ih,"Mod-Backspace",mg,"Ctrl-Alt-Backspace"],null),new v(null,1,[mg,"Ctrl-Alt-h"],null)],null),new U(null,1,5,W,[new v(null,2,[ih,"Mod-z",Ah,!0],null)],null),new U(null,3,5,W,[new v(null,2,[ih,"Mod-Delete",mg,"Alt-Backspace"],null),new v(null,1,[mg,"Alt-Delete"],null),new v(null,1,[mg,"Alt-d"],null)],null),new U(null,3,5,W,[new v(null,2,[mg,"Ctrl-ArrowDown",Kg,pg],null),new v(null,
2,[ih,"PageDown",Kg,pg],null),new v(null,1,[mg,"Ctrl-v"],null)],null),new U(null,3,5,W,[new v(null,2,[mg,"Ctrl-ArrowUp",Kg,nh],null),new v(null,2,[ih,"PageUp",Kg,nh],null),new v(null,1,[mg,"Alt-v"],null)],null),new U(null,2,5,W,[new v(null,1,[mg,"Cmd-ArrowRight"],null),new v(null,2,[mg,"Ctrl-e",Kg,gg],null)],null),new U(null,1,5,W,[new v(null,2,[mg,"Alt-f",Kg,$f],null)],null),new U(null,1,5,W,[new v(null,2,[ih,"Mod-u",Ah,!0],null)],null),new U(null,2,5,W,[new v(null,2,[ih,"ArrowRight",Kg,fh],null),
new v(null,2,[mg,"Ctrl-f",Kg,fh],null)],null),new U(null,1,5,W,[new v(null,1,[mg,"Ctrl-o"],null)],null),new U(null,1,5,W,[new v(null,1,[mg,"Ctrl-t"],null)],null),new U(null,2,5,W,[new v(null,2,[ih,"ArrowUp",Kg,Pg],null),new v(null,2,[mg,"Ctrl-p",Kg,Pg],null)],null),new U(null,1,5,W,[new v(null,3,[ih,"Alt-u",mg,"Mod-Shift-u",Ah,!0],null)],null),new U(null,3,5,W,[new v(null,2,[mg,"Cmd-ArrowUp",Kg,Mg],null),new v(null,2,[ih,"Mod-Home",Kg,Mg],null),new v(null,1,[mg,"Alt-\x3c"],null)],null)]),qj=qf([Nh,
yg,Fi,yh,Yf,ng,kg,Jg,Qh,Yg,yf],[new U(null,1,5,W,[new v(null,2,[ih,"Alt-Tab",cg,"Indent document (or selection)"],null)],null),new U(null,1,5,W,[new v(null,4,[ih,"Alt-ArrowLeft",Kg,bh,cg,"Move cursor one unit to the left (shift: selects this region)",Ah,!0],null)],null),new U(null,2,5,W,[new v(null,2,[cg,"Grow selections",ih,"Alt-ArrowUp"],null),new v(null,1,[ih,"Mod-1"],null)],null),new U(null,1,5,W,[new v(null,3,[ih,"Ctrl-k",cg,"Remove all forms from cursor to end of line",Ah,!0],null)],null),new U(null,
2,5,W,[new v(null,3,[ih,"Ctrl-ArrowRight",cg,"Expand collection to include form to the right",Ah,!0],null),new v(null,2,[ih,"Mod-Shift-k",Ah,!0],null)],null),new U(null,2,5,W,[new v(null,3,[ih,"Ctrl-ArrowLeft",cg,"Shrink collection forwards by one form",Ah,!0],null),new v(null,2,[ih,"Mod-Shift-j",Ah,!0],null)],null),new U(null,1,5,W,[new v(null,2,[cg,"Shrink collection backwards by one form",ih,"Ctrl-Alt-ArrowRight"],null)],null),new U(null,1,5,W,[new v(null,4,[ih,"Alt-ArrowRight",Kg,Xg,cg,"Move cursor one unit to the right (shift: selects this region)",
Ah,!0],null)],null),new U(null,1,5,W,[new v(null,3,[cg,"Grow collection backwards by one form",ih,"Ctrl-Alt-ArrowLeft",Ah,!0],null)],null),new U(null,1,5,W,[new v(null,3,[ih,"Alt-s",cg,"Lift contents of collection into parent",Ah,!0],null)],null),new U(null,2,5,W,[new v(null,2,[cg,"Shrink selections",ih,"Alt-ArrowDown"],null),new v(null,1,[ih,"Mod-2"],null)],null)]),rj=function(a,b){if(w(Od(ed,b))){var c=function(d,e){var f=Xa(e),h=Ya(e);return Uc(d,f)?Fc.j(d,f,function(){var k=Wb.g(d,f);return a.g?
a.g(k,h):a.call(null,k,h)}()):Fc.j(d,f,h)};return cd(function(d,e){return Zc(c,w(d)?d:Md,G(e))},b)}return null}(Bc,wc([Hc.v(pj,xg,wc([sg])),qj]));var sj=ji.buildParser('@top[name\x3dProgram] { expression* }\n\n@skip { whitespace | LineComment | Discard }\nexpression { Boolean | Nil | Deref | Quote | SyntaxQuote | Unquote | UnquoteSplice | Symbol | Number | Meta | Keyword | List | Vector | Map | String | Character | Set | NamespacedMap | RegExp | Var | ReaderConditional | DataLiteral | SymbolicValue | AnonymousFunction | FnArg | Meta }\nDiscard { "#_" expression }\n@precedence { docString @left, operator @left, meta @right }\n\nlistContents {\n   defList  { Metadata? DefLike Metadata? VarName (DocString expression+ | expression+)? } |\n   anyList { (Metadata? Operator)? expression* }\n }\n\nDocString { !docString String }\nList { "(" listContents ")" }\nVector { "[" expression* "]" }\nMap { "{" expression* "}" }\nVarName { Symbol }\n\n@skip {} {\n  Set { "#" Map }\n  AnonymousFunction { "#" List }\n  NamespacedMap { "#" KeywordPrefix Map }\n  RegExp { "#" String }\n  Var { "#\'" Symbol }\n  ReaderConditional { "#?" (List | Deref) }\n  DataLiteral { "#" ident }\n  SymbolicValue { "##" simpleIdent }\n  Metadata { ("^" | "#^") expression }\n  String { \'"\' StringContent? \'"\' }\n}\n\nMeta { Metadata !meta expression }\n\nDeref { "@" expression }\nQuote { "\'" expression }\nSyntaxQuote { "`" expression }\nUnquote { "~" expression }\nUnquoteSplice { "~@" expression }\nSymbol { ident }\nOperator { !operator ident }\n\n@tokens {\n\n\n  "["\n  "{"\n  "("\n\n  "#"\n  "##"\n  "#\'"\n  "#?"\n  "#^"\n  "#_"\n\n  \'"\'\n  "\'"\n  "`"\n  "~"\n  "~@"\n  "^"\n  "@"\n\n\n  "]"\n  "}"\n  ")"\n\n  whitespace { (std.whitespace | ",")+ }\n\n  LineComment { ";" ![\\n]* }\n\n  identStart { std.asciiLetter | $[\x3c\x3e._\x3d?!*+\\-$\\u{a1}-\\u{10ff}] }\n  identChar { identStart (std.digit | ":" | "." | "\'" | "#")* }\n  simpleIdent { identStart identChar* }\n  qualifiedIdent { simpleIdent "/" identChar+ }\n  ident { simpleIdent | qualifiedIdent }\n\n  keyword { ":" ":"? ident }\n  Keyword { keyword }\n  KeywordPrefix { keyword }\n\n  Number {\n    ("+" | "-")? (std.digit+ ("." std.digit* "M"?)? | "." std.digit+) (("e" | "E") ("+" | "-")? std.digit+ "M"?)? |\n    ("+" | "-")? std.digit+ ("M" | "N") |\n    ("+" | "-")? std.digit+ "/" std.digit+ |\n    ("+" | "-")? "0x" (std.digit | $[a-fA-F])+ |\n    "0b" $[01]+ |\n    "0o" $[0-7]+\n  }\n  @precedence { Number, ident }\n\n  StringContent {\n    (!["] | "\\\\" _)+\n  }\n\n  Character { "\\\\" (std.asciiLetter | std.digit | "@")+ }\n\n  FnArg[name\x3dSymbol] { "%" (std.digit* | "\x26"?) }\n\n}\n\n@external specialize {ident} specializeIdent from "./tokens" { DefLike, Nil, Boolean }\n\n@detectDelim\n',
{externalSpecializer:function(a,b){return function(c){switch(c){case "nil":return b.Nil;case "true":case "false":return b.Boolean;default:return F.g("def",c.slice(0,3))?b.DefLike:-1}}}}),tj=ii.LezerSyntax.define(sj.withProps(Nj,ii.foldNodeProp.add(function(){function a(b){return{from:b.start+1,to:b.end-1}}return{Vector:a,Map:a,Set:a,List:a}}()),fi.styleTags({LineComment:"lineComment",Comment:"lineComment","VarName/Symbol":"variableName definition",Boolean:"atom",Keyword:"atom",Number:"number",DocString:"+emphasis",
RegExp:"regexp",Discard:"+comment",Symbol:"labelName",String:"string",DefLike:"keyword",Nil:"null"})),{closeBrackets:{brackets:["(","[","{","'",'"'],commentTokens:{line:";;"}}}),Xi=[gi.history(),tj,hi.bracketMatching(),fi.defaultHighlighter,ei.multipleSelections(),nj,ei.keymap(function(a){return Uf(dd(function(b,c,d){return be.g(b,Xd.g(function(e){return oj(Fc.j(e,rh,c))},d))},Cc,a))}(rj)),Dk,Bi];var aj=new Rd(Cc);function kj(){var a=Wi();Td.j(aj,Bc,new ei.EditorView({state:a,parent:document.querySelector("#editor")}))}function uj(a,b){var c=Nc(J(b))?new U(null,2,5,W,[J(b),bc(b)],null):new U(null,2,5,W,[null,b],null);b=S(c,0,null);c=S(c,1,null);return["\x3c",pd(a),A.c(dd(function(d,e,f){return[A.c(d)," ",pd(e),"\x3d'",A.c(f),"'"].join("")},"",b)),"\x3e",A.c(T(A,c)),"\x3c/",pd(a),"\x3e"].join("")}
function vj(){for(var a=G(ab(aj)),b=null,c=0,d=0;;)if(d<c){var e=b.W(null,d);e.destroy.call(e);d+=1}else if(a=G(a))b=a,Qc(b)?(a=Cb(b),d=Db(b),b=a,c=P(a),a=d):(a=J(b),a.destroy.call(a),a=M(b),b=null,c=0),d=0;else break;kj();a=document.getElementById("docs");(null!=a?a:{}).innerHTML=uj(zi,wc([uj(ag,wc([new v(null,1,[Fj,5],null),Zc(function(f,h){var k=S(h,0,null);h=S(h,1,null);h=S(h,0,null);var l=null!=h&&(h.l&64||u===h.I)?T(X,h):h;h=Wb.g(l,ih);var m=Wb.g(l,Kg);l=Wb.g(l,cg);return[A.c(f),uj(jh,wc([uj(ph,
wc([uj(mh,wc([pd(k)]))])),uj(ph,wc([h])),uj(ph,wc([w(m)?uj(gh,wc(["+Shift ",uj(mh,wc([m]))])):null])),uj(ph,wc([l]))]))].join("")},"",Di()),"\x3c/table\x3e"])),uj(Ai,wc([J(M(Ej()))]))]));Ac(ab(aj)).focus()};try{vj()}catch(a){throw console.error("An error occurred when calling (codemirror-next.clojure.demo/render)"),a;};
}).call(this);