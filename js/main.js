var shadow$provide = {};
(function(){
shadow$provide[0]=function(na,Pa,lb,D){function Ja(F){Ja="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"===typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A};return Ja(F)}function Ka(F,A){if(A&&("object"===Ja(A)||"function"===typeof A))return A;if(void 0===F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function Ca(F,A,E){Ca="undefined"!==typeof Reflect&&
Reflect.get?Reflect.get:function(O,U,ca){for(;!Object.prototype.hasOwnProperty.call(O,U)&&(O=Ra(O),null!==O););if(O)return U=Object.getOwnPropertyDescriptor(O,U),U.get?U.get.call(ca):U.value};return Ca(F,A,E||F)}function Ra(F){Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)};return Ra(F)}function wa(F,A){if("function"!==typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(A&&A.prototype,
{constructor:{value:F,writable:!0,configurable:!0}});A&&za(F,A)}function za(F,A){za=Object.setPrototypeOf||function(E,O){E.__proto__=O;return E};return za(F,A)}function Fa(F,A){if(!(F instanceof A))throw new TypeError("Cannot call a class as a function");}function Ma(F,A){for(var E=0;E<A.length;E++){var O=A[E];O.enumerable=O.enumerable||!1;O.configurable=!0;"value"in O&&(O.writable=!0);Object.defineProperty(F,O.key,O)}}function ra(F,A,E){A&&Ma(F.prototype,A);E&&Ma(F,E);return F}function Ea(F){return 127462<=
F&&127487>=F}function ja(F,A){if(A==F.length)return A;var E;if(E=A)E=F.charCodeAt(A),E=56320<=E&&57344>E;E&&(E=F.charCodeAt(A-1),E=55296<=E&&56320>E);E&&A--;E=Da(F,A);for(A+=ha(E);A<F.length;){var O=Da(F,A),U;if(!(U=E==x||O==x))a:{for(U=1;U<z.length;U+=2)if(z[U]>O){U=z[U-1]<=O;break a}U=!1}if(U)A+=ha(O),E=O;else if(Ea(O)){O=0;for(U=A-2;0<=U&&Ea(Da(F,U));)O++,U-=2;if(0==O%2)break;else A+=2}else break}return A}function Ia(F,A){for(;0<A;){var E=ja(F,A-2);if(E<A)return E;A--}return 0}function Da(F,A){var E=
F.charCodeAt(A);if(!(55296<=E&&56320>E)||A+1==F.length)return E;F=F.charCodeAt(A+1);return 56320<=F&&57344>F?(E-55296<<10)+(F-56320)+65536:E}function ha(F){return 65536>F?1:2}function aa(F){return M[Q=(Q+1)%G]=F}function da(F){var A=-1,E=!0,O=!1,U=void 0;try{for(var ca=F[Symbol.iterator](),ka;!(E=(ka=ca.next()).done);E=!0)A+=ka.value.length+1}catch(xa){O=!0,U=xa}finally{try{if(!E&&null!=ca["return"])ca["return"]()}finally{if(O)throw U;}}return A}function T(F,A){for(var E=2<arguments.length&&void 0!==
arguments[2]?arguments[2]:0,O=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1E9,U=0,ca=0,ka=!0;ca<F.length&&U<=O;ca++){var xa=F[ca],Ga=U+xa.length;Ga>=E&&(Ga>O&&(xa=xa.slice(0,O-U)),U<E&&(xa=xa.slice(E-U)),ka?(A[A.length-1]+=xa,ka=!1):A.push(xa));U=Ga+1}return A}function H(F,A){if(F.length!=A.length||F.lines!=A.lines)return!1;F=new k(F);A=new k(A);for(var E=0,O=0;;){if(F.lineBreak!=A.lineBreak||F.done!=A.done)return!1;if(F.done)return!0;if(F.lineBreak)F.next(),A.next(),E=O=0;else{var U=F.value.slice(E),
ca=A.value.slice(O);if(U.length==ca.length){if(U!=ca)return!1;F.next();A.next();E=O=0}else if(U.length>ca.length){if(U.slice(0,ca.length)!=ca)return!1;E+=ca.length;A.next();O=0}else{if(ca.slice(0,U.length)!=U)return!1;O+=U.length;F.next();E=0}}}}Object.defineProperty(D,"__esModule",{value:!0});D.codePointAt=Da;D.codePointSize=ha;D.countColumn=function(F,A,E){for(var O=0;O<F.length;)9==F.charCodeAt(O)?(A+=E-A%E,O++):(A++,O=ja(F,O));return A};D.findColumn=function(F,A,E,O){for(var U=0;U<F.length;){if(A>=
E)return{offset:U,leftOver:0};A+=9==F.charCodeAt(U)?O-A%O:1;U=ja(F,U)}return{offset:F.length,leftOver:E-A}};D.fromCodePoint=function(F){if(65535>=F)return String.fromCharCode(F);F-=65536;return String.fromCharCode((F>>10)+55296,(F&1023)+56320)};D.nextClusterBreak=ja;D.prevClusterBreak=Ia;D.Text=D.Line=void 0;var z="lc 34 7n 7 7b 19    2  2   20 b 1c l g  2t 7 2 6 2 2  4 z  u r 2j b 1m 9 9  o 4  9  3  5 17 3 3b f  w 1j    4 8 4  3 7 a 2 t  1m    2 4 8  9  a 2 q  2 2 1l  4 2 4 2 2 3 3  u 2 3  b 2 1l  4 5  2 4  k 2 m 6   1m   2  4 8  7 3 a 2 u  1n    c  9  14  3  1l 3 5 3  4 7 2 b 2 t  1m  2  2  3  5 2 7 2 b 2 s 2 1l 2   2 4 8  9  a 2 t  20  4  2 3   8  29  2 7 c 8 2q  2 9 b 6 22 2 r      1j e  5  2 5 b  10 9  2u 4  6  2 2 2 p 2 4 3 g 4 d  2 2 6  f  jj 3 qa 3 t 3 t 2 u 2 1s 2  7 8  2 b 9  19 3 3b 2 y  3a 3 4 2 9  6 3 63 2 2  1m   7     2 8 6 a 2  1c h 1r 4 1c 7   5  14 9 c 2 w 4 2 2  3 1k   2 3   3 1m 8 2 2 48 3  d  7 4  6  3 2 5i 1m  5 ek  5f x 2da 3 3x  2o w fe 6 2x 2 n9w 4  a w 2 28 2 7k  3  4  p 2 5  47 2 q i d  12 8 p b 1a 3 1c  2 4 2 2 13  1v 6 2 2 2 2 c  8  1b  1f   3 2 2 5 2   16 2 8  6m  2  4  fn4  kh g g g a6 2 gt  6a  45 5 1ae 3  2 5 4 14 3 4  4l 2 fx 4 ar 2 49 b 4w  1i f 1k 3 1d 4 2 2 1x 3 10 5  8 1q  c 2 1g 9 a 4 2  2n 3 2   2 6  4g  3 8 l 2 1l 2     m  e 7 3 5 5f 8 2 3   n  29  2 6   2   2  2 6j  2 4 6 2  2 r 2 2d 8 2   2 2y    2 6   2t 3 2 4  5 77 9  2 6t  a 2   4  40 4 2 2 4  w a 14 6 2 4 8  9 6 2 3 1a d  2 ba 7  6   2a m 2 7  2  2 3e 6 3   2  7   20 2 3    9n 2 f0b 5 1n 7 t4  1r 4 29  f5k 2 43q   3 4 5 8 8 2 7 u 4 44 3 1iz 1j 4 1e 8  e  m 5  f 11s 7  h 2 7  2  5 79 7 c5 4 15s 7 31 7 240 5 gx7k 2o 3k 6o".split(" ").map(function(F){return F?
parseInt(F,36):1});for(na=1;na<z.length;na++)z[na]+=z[na-1];var x=8205,y=function(){function F(){Fa(this,F)}ra(F,[{key:"lineAt",value:function(A){if(0>A||A>this.length)throw new RangeError("Invalid position ".concat(A," in document of length ").concat(this.length));var E=!0,O=!1,U=void 0;try{for(var ca=M[Symbol.iterator](),ka;!(E=(ka=ca.next()).done);E=!0){var xa=ka.value;if(xa.doc==this&&xa.from<=A&&xa.to>=A)return xa}}catch(Ga){O=!0,U=Ga}finally{try{if(!E&&null!=ca["return"])ca["return"]()}finally{if(O)throw U;
}}return aa(this.lineInner(A,!1,1,0).finish(this))}},{key:"line",value:function(A){if(1>A||A>this.lines)throw new RangeError("Invalid line number ".concat(A," in ").concat(this.lines,"-line document"));var E=!0,O=!1,U=void 0;try{for(var ca=M[Symbol.iterator](),ka;!(E=(ka=ca.next()).done);E=!0){var xa=ka.value;if(xa.doc==this&&xa.number==A)return xa}}catch(Ga){O=!0,U=Ga}finally{try{if(!E&&null!=ca["return"])ca["return"]()}finally{if(O)throw U;}}return aa(this.lineInner(A,!0,1,0).finish(this))}},{key:"replace",
value:function(A,E,O){var U=[];this.decompose(0,A,U);U.push(O);this.decompose(E,this.length,U);return t.from(U,this.length-(E-A)+O.length)}},{key:"append",value:function(A){return 0==this.length?A:0==A.length?this:t.from([this,A],this.length+A.length)}},{key:"slice",value:function(A){var E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length,O=[];this.decompose(A,E,O);return t.from(O,E-A)}},{key:"eq",value:function(A){return this==A||H(this,A)}},{key:"iter",value:function(){return new k(this,
0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)}},{key:"iterRange",value:function(A){return new h(this,A,1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length)}},{key:"iterLines",value:function(){return new l(this,0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)}},{key:"toString",value:function(){return this.sliceString(0)}},{key:"toJSON",value:function(){for(var A=[],E=this.iterLines();!E.next().done;)A.push(E.value);return A}}],[{key:"of",value:function(A){if(0==
A.length)throw new RangeError("A document must have at least one line");if(1==A.length&&!A[0]&&F.empty)return F.empty;var E=da(A);return 1024>E?new r(A,E):t.from(r.split(A,[]),E)}}]);return F}();D.Text=y;"undefined"!=typeof Symbol&&(y.prototype[Symbol.iterator]=function(){return this.iter()});var M=[],Q=-1,G=10,r=function(F){function A(E){var O=1<arguments.length&&void 0!==arguments[1]?arguments[1]:da(E);Fa(this,A);var U=Ka(this,Ra(A).call(this));U.text=E;U.length=O;return U}wa(A,F);ra(A,[{key:"lineInner",
value:function(E,O,U,ca){for(var ka=0;;ka++){var xa=this.text[ka],Ga=ca+xa.length;if((O?U:Ga)>=E)return new u(ca,Ga,U,xa);ca=Ga+1;U++}}},{key:"decompose",value:function(E,O,U){U.push(new A(T(this.text,[""],E,O),Math.min(O,this.length)-Math.max(0,E)))}},{key:"lastLineLength",value:function(){return this.text[this.text.length-1].length}},{key:"firstLineLength",value:function(){return this.text[0].length}},{key:"replace",value:function(E,O,U){var ca=this.length+U.length-(O-E);return 1024<=ca||!(U instanceof
A)?Ca(Ra(A.prototype),"replace",this).call(this,E,O,U):new A(T(this.text,T(U.text,T(this.text,[""],0,E)),O),ca)}},{key:"sliceString",value:function(E){for(var O=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length,U=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"\n",ca="",ka=0,xa=0;ka<=O&&xa<this.text.length;xa++){var Ga=this.text[xa],Ta=ka+Ga.length;ka>E&&xa&&(ca+=U);E<Ta&&O>ka&&(ca+=Ga.slice(Math.max(0,E-ka),O-ka));ka=Ta+1}return ca}},{key:"flatten",value:function(E){E[E.length-
1]+=this.text[0];for(var O=1;O<this.text.length;O++)E.push(this.text[O])}},{key:"lines",get:function(){return this.text.length}},{key:"children",get:function(){return null}}],[{key:"split",value:function(E,O){var U=[],ca=-1,ka=!0,xa=!1,Ga=void 0;try{for(var Ta=E[Symbol.iterator](),fb;!(ka=(fb=Ta.next()).done);ka=!0)for(var db=fb.value;;){var ub=ca+db.length+1;if(512>ub){ca=ub;U.push(db);break}E=512-ca-1;var nb=db.charCodeAt(E);56320<=nb&&57344>nb&&E++;U.push(db.slice(0,E));O.push(new A(U,512));db=
db.slice(E);ca=-1;U=[]}}catch(wb){xa=!0,Ga=wb}finally{try{if(!ka&&null!=Ta["return"])Ta["return"]()}finally{if(xa)throw Ga;}}-1!=ca&&O.push(new A(U,ca));return O}}]);return A}(y),t=function(F){function A(E,O){Fa(this,A);var U=Ka(this,Ra(A).call(this));U.children=E;U.length=O;U.lines=1;O=!0;var ca=!1,ka=void 0;try{for(var xa=E[Symbol.iterator](),Ga;!(O=(Ga=xa.next()).done);O=!0)U.lines+=Ga.value.lines-1}catch(Ta){ca=!0,ka=Ta}finally{try{if(!O&&null!=xa["return"])xa["return"]()}finally{if(ca)throw ka;
}}return U}wa(A,F);ra(A,[{key:"lineInner",value:function(E,O,U,ca){for(var ka=0;;ka++){var xa=this.children[ka],Ga=ca+xa.length,Ta=U+xa.lines-1;if((O?Ta:Ga)>=E)return E=xa.lineInner(E,O,U,ca),O=void 0,E.from==ca&&(O=this.lineLengthTo(ka))&&(E.from-=O,E.content=null),E.to==Ga&&(O=this.lineLengthFrom(ka+1))&&(E.to+=O,E.content=null),E;ca=Ga;U=Ta}}},{key:"decompose",value:function(E,O,U){for(var ca=0,ka=0;ka<O&&ca<this.children.length;ca++){var xa=this.children[ca],Ga=ka+xa.length;E<Ga&&O>ka&&(ka>=E&&
Ga<=O?U.push(xa):xa.decompose(E-ka,O-ka,U));ka=Ga}}},{key:"lineLengthTo",value:function(E){var O=0;for(--E;0<=E;E--){var U=this.children[E];if(1<U.lines)return O+U.lastLineLength();O+=U.length}return O}},{key:"lastLineLength",value:function(){return this.lineLengthTo(this.children.length)}},{key:"lineLengthFrom",value:function(E){for(var O=0;E<this.children.length;E++){var U=this.children[E];if(1<U.lines)return O+U.firstLineLength();O+=U.length}return O}},{key:"firstLineLength",value:function(){return this.lineLengthFrom(0)}},
{key:"replace",value:function(E,O,U){if(512>U.length&&512>O-E)for(var ca=U.length-(O-E),ka=0,xa=0;ka<this.children.length;ka++){var Ga=this.children[ka],Ta=xa+Ga.length;if(E>=xa&&O<=Ta&&Ga.length+ca<this.length+ca>>2&&0<Ga.length+ca)return Ta=this.children.slice(),Ta[ka]=Ga.replace(E-xa,O-xa,U),new A(Ta,this.length+ca);xa=Ta}return Ca(Ra(A.prototype),"replace",this).call(this,E,O,U)}},{key:"sliceString",value:function(E){for(var O=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length,
U=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"\n",ca="",ka=0,xa=0;xa<O&&ka<this.children.length;ka++){var Ga=this.children[ka],Ta=xa+Ga.length;if(E<Ta&&O>xa){Ga=Ga.sliceString(E-xa,O-xa,U);if(E>=xa&&O<=Ta)return Ga;ca+=Ga}xa=Ta}return ca}},{key:"flatten",value:function(E){var O=!0,U=!1,ca=void 0;try{for(var ka=this.children[Symbol.iterator](),xa;!(O=(xa=ka.next()).done);O=!0)xa.value.flatten(E)}catch(Ga){U=!0,ca=Ga}finally{try{if(!O&&null!=ka["return"])ka["return"]()}finally{if(U)throw ca;
}}}}],[{key:"from",value:function(E,O){function U(ob){var pb=ob.length;if(pb)if(pb>nb&&ob instanceof A){pb=!0;var qb=!1;var Bb=void 0;try{for(var dc=ob.children[Symbol.iterator](),Cb;!(pb=(Cb=dc.next()).done);pb=!0)U(Cb.value)}catch(lc){qb=!0,Bb=lc}finally{try{if(!pb&&null!=dc["return"])dc["return"]()}finally{if(qb)throw Bb;}}}else pb>wb&&(Db>wb||0==Db)?(ca(),Gb.push(ob)):ob instanceof r&&0<Db&&(qb=xb[xb.length-1])instanceof r&&512>=ob.length+qb.length?(Db+=pb,xb[xb.length-1]=new r(T(ob.text,qb.text.slice()),
ob.length+qb.length)):(Db+pb>ub&&ca(),Db+=pb,xb.push(ob))}function ca(){0!=Db&&(Gb.push(1==xb.length?xb[0]:A.from(xb,Db)),Db=0,xb.length=0)}if(!E.every(function(ob){return ob instanceof y}))throw Error("NOP");if(1024>O){var ka=[""],xa=!0,Ga=!1,Ta=void 0;try{for(var fb=E[Symbol.iterator](),db;!(xa=(db=fb.next()).done);xa=!0)db.value.flatten(ka)}catch(ob){Ga=!0,Ta=ob}finally{try{if(!xa&&null!=fb["return"])fb["return"]()}finally{if(Ga)throw Ta;}}return new r(ka,O)}var ub=Math.max(512,O>>3),nb=ub<<1,
wb=ub>>1,Gb=[],Db=0,xb=[];fb=!0;db=!1;Ga=void 0;try{for(ka=E[Symbol.iterator]();!(fb=(xa=ka.next()).done);fb=!0)U(xa.value)}catch(ob){db=!0,Ga=ob}finally{try{if(!fb&&null!=ka["return"])ka["return"]()}finally{if(db)throw Ga;}}ca();return 1==Gb.length?Gb[0]:new A(Gb,O)}}]);return A}(y);y.empty=y.of([""]);var k=function(){function F(A){var E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;Fa(this,F);this.dir=E;this.lineBreak=this.done=!1;this.value="";this.nodes=[A];this.offsets=[0<E?0:A instanceof
r?A.text.length:A.children.length]}ra(F,[{key:"next",value:function(){for(var A=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;;){var E=this.nodes.length-1;if(0>E)return this.done=!0,this.value="",this.lineBreak=!1,this;var O=this.nodes[E],U=this.offsets[E];if(O instanceof r)if(U==(0<this.dir?0:O.text.length)||this.lineBreak){var ca=O.text[U-(0>this.dir?1:0)];this.offsets[E]=U+=this.dir;U==(0<this.dir?O.text.length:0)&&(this.nodes.pop(),this.offsets.pop());this.lineBreak=!1;if(ca.length>
Math.max(0,A))return this.value=0==A?ca:0<this.dir?ca.slice(A):ca.slice(0,ca.length-A),this;A-=ca.length}else{this.lineBreak=!0;if(0==A)return this.value="\n",this;A--}else U==(0<this.dir?O.children.length:0)?(this.nodes.pop(),this.offsets.pop()):(O=O.children[0<this.dir?U:U-1],ca=O.length,this.offsets[E]=U+this.dir,A>ca?A-=ca:(this.nodes.push(O),this.offsets.push(0<this.dir?0:O instanceof r?O.text.length:O.children.length)))}}}]);return F}(),h=function(){function F(A,E,O){Fa(this,F);this.value="";
this.cursor=new k(A,E>O?-1:1);E>O?(this.skip=A.length-E,this.limit=E-O):(this.skip=E,this.limit=O-E)}ra(F,[{key:"next",value:function(){if(0>=this.limit)this.limit=-1;else{var A=this.cursor.next(this.skip),E=A.value,O=A.lineBreak;A=A.done;this.skip=0;this.value=E;O=O?1:E.length;O>this.limit&&(this.value=0<this.cursor.dir?E.slice(0,this.limit):E.slice(O-this.limit));this.limit=A||0==this.value.length?-1:this.limit-this.value.length}return this}},{key:"lineBreak",get:function(){return this.cursor.lineBreak}},
{key:"done",get:function(){return 0>this.limit}}]);return F}(),l=function(){function F(A){var E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;Fa(this,F);this.value="";this.done=!1;this.cursor=A.iter();this.skip=E}ra(F,[{key:"next",value:function(){if(this.cursor.done)return this.done=!0,this.value="",this;for(this.value="";;){var A=this.cursor.next(this.skip),E=A.value,O=A.lineBreak;A=A.done;this.skip=0;if(A||O)return this;this.value+=E}}},{key:"lineBreak",get:function(){return!1}}]);return F}(),
u=function(){function F(A,E,O,U){Fa(this,F);this.from=A;this.to=E;this.number=O;this.content=U}ra(F,[{key:"slice",value:function(){var A=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,E=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if(A==E)return"";if("string"==typeof this.content)return this.content.slice(A,E);this.content||(this.content=new J(this.doc,this.from));var O=this.content.slice(A,E);0==A&&E==this.length&&(this.content=O);return O}},{key:"finish",value:function(A){this.doc=
A;return this}},{key:"findClusterBreak",value:function(A,E){if(0>A||A>this.length)throw new RangeError("Invalid position given to Line.findClusterBreak");if("string"==this.content){var O=this.from;var U=this.content}else O=Math.max(0,A-256),U=this.slice(O,Math.min(this.length,O+512));return(E?ja:Ia)(U,A-O)+O}},{key:"length",get:function(){return this.to-this.from}}]);return F}();D.Line=u;var J=function(){function F(A,E){Fa(this,F);this.doc=A;this.start=E;this.strings=this.cursor=null}ra(F,[{key:"slice",
value:function(A,E){this.cursor||(this.cursor=this.doc.iter(),this.strings=[this.cursor.next(this.start).value]);for(var O="",U=0,ca=0;;ca++){if(ca==this.strings.length){var ka=this.cursor.next().value;if(!ka)return O;this.strings.push(ka)}ka=this.strings[ca];var xa=U;U+=ka.length;if(!(U<=A)&&(O+=ka.slice(Math.max(0,A-xa),Math.min(ka.length,E-xa)),U>=E))return O}}}]);return F}()};
shadow$provide[1]=function(Ia,Ka,ub,J){function La(D,x,t,A){D=D.cursor;var H=[];if(!D.firstChild())return H;if(null!=t)for(;!D.type.is(t);)if(!D.nextSibling())return H;for(;;){if(null!=A&&D.type.is(A))return H;D.type.is(x)&&H.push(D.node);if(!D.nextSibling())return null==A?H:[]}}function Ma(D){return D.children.some(function(x){return!x.type.isRepeated||x instanceof sa||Ma(x)})}function Ea(D){function x(w,M,Q,aa,Y){for(var oa=n.id,Aa=n.start,Ba=n.end,Ha=n.size;oa==Y;)n.next(),oa=n.id,Aa=n.start,Ba=
n.end,Ha=n.size;var Sa=Aa-w;if(0>Ha)Q.push(z[oa]),aa.push(Sa),n.next();else{var $a=r[oa],Va;if(Va=Ba-Aa<=p){var lb=n.pos-M;M=n.fork();var kb=Va=0,wb=0,Gb=M.end-p,rb={size:0,start:0,skip:0},dc=M.pos-lb;a:for(;M.pos>dc;)if(M.id==Y)rb.size=Va,rb.start=kb,rb.skip=wb,wb+=4,Va+=4,M.next();else{var ec=M.size,Xb=M.pos-ec;if(0>ec||Xb<dc||M.start<Gb)break;var jc=M.id>=q?4:0,Mb=M.start;for(M.next();M.pos>Xb;){if(0>M.size)break a;M.id>=q&&(jc+=4);M.next()}kb=Mb;Va+=ec;wb+=jc}if(0>Y||Va==lb)rb.size=Va,rb.start=
kb,rb.skip=wb;Va=lb=4<rb.size?rb:void 0}if(Va){Sa=new Uint16Array(lb.size-lb.skip);Ha=n.pos-lb.size;for(Aa=Sa.length;n.pos>Ha;)Aa=t(lb.start,Sa,Aa,Y);Ba=new sa(Sa,Ba-lb.start,H,0>Y?pa.none:r[Y]);Sa=lb.start-w}else{Ha=n.pos-Ha;n.next();w=[];Y=[];for(oa=oa>=q?oa:-1;n.pos>Ha;)x(Aa,Ha,w,Y,oa);w.reverse();Y.reverse();Ba=-1<oa&&w.length>ka?Qa($a,$a,w,Y,0,w.length,0,p,Ba-Aa):new Ra($a,w,Y,Ba-Aa)}Q.push(Ba);aa.push(Sa)}}function t(w,M,Q,aa){var Y=n.id,oa=n.start,Aa=n.end,Ba=n.size;n.next();if(Y==aa)return Q;
var Ha=Q;if(4<Ba)for(Ba=n.pos-(Ba-4);n.pos>Ba;)Q=t(w,M,Q,aa);Y<q&&(M[--Q]=Ha,M[--Q]=Aa-w,M[--Q]=oa-w,M[--Q]=Y);return Q}var A=D.buffer,H=D.group,N=D.topID;N=void 0===N?0:N;var E=D.maxBufferLength,p=void 0===E?1024:E;E=D.reused;var z=void 0===E?[]:E;D=D.minRepeatType;var q=void 0===D?H.types.length:D,n=Array.isArray(A)?new ma(A,A.length):A,r=H.types;A=[];for(D=[];0<n.pos;)x(0,0,A,D,-1);E=A.length?D[0]+A[0].length:0;return new Ra(H.types[N],A.reverse(),D.reverse(),E)}function Qa(D,x,t,A,H,N,E,p,z){var q=
[],n=[];if(z<=p)for(;H<N;H++)q.push(t[H]),n.push(A[H]-E);else for(var r=Math.max(p,Math.ceil(1.5*z/ka));H<N;){var w=H,M=A[H];for(H++;H<N&&!(A[H]+t[H].length-M>r);H++);if(H==w+1){w=t[w];if(w instanceof Ra&&w.type==x&&w.length>r<<1){for(var Q=0;Q<w.children.length;Q++)q.push(w.children[Q]),n.push(w.positions[Q]+M-E);continue}q.push(w)}else if(H==w+1)q.push(t[w]);else{w=Qa(x,x,t,A,w,H,M,p,A[H-1]+t[H-1].length-M);if(Q=x!=pa.none){a:{Q=0;for(var aa=w.children;Q<aa.length;Q++)if(aa[Q].type==x){Q=!0;break a}Q=
!1}Q=!Q}Q&&(w=new Ra(pa.none,w.children,w.positions,w.length));q.push(w)}n.push(M-E)}return new Ra(D,q,n,z)}Object.defineProperty(J,"__esModule",{value:!0});var Fa=0,qa=new WeakMap,Ja=function(){function D(x){x=(void 0===x?{}:x).deserialize;this.id=Fa++;this.deserialize=x||function(){throw Error("This node type doesn't define a deserialize function");}}D.string=function(){return new D({deserialize:function(x){return x}})};D.number=function(){return new D({deserialize:Number})};D.flag=function(){return new D({deserialize:function(){return!0}})};
D.prototype.set=function(x,t){x[this.id]=t;return x};D.prototype.add=function(x){return new Pa(this,"function"==typeof x?x:pa.match(x))};D.closedBy=new D({deserialize:function(x){return x.split(" ")}});D.openedBy=new D({deserialize:function(x){return x.split(" ")}});D.group=new D({deserialize:function(x){return x.split(" ")}});return D}(),Pa=function(){return function(D,x){this.prop=D;this.f=x}}(),pa=function(){function D(x,t,A,H){void 0===H&&(H=0);this.name=x;this.props=t;this.id=A;this.flags=H}
D.prototype.prop=function(x){return this.props[x.id]};Object.defineProperty(D.prototype,"isTop",{get:function(){return 0<(this.flags&1)},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"isSkipped",{get:function(){return 0<(this.flags&2)},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"isError",{get:function(){return 0<(this.flags&4)},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"isRepeated",{get:function(){return 0<(this.flags&8)},enumerable:!0,
configurable:!0});D.prototype.is=function(x){if(this.name==x)return!0;var t=this.prop(Ja.group);return t?-1<t.indexOf(x):!1};D.match=function(x){var t=Object.create(null),A;for(A in x)for(var H=0,N=A.split(" ");H<N.length;H++)t[N[H]]=x[A];return function(E){for(var p=E.prop(Ja.group),z=-1;z<(p?p.length:0);z++){var q=t[0>z?E.name:p[z]];if(q)return q}}};D.none=new D("",Object.create(null),0);return D}();Ia=function(){function D(x){this.types=x;for(var t=0;t<x.length;t++)if(x[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node group");
}D.prototype.extend=function(){for(var x=[],t=0;t<arguments.length;t++)x[t]=arguments[t];t=[];for(var A=0,H=this.types;A<H.length;A++){for(var N=H[A],E=null,p=0,z=x;p<z.length;p++){var q=z[p],n=q.f(N);if(void 0!==n){if(!E){E=Object.create(null);for(var r in N.props)E[r]=N.props[r]}E[q.prop.id]=n}}t.push(E?new pa(N.name,E,N.id,N.flags):N)}return new D(t)};return D}();var Ra=function(){function D(x,t,A,H){this.type=x;this.children=t;this.positions=A;this.length=H}D.prototype.toString=function(){var x=
this.children.map(function(t){return t.toString()}).join();return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(x.length?"("+x+")":""):x};D.prototype.partial=function(x,t,A,H,N){for(var E=0;E<this.children.length;E++){var p=this.positions[E];if(p>t)break;var z=this.children[E],q=p+z.length;q<x||(x<=p&&t>=q?(H.push(z),N.push(p+A)):z instanceof D&&z.partial(x-p,t-p,A+p,H,N))}};D.prototype.applyChanges=function(x){function t(n,r,w){for(var M=
n.cursor(r,-w);;)if(!M.enter(w,r))for(;;){if((0>w?M.to<=r:M.from>=r)&&!M.type.isError)return 0>w?Math.min(r,M.to-1):Math.max(r,M.from+1);if(M.sibling(w))break;if(!M.parent())return 0>w?0:n.length}}if(0==x.length)return this;for(var A=[],H=[],N=0,E=0,p=0;;E++){var z=E==x.length?null:x[E],q=z?t(this,z.fromA,-1):this.length;q>p&&this.partial(p,q,N,A,H);if(!z)break;p=t(this,z.toA,1);N+=z.toB-z.fromB-(z.toA-z.fromA)}return new D(pa.none,A,H,this.length+N)};D.prototype.cut=function(x){if(x>=this.length)return this;
for(var t=[],A=[],H=0;H<this.children.length;H++){var N=this.positions[H];if(N>=x)break;var E=this.children[H];t.push(N+E.length<=x?E:E.cut(x-N));A.push(N)}return new D(this.type,t,A,x)};D.prototype.cursor=function(x,t){void 0===t&&(t=0);var A=null!=x&&qa.get(this)||this.topNode;A=new ca(A);null!=x&&(A.moveTo(x,t),qa.set(this,A.tree));return A};Object.defineProperty(D.prototype,"topNode",{get:function(){return new ya(this,0,0,null)},enumerable:!0,configurable:!0});D.prototype.resolve=function(x,t){void 0===
t&&(t=0);return this.cursor(x,t).node};D.prototype.iterate=function(x){var t=x.enter,A=x.leave,H=x.from;H=void 0===H?0:H;x=x.to;x=void 0===x?this.length:x;for(var N=this.cursor();;){var E=!1;if(N.from<=x&&N.to>=H&&(N.type.isRepeated||!1!==t(N.type,N.from,N.to))){if(N.firstChild())continue;E=!0}for(;;){E&&A&&A(N.type,N.from,N.to);if(N.nextSibling())break;if(!N.parent())return;E=!0}}};D.prototype.append=function(x){if(!x.children.length)return this;if(x.positions[0]<this.length)throw Error("Can't append overlapping trees");
return new D(this.type,this.children.concat(x.children),this.positions.concat(x.positions),x.length)};D.prototype.balance=function(x){void 0===x&&(x=1024);return this.children.length<=ka?this:Qa(this.type,pa.none,this.children,this.positions,0,this.children.length,0,x,this.length)};D.build=function(x){return Ea(x)};D.empty=new D(pa.none,[],[],0);return D}(),sa=function(){function D(x,t,A,H){void 0===H&&(H=pa.none);this.buffer=x;this.length=t;this.group=A;this.type=H}D.prototype.toString=function(){for(var x=
[],t=0;t<this.buffer.length;)x.push(this.childString(t)),t=this.buffer[t+3];return x.join(",")};D.prototype.childString=function(x){var t=this.buffer[x+3],A=this.group.types[this.buffer[x]],H=A.name;/\W/.test(H)&&!A.isError&&(H=JSON.stringify(H));x+=4;if(t==x)return H;for(A=[];x<t;)A.push(this.childString(x)),x=this.buffer[x+3];return H+"("+A.join(",")+")"};D.prototype.cut=function(x){for(var t=0;t<this.buffer.length&&this.buffer[t+1]<x;)t+=4;for(var A=new Uint16Array(t),H=0;H<t;H+=4)A[H]=this.buffer[H],
A[H+1]=this.buffer[H+1],A[H+2]=Math.min(x,this.buffer[H+2]),A[H+3]=Math.min(this.buffer[H+3],t);return new D(A,Math.min(x,this.length),this.group)};D.prototype.findChild=function(x,t,A,H){for(var N=this.buffer,E=-1;x!=t;x=N[x+3])if(-1E8!=H){var p=N[x+1],z=N[x+2];if(0<A){if(z>H&&(E=x),z>H)break}else if(p<H&&(E=x),z>=H)break}else if(E=x,0<A)break;return E};return D}(),ya=function(){function D(x,t,A,H){this.node=x;this.from=t;this.index=A;this._parent=H}Object.defineProperty(D.prototype,"type",{get:function(){return this.node.type},
enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"name",{get:function(){return this.node.type.name},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"to",{get:function(){return this.from+this.node.length},enumerable:!0,configurable:!0});D.prototype.nextChild=function(x,t,A){for(var H=this;;){for(var N=H.node,E=N.children,p=N.positions,z=0<t?E.length:-1;x!=z;x+=t){N=E[x];var q=p[x]+H.from;if(!(-1E8!=A&&(0>t?q>=A:q+N.length<=A)))if(N instanceof sa){var n=N.findChild(0,
N.buffer.length,t,-1E8==A?-1E8:A-q);if(-1<n)return new fa(new Ga(H,N,x,q),null,n)}else if(!N.type.isRepeated||Ma(N))return x=new D(N,q,x,H),x.type.isRepeated?x.nextChild(0>t?N.children.length-1:0,t,A):x}if(!H.type.isRepeated)return null;x=H.index+t;H=H._parent}};Object.defineProperty(D.prototype,"firstChild",{get:function(){return this.nextChild(0,1,-1E8)},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"lastChild",{get:function(){return this.nextChild(this.node.children.length-
1,-1,-1E8)},enumerable:!0,configurable:!0});D.prototype.childAfter=function(x){return this.nextChild(0,1,x)};D.prototype.childBefore=function(x){return this.nextChild(this.node.children.length-1,-1,x)};D.prototype.nextSignificant=function(){for(var x=this;x.type.isRepeated;)x=x._parent;return x};Object.defineProperty(D.prototype,"parent",{get:function(){return this._parent?this._parent.nextSignificant():null},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"nextSibling",{get:function(){return this._parent?
this._parent.nextChild(this.index+1,1,-1):null},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"prevSibling",{get:function(){return this._parent?this._parent.nextChild(this.index-1,-1,-1):null},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"cursor",{get:function(){return new ca(this)},enumerable:!0,configurable:!0});D.prototype.resolve=function(x,t){void 0===t&&(t=0);return this.cursor.moveTo(x,t).node};D.prototype.getChild=function(x,t,A){void 0===t&&(t=null);
void 0===A&&(A=null);x=La(this,x,t,A);return x.length?x[0]:null};D.prototype.getChildren=function(x,t,A){void 0===t&&(t=null);void 0===A&&(A=null);return La(this,x,t,A)};D.prototype.toString=function(){return this.node.toString()};return D}(),Ga=function(){return function(D,x,t,A){this.parent=D;this.buffer=x;this.index=t;this.start=A}}(),fa=function(){function D(x,t,A){this.context=x;this._parent=t;this.index=A;this.type=x.buffer.group.types[x.buffer.buffer[A]]}Object.defineProperty(D.prototype,"name",
{get:function(){return this.type.name},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"from",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+1]},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"to",{get:function(){return this.context.start+this.context.buffer.buffer[this.index+2]},enumerable:!0,configurable:!0});D.prototype.child=function(x,t){var A=this.context.buffer;x=A.findChild(this.index+4,A.buffer[this.index+3],x,-1E8==t?
-1E8:t-this.context.start);return 0>x?null:new D(this.context,this,x)};Object.defineProperty(D.prototype,"firstChild",{get:function(){return this.child(1,-1E8)},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"lastChild",{get:function(){return this.child(-1,-1E8)},enumerable:!0,configurable:!0});D.prototype.childAfter=function(x){return this.child(1,x)};D.prototype.childBefore=function(x){return this.child(-1,x)};Object.defineProperty(D.prototype,"parent",{get:function(){return this._parent||
this.context.parent.nextSignificant()},enumerable:!0,configurable:!0});D.prototype.externalSibling=function(x){return this._parent?null:this.context.parent.nextChild(this.context.index+x,x,-1)};Object.defineProperty(D.prototype,"nextSibling",{get:function(){var x=this.context.buffer,t=x.buffer[this.index+3];return t<(this._parent?x.buffer[this._parent.index+3]:x.buffer.length)?new D(this.context,this._parent,t):this.externalSibling(1)},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,
"prevSibling",{get:function(){var x=this.context.buffer,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new D(this.context,this._parent,x.findChild(t,this.index,-1,-1))},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"cursor",{get:function(){return new ca(this)},enumerable:!0,configurable:!0});D.prototype.resolve=function(x,t){void 0===t&&(t=0);return this.cursor.moveTo(x,t).node};D.prototype.toString=function(){return this.context.buffer.childString(this.index)};
D.prototype.getChild=function(x,t,A){void 0===t&&(t=null);void 0===A&&(A=null);x=La(this,x,t,A);return x.length?x[0]:null};D.prototype.getChildren=function(x,t,A){void 0===t&&(t=null);void 0===A&&(A=null);return La(this,x,t,A)};return D}(),ca=function(){function D(x){this.buffer=null;this.stack=[];this.index=0;this.bufferNode=null;if(x instanceof ya)this.yieldNode(x);else{this.tree=x.context.parent;this.buffer=x.context;for(var t=x._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=
x;this.yieldBuf(x.index)}}Object.defineProperty(D.prototype,"name",{get:function(){return this.type.name},enumerable:!0,configurable:!0});D.prototype.yieldNode=function(x){if(!x)return!1;this.tree=x;this.type=x.type;this.from=x.from;this.to=x.to;return!0};D.prototype.yieldBuf=function(x,t){this.index=x;var A=this.buffer,H=A.start;A=A.buffer;this.type=t||A.group.types[A.buffer[x]];this.from=H+A.buffer[x+1];this.to=H+A.buffer[x+2];return!0};D.prototype.yield=function(x){if(!x)return!1;if(x instanceof
ya)return this.buffer=null,this.yieldNode(x);this.buffer=x.context;return this.yieldBuf(x.index,x.type)};D.prototype.toString=function(){return this.buffer?this.buffer.buffer.childString(this.index):this.tree.toString()};D.prototype.enter=function(x,t){if(!this.buffer)return this.yield(this.tree.nextChild(0>x?this.tree.node.children.length-1:0,x,t));var A=this.buffer.buffer;x=A.findChild(this.index+4,A.buffer[this.index+3],x,-1E8==t?-1E8:t-this.buffer.start);if(0>x)return!1;this.stack.push(this.index);
return this.yieldBuf(x)};D.prototype.firstChild=function(){return this.enter(1,-1E8)};D.prototype.lastChild=function(){return this.enter(-1,-1E8)};D.prototype.childAfter=function(x){return this.enter(1,x)};D.prototype.childBefore=function(x){return this.enter(-1,x)};D.prototype.parent=function(){if(!this.buffer)return this.yieldNode(this.tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());var x=this.buffer.parent.nextSignificant();this.buffer=null;return this.yieldNode(x)};D.prototype.sibling=
function(x){if(!this.buffer)return this.tree._parent?this.yield(this.tree._parent.nextChild(this.tree.index+x,x,-1E8)):!1;var t=this.buffer.buffer,A=this.stack.length-1;if(0>x){var H=0>A?0:this.stack[A]+4;if(this.index!=H)return this.yieldBuf(t.findChild(H,this.index,-1,-1E8))}else if(H=t.buffer[this.index+3],H<(0>A?t.buffer.length:t.buffer[this.stack[A]+3]))return this.yieldBuf(H);return 0>A?this.yield(this.buffer.parent.nextChild(this.buffer.index+x,x,-1E8)):!1};D.prototype.nextSibling=function(){return this.sibling(1)};
D.prototype.prevSibling=function(){return this.sibling(-1)};D.prototype.atLastNode=function(x){var t,A,H;if(t=this.buffer){if(0<x){if(this.index<t.buffer.buffer.length)return!1}else for(H=0;H<this.index;H++)if(t.buffer.buffer[H+3]<this.index)return!1;H=t.index;t=t.parent}else t=this.tree,H=t.index,t=t._parent;for(;t;A=t,H=A.index,t=A._parent,A){H+=x;for(var N=0>x?-1:t.node.children.length;H!=N;H+=x){var E=t.node.children[H];if(!E.type.isRepeated||E instanceof sa||Ma(E))return!1}}return!0};D.prototype.move=
function(x){if(this.enter(x,-1E8))return!0;for(;;){if(this.sibling(x))return!0;if(this.atLastNode(x)||!this.parent())return!1}};D.prototype.next=function(){return this.move(1)};D.prototype.prev=function(){return this.move(-1)};D.prototype.moveTo=function(x,t){for(void 0===t&&(t=0);(this.from==this.to||(1>t?this.from>=x:this.from>x)||(-1<t?this.to<=x:this.to<x))&&this.parent(););for(;0>t?this.childBefore(x):this.childAfter(x);)if(this.from==this.to||(1>t?this.from>=x:this.from>x)||(-1<t?this.to<=x:
this.to<x)){this.parent();break}return this};Object.defineProperty(D.prototype,"node",{get:function(){if(!this.buffer)return this.tree;var x=this.bufferNode,t=null,A=0;if(x&&x.context==this.buffer){var H=this.index,N=this.stack.length;a:for(;0<=N;){for(var E=x;E;E=E._parent)if(E.index==H){if(H==this.index)return E;t=E;A=N+1;break a}H=this.stack[--N]}}for(x=A;x<this.stack.length;x++)t=new fa(this.buffer,t,this.stack[x]);return this.bufferNode=new fa(this.buffer,t,this.index)},enumerable:!0,configurable:!0});
return D}(),ma=function(){function D(x,t){this.buffer=x;this.index=t}Object.defineProperty(D.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"size",{get:function(){return this.buffer[this.index-
1]},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"pos",{get:function(){return this.index},enumerable:!0,configurable:!0});D.prototype.next=function(){this.index-=4};D.prototype.fork=function(){return new D(this.buffer,this.index)};return D}(),ka=8;J.DefaultBufferLength=1024;J.NodeGroup=Ia;J.NodeProp=Ja;J.NodePropSource=Pa;J.NodeType=pa;J.Tree=Ra;J.TreeBuffer=sa;J.TreeCursor=ca};
shadow$provide[2]=function(Ia,Ka,ub,J){function La(W){La="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(I){return typeof I}:function(I){return I&&"function"===typeof Symbol&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I};return La(W)}function Ma(W){Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)};return Ma(W)}function Ea(W,I){if("function"!==typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function");
W.prototype=Object.create(I&&I.prototype,{constructor:{value:W,writable:!0,configurable:!0}});I&&Qa(W,I)}function Qa(W,I){Qa=Object.setPrototypeOf||function(G,C){G.__proto__=C;return G};return Qa(W,I)}function Fa(W,I){if(!(W instanceof I))throw new TypeError("Cannot call a class as a function");}function qa(W,I){for(var G=0;G<I.length;G++){var C=I[G];C.enumerable=C.enumerable||!1;C.configurable=!0;"value"in C&&(C.writable=!0);Object.defineProperty(W,C.key,C)}}function Ja(W,I,G){I&&qa(W.prototype,
I);G&&qa(W,G);return W}function Pa(W,I,G){var C=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;if(!(0==I&&0>=G)){var P=W.length-2;0<=P&&0>=G&&G==W[P+1]?W[P]+=I:0==I&&0==W[P]?W[P+1]+=G:C?(W[P]+=I,W[P+1]+=G):W.push(I,G)}}function pa(W,I,G){if(0!=G.length)if(I=I.length-2>>1,I<W.length)W[W.length-1]=W[W.length-1].append(G);else{for(;W.length<I;)W.push(q.Text.empty);W.push(G)}}function Ra(W,I,G){for(var C=W.inserted,P=0,S=0,X=0;X<W.sections.length;){var ea=W.sections[X++],ua=W.sections[X++];
if(0>ua)P+=ea,S+=ea;else{for(var xa=P,Ca=S,ra=q.Text.empty;;){xa+=ea;Ca+=ua;ua&&C&&(ra=ra.append(C[X-2>>1]));if(G||X==W.sections.length||0>W.sections[X+1])break;ea=W.sections[X++];ua=W.sections[X++]}I(P,xa,S,Ca,ra);P=xa;S=Ca}}}function sa(W,I,G){for(var C=[],P=3<arguments.length&&void 0!==arguments[3]&&arguments[3]?[]:null,S=new aa(W),X=new aa(I),ea=0,ua=0;;)if(-1==S.ins)ea+=S.len,S.next();else if(-1==X.ins&&ua<ea){var xa=Math.min(X.len,ea-ua);X.forward(xa);Pa(C,xa,-1);ua+=xa}else if(0<=X.ins&&(S.done||
ua<ea||ua==ea&&(X.len<S.len||X.len==S.len&&!G))){for(Pa(C,X.ins,-1);ea>ua&&!S.done&&ea+S.len<ua+X.len;)ea+=S.len,S.next();ua+=X.len;X.next()}else if(0<=S.ins){xa=0;for(var Ca=ea+S.len;;)if(0<=X.ins&&ua>ea&&ua+X.len<Ca)xa+=X.ins,ua+=X.len,X.next();else if(-1==X.ins&&ua<Ca){var ra=Math.min(X.len,Ca-ua);xa+=ra;X.forward(ra);ua+=ra}else break;Pa(C,xa,S.ins);P&&pa(P,C,S.text);ea=Ca;S.next()}else{if(S.done&&X.done)return P?new Q(C,P):new M(C);throw Error("Mismatched change set lengths");}}function ya(W,
I){for(var G=[],C=2<arguments.length&&void 0!==arguments[2]&&arguments[2]?[]:null,P=new aa(W),S=new aa(I),X=!1;;){if(P.done&&S.done)return C?new Q(G,C):new M(G);if(0==P.ins)Pa(G,P.len,0,X),P.next();else if(0!=S.len||S.done){if(P.done||S.done)throw Error("Mismatched change set lengths");var ea=Math.min(P.len2,S.len),ua=G.length;if(-1==P.ins){var xa=-1==S.ins?-1:S.off?0:S.ins;Pa(G,ea,xa,X);C&&xa&&pa(C,G,S.text)}else-1==S.ins?(Pa(G,P.off?0:P.len,ea,X),C&&pa(C,G,P.textBit(ea))):(Pa(G,P.off?0:P.len,S.off?
0:S.ins,X),C&&!S.off&&pa(C,G,S.text));X=(P.ins>ea||0<=S.ins&&S.len>ea)&&(X||G.length>ua);P.forward2(ea);S.forward(ea)}else Pa(G,0,S.ins,X),C&&pa(C,G,S.text),S.next()}}function Ga(W){var I=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;I=W[I];W.sort(function(X,ea){return X.from-ea.from});I=W.indexOf(I);for(var G=1;G<W.length;G++){var C=W[G],P=W[G-1];if(C.empty?C.from<=P.to:C.from<P.to){var S=P.from;P=Math.max(C.to,P.to);G<=I&&I--;W.splice(--G,2,C.anchor>C.head?oa.range(P,S):oa.range(S,P))}}return new oa(W,
I)}function fa(W,I){var G=!0,C=!1,P=void 0;try{for(var S=W.ranges[Symbol.iterator](),X;!(G=(X=S.next()).done);G=!0)if(X.value.to>I)throw new RangeError("Selection points outside of document");}catch(ea){C=!0,P=ea}finally{try{if(!G&&null!=S["return"])S["return"]()}finally{if(C)throw P;}}}function ca(W,I){return W==I||W.length==I.length&&W.every(function(G,C){return G===I[C]})}function ma(W,I,G){if(W.length!=I.length)return!1;for(var C=0;C<W.length;C++)if(!G(W[C],I[C]))return!1;return!0}function ka(W,
I,G){var C=G.map(function(ea){return W[ea.id]}),P=G.map(function(ea){return ea.type}),S=C.filter(function(ea){return!(ea&1)}),X=W[I.id]>>1;return function(ea,ua){var xa=ua?ua.reconfigure?ua.startState.config.address[I.id]:X<<1:null,Ca=null==xa,ra=!0,Na=!1,Ta=void 0;try{for(var Za=S[Symbol.iterator](),db;!(ra=(db=Za.next()).done);ra=!0)H(ea,db.value)&1&&(Ca=!0)}catch(ib){Na=!0,Ta=ib}finally{try{if(!ra&&null!=Za["return"])Za["return"]()}finally{if(Na)throw Ta;}}if(!Ca)return 0;Ca=[];for(ra=0;ra<C.length;ra++)if(Na=
N(ea,C[ra]),2==P[ra]){Ta=!0;Za=!1;db=void 0;try{for(var ab=Na[Symbol.iterator](),mb;!(Ta=(mb=ab.next()).done);Ta=!0)Ca.push(mb.value)}catch(ib){Za=!0,db=ib}finally{try{if(!Ta&&null!=ab["return"])ab["return"]()}finally{if(Za)throw db;}}}else Ca.push(Na);ab=I.combine(Ca);if(null!=xa&&I.compare(ab,N(ua.startState,xa)))return 0;ea.values[X]=ab;return 1}}function D(W,I){if(!$a.hasOwnProperty(I))throw new RangeError("Invalid precedence: ".concat(I));return new Va(W,$a[I])}function x(W,I){return W?D(I,W):
I}function t(W){return(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(W):[]).concat(Object.keys(W))}function A(W,I){function G(ra,Na){var Ta=P.get(ra);if(null!=Ta){if(Ta>=Na)return;var Za=C[Ta].indexOf(ra);-1<Za&&C[Ta].splice(Za,1)}P.set(ra,Na);if(Array.isArray(ra)){Ta=!0;Za=!1;var db=void 0;try{for(var ab=ra[Symbol.iterator](),mb;!(Ta=(mb=ab.next()).done);Ta=!0)G(mb.value,Na)}catch(ib){Za=!0,db=ib}finally{try{if(!Ta&&null!=ab["return"])ab["return"]()}finally{if(Za)throw db;}}}else if(ra instanceof
lb){if(ra.tag in S)throw new RangeError("Duplicate use of tag '".concat(String(ra.tag),"' in extensions"));S[ra.tag]=!0;G(I[ra.tag]||ra.extension,Na)}else ra.extension?G(ra.extension,Na):ra instanceof Va?G(ra.e,ra.prec):(C[Na].push(ra),ra instanceof Sa&&G(ra.facets,Na))}var C=[[],[],[],[]],P=new Map,S=Object.create(null);G(W,$a["default"]);W=!0;var X=!1,ea=void 0;try{for(var ua=t(I)[Symbol.iterator](),xa;!(W=(xa=ua.next()).done);W=!0){var Ca=xa.value;Ca in S||"full"==Ca||!I[Ca]||(S[Ca]=!0,G(I[Ca],
$a["default"]))}}catch(ra){X=!0,ea=ra}finally{try{if(!W&&null!=ua["return"])ua["return"]()}finally{if(X)throw ea;}}return C.reduce(function(ra,Na){return ra.concat(Na)})}function H(W,I){if(I&1)return 2;I>>=1;var G=W.status[I];if(4==G)throw Error("Cyclic dependency between fields and/or facets");if(G&2)return G;W.status[I]=4;G=W.config.dynamicSlots[I](W,W.applying);return W.status[I]=2|G}function N(W,I){return I&1?W.config.staticValues[I>>1]:W.values[I>>1]}function E(W,I,G){var C=I.reconfigure;if(C&&
C.append){C=Object.assign({},C);var P="undefined"==typeof Symbol?"__append"+Math.floor(4294967295*Math.random()):Symbol("appendConf");C[P]=C.append;C.append=void 0}P=I.selection;return{changes:I.changes instanceof Q?I.changes:Q.of(I.changes||[],G,W.facet(Gb)),selection:P&&(P instanceof oa?P:oa.single(P.anchor,P.head)),effects:I.effects?Array.isArray(I.effects)?I.effects:[I.effects]:xb,annotations:I.annotations?Array.isArray(I.annotations)?I.annotations:[I.annotations]:xb,scrollIntoView:!!I.scrollIntoView,
reconfigure:C}}function p(W,I,G){var C=E(W,I.length?I[0]:{},W.doc.length);I.length&&!1===I[0].filter&&(G=!1);for(var P=1;P<I.length;P++){!1===I[P].filter&&(G=!1);var S=!!I[P].sequential,X=void 0,ea=C;C=E(W,I[P],S?C.changes.newLength:W.doc.length);if(S){var ua=C.changes;var xa=Q.empty(C.changes.length);S=ea.changes.compose(C.changes)}else ua=C.changes.map(ea.changes),xa=ea.changes.mapDesc(C.changes,!0),S=ea.changes.compose(ua);C={changes:S,selection:C.selection?C.selection.map(xa):null===(X=ea.selection)||
void 0===X?void 0:X.map(ua),effects:Mb.mapEffects(ea.effects,ua).concat(Mb.mapEffects(C.effects,xa)),annotations:ea.annotations.length?ea.annotations.concat(C.annotations):C.annotations,scrollIntoView:ea.scrollIntoView||C.scrollIntoView,reconfigure:C.reconfigure?C.reconfigure.full||!ea.reconfigure?C.reconfigure:Object.assign({},ea.reconfigure,C.reconfigure):ea.reconfigure}}W=new zb(W,C.changes,C.selection,C.effects,C.annotations,C.reconfigure,C.scrollIntoView);if(G){G=W.startState;P=I=!0;X=!1;ea=
void 0;try{var Ca=G.facet(rb)[Symbol.iterator]();for(var ra;!(P=(ra=Ca.next()).done);P=!0){var Na=ra.value,Ta=Na(W);if(!1===Ta){I=!1;break}if(Array.isArray(Ta)){if(!0===I)var Za=Ta;else a:{C=I;S=Ta;xa=[];for(var db=ua=0;;){if(ua<C.length&&(db==S.length||S[db]>=C[ua])){var ab=C[ua++];var mb=C[ua++]}else if(db<S.length)ab=S[db++],mb=S[db++];else{Za=xa;break a}!xa.length||xa[xa.length-1]<ab?xa.push(ab,mb):xa[xa.length-1]<mb&&(xa[xa.length-1]=mb)}}I=Za}}}catch(ib){X=!0,ea=ib}finally{try{if(!P&&null!=
Ca["return"])Ca["return"]()}finally{if(X)throw ea;}}!0!==I&&(!1===I?(ra=W.changes.invertedDesc,Ca=Q.empty(G.doc.length)):(ra=W.changes.filter(I),Ca=ra.changes,ra=ra.filtered.invertedDesc),W=new zb(G,Ca,W.selection&&W.selection.map(ra),Mb.mapEffects(W.effects,ra),W.annotations,W.reconfigure,W.scrollIntoView));Ca=G.facet(dc);for(ra=Ca.length-1;0<=ra;ra--)Na=Ca[ra](W),W=Na instanceof zb?Na:Array.isArray(Na)&&1==Na.length&&Na[0]instanceof zb?Na[0]:p(G,Array.isArray(Na)?Na:[Na],!1);Ca=W}else Ca=W;return Ca}
function z(W){return function(I){if(!/\S/.test(I))return Rb.Space;a:if(Yb)var G=Yb.test(I);else{for(G=0;G<I.length;G++){var C=I[G];if(/\w/.test(C)||""<C&&(C.toUpperCase()!=C.toLowerCase()||qc.test(C))){G=!0;break a}}G=!1}if(G)return Rb.Word;for(G=0;G<W.length;G++)if(-1<I.indexOf(W[G]))return Rb.Word;return Rb.Other}}Object.defineProperty(J,"__esModule",{value:!0});J.combineConfig=function(W,I){var G=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},C={},P=!0,S=!1,X=void 0;try{for(var ea=
W[Symbol.iterator](),ua;!(P=(ua=ea.next()).done);P=!0)for(var xa=ua.value,Ca=0,ra=Object.keys(xa);Ca<ra.length;Ca++){var Na=ra[Ca],Ta=xa[Na],Za=C[Na];if(void 0===Za)C[Na]=Ta;else if(Za!==Ta&&void 0!==Ta)if(Object.hasOwnProperty.call(G,Na))C[Na]=G[Na](Za,Ta);else throw Error("Config merge conflict for field "+Na);}}catch(ab){S=!0,X=ab}finally{try{if(!P&&null!=ea["return"])ea["return"]()}finally{if(S)throw X;}}for(var db in I)void 0===C[db]&&(C[db]=I[db]);return C};J.precedence=D;J.tagExtension=function(W,
I){return new lb(W,I)};Object.defineProperty(J,"Text",{enumerable:!0,get:function(){return q.Text}});J.languageDataProp=J.Transaction=J.StateField=J.StateEffectType=J.StateEffect=J.SelectionRange=J.MapMode=J.IndentContext=J.Facet=J.EditorState=J.EditorSelection=J.CharCategory=J.ChangeSet=J.ChangeDesc=J.AnnotationType=J.Annotation=void 0;var q=Ka(0),n=Ka(1),r=/\r\n?|\n/,w;J.MapMode=w;(function(W){W[W.Simple=0]="Simple";W[W.TrackDel=1]="TrackDel";W[W.TrackBefore=2]="TrackBefore";W[W.TrackAfter=3]="TrackAfter"})(w||
(J.MapMode=w={}));var M=function(){function W(I){Fa(this,W);this.sections=I}Ja(W,[{key:"iterGaps",value:function(I){for(var G=0,C=0,P=0;G<this.sections.length;){var S=this.sections[G++],X=this.sections[G++];0>X?(I(C,P,S),P+=S):P+=X;C+=S}}},{key:"iterChangedRanges",value:function(I){Ra(this,I,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1)}},{key:"composeDesc",value:function(I){return this.empty?I:I.empty?this:ya(this,I)}},{key:"mapDesc",value:function(I){var G=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:!1;return I.empty?this:sa(this,I,G)}},{key:"mapPos",value:function(I){for(var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,C=2<arguments.length&&void 0!==arguments[2]?arguments[2]:w.Simple,P=0,S=0,X=0;X<this.sections.length;){var ea=this.sections[X++],ua=this.sections[X++],xa=P+ea;if(0>ua){if(xa>I)return S+(I-P);S+=ea}else{if(C!=w.Simple&&xa>=I&&(C==w.TrackDel&&P<I&&xa>I||C==w.TrackBefore&&P<I||C==w.TrackAfter&&xa>I))return null;if(xa>I||xa==I&&0>G&&!ea)return I==
P||0>G?S:S+ua;S+=ua}P=xa}if(I>P)throw new RangeError("Position ".concat(I," is out of range for changeset of length ").concat(P));return S}},{key:"touchesRange",value:function(I){for(var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:I,C=0,P=0;C<this.sections.length&&P<=G;){var S=this.sections[C++],X=this.sections[C++];S=P+S;if(0<=X&&P<=G&&S>=I)return P<I&&S>G?"cover":!0;P=S}return!1}},{key:"toString",value:function(){for(var I="",G=0;G<this.sections.length;){var C=this.sections[G++],P=
this.sections[G++];I+=(I?" ":"")+C+(0<=P?":"+P:"")}return I}},{key:"length",get:function(){for(var I=0,G=0;G<this.sections.length;G+=2)I+=this.sections[G];return I}},{key:"newLength",get:function(){for(var I=0,G=0;G<this.sections.length;G+=2){var C=this.sections[G+1];I+=0>C?this.sections[G]:C}return I}},{key:"empty",get:function(){return 0==this.sections.length||2==this.sections.length&&0>this.sections[1]}},{key:"invertedDesc",get:function(){for(var I=[],G=0;G<this.sections.length;){var C=this.sections[G++],
P=this.sections[G++];0>P?I.push(C,P):I.push(P,C)}return new W(I)}}]);return W}();J.ChangeDesc=M;var Q=function(W){function I(G,C){Fa(this,I);G=Ma(I).call(this,G);if(!G||"object"!==La(G)&&"function"!==typeof G){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");G=this}G.inserted=C;return G}Ea(I,W);Ja(I,[{key:"apply",value:function(G){if(this.length!=G.length)throw new RangeError("Applying change set to a document with the wrong length");Ra(this,function(C,
P,S,X,ea){return G=G.replace(S,S+(P-C),ea)},!1);return G}},{key:"mapDesc",value:function(G){return sa(this,G,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,!0)}},{key:"invert",value:function(G){for(var C=this.sections.slice(),P=[],S=0,X=0;S<C.length;S+=2){var ea=C[S],ua=C[S+1];if(0<=ua){C[S]=ua;C[S+1]=ea;for(ua=S>>1;P.length<ua;)P.push(q.Text.empty);P.push(ea?G.slice(X,X+ea):q.Text.empty)}X+=ea}return new I(C,P)}},{key:"compose",value:function(G){return this.empty?G:G.empty?this:ya(this,
G,!0)}},{key:"map",value:function(G){var C=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;return G.empty?this:sa(this,G,C,!0)}},{key:"iterChanges",value:function(G){Ra(this,G,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1)}},{key:"filter",value:function(G){var C=[],P=[],S=[],X=new aa(this),ea=0,ua=0;a:for(;;){for(var xa=ea==G.length?1E9:G[ea++];ua<xa||ua==xa&&0==X.len;){if(X.done)break a;var Ca=Math.min(X.len,xa-ua);Pa(S,Ca,-1);var ra=-1==X.ins?-1:0==X.off?X.ins:0;Pa(C,Ca,ra);
0<ra&&pa(P,C,X.text);X.forward(Ca);ua+=Ca}for(xa=G[ea++];ua<xa;){if(X.done)break a;Ca=Math.min(X.len,xa-ua);Pa(C,Ca,-1);Pa(S,Ca,-1==X.ins?-1:0==X.off?X.ins:0);X.forward(Ca);ua+=Ca}}return{changes:new I(C,P),filtered:new M(S)}}},{key:"toJSON",value:function(){for(var G=[],C=0;C<this.sections.length;C+=2){var P=this.sections[C],S=this.sections[C+1];0>S?G.push(P):0==S?G.push([P]):G.push([P,this.inserted[C>>1].toJSON()])}return G}},{key:"desc",get:function(){return new M(this.sections)}}],[{key:"of",
value:function(G,C,P){function S(){if(0<arguments.length&&void 0!==arguments[0]&&arguments[0]||ea.length){xa<C&&Pa(ea,C-xa,-1);var ra=new I(ea,ua);Ca=Ca?Ca.compose(ra.map(Ca)):ra;ea=[];ua=[];xa=0}}function X(ra){if(Array.isArray(ra)){var Na=!0,Ta=!1,Za=void 0;try{for(var db=ra[Symbol.iterator](),ab;!(Na=(ab=db.next()).done);Na=!0)X(ab.value)}catch(mb){Ta=!0,Za=mb}finally{try{if(!Na&&null!=db["return"])db["return"]()}finally{if(Ta)throw Za;}}}else if(ra instanceof I){if(ra.length!=C)throw new RangeError("Mismatched change set length (got ".concat(ra.length,
", expected ").concat(C,")"));S();Ca=Ca?Ca.compose(ra.map(Ca)):ra}else{Na=ra.from;Ta=ra.to;Ta=void 0===Ta?Na:Ta;ra=ra.insert;if(Na>Ta||0>Na||Ta>C)throw new RangeError("Invalid change range ".concat(Na," to ").concat(Ta," (in doc of length ").concat(C,")"));ra=ra?"string"==typeof ra?q.Text.of(ra.split(P||r)):ra:q.Text.empty;Za=ra.length;if(Na!=Ta||0!=Za)Na<xa&&S(),Na>xa&&Pa(ea,Na-xa,-1),Pa(ea,Ta-Na,Za),pa(ua,ea,ra),xa=Ta}}var ea=[],ua=[],xa=0,Ca=null;X(G);S(!Ca);return Ca}},{key:"empty",value:function(G){return new I(G?
[G,-1]:[],[])}},{key:"fromJSON",value:function(G){for(var C=[],P=[],S=0;S<G.length;S++){var X=G[S];if("number"==typeof X)C.push(X,-1);else if(1==X.length)C.push(X[0],0);else{for(;P.length<S;)P.push(q.Text.empty);P[S]=q.Text.of(X[1]);C.push(X[0],P[S].length)}}return new I(C,P)}}]);return I}(M);J.ChangeSet=Q;var aa=function(){function W(I){Fa(this,W);this.set=I;this.i=0;this.next()}Ja(W,[{key:"next",value:function(){var I=this.set.sections;this.i<I.length?(this.len=I[this.i++],this.ins=I[this.i++]):
(this.len=0,this.ins=-2);this.off=0}},{key:"textBit",value:function(I){var G=this.set.inserted,C=this.i-2>>1;return C>=G.length&&!I?q.Text.empty:G[C].slice(this.off,null==I?void 0:this.off+I)}},{key:"forward",value:function(I){I==this.len?this.next():(this.len-=I,this.off+=I)}},{key:"forward2",value:function(I){-1==this.ins?this.forward(I):I==this.ins?this.next():(this.ins-=I,this.off+=I)}},{key:"done",get:function(){return-2==this.ins}},{key:"len2",get:function(){return 0>this.ins?this.len:this.ins}},
{key:"text",get:function(){var I=this.set.inserted,G=this.i-2>>1;return G>=I.length?q.Text.empty:I[G]}}]);return W}(),Y=function(){function W(I,G,C){Fa(this,W);this.from=I;this.to=G;this.flags=C}Ja(W,[{key:"map",value:function(I){var G=I.mapPos(this.from);I=I.mapPos(this.to);return G==this.from&&I==this.to?this:new W(G,I,this.flags)}},{key:"extend",value:function(I){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:I;return I<=this.anchor&&G>=this.anchor?oa.range(I,G):oa.range(this.anchor,
Math.abs(I-this.anchor)>Math.abs(G-this.anchor)?I:G)}},{key:"eq",value:function(I){return this.anchor==I.anchor&&this.head==I.head}},{key:"toJSON",value:function(){return{anchor:this.anchor,head:this.head}}},{key:"anchor",get:function(){return this.flags&16?this.to:this.from}},{key:"head",get:function(){return this.flags&16?this.from:this.to}},{key:"empty",get:function(){return this.from==this.to}},{key:"assoc",get:function(){return this.flags&4?-1:this.flags&8?1:0}},{key:"bidiLevel",get:function(){var I=
this.flags&3;return 3==I?null:I}},{key:"goalColumn",get:function(){var I=this.flags>>5;return 33554431==I?void 0:I}}],[{key:"fromJSON",value:function(I){if(!I||"number"!=typeof I.anchor||"number"!=typeof I.head)throw new RangeError("Invalid JSON representation for SelectionRange");return oa.range(I.anchor,I.head)}}]);return W}();J.SelectionRange=Y;var oa=function(){function W(I){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;Fa(this,W);this.ranges=I;this.primaryIndex=G}Ja(W,[{key:"map",
value:function(I){return I.empty?this:W.create(this.ranges.map(function(G){return G.map(I)}),this.primaryIndex)}},{key:"eq",value:function(I){if(this.ranges.length!=I.ranges.length||this.primaryIndex!=I.primaryIndex)return!1;for(var G=0;G<this.ranges.length;G++)if(!this.ranges[G].eq(I.ranges[G]))return!1;return!0}},{key:"asSingle",value:function(){return 1==this.ranges.length?this:new W([this.primary])}},{key:"addRange",value:function(I){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
!0;return W.create([I].concat(this.ranges),G?0:this.primaryIndex+1)}},{key:"replaceRange",value:function(I){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.primaryIndex,C=this.ranges.slice();C[G]=I;return W.create(C,this.primaryIndex)}},{key:"toJSON",value:function(){return{ranges:this.ranges.map(function(I){return I.toJSON()}),primaryIndex:this.primaryIndex}}},{key:"primary",get:function(){return this.ranges[this.primaryIndex]}}],[{key:"fromJSON",value:function(I){if(!I||!Array.isArray(I.ranges)||
"number"!=typeof I.primaryIndex||I.primaryIndex>=I.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new W(I.ranges.map(function(G){return Y.fromJSON(G)}),I.primaryIndex)}},{key:"single",value:function(I){return new W([W.range(I,1<arguments.length&&void 0!==arguments[1]?arguments[1]:I)],0)}},{key:"create",value:function(I){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(0==I.length)throw new RangeError("A selection needs at least one range");
for(var C=0,P=0;P<I.length;P++){var S=I[P];if(S.empty?S.from<=C:S.from<C)return Ga(I.slice(),G);C=S.to}return new W(I,G)}},{key:"cursor",value:function(I){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,C=2<arguments.length?arguments[2]:void 0,P=3<arguments.length?arguments[3]:void 0;return new Y(I,I,(0==G?0:0>G?4:8)|(null==C?3:Math.min(2,C))|(null!==P&&void 0!==P?P:33554431)<<5)}},{key:"range",value:function(I,G,C){C=(null!==C&&void 0!==C?C:33554431)<<5;return G<I?new Y(G,I,16|C):
new Y(I,G,C)}}]);return W}();J.EditorSelection=oa;var Aa=0,Ba=function(){function W(I,G,C,P){Fa(this,W);this.combine=I;this.compareInput=G;this.compare=C;this.isStatic=P;this.id=Aa++;this["default"]=I([])}Ja(W,[{key:"of",value:function(I){return new Ha([],this,0,I)}},{key:"compute",value:function(I,G){if(this.isStatic)throw Error("Can't compute a static facet");return new Ha(I,this,1,G)}},{key:"computeN",value:function(I,G){if(this.isStatic)throw Error("Can't compute a static facet");return new Ha(I,
this,2,G)}},{key:"from",value:function(I,G){var C=this;return function(P){return x(G,C.compute([P],function(S){return I(S.field(P))}))}}},{key:"nFrom",value:function(I,G){var C=this;return function(P){return x(G,C.computeN([P],function(S){return I(S.field(P))}))}}}],[{key:"define",value:function(){var I=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new W(I.combine||function(G){return G},I.compareInput||function(G,C){return G===C},I.compare||(I.combine?function(G,C){return G===C}:
ca),!!I["static"])}}]);return W}();J.Facet=Ba;var Ha=function(){function W(I,G,C,P){Fa(this,W);this.dependencies=I;this.facet=G;this.type=C;this.value=P;this.id=Aa++}Ja(W,[{key:"dynamicSlot",value:function(I){var G=this.value,C=this.facet.compareInput,P=I[this.id]>>1,S=2==this.type,X=!1,ea=!1,ua=[],xa=!0,Ca=!1,ra=void 0;try{for(var Na=this.dependencies[Symbol.iterator](),Ta;!(xa=(Ta=Na.next()).done);xa=!0){var Za=Ta.value;"doc"==Za?X=!0:"selection"==Za?ea=!0:0==(I[Za.id]&1)&&ua.push(I[Za.id])}}catch(db){Ca=
!0,ra=db}finally{try{if(!xa&&null!=Na["return"])Na["return"]()}finally{if(Ca)throw ra;}}return function(db,ab){if(!ab||ab.reconfigure)db.values[P]=G(db);else{if(!(X&&ab.docChanged||ea&&(ab.docChanged||ab.selection)||ua.some(function(ib){return 0<(H(db,ib)&1)})))return 0;var mb=G(db);ab=ab.startState.values[P];if(S?ma(mb,ab,C):C(mb,ab))return 0;db.values[P]=mb}return 1}}}]);return W}(),Sa=function(){function W(I,G,C,P,S){Fa(this,W);this.id=I;this.createF=G;this.updateF=C;this.compareF=P;this.facets=
S}Ja(W,[{key:"slot",value:function(I){var G=this,C=I[this.id]>>1;return function(P,S){if(!S)return P.values[C]=G.createF(P),1;var X=0;if(S.reconfigure){var ea=S.startState.config.address[G.id];ea=null==ea?null:ea>>1;ea=null==ea?G.createF(S.startState):S.startState.values[ea];X=1}else ea=S.startState.values[C];S=G.updateF(ea,S);X||G.compareF(ea,S)||(X=1);X&&(P.values[C]=S);return X}}}],[{key:"define",value:function(I){var G=[],C=new W(Aa++,I.create,I.update,I.compare||function(Ca,ra){return Ca===ra},
G);if(I.provide){var P=!0,S=!1,X=void 0;try{for(var ea=I.provide[Symbol.iterator](),ua;!(P=(ua=ea.next()).done);P=!0){var xa=ua.value;xa instanceof Ba?G.push(xa.compute([C],function(Ca){return Ca.field(C)})):G.push(xa(C))}}catch(Ca){S=!0,X=Ca}finally{try{if(!P&&null!=ea["return"])ea["return"]()}finally{if(S)throw X;}}}return C}}]);return W}();J.StateField=Sa;var $a={fallback:3,"default":2,extend:1,override:0},Va=function C(I,G){Fa(this,C);this.e=I;this.prec=G},lb=function P(G,C){Fa(this,P);this.tag=
G;this.extension=C},kb=function(){function G(C,P,S,X,ea){Fa(this,G);this.source=C;this.replacements=P;this.dynamicSlots=S;this.address=X;this.staticValues=ea;for(this.statusTemplate=[];this.statusTemplate.length<ea.length;)this.statusTemplate.push(0)}Ja(G,[{key:"staticFacet",value:function(C){var P=this.address[C.id];return null==P?C["default"]:this.staticValues[P>>1]}}],[{key:"resolve",value:function(C){var P=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Object.create(null),S=2<arguments.length?
arguments[2]:void 0,X=[],ea=Object.create(null),ua=!0,xa=!1,Ca=void 0;try{for(var ra=A(C,P)[Symbol.iterator](),Na;!(ua=(Na=ra.next()).done);ua=!0){var Ta=Na.value;Ta instanceof Sa?X.push(Ta):(ea[Ta.facet.id]||(ea[Ta.facet.id]=[])).push(Ta)}}catch(qb){xa=!0,Ca=qb}finally{try{if(!ua&&null!=ra["return"])ra["return"]()}finally{if(xa)throw Ca;}}var Za=Object.create(null),db=[],ab=[];ua=function(){var qb=ib[mb];Za[qb.id]=ab.length<<1;ab.push(function(fc){return qb.slot(fc)})};for(var mb=0,ib=X;mb<ib.length;mb++)ua();
X=function(qb){var fc=ea[qb],gc=fc[0].facet;if(fc.every(function(U){return 0==U.type})){Za[gc.id]=db.length<<1|1;var Zb=gc.combine(fc.map(function(U){return U.value}));qb=S?S.config.address[gc.id]:null;null!=qb&&(qb=N(S,qb),gc.compare(Zb,qb)&&(Zb=qb));db.push(Zb)}else{qb=!0;var wc=!1,xc=void 0;try{var kc=function(){var U=y.value;0==U.type?(Za[U.id]=db.length<<1|1,db.push(U.value)):(Za[U.id]=ab.length<<1,ab.push(function(na){return U.dynamicSlot(na)}))};Zb=fc[Symbol.iterator]();for(var y;!(qb=(y=Zb.next()).done);qb=
!0)kc()}catch(U){wc=!0,xc=U}finally{try{if(!qb&&null!=Zb["return"])Zb["return"]()}finally{if(wc)throw xc;}}Za[gc.id]=ab.length<<1;ab.push(function(U){return ka(U,gc,fc)})}};for(var Dc in ea)X(Dc);return new G(C,P,ab.map(function(qb){return qb(Za)}),Za,db)}}]);return G}(),wb=Ba.define({combine:function(G){return G.some(function(C){return C})},"static":!0}),Gb=Ba.define({combine:function(G){return G.length?G[0]:void 0},"static":!0}),rb=Ba.define(),dc=Ba.define();Ia=new n.NodeProp;J.languageDataProp=
Ia;var ec=Ba.define();Ia=function(){function G(C){var P=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Fa(this,G);this.state=C;this.options=P}Ja(G,[{key:"textAfterPos",value:function(C){var P,S,X=null===(P=this.options)||void 0===P?void 0:P.simulateBreak;return C==X&&(null===(S=this.options)||void 0===S?0:S.simulateDoubleBreak)?"":this.state.sliceDoc(C,Math.min(C+100,null!=X&&X>C?X:1E9,this.state.doc.lineAt(C).to))}},{key:"countColumn",value:function(C,P){return(0,q.countColumn)(0>P?C:
C.slice(0,P),0,this.state.tabSize)}},{key:"lineIndent",value:function(C){var P,S=null===(P=this.options)||void 0===P?void 0:P.overrideIndentation;if(S&&(P=S(C.from),-1<P))return P;C=C.slice(0,Math.min(100,C.length));return this.countColumn(C,C.search(/\S/))}},{key:"column",value:function(C){var P,S=this.state.doc.lineAt(C),X=S.slice(0,C-S.from);C=this.countColumn(X,C-S.from);S=(null===(P=this.options)||void 0===P?0:P.overrideIndentation)?this.options.overrideIndentation(S.from):-1;-1<S&&(C+=S-this.countColumn(X,
X.search(/\S/)));return C}},{key:"unit",get:function(){return this.state.indentUnit}}]);return G}();J.IndentContext=Ia;var Xb=function(){function G(C,P){Fa(this,G);this.type=C;this.value=P}Ja(G,null,[{key:"define",value:function(){return new jc}}]);return G}();J.Annotation=Xb;var jc=function(){function G(){Fa(this,G)}Ja(G,[{key:"of",value:function(C){return new Xb(this,C)}}]);return G}();J.AnnotationType=jc;var Mb=function(){function G(C,P){Fa(this,G);this.type=C;this.value=P}Ja(G,[{key:"map",value:function(C){C=
this.type.map(this.value,C);return void 0===C?void 0:C==this.value?this:new G(this.type,C)}},{key:"is",value:function(C){return this.type==C}}],[{key:"define",value:function(){return new nc((0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).map||function(C){return C})}},{key:"mapEffects",value:function(C,P){if(!C.length)return C;var S=[],X=!0,ea=!1,ua=void 0;try{for(var xa=C[Symbol.iterator](),Ca;!(X=(Ca=xa.next()).done);X=!0){var ra=Ca.value.map(P);ra&&S.push(ra)}}catch(Na){ea=!0,ua=Na}finally{try{if(!X&&
null!=xa["return"])xa["return"]()}finally{if(ea)throw ua;}}return S}}]);return G}();J.StateEffect=Mb;var nc=function(){function G(C){Fa(this,G);this.map=C}Ja(G,[{key:"of",value:function(C){return new Mb(this,C)}}]);return G}();J.StateEffectType=nc;var zb=function(){function G(C,P,S,X,ea,ua,xa){Fa(this,G);this.startState=C;this.changes=P;this.selection=S;this.effects=X;this.annotations=ea;this.reconfigure=ua;this.scrollIntoView=xa;this._state=this._doc=null;S&&fa(S,P.newLength);ea.some(function(Ca){return Ca.type==
G.time})||(this.annotations=ea.concat(G.time.of(Date.now())))}Ja(G,[{key:"annotation",value:function(C){var P=!0,S=!1,X=void 0;try{for(var ea=this.annotations[Symbol.iterator](),ua;!(P=(ua=ea.next()).done);P=!0){var xa=ua.value;if(xa.type==C)return xa.value}}catch(Ca){S=!0,X=Ca}finally{try{if(!P&&null!=ea["return"])ea["return"]()}finally{if(S)throw X;}}}},{key:"newDoc",get:function(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}},{key:"newSelection",get:function(){return this.selection||
this.startState.selection.map(this.changes)}},{key:"state",get:function(){this._state||this.startState.applyTransaction(this);return this._state}},{key:"docChanged",get:function(){return!this.changes.empty}}]);return G}();J.Transaction=zb;zb.time=Xb.define();zb.userEvent=Xb.define();zb.addToHistory=Xb.define();var xb=[],Rb;J.CharCategory=Rb;(function(G){G[G.Word=0]="Word";G[G.Space=1]="Space";G[G.Other=2]="Other"})(Rb||(J.CharCategory=Rb={}));var qc=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
try{var Yb=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(G){}Ia=function(){function G(C,P,S){var X=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;Fa(this,G);this.config=C;this.doc=P;this.selection=S;this.applying=null;this.status=C.statusTemplate.slice();if(X&&!X.reconfigure)this.values=X.startState.values.slice();else if(this.values=C.dynamicSlots.map(function(Ca){return null}),X)for(var ea in C.address){var ua=C.address[ea],xa=X.startState.config.address[ea];null!=xa&&0==(ua&1)&&
(this.values[ua>>1]=N(X.startState,xa))}if(this.applying=X)X._state=this;for(X=0;X<this.config.dynamicSlots.length;X++)H(this,X<<1);this.applying=null}Ja(G,[{key:"field",value:function(C){var P=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,S=this.config.address[C.id];if(null==S){if(P)throw new RangeError("Field is not present in this state");}else return H(this,S),N(this,S)}},{key:"update",value:function(){for(var C=arguments.length,P=Array(C),S=0;S<C;S++)P[S]=arguments[S];return p(this,
P,!0)}},{key:"applyTransaction",value:function(C){var P=this.config;C.reconfigure&&(P=kb.resolve(C.reconfigure.full||P.source,Object.assign(P.replacements,C.reconfigure,{full:void 0}),this));new G(P,C.newDoc,C.newSelection,C)}},{key:"replaceSelection",value:function(C){"string"==typeof C&&(C=this.toText(C));return this.changeByRange(function(P){return{changes:{from:P.from,to:P.to,insert:C},range:oa.cursor(P.from+C.length)}})}},{key:"changeByRange",value:function(C){var P=this.selection,S=C(P.ranges[0]),
X=this.changes(S.changes);S=[S.range];for(var ea=1;ea<P.ranges.length;ea++){for(var ua=C(P.ranges[ea]),xa=this.changes(ua.changes),Ca=xa.map(X),ra=0;ra<ea;ra++)S[ra]=S[ra].map(Ca);S.push(ua.range.map(X.mapDesc(xa,!0)));X=X.compose(Ca)}return{changes:X,selection:oa.create(S,P.primaryIndex)}}},{key:"changes",value:function(){var C=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return C instanceof Q?C:Q.of(C,this.doc.length,this.facet(G.lineSeparator))}},{key:"toText",value:function(C){return q.Text.of(C.split(this.facet(G.lineSeparator)||
r))}},{key:"sliceDoc",value:function(){return this.doc.sliceString(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.doc.length,this.lineBreak)}},{key:"facet",value:function(C){var P=this.config.address[C.id];if(null==P)return C["default"];H(this,P);return N(this,P)}},{key:"toJSON",value:function(){return{doc:this.sliceDoc(),selection:this.selection.toJSON()}}},{key:"indentString",value:function(C){var P="";if(9==this.facet(G.indentUnit).charCodeAt(0))for(;C>=
this.tabSize;)P+="\t",C-=this.tabSize;for(var S=0;S<C;S++)P+=" ";return P}},{key:"phrase",value:function(C){var P=!0,S=!1,X=void 0;try{for(var ea=this.facet(G.phrases)[Symbol.iterator](),ua;!(P=(ua=ea.next()).done);P=!0){var xa=ua.value;if(Object.prototype.hasOwnProperty.call(xa,C))return xa[C]}}catch(Ca){S=!0,X=Ca}finally{try{if(!P&&null!=ea["return"])ea["return"]()}finally{if(S)throw X;}}return C}},{key:"charCategorizer",value:function(C){return z(this.languageDataAt("wordChars",C).join(""))}},
{key:"languageDataAt",value:function(C,P){for(var S=[],X=this.facet(G.syntax),ea=X.length?0:1;2>ea;ea++){var ua=this.facet(ea?ec:X[0].languageDataFacetAt(this,P)),xa=!0,Ca=!1,ra=void 0;try{for(var Na=ua[Symbol.iterator](),Ta;!(xa=(Ta=Na.next()).done);xa=!0){var Za=Ta.value;Object.prototype.hasOwnProperty.call(Za,C)&&S.push(Za[C])}}catch(db){Ca=!0,ra=db}finally{try{if(!xa&&null!=Na["return"])Na["return"]()}finally{if(Ca)throw ra;}}}return S}},{key:"tabSize",get:function(){return this.facet(G.tabSize)}},
{key:"lineBreak",get:function(){return this.facet(G.lineSeparator)||"\n"}},{key:"indentUnit",get:function(){var C=this.facet(G.indentUnit);return 9==C.charCodeAt(0)?this.tabSize*C.length:C.length}},{key:"tree",get:function(){var C=this.facet(G.syntax);return C.length?C[0].getTree(this):n.Tree.empty}}],[{key:"fromJSON",value:function(C){var P=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!C||"string"!=typeof C.doc)throw new RangeError("Invalid JSON representation for EditorState");return G.create({doc:C.doc,
selection:oa.fromJSON(C.selection),extensions:P.extensions})}},{key:"create",value:function(){var C=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},P=kb.resolve(C.extensions||[]),S=C.doc instanceof q.Text?C.doc:q.Text.of((C.doc||"").split(P.staticFacet(G.lineSeparator)||r));C=C.selection?C.selection instanceof oa?C.selection:oa.single(C.selection.anchor,C.selection.head):oa.single(0);fa(C,S.length);P.staticFacet(wb)||(C=C.asSingle());return new G(P,S,C)}}]);return G}();J.EditorState=Ia;
Ia.allowMultipleSelections=wb;Ia.indentation=Ba.define();Ia.tabSize=Ba.define({combine:function(G){return G.length?G[0]:4}});Ia.lineSeparator=Gb;Ia.indentUnit=Ba.define({combine:function(G){if(!G.length)return"  ";if(!/^(?: +|\t+)$/.test(G[0]))throw Error("Invalid indent unit: "+JSON.stringify(G[0]));return G[0]}});Ia.phrases=Ba.define();Ia.syntax=Ba.define();Ia.globalLanguageData=ec;Ia.foldable=Ba.define();Ia.changeFilter=rb;Ia.transactionFilter=dc};
shadow$provide[3]=function(Ia,Ka,ub,J){var La="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),Ma="undefined"==typeof Symbol?"__styleSet"+Math.floor(1E8*Math.random()):Symbol("styleSet"),Ea="undefined"==typeof Ia?window:Ia;Ia=J.StyleModule=function(qa,Ja){function Pa(Ga){if(/^@/.test(Ga))return[Ga];Ga=Ga.split(",");return Ra?Ga.map(Ra):Ga}function pa(Ga,fa,ca){var ma=[],ka=/^@(\w+)\b/.exec(Ga[0]);if(ka&&null==fa)return ca.push(Ga[0]+";");var D=function(t){if(/&/.test(t))pa(Ga.map(function(A){return sa?
sa(t,A):t.replace(/&/,A)}),fa[t],ca);else if("object"==typeof fa[t]){if(!ka)throw new RangeError("The value of a property ("+t+") should be a primitive value.");pa("keyframes"==ka[1]?[t]:Pa(t),fa[t],ma)}else ma.push(t.replace(/_.*/,"").replace(/[A-Z]/g,function(A){return"-"+A.toLowerCase()})+": "+fa[t]+";")},x;for(x in fa)D(x);(ma.length||ka&&"keyframes"==ka[1])&&ca.push(Ga.join(",")+" {"+ma.join(" ")+"}")}this.rules=[];Ja=Ja||{};var Ra=Ja.process,sa=Ja.extend,ya;for(ya in qa)pa(Pa(ya),qa[ya],this.rules)};
Ia.newName=function(){var qa=Ea[La]||1;Ea[La]=qa+1;return"ͼ"+qa.toString(36)};Ia.mount=function(qa,Ja){(qa[Ma]||new Fa(qa)).mount(Array.isArray(Ja)?Ja:[Ja])};var Qa=null,Fa=function(qa){if(qa.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Qa)return qa.adoptedStyleSheets=[Qa.sheet].concat(qa.adoptedStyleSheets),qa[Ma]=Qa;this.sheet=new CSSStyleSheet;qa.adoptedStyleSheets=[this.sheet].concat(qa.adoptedStyleSheets);Qa=this}else{this.styleTag=(qa.ownerDocument||qa).createElement("style");var Ja=
qa.head||qa;Ja.insertBefore(this.styleTag,Ja.firstChild)}this.modules=[];qa[Ma]=this};Fa.prototype.mount=function(qa){for(var Ja=this.sheet,Pa=0,pa=0,Ra=0;Ra<qa.length;Ra++){var sa=qa[Ra],ya=this.modules.indexOf(sa);ya<pa&&-1<ya&&(this.modules.splice(ya,1),pa--,ya=-1);if(-1==ya){if(this.modules.splice(pa++,0,sa),Ja)for(ya=0;ya<sa.rules.length;ya++)Ja.insertRule(sa.rules[ya],Pa++)}else{for(;pa<ya;)Pa+=this.modules[pa++].rules.length;Pa+=sa.rules.length;pa++}}if(!Ja){qa="";for(Ja=0;Ja<this.modules.length;Ja++)qa+=
this.modules[Ja].rules.join("\n")+"\n";this.styleTag.textContent=qa}}};
shadow$provide[4]=function(Ia,Ka,ub,J){function La(D,x){if(!(D instanceof x))throw new TypeError("Cannot call a class as a function");}function Ma(D,x){for(var t=0;t<x.length;t++){var A=x[t];A.enumerable=A.enumerable||!1;A.configurable=!0;"value"in A&&(A.writable=!0);Object.defineProperty(D,A.key,A)}}function Ea(D,x,t){x&&Ma(D.prototype,x);t&&Ma(D,t);return D}function Qa(D,x){return D.from-x.from||D.value.startSide-x.value.startSide}function Fa(D,x){var t=new Map,A=!0,H=!1,N=void 0;try{for(var E=
D[Symbol.iterator](),p;!(A=(p=E.next()).done);A=!0){var z=p.value;for(D=0;D<z.chunk.length;D++)500>z.chunk[D].maxPoint&&t.set(z.chunk[D],z.chunkPos[D])}}catch(w){H=!0,N=w}finally{try{if(!A&&null!=E["return"])E["return"]()}finally{if(H)throw N;}}A=new Set;H=!0;N=!1;E=void 0;try{for(var q=x[Symbol.iterator](),n;!(H=(n=q.next()).done);H=!0){var r=n.value;for(x=0;x<r.chunk.length;x++)t.get(r.chunk[x])==r.chunkPos[x]&&A.add(r.chunk[x])}}catch(w){N=!0,E=w}finally{try{if(!H&&null!=q["return"])q["return"]()}finally{if(N)throw E;
}}return A}function qa(D,x){for(var t=D[x];;){var A=(x<<1)+1;if(A>=D.length)break;var H=D[A];A+1<D.length&&0<=H.compare(D[A+1])&&(H=D[A+1],A++);if(0>t.compare(H))break;D[A]=t;D[x]=H;x=A}}function Ja(D,x,t,A,H,N){D["goto"](x);t["goto"](A);H=A+H;var E=A;for(x=A-x;;){A=D.to+x-t.to||D.endSide-t.endSide;var p=0>A?D.to+x:t.to,z=Math.min(p,H);if(D.point||t.point)D.point&&t.point&&(D.point==t.point||D.point.eq(t.point))||N.comparePoint(E,z,D.point,t.point);else{var q;if(q=z>E){a:{q=D.active;var n=t.active;
if(q.length!=n.length)q=!1;else{for(var r=0;r<q.length;r++)if(q[r]!=n[r]&&!q[r].eq(n[r])){q=!1;break a}q=!0}}q=!q}q&&N.compareRange(E,z,D.active,t.active)}if(p>H)break;E=p;0>=A&&D.next();0<=A&&t.next()}}function Pa(D,x){for(var t=D.length-1;x<t;x++)D[x]=D[x+1];D.pop()}function pa(D,x,t){for(var A=D.length-1;A>=x;A--)D[A+1]=D[A];D[x]=t}function Ra(D,x){for(var t=-1,A=1E9,H=0;H<x.length;H++)0>(x[H]-A||D[H].endSide-D[t].endSide)&&(t=H,A=x[H]);return t}Object.defineProperty(J,"__esModule",{value:!0});
J.RangeValue=J.RangeSetBuilder=J.RangeSet=J.Range=void 0;Ia=Ka(2);Ka=function(){function D(){La(this,D)}Ea(D,[{key:"eq",value:function(x){return this==x}},{key:"range",value:function(x){return new sa(x,1<arguments.length&&void 0!==arguments[1]?arguments[1]:x,this)}}]);return D}();J.RangeValue=Ka;Ka.prototype.startSide=Ka.prototype.endSide=0;Ka.prototype.point=!1;Ka.prototype.mapMode=Ia.MapMode.TrackDel;var sa=function H(x,t,A){La(this,H);this.from=x;this.to=t;this.value=A};J.Range=sa;var ya=function(){function x(t,
A,H,N){La(this,x);this.from=t;this.to=A;this.value=H;this.maxPoint=N}Ea(x,[{key:"findIndex",value:function(t,A){var H=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1E9*A,N=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(0>=t)return N;for(var E=0>A?this.to:this.from,p=E.length;;){if(N==p)return N;var z=N+p>>1,q=E[z]-t||(0>A?this.value[z].startSide:this.value[z].endSide)-H;if(z==N)return 0<=q?N:p;0<=q?p=z:N=z+1}}},{key:"between",value:function(t,A,H,N){A=this.findIndex(A,-1);for(H=
this.findIndex(H,1,void 0,A);A<H;A++)if(!1===N(this.from[A]+t,this.to[A]+t,this.value[A]))return!1}},{key:"map",value:function(t,A){for(var H=[],N=[],E=[],p=-1,z=-1,q=0;q<this.value.length;q++){var n=this.value[q],r=this.from[q]+t,w=this.to[q]+t;if(r==w){w=A.mapPos(r,n.startSide,n.mapMode);if(null==w)continue;r=w}else if(r=A.mapPos(r,n.startSide),w=A.mapPos(w,n.endSide),r>w||r==w&&0<n.startSide&&0>=n.endSide)continue;0>(w-r||n.endSide-n.startSide)||(0>p&&(p=r),n.point&&(z=Math.max(z,w-r)),H.push(n),
N.push(r-p),E.push(w-p))}return{mapped:H.length?new x(N,E,H,z):null,pos:p}}},{key:"length",get:function(){return this.to[this.to.length-1]}}]);return x}(),Ga=function(){function x(t,A){var H=2<arguments.length&&void 0!==arguments[2]?arguments[2]:x.empty,N=3<arguments.length?arguments[3]:void 0;La(this,x);this.chunkPos=t;this.chunk=A;this.nextLayer=H;this.maxPoint=N}Ea(x,[{key:"chunkEnd",value:function(t){return this.chunkPos[t]+this.chunk[t].length}},{key:"update",value:function(t){var A=t.add;A=
void 0===A?[]:A;var H=t.sort,N=t.filter,E=t.filterFrom;E=void 0===E?0:E;t=t.filterTo;t=void 0===t?this.length:t;if(0==A.length&&!N)return this;(void 0===H?0:H)&&A.slice().sort(Qa);if(this==x.empty)return A.length?x.of(A):this;H=(new ca(this,null,-1))["goto"](0);for(var p=0,z=[],q=new fa;H.value||p<A.length;)if(p<A.length&&0<=(H.from-A[p].from||H.startSide-A[p].value.startSide)){var n=A[p++];q.addInner(n.from,n.to,n.value)||z.push(n)}else if(1==H.rangeIndex&&H.chunkIndex<this.chunk.length&&(p==A.length||
this.chunkEnd(H.chunkIndex)<A[p].from)&&(!N||E>this.chunkEnd(H.chunkIndex)||t<this.chunkPos[H.chunkIndex])&&q.addChunk(this.chunkPos[H.chunkIndex],this.chunk[H.chunkIndex]))H.nextChunk();else{if(!N||E>H.to||t<H.from||N(H.from,H.to,H.value))q.addInner(H.from,H.to,H.value)||z.push(new sa(H.from,H.to,H.value));H.next()}return q.finishInner(this.nextLayer!=x.empty||z.length?this.nextLayer.update({add:z,filter:N,filterFrom:E,filterTo:t}):x.empty)}},{key:"map",value:function(t){if(0==t.length||this==x.empty)return this;
for(var A=[],H=[],N=-1,E=0;E<this.chunk.length;E++){var p=this.chunkPos[E],z=this.chunk[E],q=t.touchesRange(p,p+z.length);!1===q?(N=Math.max(N,z.maxPoint),A.push(z),H.push(t.mapPos(p))):!0===q&&(z=z.map(p,t),p=z.mapped,z=z.pos,p&&(N=Math.max(N,p.maxPoint),A.push(p),H.push(z)))}t=this.nextLayer.map(t);return 0==A.length?t:new x(H,A,t,N)}},{key:"between",value:function(t,A,H){if(this!=x.empty){for(var N=0;N<this.chunk.length;N++){var E=this.chunkPos[N],p=this.chunk[N];if(A>=E&&t<=E+p.length&&!1===p.between(E,
t-E,A-E,H))return}this.nextLayer.between(t,A,H)}}},{key:"iter",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return ma.from([this])["goto"](t)}},{key:"length",get:function(){var t=this.chunk.length-1;return 0>t?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}},{key:"size",get:function(){if(this==x.empty)return 0;var t=this.nextLayer.size,A=!0,H=!1,N=void 0;try{for(var E=this.chunk[Symbol.iterator](),p;!(A=(p=E.next()).done);A=!0)t+=p.value.value.length}catch(z){H=
!0,N=z}finally{try{if(!A&&null!=E["return"])E["return"]()}finally{if(H)throw N;}}return t}}],[{key:"iter",value:function(t){var A=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return ma.from(t)["goto"](A)}},{key:"compare",value:function(t,A,H,N){var E,p=null!==(E=N.minPointSize)&&void 0!==E?E:-1;E=t.filter(function(w){return 500<=w.maxPoint||w!=x.empty&&0>A.indexOf(w)&&w.maxPoint>=p});var z=A.filter(function(w){return 500<=w.maxPoint||w!=x.empty&&0>t.indexOf(w)&&w.maxPoint>=p}),q=Fa(E,
z),n=new ka(E,q,p),r=new ka(z,q,p);H.iterGaps(function(w,M,Q){return Ja(n,w,r,M,Q,N)});H.empty&&0==H.length&&Ja(n,0,r,0,0,N)}},{key:"spans",value:function(t,A,H,N){var E;t=(new ka(t,null,null!==(E=N.minPointSize)&&void 0!==E?E:-1))["goto"](A);for(E=t.openStart;;){var p=Math.min(t.to,H);t.point?(N.point(A,p,t.point,t.activeForPoint(t.to),E),E=t.openEnd(p)+(t.to>p?1:0)):p>A&&(N.span(A,p,t.active,E),E=t.openEnd(p));if(t.to>H)break;A=t.to;t.next()}return E}},{key:"of",value:function(t){var A=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:!1,H=new fa,N=!0,E=!1,p=void 0;try{for(var z=(t instanceof sa?[t]:A?t.slice().sort(Qa):t)[Symbol.iterator](),q;!(N=(q=z.next()).done);N=!0){var n=q.value;H.add(n.from,n.to,n.value)}}catch(r){E=!0,p=r}finally{try{if(!N&&null!=z["return"])z["return"]()}finally{if(E)throw p;}}return H.finish()}}]);return x}();J.RangeSet=Ga;Ga.empty=new Ga([],[],null,-1);Ga.empty.nextLayer=Ga.empty;var fa=function(){function x(){La(this,x);this.chunks=[];this.chunkPos=[];this.chunkStart=
-1;this.last=null;this.lastTo=this.lastFrom=-1E9;this.from=[];this.to=[];this.value=[];this.setMaxPoint=this.maxPoint=-1;this.nextLayer=null}Ea(x,[{key:"finishChunk",value:function(t){this.chunks.push(new ya(this.from,this.to,this.value,this.maxPoint));this.chunkPos.push(this.chunkStart);this.chunkStart=-1;this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint);this.maxPoint=-1;t&&(this.from=[],this.to=[],this.value=[])}},{key:"add",value:function(t,A,H){this.addInner(t,A,H)||(this.nextLayer||(this.nextLayer=
new x)).add(t,A,H)}},{key:"addInner",value:function(t,A,H){var N=t-this.lastTo||H.startSide-this.last.endSide;if(0>=N&&0>(t-this.lastFrom||H.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");if(0>N)return!1;250==this.from.length&&this.finishChunk(!0);0>this.chunkStart&&(this.chunkStart=t);this.from.push(t-this.chunkStart);this.to.push(A-this.chunkStart);this.last=H;this.lastFrom=t;this.lastTo=A;this.value.push(H);H.point&&(this.maxPoint=Math.max(this.maxPoint,
A-t));return!0}},{key:"addChunk",value:function(t,A){if(0>(t-this.lastTo||A.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0);this.setMaxPoint=Math.max(this.setMaxPoint,A.maxPoint);this.chunks.push(A);this.chunkPos.push(t);var H=A.value.length-1;this.last=A.value[H];this.lastFrom=A.from[H]+t;this.lastTo=A.to[H]+t;return!0}},{key:"finish",value:function(){return this.finishInner(Ga.empty)}},{key:"finishInner",value:function(t){this.from.length&&this.finishChunk(!1);
if(0==this.chunks.length)return t;t=new Ga(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);this.from=null;return t}}]);return x}();J.RangeSetBuilder=fa;var ca=function(){function x(t,A,H){var N=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;La(this,x);this.layer=t;this.skip=A;this.minPoint=H;this.rank=N}Ea(x,[{key:"goto",value:function(t){var A=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1E9;this.chunkIndex=this.rangeIndex=0;this.gotoInner(t,
A,!1);return this}},{key:"gotoInner",value:function(t,A,H){for(;this.chunkIndex<this.layer.chunk.length;){var N=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(N)||this.layer.chunkEnd(this.chunkIndex)<t||N.maxPoint<this.minPoint))break;this.chunkIndex++;H=!1}t=this.chunkIndex==this.layer.chunk.length?0:this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],-1,A);if(!H||this.rangeIndex<t)this.rangeIndex=t;this.next()}},{key:"forward",value:function(t,A){0>
(this.to-t||this.endSide-A)&&this.gotoInner(t,A,!0)}},{key:"next",value:function(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1E9;this.value=null;break}else{var t=this.layer.chunkPos[this.chunkIndex],A=this.layer.chunk[this.chunkIndex];this.from=t+A.from[this.rangeIndex];this.to=t+A.to[this.rangeIndex];this.value=A.value[this.rangeIndex];if(++this.rangeIndex==A.value.length){this.chunkIndex++;if(this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;
this.rangeIndex=0}if(0>this.minPoint||this.value.point&&this.to-this.from>=this.minPoint)break}}},{key:"nextChunk",value:function(){this.chunkIndex++;this.rangeIndex=0;this.next()}},{key:"compare",value:function(t){return this.from-t.from||this.startSide-t.startSide||this.to-t.to||this.endSide-t.endSide}},{key:"startSide",get:function(){return this.value?this.value.startSide:0}},{key:"endSide",get:function(){return this.value?this.value.endSide:0}}]);return x}(),ma=function(){function x(t){La(this,
x);this.heap=t}Ea(x,[{key:"goto",value:function(t){var A=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1E9,H=!0,N=!1,E=void 0;try{for(var p=this.heap[Symbol.iterator](),z;!(H=(z=p.next()).done);H=!0)z.value["goto"](t,A)}catch(q){N=!0,E=q}finally{try{if(!H&&null!=p["return"])p["return"]()}finally{if(N)throw E;}}for(A=this.heap.length>>1;0<=A;A--)qa(this.heap,A);this.next();return this}},{key:"forward",value:function(t,A){var H=!0,N=!1,E=void 0;try{for(var p=this.heap[Symbol.iterator](),z;!(H=
(z=p.next()).done);H=!0)z.value.forward(t,A)}catch(q){N=!0,E=q}finally{try{if(!H&&null!=p["return"])p["return"]()}finally{if(N)throw E;}}for(H=this.heap.length>>1;0<=H;H--)qa(this.heap,H);0>(this.to-t||this.value.endSide-A)&&this.next()}},{key:"next",value:function(){if(0==this.heap.length)this.from=this.to=1E9,this.value=null,this.rank=-1;else{var t=this.heap[0];this.from=t.from;this.to=t.to;this.value=t.value;this.rank=t.rank;t.value&&t.next();qa(this.heap,0)}}},{key:"startSide",get:function(){return this.value?
this.value.startSide:0}}],[{key:"from",value:function(t){for(var A=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,H=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,N=[],E=0;E<t.length;E++)for(var p=t[E];p!=Ga.empty;p=p.nextLayer)p.maxPoint>=H&&N.push(new ca(p,A,H,E));return 1==N.length?N[0]:new x(N)}}]);return x}(),ka=function(){function x(t,A,H){La(this,x);this.minPoint=H;this.active=[];this.activeTo=[];this.activeRank=[];this.minActive=-1;this.point=null;this.pointRank=this.pointFrom=
0;this.to=-1E9;this.endSide=0;this.openStart=-1;this.cursor=ma.from(t,A,H)}Ea(x,[{key:"goto",value:function(t){var A=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1E9;this.cursor["goto"](t,A);this.active.length=this.activeTo.length=this.activeRank.length=0;this.minActive=-1;this.to=t;this.endSide=A;this.openStart=-1;this.next();return this}},{key:"forward",value:function(t,A){for(;-1<this.minActive&&0>(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-A);)this.removeActive(this.minActive);
this.cursor.forward(t,A)}},{key:"removeActive",value:function(t){Pa(this.active,t);Pa(this.activeTo,t);Pa(this.activeRank,t);this.minActive=Ra(this.active,this.activeTo)}},{key:"addActive",value:function(t){var A=0,H=this.cursor,N=H.value,E=H.to;for(H=H.rank;A<this.activeRank.length&&this.activeRank[A]<=H;)A++;pa(this.active,A,N);pa(this.activeTo,A,E);pa(this.activeRank,A,H);t&&pa(t,A,this.cursor.from);this.minActive=Ra(this.active,this.activeTo)}},{key:"next",value:function(){var t=this.to;this.point=
null;for(var A=0>this.openStart?[]:null,H=0;;){var N=this.minActive;if(-1<N&&0>(this.activeTo[N]-this.cursor.from||this.active[N].endSide-this.cursor.startSide)){if(this.activeTo[N]>t){this.to=this.activeTo[N];this.endSide=this.active[N].endSide;break}this.removeActive(N);A&&Pa(A,N)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from;this.endSide=this.cursor.startSide;break}else if(N=this.cursor.value,N.point){this.point=N;this.pointFrom=this.cursor.from;this.pointRank=this.cursor.rank;
this.to=this.cursor.to;this.endSide=N.endSide;this.cursor.from<t&&(H=1);this.cursor.next();this.to>t&&this.forward(this.to,this.endSide);break}else this.addActive(A),this.cursor.next();else{this.to=this.endSide=1E9;break}}if(A){for(N=0;N<A.length&&A[N]<t;)N++;this.openStart=N+H}}},{key:"activeForPoint",value:function(t){if(!this.active.length)return this.active;for(var A=[],H=0;H<this.active.length&&!(this.activeRank[H]>this.pointRank);H++)(this.activeTo[H]>t||this.activeTo[H]==t&&this.active[H].endSide>
this.point.endSide)&&A.push(this.active[H]);return A}},{key:"openEnd",value:function(t){for(var A=0;A<this.activeTo.length&&this.activeTo[A]>t;)A++;return A}}]);return x}()};
shadow$provide[5]=function(na,Pa,lb,D){Object.defineProperty(D,"__esModule",{value:!0});var Ja={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"\x3d",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",
162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Ka={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"\x26",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"\x3c",189:"_",190:"\x3e",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"};na="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent);var Ca="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor);
Pa="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent);lb="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);var Ra="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),wa=na&&(lb||57>+na[1])||Pa&&lb;for(na=0;10>na;na++)Ja[48+na]=Ja[96+na]=String(na);for(na=1;24>=na;na++)Ja[na+111]="F"+na;for(na=65;90>=na;na++)Ja[na]=String.fromCharCode(na+32),Ka[na]=String.fromCharCode(na);for(var za in Ja)Ka.hasOwnProperty(za)||(Ka[za]=
Ja[za]);D.base=Ja;D.keyName=function(Fa){Fa=!(wa&&(Fa.ctrlKey||Fa.altKey||Fa.metaKey)||(Ca||Ra)&&Fa.shiftKey&&Fa.key&&1==Fa.key.length)&&Fa.key||(Fa.shiftKey?Ka:Ja)[Fa.keyCode]||Fa.key||"Unidentified";"Esc"==Fa&&(Fa="Escape");"Del"==Fa&&(Fa="Delete");"Left"==Fa&&(Fa="ArrowLeft");"Up"==Fa&&(Fa="ArrowUp");"Right"==Fa&&(Fa="ArrowRight");"Down"==Fa&&(Fa="ArrowDown");return Fa};D.shift=Ka};
shadow$provide[6]=function(Ia,Ka,ub,J){function La(l,e,a){La="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(b,d,g){for(;!Object.prototype.hasOwnProperty.call(b,d)&&(b=Fa(b),null!==b););if(b)return d=Object.getOwnPropertyDescriptor(b,d),d.get?d.get.call(g):d.value};return La(l,e,a||l)}function Ma(l){Ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?
"symbol":typeof e};return Ma(l)}function Ea(l,e){return!e||"object"!==Ma(e)&&"function"!==typeof e?Qa(l):e}function Qa(l){if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function Fa(l){Fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)};return Fa(l)}function qa(l,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");l.prototype=
Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}});e&&Ja(l,e)}function Ja(l,e){Ja=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return Ja(l,e)}function Pa(l){if(Array.isArray(l)){var e=0;for(var a=Array(l.length);e<l.length;e++)a[e]=l[e];e=a}else e=void 0;e||(e=Symbol.iterator in Object(l)||"[object Arguments]"===Object.prototype.toString.call(l)?Array.from(l):void 0);if(!(l=e))throw new TypeError("Invalid attempt to spread non-iterable instance");return l}
function pa(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function");}function Ra(l,e){for(var a=0;a<e.length;a++){var b=e[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(l,b.key,b)}}function sa(l,e,a){e&&Ra(l.prototype,e);a&&Ra(l,a);return l}function ya(l){return l.getSelection?l.getSelection():document.getSelection()}function Ga(l){var e=l.isCollapsed;e&&hb.chrome&&l.rangeCount&&!l.getRangeAt(0).collapsed&&(e=!1);return e}
function fa(l,e){if(!e.anchorNode)return!1;try{return l.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)}catch(a){return!1}}function ca(l){if(3==l.nodeType){var e=Ec||(Ec=document.createRange());e.setEnd(l,l.nodeValue.length);e.setStart(l,0);return e.getClientRects()}return 1==l.nodeType?l.getClientRects():[]}function ma(l,e,a,b){return a?D(l,e,a,b,-1)||D(l,e,a,b,1):!1}function ka(l){for(var e=0;;e++)if(l=l.previousSibling,!l)return e}function D(l,e,a,b,d){for(;;){if(l==a&&
e==b)return!0;if(e==(0>d?0:x(l))){if("DIV"==l.nodeName)return!1;var g=l.parentNode;if(!g||1!=g.nodeType)return!1;e=ka(l)+(0>d?0:1);l=g}else if(1==l.nodeType)l=l.childNodes[e+(0>d?-1:0)],e=0>d?x(l):0;else return!1}}function x(l){return 3==l.nodeType?l.nodeValue.length:l.childNodes.length}function t(l,e){e=e?l.left:l.right;return{left:e,right:e,top:l.top,bottom:l.bottom}}function A(l){if(l.setActive)return l.setActive();if(Nb)return l.focus(Nb);for(var e=[],a=l;a&&(e.push(a,a.scrollTop,a.scrollLeft),
a!=a.ownerDocument);a=a.parentNode);l.focus(null==Nb?{get preventScroll(){Nb={preventScroll:!0};return!0}}:void 0);if(!Nb)for(Nb=!1,l=0;l<e.length;){a=e[l++];var b=e[l++],d=e[l++];a.scrollTop!=b&&(a.scrollTop=b);a.scrollLeft!=d&&(a.scrollLeft=d)}}function H(l){var e=l.nextSibling;l.parentNode.removeChild(l);return e}function N(l,e,a,b){var d=e,g=e,k=0;0==e&&0>a||e==b&&0<=a?hb.chrome||hb.gecko||(e?(d--,k=1):(g++,k=-1)):0>a?d--:g++;e=Ec||(Ec=document.createRange());e.setEnd(l,g);e.setStart(l,d);l=e.getBoundingClientRect();
return k?t(l,0>k):l}function E(l,e,a,b,d,g){var k=l.childCursor(),u=k.findPos(a,1),F=u.i;u=u.off;var L=k.findPos(e,-1);k=L.i;L=L.off;e-=a;a=!0;var R=!1,T=void 0;try{for(var da=b[Symbol.iterator](),ba;!(a=(ba=da.next()).done);a=!0)e+=ba.value.length}catch(va){R=!0,T=va}finally{try{if(!a&&null!=da["return"])da["return"]()}finally{if(R)throw T;}}l.length+=e;da=l.children;if(k==F&&L){ba=da[k];if(1==b.length&&ba.merge(L,u,b[0],d,g))return;if(0==b.length){ba.merge(L,u,null,d,g);return}u=ba.slice(u);u.merge(0,
0,b[b.length-1],0,g)?b[b.length-1]=u:b.push(u);F++;g=u=0}u?(ba=da[F],b.length&&ba.merge(0,u,b[b.length-1],0,g)?(b.pop(),g=0):ba.merge(0,u,null,0,0)):F<da.length&&b.length&&da[F].merge(0,0,b[b.length-1],0,g)&&(b.pop(),g=0);L?(u=da[k],b.length&&u.merge(L,u.length,b[0],d,0)?(b.shift(),d=0):u.merge(L,u.length,null,0,0),k++):k&&b.length&&(u=da[k-1],u.merge(u.length,u.length,b[0],d,0)&&(b.shift(),d=0));for(;k<F&&b.length&&da[F-1].become(b[b.length-1]);)b.pop(),F--,g=0;for(;k<F&&b.length&&da[k].become(b[0]);)b.shift(),
k++,d=0;!b.length&&k&&F<da.length&&d&&g&&da[F].merge(0,0,da[k-1],d,g)&&k--;(b.length||k!=F)&&l.replaceChildren(k,F,b)}function p(l,e,a){for(var b=0,d=0;b<e.length;b++){var g=e[b],k=d+g.length;if(!(k==d&&0>=g.getSide())){if(a>d&&a<k&&g.dom.parentNode==l)return g.domAtPos(a-d);if(a<=d)break;d=k}}for(;0<b;b--)if(a=e[b-1].dom,a.parentNode==l)return lc.after(a);return new lc(l,0)}function z(l,e,a){var b,d=l.children;0<a&&e instanceof Vc&&d.length&&(b=d[d.length-1])instanceof Vc&&b.mark.eq(e.mark)?z(b,
e.children[0],a-1):(d.push(e),e.setParent(l));l.length+=e.length}function q(l,e,a){for(var b=0,d=0;d<l.children.length;d++){var g=l.children[d],k=b+g.length;if(!(k==b&&0>=g.getSide())){if(0>=a||k==l.length?k>=e:k>e)return g.coordsAt(e-b,a);b=k}}return(l.dom.lastChild||l.dom).getBoundingClientRect()}function n(l,e){for(var a in l)"class"==a&&e["class"]?e["class"]+=" "+l["class"]:"style"==a&&e.style?e.style+=";"+l.style:e[a]=l[a];return e}function r(l,e){if(l==e)return!0;if(!l||!e)return!1;var a=Object.keys(l),
b=Object.keys(e);if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++){var g=a[d];if(-1==b.indexOf(g)||l[g]!==e[g])return!1}return!0}function w(l,e,a){if(e)for(var b in e)a&&b in a||l.removeAttribute(b);if(a)for(var d in a)e&&e[d]==a[d]||l.setAttribute(d,a[d])}function M(l){var e=l.inclusiveStart,a=l.inclusiveEnd;null==e&&(e=l.inclusive);null==a&&(a=l.inclusive);return{start:e||!1,end:a||!1}}function Q(l,e,a){var b=a.length-1;0<=b&&a[b]+4>l?a[b]=Math.max(a[b],e):a.push(l,e)}function aa(l){return l.replace(/\$\w[\w\.]*/g,
function(e){e=e.slice(1).split(".");for(var a="",b=1;b<=e.length;b++)a+=".cm-"+e.slice(0,b).join("-");return a})}function Y(l,e){return new U.StyleModule(e,{process:function(a){a=aa(a);return/\$/.test(a)?a.replace(/\$/,l):l+" "+a},extend:function(a,b){a=aa(a);return b.slice(0,l.length+1)==l+" "?l+" "+a.replace(/&/,b.slice(l.length+1)):a.replace(/&/,b)}})}function oa(l){if(0>l.indexOf("."))return"cm-"+l;l=l.split(".");for(var e="",a=1;a<=l.length;a++)e+=(e?" ":"")+"cm-"+l.slice(0,a).join("-");return e}
function Aa(l){for(var e=[],a=0;a<l.length;a++)e.push(1<<+l[a]);return e}function Ba(l,e){var a=l.length;e=e==dd?1:2;if(!l||1==e&&!nd.test(l))return[new rc(0,a,0)];for(var b=0,d=e,g=e;b<a;b++){var k=l.charCodeAt(b);k=247>=k?od[k]:1424<=k&&1524>=k?2:1536<=k&&1785>=k?pd[k-1536]:1774<=k&&2220>=k?4:8192<=k&&8203>=k?256:8204==k?256:1;512==k?k=d:8==k&&4==g&&(k=16);yb[b]=4==k?2:k;k&7&&(g=k);d=k}g=0;for(l=k=e;g<a;g++){b=yb[g];if(128==b)g<a-1&&k==yb[g+1]&&k&24?b=yb[g]=k:yb[g]=256;else if(64==b){for(d=g+1;d<
a&&64==yb[d];)d++;for(k=g&&8==k||d<a&&8==yb[d]?1==l?1:8:256;g<d;g++)yb[g]=k;g=d-1}else 8==b&&1==l&&(yb[g]=1);k=b;b&7&&(l=b)}for(b=0;b<a;b++)if(256==yb[b]){for(l=b+1;l<a&&256==yb[l];)l++;d=1==(b?yb[b-1]:e);for(d=d==(1==(l<a?yb[l]:e))?d?1:2:e;b<l;b++)yb[b]=d;b=l-1}l=[];if(1==e)for(e=0;e<a;){b=e;for(d=1!=yb[e++];e<a&&d==(1!=yb[e]);)e++;if(d)for(d=e;d>b;){g=d;for(k=2!=yb[--d];d>b&&k==(2!=yb[d-1]);)d--;l.push(new rc(d,g,k?2:1))}else l.push(new rc(b,e,0))}else for(e=0;e<a;){b=e;for(d=2==yb[e++];e<a&&d==
(2==yb[e]);)e++;l.push(new rc(b,e,d?1:2))}return l}function Ha(l,e,a,b,d){var g,k=b.head-l.from,u=-1;if(0==k){if(!d||!l.length)return null;e[0].level!=a&&(k=e[0].side(!1,a),u=0)}else if(k==l.length){if(d)return null;var F=e[e.length-1];F.level!=a&&(k=F.side(!0,a),u=e.length-1)}0>u&&(u=rc.find(e,k,null!==(g=b.bidiLevel)&&void 0!==g?g:-1,b.assoc));b=e[u];k==b.side(d,a)&&(b=e[u+=d?1:-1],k=b.side(!d,a));F=d==(b.dir==a);g=l.findClusterBreak(k,F);ed=l.slice(Math.min(k,g),Math.max(k,g));return g!=b.side(d,
a)?y.EditorSelection.cursor(g+l.from,F?-1:1,b.level):(e=u==(d?e.length-1:0)?null:e[u+(d?1:-1)])||b.level==a?e&&e.level<b.level?y.EditorSelection.cursor(e.side(!d,a)+l.from,0,e.level):y.EditorSelection.cursor(g+l.from,0,b.level):y.EditorSelection.cursor(d?l.to:l.from,d?-1:1,a)}function Sa(l,e){var a,b;null==l[e]&&(a=l[e-1])instanceof v&&(b=l[e+1])instanceof v&&l.splice(e-1,3,new v(a.length+1+b.length))}function $a(l,e,a){var b=new O;na.RangeSet.compare(l,e,a,b);return b.changes}function Va(l,e,a){l=
l.facet(ta);if(l.length)l[0](e);else if(window.onerror)window.onerror(String(e),a,void 0,void 0,e);else a?console.error(a+":",e):console.error(e)}function lb(l,e,a){var b=[],d=l,g=0;na.RangeSet.spans(a.facet(Ab),l,e,{span:function(){},point:function(k,u){k>d&&(b.push({from:d,to:k}),g+=k-d);d=u},minPointSize:20});d<e&&(b.push({from:d,to:e}),g+=e-d);return{total:g,ranges:b}}function kb(l,e){var a=l.ranges;if(0>=e)return a[0].from;if(1<=e)return a[a.length-1].to;l=Math.floor(l.total*e);for(e=0;;e++){var b=
a[e],d=b.from;b=b.to-d;if(l<=b)return d+l;l-=b}}function wb(l,e){var a=0,b=!0,d=!1,g=void 0;try{for(var k=l.ranges[Symbol.iterator](),u;!(b=(u=k.next()).done);b=!0){var F=u.value,L=F.from,R=F.to;if(e<=R){a+=e-L;break}a+=R-L}}catch(T){d=!0,g=T}finally{try{if(!b&&null!=k["return"])k["return"]()}finally{if(d)throw g;}}return a/l.total}function Gb(l,e){var a=!0,b=!1,d=void 0;try{for(var g=l[Symbol.iterator](),k;!(a=(k=g.next()).done);a=!0){var u=k.value;if(e(u))return u}}catch(F){b=!0,d=F}finally{try{if(!a&&
null!=g["return"])g["return"]()}finally{if(b)throw d;}}}function rb(l,e){var a=ya(l.root);a=a.focusNode&&dc(a.focusNode,a.focusOffset,0);if(!a)return nb.none;var b=l.docView.nearest(a),d=a;if(b instanceof sc){for(;b.parent instanceof sc;)b=b.parent;var g=b.posAtStart;var k=g+b.length;d=b.dom}else if(b instanceof hc){for(;d.parentNode!=b.dom;)d=d.parentNode;for(k=d.previousSibling;k&&!Ob.get(k);)k=k.previousSibling;g=k=k?Ob.get(k).posAtEnd:b.posAtStart}else return nb.none;b=e.mapPos(g,1);e=Math.max(b,
e.mapPos(k,-1));k=a.nodeValue;l=l.state;if(e-b<k.length)if(l.sliceDoc(b,Math.min(l.doc.length,b+k.length))==k)e=b+k.length;else if(l.sliceDoc(Math.max(0,e-k.length),e)==k)b=e-k.length;else return nb.none;else if(l.sliceDoc(b,e)!=k)return nb.none;return nb.set(nb.replace({widget:new Pd(d,a)}).range(b,e))}function dc(l,e,a){for(;;){if(3==l.nodeType)return l;if(1==l.nodeType&&0<e&&0>=a)l=l.childNodes[e-1],e=x(l);else if(1==l.nodeType&&e<l.childNodes.length&&0<=a)l=l.childNodes[e],e=0;else return null}}
function ec(l,e){return 1!=l.nodeType?0:(e&&"false"==l.childNodes[e-1].contentEditable?1:0)|(e<l.childNodes.length&&"false"==l.childNodes[e].contentEditable?2:0)}function Xb(l,e,a){var b=new Qd;na.RangeSet.compare(l,e,a,b);return b.changes}function jc(l,e){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,b=l.charCategorizer(e),d=l.doc.lineAt(e),g=e-d.from;if(0==d.length)return y.EditorSelection.cursor(e);0==g?a=1:g==d.length&&(a=-1);var k=g,u=g;0>a?k=d.findClusterBreak(g,!1):u=d.findClusterBreak(g,
!0);for(a=b(d.slice(k,u));0<k;){g=d.findClusterBreak(k,!1);if(b(d.slice(g,k))!=a)break;k=g}for(;u<d.length;){g=d.findClusterBreak(u,!0);if(b(d.slice(u,g))!=a)break;u=g}return y.EditorSelection.range(k+d.from,u+d.from)}function Mb(l,e){return l.top<e.bottom-1&&l.bottom>e.top+1}function nc(l,e){return e<l.top?{top:e,left:l.left,right:l.right,bottom:l.bottom}:l}function zb(l,e){return e>l.bottom?{top:l.top,left:l.left,right:l.right,bottom:e}:l}function xb(l,e,a){for(var b,d,g,k,u,F,L,R,T=l.firstChild;T;T=
T.nextSibling)for(var da=ca(T),ba=0;ba<da.length;ba++){var va=da[ba];d&&Mb(d,va)&&(va=nc(zb(va,d.bottom),d.top));var Wa=va.left>e?va.left-e:Math.max(0,e-va.right),Xa=va.top>a?va.top-a:Math.max(0,a-va.bottom);if(0==Wa&&0==Xa)return 3==T.nodeType?Rb(T,e,a):xb(T,e,a);if(!b||k>Xa||k==Xa&&g>Wa)b=T,d=va,g=Wa,k=Xa;0==Wa?a>va.bottom&&(!L||L.bottom<va.bottom)?(u=T,L=va):a<va.top&&(!R||R.top>va.top)&&(F=T,R=va):L&&Mb(L,va)?L=zb(L,va.bottom):R&&Mb(R,va)&&(R=nc(R,va.top))}L&&L.bottom>=a?(b=u,d=L):R&&R.top<=a&&
(b=F,d=R);if(!b)return{node:l,offset:0};k=Math.max(d.left,Math.min(d.right,e));if(3==b.nodeType)return Rb(b,k,a);if(!g&&"true"==b.contentEditable)return xb(b,k,a);e=Array.prototype.indexOf.call(l.childNodes,b)+(e>=(d.left+d.right)/2?1:0);return{node:l,offset:e}}function Rb(l,e,a){for(var b=l.nodeValue.length,d=Ec||(Ec=document.createRange()),g=0;g<b;g++){d.setEnd(l,g+1);d.setStart(l,g);for(var k=d.getClientRects(),u=0;u<k.length;u++){var F=k[u];if(F.top!=F.bottom&&F.left-1<=e&&F.right+1>=e&&F.top-
1<=a&&F.bottom+1>=a){a=e=e>=(F.left+F.right)/2;if(hb.chrome||hb.gecko)d.setEnd(l,g),d.getBoundingClientRect().left==F.right&&(a=!e);return{node:l,offset:g+(a?1:0)}}}}return{node:l,offset:0}}function qc(l,e){for(var a=e.x,b=e.y,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,g=l.contentDOM.getBoundingClientRect(),k,u=l.defaultLineHeight/2,F=!1;;){k=l.blockAtHeight(b,g.top);if(k.top>b||k.bottom<b){d=k.top>b?-1:1;b=Math.min(k.bottom-u,Math.max(k.top+u,b));if(F)return-1;F=!0}if(k.type==tb.Text)break;
b=0<d?k.bottom+u:k.top-u}d=k.from;if(d<l.viewport.from)return 0==l.viewport.from?0:null;if(d>l.viewport.to)return l.viewport.to==l.state.doc.length?l.state.doc.length:null;a=Math.max(g.left+1,Math.min(g.right-1,a));k=l.root;u=k.elementFromPoint(a,b);g=-1;if(u&&l.contentDOM.contains(u)&&!(l.docView.nearest(u)instanceof Db))if(k.caretPositionFromPoint){if(k=k.caretPositionFromPoint(a,b)){var L=k.offsetNode;g=k.offset}}else k.caretRangeFromPoint&&(k=k.caretRangeFromPoint(a,b))&&(L=k.startContainer,g=
k.startOffset);L&&l.docView.dom.contains(L)||(L=hc.find(l.docView,d),a=xb(L.dom,a,b),L=a.node,g=a.offset);return l.docView.posFromDOM(L,g)}function Yb(l,e,a,b){for(var d=l.state.doc.lineAt(e.head),g=l.bidiSpans(d),k=null;;){var u=Ha(d,g,l.textDirection,e,a),F=ed;if(!u){if(d.number==(a?l.state.doc.lines:1))return e;F="\n";d=l.state.doc.line(d.number+(a?1:-1));g=l.bidiSpans(d);u=y.EditorSelection.cursor(a?d.from:d.to)}if(!k){if(!b)return u;k=b(F)}else if(!k(F))return e;e=u}}function W(l,e,a){var b=
l.state.charCategorizer(e),d=b(a);return function(g){g=b(g);d==y.CharCategory.Space&&(d=g);return d==g}}function I(l,e){if(l.state.selection.primary.empty)return!1;l=ya(l.root);if(0==l.rangeCount)return!0;l=l.getRangeAt(0).getClientRects();for(var a=0;a<l.length;a++){var b=l[a];if(b.left<=e.clientX&&b.right>=e.clientX&&b.top<=e.clientY&&b.bottom>=e.clientY)return!0}return!1}function G(l,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var a=e.target,b;a!=l.contentDOM;a=a.parentNode)if(!a||
11==a.nodeType||(b=Ob.get(a))&&b.ignoreEvent(e))return!1;return!0}function C(l){var e=l.dom.parentNode;if(e){var a=e.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px";a.focus();setTimeout(function(){l.focus();a.remove();P(l,a.value)},50)}}function P(l,e){var a=l.state,b=1,d=a.toText(e),g=d.lines==a.selection.ranges.length;var k=qd&&a.selection.ranges.every(function(u){return u.empty})&&qd==d.toString()?{changes:a.selection.ranges.map(function(u){return a.doc.lineAt(u.from)}).filter(function(u,
F,L){return 0==F||L[F-1]!=u}).map(function(u){return{from:u.from,insert:(g?d.line(b++).slice():e)+a.lineBreak}})}:g?a.changeByRange(function(u){var F=d.line(b++);return{changes:{from:u.from,to:u.to,insert:F.slice()},range:y.EditorSelection.cursor(u.from+F.length)}}):a.replaceSelection(d);l.dispatch(k,{annotations:y.Transaction.userEvent.of("paste"),scrollIntoView:!0})}function S(l,e,a,b){if(1==b)return y.EditorSelection.cursor(e,a);if(2==b)return jc(l.state,e,a);if(a=hc.find(l.docView,e))return y.EditorSelection.range(a.posAtStart,
a.posAtEnd);l=l.state.doc.lineAt(e);return y.EditorSelection.range(l.from,l.to)}function X(l,e){var a=l.posAtCoords({x:e.clientX,y:e.clientY});if(null==a)a=null;else{var b=e.clientX;e=e.clientY;var d=hc.find(l.docView,a);if(d){var g=a-d.posAtStart;b=0==g?1:g==d.length?-1:(l=d.coordsAt(g,-1))&&e>=l.top&&e<=l.bottom&&b>=l.left&&b<=l.right?-1:(d=d.coordsAt(g,1))&&e>=d.top&&e<=d.bottom&&b>=d.left&&b<=d.right?1:l&&e>=l.top&&e<=l.bottom?-1:1}else b=1;a={pos:a,bias:b}}return a}function ea(l){if(!Rd)return l.detail;
var e=Bd;Bd=l;return Cd=!e||e.timeStamp>Date.now()-400&&2>Math.abs(e.clientX-l.clientX)&&2>Math.abs(e.clientY-l.clientY)?(Cd+1)%3:1}function ua(l,e){var a=X(l,e),b=ea(e),d=l.state.selection,g=a,k=e;return{update:function(u){u.changes&&(a&&(a.pos=u.changes.mapPos(a.pos)),d=d.map(u.changes))},get:function(u,F,L){if(u.clientX==k.clientX&&u.clientY==k.clientY)var R=g;else R=g=X(l,u),k=u;if(!R||!a)return d;u=S(l,R.pos,R.bias,b);if(a.pos!=R.pos&&!F){var T=S(l,a.pos,a.bias,b);R=Math.min(T.from,u.from);T=
Math.max(T.to,u.to);u=R<u.from?y.EditorSelection.range(R,T):y.EditorSelection.range(T,R)}return F?d.replaceRange(d.primary.extend(u.from,u.to)):L?d.addRange(u):y.EditorSelection.create([u])}}}function xa(l,e){var a=l.dom.parentNode;if(a){var b=a.appendChild(document.createElement("textarea"));b.style.cssText="position: fixed; left: -10000px; top: 10px";b.value=e;b.focus();b.selectionEnd=e.length;b.selectionStart=0;setTimeout(function(){b.remove();l.focus()},50)}}function Ca(l,e,a){for(;e;){var b=
Ob.get(e);if(b&&b.parent==l)return b;b=e.parentNode;e=b!=l.dom?b:0<a?e.nextSibling:e.previousSibling}return null}function ra(l,e,a,b){var d,g=l.state.selection.primary,k;if(-1<e&&(k=l.docView.domBoundsAround(e,a,0))){var u=k;e=u.from;var F=u.to;u=l.docView.impreciseHead||l.docView.impreciseAnchor?[]:Za(l.contentDOM,l.root);a=new Sd(u,l.state.lineBreak);a.readRange(k.startDOM,k.endDOM);u=db(u,e);k=g.from;var L=null;8===l.inputState.lastKeyCode&&l.inputState.lastKeyTime>Date.now()-100&&(k=g.to,L="end");
(k=Na(l.state.sliceDoc(e,F),a.text,k-e,L))&&(d={from:e+k.from,to:e+k.toA,insert:l.state.toText(a.text.slice(k.from,k.toB))})}else l.hasFocus&&(e=ya(l.root),a=l.docView,k=a.impreciseHead,a=a.impreciseAnchor,k=k&&k.node==e.focusNode&&k.offset==e.focusOffset?l.state.selection.primary.head:l.docView.posFromDOM(e.focusNode,e.focusOffset),e=a&&a.node==e.anchorNode&&a.offset==e.anchorOffset?l.state.selection.primary.anchor:Ga(e)?k:l.docView.posFromDOM(e.anchorNode,e.anchorOffset),k!=g.head||e!=g.anchor)&&
(u=y.EditorSelection.single(e,k));if(d||u)if(!d&&b&&!g.empty&&u&&u.primary.empty&&(d={from:g.from,to:g.to,insert:l.state.doc.slice(g.from,g.to)}),d){var R=l.state;if(!hb.android||!(d.from==g.from&&d.to==g.to&&1==d.insert.length&&2==d.insert.lines&&ab(l,"Enter",10)||d.from==g.from-1&&d.to==g.to&&0==d.insert.length&&ab(l,"Backspace",8)||d.from==g.from&&d.to==g.to+1&&0==d.insert.length&&ab(l,"Delete",46))){var T=d.insert.toString();l.state.facet(za).some(function(da){return da(l,d.from,d.to,T)})||(d.from>=
g.from&&d.to<=g.to&&d.to-d.from>=(g.to-g.from)/3?(u=g.from<d.from?R.sliceDoc(g.from,d.from):"",g=g.to>d.to?R.sliceDoc(d.to,g.to):"",g=R.replaceSelection(l.state.toText(u+d.insert.sliceString(0,void 0,l.state.lineBreak)+g))):(g=R.changes(d),g={changes:g,selection:u&&!R.selection.primary.eq(u.primary)&&u.primary.to<=g.newLength?R.selection.replaceRange(u.primary):void 0}),l.dispatch(g,{scrollIntoView:!0,annotations:y.Transaction.userEvent.of("input")}))}}else u&&!u.primary.eq(g)&&(g=!1,l.inputState.lastSelectionTime>
Date.now()-50&&("keyboardselection"==l.inputState.lastSelectionOrigin?g=!0:R=y.Transaction.userEvent.of(l.inputState.lastSelectionOrigin)),l.dispatch({selection:u,scrollIntoView:g,annotations:R}))}function Na(l,e,a,b){for(var d=Math.min(l.length,e.length),g=0;g<d&&l.charCodeAt(g)==e.charCodeAt(g);)g++;if(g==d&&l.length==e.length)return null;d=l.length;for(var k=e.length;0<d&&0<k&&l.charCodeAt(d-1)==e.charCodeAt(k-1);)d--,k--;"end"==b&&(a-=d+Math.max(0,g-Math.min(d,k))-g);d<g&&l.length<e.length?(g-=
a<=g&&a>=d?g-a:0,k=g+(k-d),d=g):k<g&&(g-=a<=g&&a>=k?g-a:0,d=g+(d-k),k=g);return{from:g,toA:d,toB:k}}function Ta(l){return 1==l.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(l.nodeName)}function Za(l,e){var a=[];if(e.activeElement!=l)return a;var b=ya(e);l=b.anchorNode;e=b.anchorOffset;var d=b.focusNode;b=b.focusOffset;l&&(a.push(new Dd(l,e)),d==l&&b==e||a.push(new Dd(d,b)));return a}function db(l,e){if(0==l.length)return null;var a=l[0].pos;l=2==l.length?l[1].pos:a;return-1<
a&&-1<l?y.EditorSelection.single(a+e,l+e):null}function ab(l,e,a){a={key:e,code:e,keyCode:a,which:a,cancelable:!0};e=new KeyboardEvent("keydown",a);l.contentDOM.dispatchEvent(e);a=new KeyboardEvent("keyup",a);l.contentDOM.dispatchEvent(a);return e.defaultPrevented||a.defaultPrevented}function mb(l,e){return null==l?e.getBoundingClientRect().top:l}function ib(){window.addEventListener("resize",function(){-1==rd&&(rd=setTimeout(Dc,50))})}function Dc(){rd=-1;for(var l=document.querySelectorAll(".cm-content"),
e=0;e<l.length;e++){var a=Ob.get(l[e]);a&&a.editorView.requestMeasure()}}function qb(l,e,a){e.altKey&&(l="Alt-"+l);e.ctrlKey&&(l="Ctrl-"+l);e.metaKey&&(l="Meta-"+l);!1!==a&&e.shiftKey&&(l="Shift-"+l);return l}function fc(l){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Td,a=Object.create(null),b=Object.create(null),d=function(vb,Eb){var yc=b[vb];if(null==yc)b[vb]=Eb;else if(yc!=Eb)throw Error("Key binding "+vb+" is used both as a regular binding and as a multi-stroke prefix");},g=function(vb,
Eb,yc,Nc){var Fc=a[vb]||(a[vb]=Object.create(null)),Pc=Eb.split(/ (?!$)/).map(function(ic){ic=ic.split(/-(?!$)/);var Fb=ic[ic.length-1];"Space"==Fb&&(Fb=" ");for(var zc,Ac,Wc,Oc,Kc=0;Kc<ic.length-1;++Kc){var Bc=ic[Kc];if(/^(cmd|meta|m)$/i.test(Bc))Oc=!0;else if(/^a(lt)?$/i.test(Bc))zc=!0;else if(/^(c|ctrl|control)$/i.test(Bc))Ac=!0;else if(/^s(hift)?$/i.test(Bc))Wc=!0;else if(/^mod$/i.test(Bc))"mac"==e?Oc=!0:Ac=!0;else throw Error("Unrecognized modifier name: "+Bc);}zc&&(Fb="Alt-"+Fb);Ac&&(Fb="Ctrl-"+
Fb);Oc&&(Fb="Meta-"+Fb);Wc&&(Fb="Shift-"+Fb);return Fb});Eb=function(ic){var Fb=Pc.slice(0,ic).join(" ");d(Fb,!0);Fc[Fb]||(Fc[Fb]={preventDefault:!0,commands:[function(zc){var Ac=Gc={view:zc,prefix:Fb,scope:vb};setTimeout(function(){Gc==Ac&&(Gc=null)},Ud);return!0}]})};for(var Hc=1;Hc<Pc.length;Hc++)Eb(Hc);Eb=Pc.join(" ");d(Eb,!1);Eb=Fc[Eb]||(Fc[Eb]={preventDefault:!1,commands:[]});Eb.commands.push(yc);Nc&&(Eb.preventDefault=!0)},k=!0,u=!1,F=void 0;try{for(var L=l[Symbol.iterator](),R;!(k=(R=L.next()).done);k=
!0){var T=R.value,da=T[e]||T.key;if(da){var ba=!0,va=!1,Wa=void 0;try{for(var Xa=(T.scope?T.scope.split(" "):["editor"])[Symbol.iterator](),ob;!(ba=(ob=Xa.next()).done);ba=!0){var $b=ob.value;g($b,da,T.run,T.preventDefault);T.shift&&g($b,"Shift-"+da,T.shift,T.preventDefault)}}catch(vb){va=!0,Wa=vb}finally{try{if(!ba&&null!=Xa["return"])Xa["return"]()}finally{if(va)throw Wa;}}}}}catch(vb){u=!0,F=vb}finally{try{if(!k&&null!=L["return"])L["return"]()}finally{if(u)throw F;}}return a}function gc(l,e,a,
b){var d=(0,ja.keyName)(e),g=1==d.length&&" "!=d,k="";Gc&&Gc.view==a&&Gc.scope==b&&(k=Gc.prefix+" ",Gc=null);var u=!!k,F=function(Wa){if(Wa){var Xa=!0,ob=!1,$b=void 0;try{for(var vb=Wa.commands[Symbol.iterator](),Eb;!(Xa=(Eb=vb.next()).done);Xa=!0){var yc=Eb.value;if(yc(a))return!0}}catch(Nc){ob=!0,$b=Nc}finally{try{if(!Xa&&null!=vb["return"])vb["return"]()}finally{if(ob)throw $b;}}Wa.preventDefault&&(u=!0)}return!1},L=!0,R=!1,T=void 0;try{for(var da=l[Symbol.iterator](),ba;!(L=(ba=da.next()).done);L=
!0){var va=ba.value[b];l=void 0;if(va){if(F(va[k+qb(d,e,!g)]))return!0;if(g&&(e.shiftKey||e.altKey||e.metaKey)&&(l=ja.base[e.keyCode])&&l!=d){if(F(va[k+qb(l,e,!0)]))return!0}else if(g&&e.shiftKey&&F(va[k+qb(d,e,!0)]))return!0}}}catch(Wa){R=!0,T=Wa}finally{try{if(!L&&null!=da["return"])da["return"]()}finally{if(R)throw T;}}return u}function Zb(l){var e=l.scrollDOM.getBoundingClientRect();return{left:e.left-l.scrollDOM.scrollLeft,top:e.top-l.scrollDOM.scrollTop}}function wc(l,e){function a(ba,va,Wa,
Xa){return new Ed(ba-R.left,va-R.top,Wa-ba,Xa-va,Vd)}function b(ba){var va=ba.top,Wa=ba.bottom;ba=ba.horizontal;for(var Xa=[],ob=0;ob<ba.length;ob+=2)Xa.push(a(ba[ob],va,ba[ob+1],Wa));return Xa}function d(ba,va){var Wa=1E9,Xa=-1E9,ob=[],$b=null!==ba&&void 0!==ba?ba:l.moveToLineBoundary(y.EditorSelection.cursor(va,1),!1).head,vb=null!==va&&void 0!==va?va:l.moveToLineBoundary(y.EditorSelection.cursor(ba,-1),!0).head,Eb=!0,yc=!1,Nc=void 0;try{for(var Fc=l.visibleRanges[Symbol.iterator](),Pc;!(Eb=(Pc=
Fc.next()).done);Eb=!0){var Hc=Pc.value;if(Hc.to>$b&&Hc.from<vb)for(var ic=Math.max(Hc.from,$b),Fb=Math.min(Hc.to,vb);;){var zc=l.state.doc.lineAt(ic),Ac=!0,Wc=!1,Oc=void 0;try{for(var Kc=l.bidiSpans(zc)[Symbol.iterator](),Bc;!(Ac=(Bc=Kc.next()).done);Ac=!0){var sd=Bc.value,td=sd.from+zc.from,ud=sd.to+zc.from;if(td>=Fb)break;if(ud>ic){var Fd=null==ba&&td<=$b,Wd=Math.min(ud,Fb),Gd=null==va&&ud>=vb,Xd=sd.dir,fd=l.coordsAtPos(Math.max(td,ic),1),gd=l.coordsAtPos(Wd,-1);Wa=Math.min(fd.top,gd.top,Wa);Xa=
Math.max(fd.bottom,gd.bottom,Xa);Xd==Lb.LTR?ob.push(u&&Fd?T:fd.left,u&&Gd?da:gd.right):ob.push(!u&&Gd?T:gd.left,!u&&Fd?da:fd.right)}}}catch(vd){Wc=!0,Oc=vd}finally{try{if(!Ac&&null!=Kc["return"])Kc["return"]()}finally{if(Wc)throw Oc;}}ic=zc.to+1;if(ic>=Fb)break}}}catch(vd){yc=!0,Nc=vd}finally{try{if(!Eb&&null!=Fc["return"])Fc["return"]()}finally{if(yc)throw Nc;}}0==ob.length&&(ba=l.coordsAtPos($b,-1),Wa=Math.min(ba.top,Wa),Xa=Math.max(ba.bottom,Xa));return{top:Wa,bottom:Xa,horizontal:ob}}if(e.to<=
l.viewport.from||e.from>=l.viewport.to)return[];var g=Math.max(e.from,l.viewport.from),k=Math.min(e.to,l.viewport.to),u=l.textDirection==Lb.LTR,F=l.contentDOM,L=F.getBoundingClientRect(),R=Zb(l);F=window.getComputedStyle(F.firstChild);var T=L.left+parseInt(F.paddingLeft),da=L.right-parseInt(F.paddingRight);g=l.visualLineAt(g);k=l.visualLineAt(k);if(g.from==k.from)return b(d(e.from,e.to));L=d(e.from,null);e=d(null,e.to);F=[];g.to<k.from-1?F.push(a(T,L.bottom,da,e.top)):L.bottom<e.top&&4>e.top-L.bottom&&
(L.bottom=e.top=(L.bottom+e.top)/2);return b(L).concat(F).concat(b(e))}function xc(l,e,a){e=l.coordsAtPos(e.head,e.assoc||1);if(!e)return null;l=Zb(l);return new Ed(e.left-l.left,e.top-l.top,-1,e.bottom-e.top,a?Yd:Zd)}function kc(){if(null==wd&&"undefined"!=typeof document&&document.body){var l=document.body.style;wd=null!=(l.tabSize||l.MozTabSize)}return wd||!1}Object.defineProperty(J,"__esModule",{value:!0});J.drawSelection=function(){return[Xc.of(0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{}),$d,ae]};J.highlightSpecialChars=function(){var l=[hd.of(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),be];kc()||l.push(ce);return l};J.indentOnInput=function(){return y.EditorState.transactionFilter.of(function(l){if(!l.docChanged||"input"!=l.annotation(y.Transaction.userEvent))return l;var e=l.startState.languageDataAt("indentOnInput",l.startState.selection.primary.head);if(!e.length)return l;var a=l.newDoc,b=l.newSelection.primary.head,d=a.lineAt(b);if(b>d.from+Hd)return l;var g=
a.sliceString(d.from,b);if(!e.some(function(T){return T.test(g)}))return l;var k=l.state,u=-1,F=[];e=!0;a=!1;b=void 0;try{d=function(){var T=k.doc.lineAt(R.value.head);if(T.from==u)return"continue";u=T.from;var da=Math.max.apply(Math,Pa(k.facet(y.EditorState.indentation).map(function(va){return va(new y.IndentContext(k),T.from)})));if(0>da)return"continue";var ba=/^\s*/.exec(T.slice(0,Math.min(T.length,Hd)))[0];da=k.indentString(da);ba!=da&&F.push({from:T.from,to:T.from+ba.length,insert:da})};for(var L=
k.selection.ranges[Symbol.iterator](),R;!(e=(R=L.next()).done);e=!0)d()}catch(T){a=!0,b=T}finally{try{if(!e&&null!=L["return"])L["return"]()}finally{if(a)throw b;}}return F.length?[l,{changes:F}]:l})};J.keymap=function(l,e){return[de,xd.of(fc(l,e))]};J.logException=Va;J.placeholder=function(l){return Sb.fromClass(function(){function e(a){pa(this,e);this.view=a;this.placeholder=nb.set([nb.widget({widget:new ee(l),side:1}).range(0)])}sa(e,[{key:"decorations",get:function(){return this.view.state.doc.length?
nb.none:this.placeholder}}]);return e}(),{decorations:function(e){return e.decorations}})};J.runScopeHandlers=function(l,e,a){return gc(l.state.facet(xd),e,l,a)};J.themeClass=oa;Object.defineProperty(J,"Range",{enumerable:!0,get:function(){return na.Range}});J.__test=J.WidgetType=J.ViewUpdate=J.ViewPlugin=J.PluginFieldProvider=J.PluginField=J.EditorView=J.Direction=J.Decoration=J.BlockType=J.BlockInfo=J.BidiSpan=void 0;var y=Ka(2),U=Ka(3),na=Ka(4),ha=Ka(0),ja=Ka(5),ia=function(l,e){var a=Array.isArray(l)?
l:void 0;if(!a)if(Symbol.iterator in Object(l)||"[object Arguments]"===Object.prototype.toString.call(l)){a=[];var b=!0,d=!1,g=void 0;try{for(var k=l[Symbol.iterator](),u;!(b=(u=k.next()).done)&&(a.push(u.value),!e||a.length!==e);b=!0);}catch(F){d=!0,g=F}finally{try{if(!b&&null!=k["return"])k["return"]()}finally{if(d)throw g;}}}else a=void 0;if(!(l=a))throw new TypeError("Invalid attempt to destructure non-iterable instance");return l}("undefined"!=typeof navigator?[navigator,document]:[{userAgent:"",
vendor:"",platform:""},{documentElement:{style:{}}}],2),Da=ia[0],bb=ia[1],eb=/Edge\/(\d+)/.exec(Da.userAgent),cb=/MSIE \d/.test(Da.userAgent),Hb=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Da.userAgent),ac=!!(cb||Hb||eb),Tb=!ac&&/gecko\/(\d+)/i.test(Da.userAgent),Qc=!ac&&/Chrome\/(\d+)/.exec(Da.userAgent),Yc="webkitFontSmoothing"in bb.documentElement.style,hb={mac:/Mac/.test(Da.platform),ie:ac,ie_version:cb?bb.documentMode||6:Hb?+Hb[1]:eb?+eb[1]:0,gecko:Tb,gecko_version:Tb?+(/Firefox\/(\d+)/.exec(Da.userAgent)||
[0,0])[1]:0,chrome:!!Qc,chrome_version:Qc?+Qc[1]:0,ios:!ac&&/AppleWebKit/.test(Da.userAgent)&&/Mobile\/\w+/.test(Da.userAgent),android:/Android\b/.test(Da.userAgent),webkit:Yc,safari:/Apple Computer/.test(Da.vendor),webkit_version:Yc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=bb.documentElement.style.tabSize?"tab-size":"-moz-tab-size"},Lc=function(){function l(){pa(this,l);this.anchorNode=null;this.anchorOffset=0;this.focusNode=null;this.focusOffset=0}sa(l,[{key:"eq",
value:function(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}},{key:"set",value:function(e){this.anchorNode=e.anchorNode;this.anchorOffset=e.anchorOffset;this.focusNode=e.focusNode;this.focusOffset=e.focusOffset}}]);return l}(),Nb=null,Ec,lc=function(){function l(e,a){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;pa(this,l);this.node=e;this.offset=a;this.precise=b}sa(l,null,[{key:"before",
value:function(e,a){return new l(e.parentNode,ka(e),a)}},{key:"after",value:function(e,a){return new l(e.parentNode,ka(e)+1,a)}}]);return l}(),yd=[],Ob=function(){function l(){pa(this,l);this.dom=this.parent=null;this.dirty=2}sa(l,[{key:"posBefore",value:function(e){var a=this.posAtStart,b=!0,d=!1,g=void 0;try{for(var k=this.children[Symbol.iterator](),u;!(b=(u=k.next()).done);b=!0){var F=u.value;if(F==e)return a;a+=F.length+F.breakAfter}}catch(L){d=!0,g=L}finally{try{if(!b&&null!=k["return"])k["return"]()}finally{if(d)throw g;
}}throw new RangeError("Invalid child in posBefore");}},{key:"posAfter",value:function(e){return this.posBefore(e)+e.length}},{key:"coordsAt",value:function(e,a){return null}},{key:"sync",value:function(e){if(this.dirty&2){var a=this.dom,b=null,d=!0,g=!1,k=void 0;try{for(var u=this.children[Symbol.iterator](),F;!(d=(F=u.next()).done);d=!0){var L=F.value;if(L.dirty){var R=b?b.nextSibling:a.firstChild;!R||L.dom||l.get(R)||L.reuseDOM(R);L.sync(e);L.dirty=0}e&&e.node==a&&b!=L.dom&&(e.written=!0);var T=
a,da=L.dom,ba=b?b.nextSibling:T.firstChild;if(da.parentNode==T)for(;ba!=da;)ba=H(ba);else T.insertBefore(da,ba);b=L.dom}}catch(va){g=!0,k=va}finally{try{if(!d&&null!=u["return"])u["return"]()}finally{if(g)throw k;}}(u=b?b.nextSibling:a.firstChild)&&e&&e.node==a&&(e.written=!0);for(;u;)u=H(u)}else if(this.dirty&1){u=!0;F=!1;L=void 0;try{for(a=this.children[Symbol.iterator]();!(u=(b=a.next()).done);u=!0)d=b.value,d.dirty&&(d.sync(e),d.dirty=0)}catch(va){F=!0,L=va}finally{try{if(!u&&null!=a["return"])a["return"]()}finally{if(F)throw L;
}}}}},{key:"reuseDOM",value:function(e){return!1}},{key:"localPosFromDOM",value:function(e,a){if(e==this.dom)e=this.dom.childNodes[a];else{for(a=0==x(e)?0:0==a?-1:1;;){var b=e.parentNode;if(b==this.dom)break;0==a&&b.firstChild!=b.lastChild&&(a=e==b.firstChild?-1:1);e=b}e=0>a?e:e.nextSibling}if(e==this.dom.firstChild)return 0;for(;e&&!l.get(e);)e=e.nextSibling;if(!e)return this.length;for(b=a=0;;a++){var d=this.children[a];if(d.dom==e)return b;b+=d.length+d.breakAfter}}},{key:"domBoundsAround",value:function(e,
a){for(var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,d=-1,g=-1,k=-1,u=-1,F=0,L=b;F<this.children.length;F++){var R=this.children[F],T=L+R.length;if(L<e&&T>a)return R.domBoundsAround(e,a,L);T>=e&&-1==d&&(d=F,g=L);if(T>=a&&T!=L&&-1==k){k=F;u=T;break}L=T+R.breakAfter}return{from:g,to:0>u?b+this.length:u,startDOM:(d?this.children[d-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:k<this.children.length-1&&0<=k?this.children[k+1].dom:null}}},{key:"markDirty",value:function(){var e=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;this.dirty&2||(this.dirty|=2,this.markParentsDirty(e))}},{key:"markParentsDirty",value:function(e){for(var a=this.parent;a;a=a.parent){e&&(a.dirty|=2);if(a.dirty&1)break;a.dirty|=1;e=!1}}},{key:"setParent",value:function(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}},{key:"setDOM",value:function(e){this.dom=e;e.cmView=this}},{key:"replaceChildren",value:function(e,a){var b,d=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:yd;this.markDirty();for(var g=e;g<a;g++)this.children[g].parent=null;(b=this.children).splice.apply(b,[e,a-e].concat(Pa(d)));for(b=0;b<d.length;b++)d[b].setParent(this)}},{key:"ignoreMutation",value:function(e){return!1}},{key:"ignoreEvent",value:function(e){return!1}},{key:"childCursor",value:function(){return new Ib(this.children,0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.length,this.children.length)}},{key:"childPos",value:function(e){var a=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:1;return this.childCursor().findPos(e,a)}},{key:"toString",value:function(){var e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}},{key:"editorView",get:function(){if(!this.parent)throw Error("Accessing view in orphan content view");return this.parent.editorView}},{key:"overrideDOMText",get:function(){return null}},{key:"posAtStart",get:function(){return this.parent?
this.parent.posBefore(this):0}},{key:"posAtEnd",get:function(){return this.posAtStart+this.length}},{key:"rootView",get:function(){for(var e=this;;){var a=e.parent;if(!a)return e;e=a}}}],[{key:"get",value:function(e){return e.cmView}}]);return l}();Ob.prototype.breakAfter=0;var Ib=function(){function l(e,a,b){pa(this,l);this.children=e;this.pos=a;this.i=b;this.off=0}sa(l,[{key:"findPos",value:function(e){for(var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;;){if(e>this.pos||e==this.pos&&
(0<a||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;var b=this.children[--this.i];this.pos-=b.length+b.breakAfter}}}]);return l}(),id=[],sc=function(l){function e(){pa(this,e);return Ea(this,Fa(e).apply(this,arguments))}qa(e,l);sa(e,[{key:"become",value:function(a){return!1}},{key:"getSide",value:function(){return 0}}]);return e}(Ob);sc.prototype.children=id;var jd=function(l){function e(a){pa(this,e);var b=Ea(this,Fa(e).call(this));b.text=a;return b}qa(e,l);sa(e,
[{key:"createDOM",value:function(a){this.setDOM(a||document.createTextNode(this.text))}},{key:"sync",value:function(a){this.dom||this.createDOM();this.dom.nodeValue!=this.text&&(a&&a.node==this.dom&&(a.written=!0),this.dom.nodeValue=this.text)}},{key:"reuseDOM",value:function(a){if(3!=a.nodeType)return!1;this.createDOM(a);return!0}},{key:"merge",value:function(a,b,d){if(d&&(!(d instanceof e)||256<this.length-(b-a)+d.length))return!1;this.text=this.text.slice(0,a)+(d?d.text:"")+this.text.slice(b);
this.markDirty();return!0}},{key:"slice",value:function(a){return new e(this.text.slice(a))}},{key:"localPosFromDOM",value:function(a,b){return a==this.dom?b:b?this.text.length:0}},{key:"domAtPos",value:function(a){return new lc(this.dom,a)}},{key:"domBoundsAround",value:function(a,b,d){return{from:d,to:d+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}},{key:"coordsAt",value:function(a,b){return N(this.dom,a,b,this.length)}},{key:"length",get:function(){return this.text.length}}]);return e}(sc),
Vc=function(l){function e(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;pa(this,e);var g=Ea(this,Fa(e).call(this));g.mark=a;g.children=b;g.length=d;d=!0;var k=!1,u=void 0;try{for(var F=b[Symbol.iterator](),L;!(d=(L=F.next()).done);d=!0)L.value.setParent(Qa(g))}catch(R){k=!0,u=R}finally{try{if(!d&&null!=F["return"])F["return"]()}finally{if(k)throw u;}}return g}qa(e,l);sa(e,[{key:"createDOM",value:function(){var a=document.createElement(this.mark.tagName);
this.mark["class"]&&(a.className=this.mark["class"]);if(this.mark.attrs)for(var b in this.mark.attrs)a.setAttribute(b,this.mark.attrs[b]);this.setDOM(a)}},{key:"sync",value:function(a){this.dom||this.createDOM();La(Fa(e.prototype),"sync",this).call(this,a)}},{key:"merge",value:function(a,b,d,g,k){if(d&&(!(d instanceof e&&d.mark.eq(this.mark))||a&&0>=g||b<this.length&&0>=k))return!1;E(this,a,b,d?d.children:id,g-1,k-1);this.markDirty();return!0}},{key:"slice",value:function(a){var b=this.mark,d=[],
g=0,k=!0,u=!1,F=void 0;try{for(var L=this.children[Symbol.iterator](),R;!(k=(R=L.next()).done);k=!0){var T=R.value,da=g+T.length;da>a&&d.push(g<a?T.slice(a-g):T);g=da}}catch(ba){u=!0,F=ba}finally{try{if(!k&&null!=L["return"])L["return"]()}finally{if(u)throw F;}}return new e(b,d,this.length-a)}},{key:"domAtPos",value:function(a){return p(this.dom,this.children,a)}},{key:"coordsAt",value:function(a,b){return q(this,a,b)}}]);return e}(sc),Db=function(l){function e(a,b,d){pa(this,e);var g=Ea(this,Fa(e).call(this));
g.widget=a;g.length=b;g.side=d;return g}qa(e,l);sa(e,[{key:"slice",value:function(a){return e.create(this.widget,this.length-a,this.side)}},{key:"sync",value:function(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"getSide",value:function(){return this.side}},{key:"merge",value:function(a,b,d,g,k){if(d&&(!(d instanceof e&&this.widget.compare(d.widget))||0<a&&0>=g||b<this.length&&0>=k))return!1;this.length=a+(d?
d.length:0)+(this.length-b);return!0}},{key:"become",value:function(a){return a.length==this.length&&a instanceof e&&a.side==this.side&&this.widget.constructor==a.widget.constructor?(this.widget.eq(a.widget)||this.markDirty(!0),this.widget=a.widget,!0):!1}},{key:"ignoreMutation",value:function(){return!0}},{key:"ignoreEvent",value:function(a){return this.widget.ignoreEvent(a)}},{key:"domAtPos",value:function(a){return 0==a?lc.before(this.dom):lc.after(this.dom,a==this.length)}},{key:"domBoundsAround",
value:function(){return null}},{key:"coordsAt",value:function(a,b){b=this.dom.getClientRects();for(var d,g=0<a?b.length-1:0;!(d=b[g],0<a?0==g:g==b.length-1||d.top<d.bottom);g+=0<a?-1:1);return d}},{key:"overrideDOMText",get:function(){if(0==this.length)return ha.Text.empty;for(var a=this;a.parent;)a=a.parent;a=(a=a.editorView)&&a.state.doc;var b=this.posAtStart;return a?a.slice(b,b+this.length):ha.Text.empty}}],[{key:"create",value:function(a,b,d){return new (a.customView||e)(a,b,d)}}]);return e}(sc),
kd=function(l){function e(){pa(this,e);return Ea(this,Fa(e).apply(this,arguments))}qa(e,l);sa(e,[{key:"domAtPos",value:function(a){return new lc(this.widget.text,a)}},{key:"sync",value:function(){this.dom||this.setDOM(this.widget.toDOM())}},{key:"localPosFromDOM",value:function(a,b){return b?3==a.nodeType?Math.min(b,this.length):this.length:0}},{key:"ignoreMutation",value:function(){return!1}},{key:"coordsAt",value:function(a,b){return N(this.widget.text,a,b,this.length)}},{key:"overrideDOMText",
get:function(){return null}}]);return e}(Db),tc=function(){function l(){pa(this,l)}sa(l,[{key:"eq",value:function(e){return!1}},{key:"updateDOM",value:function(e){return!1}},{key:"compare",value:function(e){return this==e||this.constructor==e.constructor&&this.eq(e)}},{key:"ignoreEvent",value:function(e){return!0}},{key:"estimatedHeight",get:function(){return-1}},{key:"customView",get:function(){return null}}]);return l}();J.WidgetType=tc;var tb;J.BlockType=tb;(function(l){l[l.Text=0]="Text";l[l.WidgetBefore=
1]="WidgetBefore";l[l.WidgetAfter=2]="WidgetAfter";l[l.WidgetRange=3]="WidgetRange"})(tb||(J.BlockType=tb={}));var nb=function(l){function e(a,b,d,g){pa(this,e);var k=Ea(this,Fa(e).call(this));k.startSide=a;k.endSide=b;k.widget=d;k.spec=g;return k}qa(e,l);sa(e,[{key:"hasHeight",value:function(){return this.widget?-1<this.widget.estimatedHeight:!1}},{key:"heightRelevant",get:function(){return!1}}],[{key:"mark",value:function(a){return new ld(a)}},{key:"widget",value:function(a){var b=a.side||0;a.block&&
(b+=(2E8+1)*(0<b?1:-1));return new Ub(a,b,b,!!a.block,a.widget||null,!1)}},{key:"replace",value:function(a){var b=!!a.block,d=M(a),g=d.start;d=d.end;return new Ub(a,b?-2E8*(g?2:1):1E8*(g?-1:1),b?2E8*(d?2:1):1E8*(d?1:-1),b,a.widget||null,!0)}},{key:"line",value:function(a){return new uc(a)}},{key:"set",value:function(a){return na.RangeSet.of(a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1)}}]);return e}(na.RangeValue);J.Decoration=nb;nb.none=na.RangeSet.empty;var ld=function(l){function e(a){pa(this,
e);var b=M(a);var d=b.start;b=b.end;d=Ea(this,Fa(e).call(this,1E8*(d?-1:1),1E8*(b?1:-1),null,a));d.tagName=a.tagName||"span";d["class"]=a["class"]||"";d.attrs=a.attributes||null;return d}qa(e,l);sa(e,[{key:"eq",value:function(a){return this==a||a instanceof e&&this.tagName==a.tagName&&this["class"]==a["class"]&&r(this.attrs,a.attrs)}},{key:"range",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a;if(a>=b)throw new RangeError("Mark decorations may not be empty");return La(Fa(e.prototype),
"range",this).call(this,a,b)}}]);return e}(nb);ld.prototype.point=!1;var uc=function(l){function e(a){pa(this,e);return Ea(this,Fa(e).call(this,-1E8,-1E8,null,a))}qa(e,l);sa(e,[{key:"eq",value:function(a){return a instanceof e&&r(this.spec.attributes,a.spec.attributes)}},{key:"range",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a;if(b!=a)throw new RangeError("Line decoration ranges must be zero-length");return La(Fa(e.prototype),"range",this).call(this,a,b)}}]);return e}(nb);
uc.prototype.mapMode=y.MapMode.TrackBefore;uc.prototype.point=!0;var Ub=function(l){function e(a,b,d,g,k,u){pa(this,e);a=Ea(this,Fa(e).call(this,b,d,k,a));a.block=g;a.isReplace=u;a.mapMode=g?0>b?y.MapMode.TrackBefore:y.MapMode.TrackAfter:y.MapMode.TrackDel;return a}qa(e,l);sa(e,[{key:"eq",value:function(a){var b;if(b=a instanceof e){b=this.widget;var d=a.widget;b=b==d||!!(b&&d&&b.compare(d))}return b&&this.block==a.block&&this.startSide==a.startSide&&this.endSide==a.endSide}},{key:"range",value:function(a){var b=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:a;if(this.isReplace&&(a>b||a==b&&0<this.startSide&&0>this.endSide))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&b!=a)throw new RangeError("Widget decorations can only have zero-length ranges");return La(Fa(e.prototype),"range",this).call(this,a,b)}},{key:"type",get:function(){return this.startSide<this.endSide?tb.WidgetRange:0>this.startSide?tb.WidgetBefore:tb.WidgetAfter}},{key:"heightRelevant",get:function(){return this.block||
!!this.widget&&5<=this.widget.estimatedHeight}}]);return e}(nb);Ub.prototype.point=!0;var Cc=y.Facet.define({combine:function(l){return l.join(" ")}}),Zc=y.Facet.define({combine:function(l){return-1<l.indexOf(!0)}}),Rc=U.StyleModule.newName(),zd=Y("."+Rc,{$:{position:"relative !important",boxSizing:"border-box","\x26$focused":{outline_fallback:"1px dotted #212121",outline:"5px auto -webkit-focus-ring-color"},display:"flex !important",flexDirection:"column"},$scroller:{display:"flex !important",alignItems:"flex-start !important",
fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},$content:{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",boxSizing:"border-box",padding:"4px 0",outline:"none"},"$$light $content":{caretColor:"black"},"$$dark $content":{caretColor:"white"},$line:{display:"block",padding:"0 2px 0 4px"},$selectionLayer:{zIndex:-1,contain:"size style"},$selectionBackground:{position:"absolute"},"$$light $selectionBackground":{background:"#d9d9d9"},
"$$dark $selectionBackground":{background:"#222"},"$$focused$light $selectionBackground":{background:"#d7d4f0"},"$$focused$dark $selectionBackground":{background:"#233"},$cursorLayer:{zIndex:100,contain:"size style",pointerEvents:"none"},"$$focused $cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},$cursor:{position:"absolute",borderLeft:"1.2px solid #aaa",
marginLeft:"-0.6px",pointerEvents:"none"},"$$focused $cursor":{borderLeft:"1.2px solid black"},$placeholder:{color:"#888",display:"inline-block"},$button:{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"3px"},"$$light $button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","\x26:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"$$dark $button":{backgroundImage:"linear-gradient(#555, #111)",border:"1px solid #888","\x26:active":{backgroundImage:"linear-gradient(#111, #333)"}},
$textfield:{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"$$light $textfield":{backgroundColor:"white"},"$$dark $textfield":{border:"1px solid #555",backgroundColor:"inherit"}}),$c=oa("line"),hc=function(l){function e(){pa(this,e);var a=Ea(this,Fa(e).apply(this,arguments));a.children=[];a.length=0;a.prevAttrs=void 0;a.attrs=null;a.breakAfter=0;return a}qa(e,l);sa(e,[{key:"merge",value:function(a,b,d,g,k,u){if(d){if(!(d instanceof e))return!1;
this.dom||d.transferDOM(this)}g&&this.setDeco(d?d.attrs:null);E(this,a,b,d?d.children:Bb,k,u);return!0}},{key:"split",value:function(a){var b=new e;b.breakAfter=this.breakAfter;if(0==this.length)return b;var d=this.childPos(a),g=d.i;if(d=d.off)b.append(this.children[g].slice(d),0),this.children[g].merge(d,this.children[g].length,null,0,0),g++;for(d=g;d<this.children.length;d++)b.append(this.children[d],0);for(;0<g&&0==this.children[g-1].length;)this.children[g-1].parent=null,g--;this.children.length=
g;this.markDirty();this.length=a;return b}},{key:"transferDOM",value:function(a){this.dom&&(a.setDOM(this.dom),a.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}},{key:"setDeco",value:function(a){r(this.attrs,a)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=a)}},{key:"append",value:function(a,b){z(this,a,b)}},{key:"addLineDeco",value:function(a){if(a=a.spec.attributes)this.attrs=n(a,this.attrs||{})}},{key:"domAtPos",value:function(a){return p(this.dom,
this.children,a)}},{key:"sync",value:function(a){this.dom||(this.setDOM(document.createElement("div")),this.dom.className=$c,this.prevAttrs=this.attrs?null:void 0);void 0!==this.prevAttrs&&(w(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add($c),this.prevAttrs=void 0);La(Fa(e.prototype),"sync",this).call(this,a);a=this.dom.lastChild;if(!a||"BR"!=a.nodeName&&Ob.get(a)instanceof Db)a=document.createElement("BR"),a.cmIgnore=!0,this.dom.appendChild(a)}},{key:"measureTextSize",value:function(){if(0==
this.children.length||20<this.length)return null;var a=0,b=!0,d=!1,g=void 0;try{for(var k=this.children[Symbol.iterator](),u;!(b=(u=k.next()).done);b=!0){var F=u.value;if(!(F instanceof jd))return null;var L=ca(F.dom);if(1!=L.length)return null;a+=L[0].width}}catch(R){d=!0,g=R}finally{try{if(!b&&null!=k["return"])k["return"]()}finally{if(d)throw g;}}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:a/this.length}}},{key:"coordsAt",value:function(a,b){return q(this,a,b)}},{key:"match",
value:function(a){return!1}},{key:"type",get:function(){return tb.Text}}],[{key:"find",value:function(a,b){for(var d=0,g=0;;d++){var k=a.children[d];g+=k.length;if(g>=b){if(k instanceof e)return k;if(k.length)return null}g+=k.breakAfter}}}]);return e}(Ob),Bb=[],Sc=function(l){function e(a,b,d){pa(this,e);var g=Ea(this,Fa(e).call(this));g.widget=a;g.length=b;g.type=d;g.breakAfter=0;return g}qa(e,l);sa(e,[{key:"merge",value:function(a,b,d,g,k,u){if(d&&(!(d instanceof e&&this.widget.compare(d.widget))||
0<a&&0>=k||b<this.length&&0>=u))return!1;this.length=a+(d?d.length:0)+(this.length-b);return!0}},{key:"domAtPos",value:function(a){return 0==a?lc.before(this.dom):lc.after(this.dom,a==this.length)}},{key:"split",value:function(a){var b=this.length-a;this.length=a;return new e(this.widget,b,this.type)}},{key:"sync",value:function(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}},{key:"domBoundsAround",value:function(){return null}},
{key:"match",value:function(a){return a instanceof e&&a.type==this.type&&a.widget.constructor==this.widget.constructor?(a.widget.eq(this.widget)||this.markDirty(!0),this.widget=a.widget,this.length=a.length,this.breakAfter=a.breakAfter,!0):!1}},{key:"children",get:function(){return Bb}},{key:"overrideDOMText",get:function(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):y.Text.empty}}]);return e}(Ob),oc=function(){function l(e,a,b){pa(this,l);this.doc=e;this.pos=
a;this.end=b;this.content=[];this.curLine=null;this.breakAtStart=0;this.openEnd=this.openStart=-1;this.text="";this.textOff=0;this.cursor=e.iter();this.skip=a}sa(l,[{key:"posCovered",value:function(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;var e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Sc&&e.type==tb.WidgetBefore)}},{key:"getLine",value:function(){this.curLine||this.content.push(this.curLine=new hc);return this.curLine}},
{key:"addWidget",value:function(e){this.curLine=null;this.content.push(e)}},{key:"finish",value:function(){this.posCovered()||this.getLine()}},{key:"wrapMarks",value:function(e,a){for(var b=a.length-1;0<=b;b--)e=new Vc(a[b],[e],e.length);return e}},{key:"buildText",value:function(e,a,b){for(;0<e;){if(this.textOff==this.text.length){var d=this.cursor.next(this.skip),g=d.value,k=d.lineBreak;d=d.done;this.skip=0;if(d)throw Error("Ran out of text content when drawing inline views");if(k){this.posCovered()||
this.getLine();this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1;this.curLine=null;e--;continue}else this.text=g,this.textOff=0}g=Math.min(this.text.length-this.textOff,e);this.getLine().append(this.wrapMarks(new jd(this.text.slice(this.textOff,this.textOff+g)),a),b);e-=g;this.textOff+=g}}},{key:"span",value:function(e,a,b,d){this.buildText(a-e,b,d);this.pos=a;0>this.openStart&&(this.openStart=d)}},{key:"point",value:function(e,a,b,d,g){e=a-e;b instanceof Ub?
b.block?(d=b.type,d!=tb.WidgetAfter||this.posCovered()||this.getLine(),this.addWidget(new Sc(b.widget||new Mc("div"),e,d))):(b=this.wrapMarks(Db.create(b.widget||new Mc("span"),e,b.startSide),d),this.getLine().append(b,g)):this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(b);e&&(this.textOff+e<=this.text.length?this.textOff+=e:(this.skip+=e-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=a);0>this.openStart&&(this.openStart=g)}}],[{key:"build",value:function(e,
a,b,d){e=new l(e,a,b);e.openEnd=na.RangeSet.spans(d,a,b,e);0>e.openStart&&(e.openStart=e.openEnd);e.finish();return e}}]);return l}(),Mc=function(l){function e(a){pa(this,e);var b=Ea(this,Fa(e).call(this));b.tag=a;return b}qa(e,l);sa(e,[{key:"eq",value:function(a){return a.tag==this.tag}},{key:"toDOM",value:function(){return document.createElement(this.tag)}},{key:"updateDOM",value:function(a){return a.nodeName.toLowerCase()==this.tag}}]);return e}(tc),Lb;J.Direction=Lb;(function(l){l[l.LTR=0]="LTR";
l[l.RTL=1]="RTL"})(Lb||(J.Direction=Lb={}));var dd=Lb.LTR,md=Lb.RTL,od=Aa("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),pd=Aa("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),
nd=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,rc=function(){function l(e,a,b){pa(this,l);this.from=e;this.to=a;this.level=b}sa(l,[{key:"side",value:function(e,a){return this.dir==a==e?this.to:this.from}},{key:"dir",get:function(){return this.level%2?md:dd}}],[{key:"find",value:function(e,a,b,d){for(var g=-1,k=0;k<e.length;k++){var u=e[k];if(u.from<=a&&u.to>=a){if(u.level==b)return k;if(0>g||(0!=d?0>d?u.from<a:u.to>a:e[g].level>u.level))g=k}}if(0>g)throw new RangeError("Index out of range");return g}}]);
return l}();J.BidiSpan=rc;var yb=[],ed="",ad=["pre-wrap","normal","pre-line"],bd=function(){function l(){pa(this,l);this.doc=ha.Text.empty;this.lineWrapping=!1;this.direction=Lb.LTR;this.heightSamples={};this.lineHeight=14;this.charWidth=7;this.lineLength=30;this.heightChanged=!1}sa(l,[{key:"heightForGap",value:function(e,a){var b=this.doc.lineAt(a).number-this.doc.lineAt(e).number+1;this.lineWrapping&&(b+=Math.ceil((a-e-b*this.lineLength*.5)/this.lineLength));return this.lineHeight*b}},{key:"heightForLine",
value:function(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}},{key:"setDoc",value:function(e){this.doc=e;return this}},{key:"mustRefresh",value:function(e,a,b){for(var d=!1,g=0;g<e.length;g++){var k=e[g];0>k?g++:this.heightSamples[Math.floor(10*k)]||(d=!0,this.heightSamples[Math.floor(10*k)]=!0)}return d||-1<ad.indexOf(a)!=this.lineWrapping||this.direction!=b}},{key:"refresh",value:function(e,a,b,d,g,k){var u=-1<ad.indexOf(e);
e=Math.round(b)!=Math.round(this.lineHeight)||this.lineWrapping!=u||this.direction!=a;this.lineWrapping=u;this.direction=a;this.lineHeight=b;this.charWidth=d;this.lineLength=g;if(e)for(this.heightSamples={},a=0;a<k.length;a++)b=k[a],0>b?a++:this.heightSamples[Math.floor(10*b)]=!0;return e}}]);return l}(),Tc=function(){function l(e,a){pa(this,l);this.from=e;this.heights=a;this.index=0}sa(l,[{key:"more",get:function(){return this.index<this.heights.length}}]);return l}(),Ic=function(){function l(e,
a,b,d,g){pa(this,l);this.from=e;this.length=a;this.top=b;this.height=d;this.type=g}sa(l,[{key:"join",value:function(e){var a=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new l(this.from,this.length+e.length,this.top,this.height+e.height,a)}},{key:"to",get:function(){return this.from+this.length}},{key:"bottom",get:function(){return this.top+this.height}}]);return l}();J.BlockInfo=Ic;var c;(function(l){l[l.ByPos=0]="ByPos";l[l.ByHeight=1]="ByHeight";l[l.ByPosNoHeight=
2]="ByPosNoHeight"})(c||(c={}));var f=function(){function l(e,a){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2;pa(this,l);this.length=e;this.height=a;this.flags=b}sa(l,[{key:"setHeight",value:function(e,a){this.height!=a&&(1E-4<Math.abs(this.height-a)&&(e.heightChanged=!0),this.height=a)}},{key:"replace",value:function(e,a,b){return l.of(b)}},{key:"decomposeLeft",value:function(e,a){a.push(this)}},{key:"decomposeRight",value:function(e,a){a.push(this)}},{key:"applyChanges",value:function(e,
a,b,d){for(var g=this,k=d.length-1;0<=k;k--){var u=d[k],F=u.fromA,L=u.toA,R=u.fromB;u=u.toB;var T=g.lineAt(F,c.ByPosNoHeight,a,0,0),da=T.to>=L?T:g.lineAt(L,c.ByPosNoHeight,a,0,0);u+=da.to-L;for(L=da.to;0<k&&T.from<=d[k-1].toA;)F=d[k-1].fromA,R=d[k-1].fromB,k--,F<T.from&&(T=g.lineAt(F,c.ByPosNoHeight,a,0,0));R+=T.from-F;F=T.from;R=K.build(b,e,R,u);g=g.replace(F,L,R)}return g.updateHeight(b,0)}},{key:"outdated",get:function(){return 0<(this.flags&2)},set:function(e){this.flags=(e?2:0)|this.flags&-3}}],
[{key:"empty",value:function(){return new m(0,0)}},{key:"of",value:function(e){if(1==e.length)return e[0];for(var a=0,b=e.length,d=0,g=0;;)if(a==b)if(d>2*g){var k=e[a-1];k["break"]?e.splice(--a,1,k.left,null,k.right):e.splice(--a,1,k.left,k.right);b+=1+k["break"];d-=k.size}else if(g>2*d)k=e[b],k["break"]?e.splice(b,1,k.left,null,k.right):e.splice(b,1,k.left,k.right),b+=2+k["break"],g-=k.size;else break;else d<g?(k=e[a++])&&(d+=k.size):(k=e[--b])&&(g+=k.size);d=0;null==e[a-1]?(d=1,a--):null==e[a]&&
(d=1,b++);return new B(l.of(e.slice(0,a)),d,l.of(e.slice(b)))}}]);return l}();f.prototype.size=1;var h=function(l){function e(a,b,d){pa(this,e);a=Ea(this,Fa(e).call(this,a,b));a.type=d;return a}qa(e,l);sa(e,[{key:"blockAt",value:function(a,b,d,g){return new Ic(g,this.length,d,this.height,this.type)}},{key:"lineAt",value:function(a,b,d,g,k){return this.blockAt(0,d,g,k)}},{key:"forEachLine",value:function(a,b,d,g,k,u){u(this.blockAt(0,d,g,k))}},{key:"updateHeight",value:function(a){var b=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:0,d=3<arguments.length?arguments[3]:void 0;d&&d.from<=b&&d.more&&this.setHeight(a,d.heights[d.index++]);this.outdated=!1;return this}},{key:"toString",value:function(){return"block(".concat(this.length,")")}}]);return e}(f),m=function(l){function e(a,b){pa(this,e);a=Ea(this,Fa(e).call(this,a,b,tb.Text));a.collapsed=0;a.widgetHeight=0;return a}qa(e,l);sa(e,[{key:"replace",value:function(a,b,d){a=d[0];return 1==d.length&&(a instanceof e||a instanceof v&&a.flags&4)&&
10>Math.abs(this.length-a.length)?(a instanceof v?a=new e(a.length,this.height):a.height=this.height,this.outdated||(a.outdated=!1),a):f.of(d)}},{key:"updateHeight",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,g=3<arguments.length?arguments[3]:void 0;g&&g.from<=b&&g.more?this.setHeight(a,g.heights[g.index++]):(d||this.outdated)&&this.setHeight(a,Math.max(this.widgetHeight,a.heightForLine(this.length-this.collapsed)));
this.outdated=!1;return this}},{key:"toString",value:function(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}]);return e}(h),v=function(l){function e(a){pa(this,e);return Ea(this,Fa(e).call(this,a,0))}qa(e,l);sa(e,[{key:"lines",value:function(a,b){var d=a.lineAt(b).number;a=a.lineAt(b+this.length).number;return{firstLine:d,lastLine:a,lineHeight:this.height/(a-d+1)}}},{key:"blockAt",value:function(a,b,d,g){var k=
this.lines(b,g),u=k.firstLine;g=k.lineHeight;a=Math.max(0,Math.min(k.lastLine-u,Math.floor((a-d)/g)));b=b.line(u+a);return new Ic(b.from,b.length,d+g*a,g,tb.Text)}},{key:"lineAt",value:function(a,b,d,g,k){if(b==c.ByHeight)return this.blockAt(a,d,g,k);if(b==c.ByPosNoHeight)return g=d.lineAt(a),a=g.from,new Ic(a,g.to-a,0,0,tb.Text);k=this.lines(d,k);b=k.firstLine;k=k.lineHeight;a=d.lineAt(a);return new Ic(a.from,a.length,g+k*(a.number-b),k,tb.Text)}},{key:"forEachLine",value:function(a,b,d,g,k,u){var F=
this.lines(d,k);k=F.firstLine;F=F.lineHeight;for(var L=a;L<b;){var R=d.lineAt(L);L==a&&(g+=F*(R.number-k));u(new Ic(R.from,R.length,g,g+=F,tb.Text));L=R.to+1}}},{key:"replace",value:function(a,b,d){b=this.length-b;if(0<b){var g=d[d.length-1];g instanceof e?d[d.length-1]=new e(g.length+b):d.push(null,new e(b-1))}0<a&&(b=d[0],b instanceof e?d[0]=new e(a+b.length):d.unshift(new e(a-1),null));return f.of(d)}},{key:"decomposeLeft",value:function(a,b){b.push(new e(a-1),null)}},{key:"decomposeRight",value:function(a,
b){b.push(null,new e(this.length-a-1))}},{key:"updateHeight",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,g=3<arguments.length?arguments[3]:void 0,k=b+this.length;if(g&&g.from<=b+this.length&&g.more){d=[];var u=Math.max(b,g.from);for(g.from>b&&d.push((new e(g.from-b-1)).updateHeight(a,b));u<=k&&g.more;){b=a.doc.lineAt(u).length;d.length&&d.push(null);var F=new m(b,g.heights[g.index++]);F.outdated=!1;d.push(F);
u+=b+1}u<=k&&d.push(null,(new e(k-u)).updateHeight(a,u));a.heightChanged=!0;return f.of(d)}if(d||this.outdated)this.setHeight(a,a.heightForGap(b,b+this.length)),this.outdated=!1;return this}},{key:"toString",value:function(){return"gap(".concat(this.length,")")}}]);return e}(f),B=function(l){function e(a,b,d){pa(this,e);b=Ea(this,Fa(e).call(this,a.length+b+d.length,a.height+d.height,b|(a.outdated||d.outdated?2:0)));b.left=a;b.right=d;b.size=a.size+d.size;return b}qa(e,l);sa(e,[{key:"blockAt",value:function(a,
b,d,g){var k=d+this.left.height;return a<k||0==this.right.height?this.left.blockAt(a,b,d,g):this.right.blockAt(a,b,k,g+this.left.length+this["break"])}},{key:"lineAt",value:function(a,b,d,g,k){var u=g+this.left.height,F=k+this.left.length+this["break"],L=b==c.ByHeight?a<u||0==this.right.height:a<F;a=L?this.left.lineAt(a,b,d,g,k):this.right.lineAt(a,b,d,u,F);if(this["break"]||(L?a.to<F:a.from>F))return a;b=b==c.ByPosNoHeight?c.ByPosNoHeight:c.ByPos;return L?a.join(this.right.lineAt(F,b,d,u,F)):this.left.lineAt(F,
b,d,g,k).join(a)}},{key:"forEachLine",value:function(a,b,d,g,k,u){var F=g+this.left.height,L=k+this.left.length+this["break"];if(this["break"])a<L&&this.left.forEachLine(a,b,d,g,k,u),b>=L&&this.right.forEachLine(a,b,d,F,L,u);else{var R=this.lineAt(L,c.ByPos,d,g,k);a<R.from&&this.left.forEachLine(a,R.from-1,d,g,k,u);R.to>=a&&R.from<=b&&u(R);b>R.to&&this.right.forEachLine(R.to+1,b,d,F,L,u)}}},{key:"replace",value:function(a,b,d){var g=this.left.length+this["break"];if(b<g)return this.balanced(this.left.replace(a,
b,d),this.right);if(a>this.left.length)return this.balanced(this.left,this.right.replace(a-g,b-g,d));g=[];0<a&&this.decomposeLeft(a,g);var k=g.length,u=!0,F=!1,L=void 0;try{for(var R=d[Symbol.iterator](),T;!(u=(T=R.next()).done);u=!0)g.push(T.value)}catch(da){F=!0,L=da}finally{try{if(!u&&null!=R["return"])R["return"]()}finally{if(F)throw L;}}0<a&&Sa(g,k-1);b<this.length&&(a=g.length,this.decomposeRight(b,g),Sa(g,a));return f.of(g)}},{key:"decomposeLeft",value:function(a,b){var d=this.left.length;
if(a<=d)return this.left.decomposeLeft(a,b);b.push(this.left);this["break"]&&(d++,a>=d&&b.push(null));a>d&&this.right.decomposeLeft(a-d,b)}},{key:"decomposeRight",value:function(a,b){var d=this.left.length,g=d+this["break"];if(a>=g)return this.right.decomposeRight(a-g,b);a<d&&this.left.decomposeRight(a,b);this["break"]&&a<g&&b.push(null);b.push(this.right)}},{key:"balanced",value:function(a,b){if(a.size>2*b.size||b.size>2*a.size)return f.of(this["break"]?[a,null,b]:[a,b]);this.left=a;this.right=b;
this.height=a.height+b.height;this.outdated=a.outdated||b.outdated;this.size=a.size+b.size;this.length=a.length+this["break"]+b.length;return this}},{key:"updateHeight",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,g=3<arguments.length?arguments[3]:void 0,k=this.left,u=this.right,F=b+k.length+this["break"],L=null;g&&g.from<=b+k.length&&g.more?L=k=k.updateHeight(a,b,d,g):k.updateHeight(a,b,d);g&&g.from<=
F+u.length&&g.more?L=u=u.updateHeight(a,F,d,g):u.updateHeight(a,F,d);if(L)return this.balanced(k,u);this.height=this.left.height+this.right.height;this.outdated=!1;return this}},{key:"toString",value:function(){return this.left+(this["break"]?" ":"-")+this.right}},{key:"break",get:function(){return this.flags&1}}]);return e}(f),K=function(){function l(e,a){pa(this,l);this.pos=e;this.oracle=a;this.nodes=[];this.lineEnd=this.lineStart=-1;this.covering=null;this.writtenTo=e}sa(l,[{key:"span",value:function(e,
a){if(-1<this.lineStart){e=Math.min(a,this.lineEnd);var b=this.nodes[this.nodes.length-1];b instanceof m?b.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new m(e-this.pos,-1));this.writtenTo=e;a>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=a}},{key:"point",value:function(e,a,b){if(e<a||b.heightRelevant){var d=b.widget?Math.max(0,b.widget.estimatedHeight):0;e=a-e;b.block?this.addBlock(new h(e,d,b.type)):(e||5<=d)&&this.addLineDeco(d,e)}else a>e&&this.span(e,
a);-1<this.lineEnd&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}},{key:"enterLine",value:function(){if(!(-1<this.lineStart)){var e=this.oracle.doc.lineAt(this.pos),a=e.from;e=e.to;this.lineStart=a;this.lineEnd=e;this.writtenTo<a&&((this.writtenTo<a-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,a-1)),this.nodes.push(null));this.pos>a&&this.nodes.push(new m(this.pos-a,-1));this.writtenTo=this.pos}}},{key:"blankContent",value:function(e,
a){var b=new v(a-e);this.oracle.doc.lineAt(e).to==a&&(b.flags|=4);return b}},{key:"ensureLine",value:function(){this.enterLine();var e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof m)return e;e=new m(0,-1);this.nodes.push(e);return e}},{key:"addBlock",value:function(e){this.enterLine();e.type!=tb.WidgetAfter||this.isCovered||this.ensureLine();this.nodes.push(e);this.writtenTo=this.pos+=e.length;e.type!=tb.WidgetBefore&&(this.covering=e)}},{key:"addLineDeco",value:function(e,
a){var b=this.ensureLine();b.length+=a;b.collapsed+=a;b.widgetHeight=Math.max(b.widgetHeight,e);this.writtenTo=this.pos+=a}},{key:"finish",value:function(e){var a=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(-1<this.lineStart)||a instanceof m||this.isCovered?(this.writtenTo<this.pos||null==a)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new m(0,-1));a=!0;var b=!1,d=void 0;try{for(var g=this.nodes[Symbol.iterator](),k;!(a=(k=g.next()).done);a=!0){var u=
k.value;u instanceof m&&u.updateHeight(this.oracle,e);e+=u?u.length:1}}catch(F){b=!0,d=F}finally{try{if(!a&&null!=g["return"])g["return"]()}finally{if(b)throw d;}}return this.nodes}},{key:"isCovered",get:function(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}},{key:"minPointSize",get:function(){return 0}}],[{key:"build",value:function(e,a,b,d){e=new l(b,e);na.RangeSet.spans(a,b,d,e);return e.finish(b)}}]);return l}(),O=function(){function l(){pa(this,l);this.changes=[]}sa(l,
[{key:"compareRange",value:function(){}},{key:"comparePoint",value:function(e,a,b,d){(e<a||b&&b.heightRelevant||d&&d.heightRelevant)&&Q(e,a,this.changes)}},{key:"minPointSize",get:function(){return 0}}]);return l}(),V=[],Z=y.Facet.define(),la=y.Facet.define(),wa=y.Facet.define(),ta=y.Facet.define(),Oa=y.Facet.define(),za=y.Facet.define(),Ua=y.Facet.define({combine:function(l){return l.length?l[0]:!0}}),sb=function b(e,a){pa(this,b);this.field=e;this.get=a};J.PluginFieldProvider=sb;var Jb=function(){function e(){pa(this,
e)}sa(e,[{key:"from",value:function(a){return new sb(this,a)}}],[{key:"define",value:function(){return new e}}]);return e}();J.PluginField=Jb;Jb.scrollMargins=Jb.define();var fb=0,jb=y.Facet.define(),Sb=function(){function e(a,b,d){pa(this,e);this.id=a;this.create=b;this.fields=d;this.extension=jb.of(this)}sa(e,null,[{key:"define",value:function(a,b){b=b||{};var d=b.eventHandlers,g=b.provide;b=b.decorations;var k=[];if(g){var u=!0,F=!1,L=void 0;try{for(var R=(Array.isArray(g)?g:[g])[Symbol.iterator](),
T;!(u=(T=R.next()).done);u=!0)k.push(T.value)}catch(va){F=!0,L=va}finally{try{if(!u&&null!=R["return"])R["return"]()}finally{if(F)throw L;}}}d&&k.push(gb.from(function(va){return{plugin:va,handlers:d}}));if(b){R=!0;T=!1;g=void 0;try{for(var da=(Array.isArray(b)?b:[b])[Symbol.iterator](),ba;!(R=(ba=da.next()).done);R=!0)k.push(vc.from(ba.value))}catch(va){T=!0,g=va}finally{try{if(!R&&null!=da["return"])da["return"]()}finally{if(T)throw g;}}}return new e(fb++,a,k)}},{key:"fromClass",value:function(a,
b){return e.define(function(d){return new a(d)},b)}}]);return e}();J.ViewPlugin=Sb;var vc=Jb.define(),gb=Jb.define(),Cb=function(){function e(a,b){pa(this,e);this.value=a;this.spec=b}sa(e,[{key:"takeField",value:function(a,b){var d=!0,g=!1,k=void 0;try{for(var u=this.spec.fields[Symbol.iterator](),F;!(d=(F=u.next()).done);d=!0){var L=F.value,R=L.get;L.field==a&&b.push(R(this.value))}}catch(T){g=!0,k=T}finally{try{if(!d&&null!=u["return"])u["return"]()}finally{if(g)throw k;}}}},{key:"update",value:function(a){if(!this.value.update)return this;
try{return this.value.update(a),this}catch(b){Va(a.state,b,"CodeMirror plugin crashed");if(this.value.destroy)try{this.value.destroy()}catch(d){}return e.dummy}}},{key:"destroy",value:function(a){if(this.value.destroy)try{this.value.destroy()}catch(b){Va(a.state,b,"CodeMirror plugin crashed")}}}],[{key:"create",value:function(a,b){try{var d=a.create(b)}catch(g){return Va(b.state,g,"CodeMirror plugin crashed"),e.dummy}return new e(d,a)}}]);return e}();Cb.dummy=new Cb({},Sb.define(function(){return{}}));
var Vb=y.Facet.define({combine:function(e){return e.reduce(function(a,b){return n(b,a)},{})}}),bc=y.Facet.define({combine:function(e){return e.reduce(function(a,b){return n(b,a)},{})}}),Ab=y.Facet.define(),Kb=y.Facet.define(),Wb=function(){function e(a,b,d,g){pa(this,e);this.fromA=a;this.toA=b;this.fromB=d;this.toB=g}sa(e,[{key:"join",value:function(a){return new e(Math.min(this.fromA,a.fromA),Math.max(this.toA,a.toA),Math.min(this.fromB,a.fromB),Math.max(this.toB,a.toB))}},{key:"addToSet",value:function(a){for(var b=
a.length,d=this;0<b;b--){var g=a[b-1];if(!(g.fromA>d.toA)){if(g.toA<d.fromA)break;d=d.join(g);a.splice(b-1,1)}}a.splice(b,0,d);return a}}],[{key:"extendWithRanges",value:function(a,b){if(0==b.length)return a;for(var d=[],g=0,k=0,u=0,F=0;;g++){var L=g==a.length?null:a[g];u-=F;for(var R=L?L.fromB:1E9;k<b.length&&b[k]<R;){var T=b[k+1],da=Math.max(F,b[k]),ba=Math.min(R,T);da<=ba&&(new e(da+u,ba+u,da,ba)).addToSet(d);if(T>R)break;else k+=2}if(!L)return d;(new e(L.fromA,L.toA,L.fromB,L.toB)).addToSet(d);
u=L.toA;F=L.toB}}}]);return e}(),cc=function(){function e(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:V;pa(this,e);this.view=a;this.state=b;this.transactions=d;this.flags=0;this.prevState=a.state;this.changes=y.ChangeSet.empty(this.prevState.doc.length);var g=!0,k=!1,u=void 0;try{for(var F=d[Symbol.iterator](),L;!(g=(L=F.next()).done);g=!0)this.changes=this.changes.compose(L.value.changes)}catch(T){k=!0,u=T}finally{try{if(!g&&null!=F["return"])F["return"]()}finally{if(k)throw u;
}}var R=[];this.changes.iterChangedRanges(function(T,da,ba,va){return R.push(new Wb(T,da,ba,va))});this.changedRanges=R;d=a.hasFocus;d!=a.inputState.notifiedFocused&&(a.inputState.notifiedFocused=d,1!=this.flags);this.docChanged&&(this.flags|=2)}sa(e,[{key:"viewportChanged",get:function(){return 0<(this.flags&4)}},{key:"heightChanged",get:function(){return 0<(this.flags&2)}},{key:"geometryChanged",get:function(){return this.docChanged||0<(this.flags&18)}},{key:"focusChanged",get:function(){return 0<
(this.flags&1)}},{key:"docChanged",get:function(){return this.transactions.some(function(a){return a.docChanged})}},{key:"selectionSet",get:function(){return this.transactions.some(function(a){return a.selection})}},{key:"empty",get:function(){return 0==this.flags&&0==this.transactions.length}}]);return e}();J.ViewUpdate=cc;var pc=function(){function e(a,b,d){pa(this,e);this.from=a;this.to=b;this.size=d}sa(e,[{key:"draw",value:function(a){return nb.replace({widget:new mc(this.size,a)}).range(this.from,
this.to)}}],[{key:"same",value:function(a,b){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++){var g=a[d],k=b[d];if(g.from!=k.from||g.to!=k.to||g.size!=k.size)return!1}return!0}}]);return e}(),mc=function(e){function a(b,d){pa(this,a);var g=Ea(this,Fa(a).call(this));g.size=b;g.vertical=d;return g}qa(a,e);sa(a,[{key:"eq",value:function(b){return b.size==this.size&&b.vertical==this.vertical}},{key:"toDOM",value:function(){var b=document.createElement("div");this.vertical?b.style.height=this.size+
"px":(b.style.width=this.size+"px",b.style.height="2px",b.style.display="inline-block");return b}},{key:"estimatedHeight",get:function(){return this.vertical?this.size:-1}}]);return a}(tc),Ya=function(){function e(a){pa(this,e);this.state=a;this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0};this.inView=!0;this.contentWidth=this.paddingBottom=this.paddingTop=0;this.heightOracle=new bd;this.heightMap=f.empty();this.scrollTo=null;this.printing=!1;this.visibleRanges=[];this.mustEnforceCursorAssoc=
!1;this.heightMap=this.heightMap.applyChanges(a.facet(Ab),ha.Text.empty,this.heightOracle.setDoc(a.doc),[new Wb(0,0,0,a.doc.length)]);this.viewport=this.getViewport(0,null);this.lineGaps=this.ensureLineGaps([]);this.lineGapDeco=nb.set(this.lineGaps.map(function(b){return b.draw(!1)}));this.computeVisibleRanges()}sa(e,[{key:"update",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=this.state;this.state=a.state;var g=this.state.facet(Ab),k=Wb.extendWithRanges(a.changedRanges,
$a(a.prevState.facet(Ab),g,a?a.changes:y.ChangeSet.empty(this.state.doc.length))),u=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(g,d.doc,this.heightOracle.setDoc(this.state.doc),k);this.heightMap.height!=u&&(a.flags|=2);d=k.length?this.mapViewport(this.viewport,a.changes):this.viewport;if(b&&(b.head<d.from||b.head>d.to)||!this.viewportIsAppropriate(d))d=this.getViewport(0,b);d.eq(this.viewport)||(this.viewport=d,a.flags|=4);if(this.lineGaps.length||15E3<this.viewport.to-this.viewport.from)a.flags|=
this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,a.changes)));this.computeVisibleRanges();b&&(this.scrollTo=b);!this.mustEnforceCursorAssoc&&a.selectionSet&&a.view.lineWrapping&&a.state.selection.primary.empty&&a.state.selection.primary.assoc&&(this.mustEnforceCursorAssoc=!0)}},{key:"measure",value:function(a,b){var d=a.dom,g="",k=Lb.LTR;if(!b){var u=window.getComputedStyle(d);g=u.whiteSpace;k="rtl"==u.direction?Lb.RTL:Lb.LTR;this.paddingTop=parseInt(u.paddingTop)||0;this.paddingBottom=
parseInt(u.paddingBottom)||0}if(this.printing)u={top:-1E8,bottom:1E8,left:-1E8,right:1E8};else{u=this.paddingTop;var F=d.getBoundingClientRect(),L=Math.max(0,F.left),R=Math.min(innerWidth,F.right),T=Math.max(0,F.top),da=Math.min(innerHeight,F.bottom);for(d=d.parentNode;d;)if(1==d.nodeType){if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&"visible"!=window.getComputedStyle(d).overflow){var ba=d.getBoundingClientRect();L=Math.max(L,ba.left);R=Math.min(R,ba.right);T=Math.max(T,ba.top);
da=Math.min(da,ba.bottom)}d=d.parentNode}else if(11==d.nodeType)d=d.host;else break;u={left:L-F.left,right:R-F.left,top:T-(F.top+u),bottom:da-(F.top+u)}}L=u;u=L.top-this.pixelViewport.top;F=L.bottom-this.pixelViewport.bottom;this.pixelViewport=L;this.inView=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(!this.inView)return 0;L=a.measureVisibleLineHeights();d=!1;T=R=0;da=this.heightOracle;if(!b){b=a.dom.clientWidth;if(da.mustRefresh(L,g,k)||da.lineWrapping&&
Math.abs(b-this.contentWidth)>da.charWidth)if(d=a.measureTextSize(),ba=d.charWidth,d=da.refresh(g,k,d.lineHeight,ba,b/ba,L))a.minWidth=0,T|=16;this.contentWidth!=b&&(this.contentWidth=b,T|=16);0<u&&0<F?R=Math.max(u,F):0>u&&0>F&&(R=Math.min(u,F))}da.heightChanged=!1;this.heightMap=this.heightMap.updateHeight(da,0,d,new Tc(this.viewport.from,L));da.heightChanged&&(T|=2);if(!this.viewportIsAppropriate(this.viewport,R)||this.scrollTo&&(this.scrollTo.head<this.viewport.from||this.scrollTo.head>this.viewport.to))this.viewport=
this.getViewport(R,this.scrollTo),T|=4;if(this.lineGaps.length||15E3<this.viewport.to-this.viewport.from)T|=this.updateLineGaps(this.ensureLineGaps(d?[]:this.lineGaps));this.computeVisibleRanges();this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,a.enforceCursorAssoc());return T}},{key:"getViewport",value:function(a,b){var d=.5-Math.max(-.5,Math.min(.5,a/1E3/2));a=this.heightMap;var g=this.state.doc,k=this.pixelViewport,u=k.top;k=k.bottom;d=new pb(a.lineAt(u-1E3*d,c.ByHeight,g,0,0).from,
a.lineAt(k+1E3*(1-d),c.ByHeight,g,0,0).to);b&&(b.head<d.from?(b=a.lineAt(b.head,c.ByPos,g,0,0).top,d=new pb(a.lineAt(b-500,c.ByHeight,g,0,0).from,a.lineAt(b+(k-u)+500,c.ByHeight,g,0,0).to)):b.head>d.to&&(b=a.lineAt(b.head,c.ByPos,g,0,0).bottom,d=new pb(a.lineAt(b-(k-u)-500,c.ByHeight,g,0,0).from,a.lineAt(b+500,c.ByHeight,g,0,0).to)));return d}},{key:"mapViewport",value:function(a,b){var d=b.mapPos(a.from,-1);a=b.mapPos(a.to,1);return new pb(this.heightMap.lineAt(d,c.ByPos,this.state.doc,0,0).from,
this.heightMap.lineAt(a,c.ByPos,this.state.doc,0,0).to)}},{key:"viewportIsAppropriate",value:function(a){var b=a.from,d=a.to,g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,k=this.heightMap.lineAt(b,c.ByPos,this.state.doc,0,0).top,u=this.heightMap.lineAt(d,c.ByPos,this.state.doc,0,0).bottom;return(0==b||k<=this.pixelViewport.top-Math.max(10,Math.min(-g,250)))&&(d==this.state.doc.length||u>=this.pixelViewport.bottom+Math.max(10,Math.min(g,250)))&&k>this.pixelViewport.top-2E3&&u<this.pixelViewport.bottom+
2E3}},{key:"mapLineGaps",value:function(a,b){if(!a.length||b.empty)return a;var d=[],g=!0,k=!1,u=void 0;try{for(var F=a[Symbol.iterator](),L;!(g=(L=F.next()).done);g=!0){var R=L.value;b.touchesRange(R.from,R.to)||d.push(new pc(b.mapPos(R.from),b.mapPos(R.to),R.size))}}catch(T){k=!0,u=T}finally{try{if(!g&&null!=F["return"])F["return"]()}finally{if(k)throw u;}}return d}},{key:"ensureLineGaps",value:function(a){var b=this,d=[];if(this.heightOracle.direction!=Lb.LTR)return d;this.heightMap.forEachLine(this.viewport.from,
this.viewport.to,this.state.doc,0,0,function(g){if(!(1E4>g.length)){var k=lb(g.from,g.to,b.state);if(!(1E4>k.total)){if(b.heightOracle.lineWrapping){var u=g.from!=b.viewport.from?g.from:kb(k,(b.pixelViewport.top-g.top)/g.height);var F=g.to!=b.viewport.to?g.to:kb(k,(b.pixelViewport.bottom-g.top)/g.height)}else F=k.total*b.heightOracle.charWidth,u=kb(k,b.pixelViewport.left/F),F=kb(k,b.pixelViewport.right/F);var L=b.state.selection.primary;L.from<=u&&L.to>=g.from&&(u=L.from);L.from<=g.to&&L.to>=F&&(F=
L.to);var R=u-1E4,T=F+1E4;R>g.from+5E3&&d.push(Gb(a,function(da){return da.from==g.from&&da.to>R-5E3&&da.to<R+5E3})||new pc(g.from,R,b.gapSize(g,R,!0,k)));T<g.to-5E3&&d.push(Gb(a,function(da){return da.to==g.to&&da.from>T-5E3&&da.from<T+5E3})||new pc(T,g.to,b.gapSize(g,T,!1,k)))}}});return d}},{key:"gapSize",value:function(a,b,d,g){if(this.heightOracle.lineWrapping)return g=a.height*wb(g,b),d?g:a.height-g;a=wb(g,b);return g.total*this.heightOracle.charWidth*(d?a:1-a)}},{key:"updateLineGaps",value:function(a){var b=
this;return pc.same(a,this.lineGaps)?0:(this.lineGaps=a,this.lineGapDeco=nb.set(a.map(function(d){return d.draw(b.heightOracle.lineWrapping)})),8)}},{key:"computeVisibleRanges",value:function(){var a=this.state.facet(Ab);this.lineGaps.length&&(a=a.concat(this.lineGapDeco));var b=[];na.RangeSet.spans(a,this.viewport.from,this.viewport.to,{span:function(d,g){b.push({from:d,to:g})},point:function(){},minPointSize:20});this.visibleRanges=b}},{key:"lineAt",value:function(a,b){return this.heightMap.lineAt(a,
c.ByPos,this.state.doc,b+this.paddingTop,0)}},{key:"lineAtHeight",value:function(a,b){return this.heightMap.lineAt(a,c.ByHeight,this.state.doc,b+this.paddingTop,0)}},{key:"blockAtHeight",value:function(a,b){return this.heightMap.blockAt(a,this.state.doc,b+this.paddingTop,0)}},{key:"forEachLine",value:function(a,b,d,g){return this.heightMap.forEachLine(a,b,this.state.doc,g+this.paddingTop,0,d)}}]);return e}(),pb=function(){function e(a,b){pa(this,e);this.from=a;this.to=b}sa(e,[{key:"eq",value:function(a){return this.from==
a.from&&this.to==a.to}}]);return e}(),Jc=[],Uc=function(e){function a(b){pa(this,a);var d=Ea(this,Fa(a).call(this));d.view=b;d.viewports=Jc;d.compositionDeco=nb.none;d.decorations=[];d.minWidth=0;d.minWidthFrom=0;d.minWidthTo=0;d.impreciseAnchor=null;d.impreciseHead=null;d.setDOM(b.contentDOM);d.children=[new hc];d.children[0].setParent(Qa(d));d.updateInner([new Wb(0,0,0,b.state.doc.length)],d.updateDeco(),0);return d}qa(a,e);sa(a,[{key:"update",value:function(b){var d=this,g,k=b.changedRanges;0<
this.minWidth&&k.length&&(k.every(function(L){var R=L.fromA;return L.toA<d.minWidthFrom||R>d.minWidthTo})?(this.minWidthFrom=b.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=b.changes.mapPos(this.minWidthTo,1)):this.minWidth=0);null!==(g=this.view.inputState)&&void 0!==g&&g.composing?b.transactions.length&&(this.compositionDeco=rb(this.view,b.changes)):this.compositionDeco=nb.none;g=(hb.ie||hb.chrome)&&!this.compositionDeco.size&&b&&b.state.doc.lines!=b.prevState.doc.lines;var u=this.decorations,
F=this.updateDeco();u=Xb(u,F,b.changes);k=Wb.extendWithRanges(k,u);u=b.transactions.some(function(L){return"pointerselection"==L.annotation(y.Transaction.userEvent)});if(0==this.dirty&&0==k.length&&!(b.flags&12)&&b.state.selection.primary.from>=this.view.viewport.from&&b.state.selection.primary.to<=this.view.viewport.to)return this.updateSelection(g,u),!1;this.updateInner(k,F,b.prevState.doc.length,g,u);return!0}},{key:"updateInner",value:function(b,d,g){var k=this,u=3<arguments.length&&void 0!==
arguments[3]?arguments[3]:!1,F=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1;this.updateChildren(b,d,g);this.view.observer.ignore(function(){k.dom.style.height=k.view.viewState.heightMap.height+"px";k.dom.style.minWidth=k.minWidth?k.minWidth+"px":"";var L=hb.chrome?{node:ya(k.view.root).focusNode,written:!1}:void 0;k.sync(L);k.dirty=0;if(null===L||void 0===L?0:L.written)u=!0;k.updateSelection(u,F);k.dom.style.height=""})}},{key:"updateChildren",value:function(b,d,g){g=this.childCursor(g);
for(var k=b.length-1;;k--){var u=0<=k?b[k]:null;if(!u)break;var F=u.fromA,L=u.toA,R=oc.build(this.view.state.doc,u.fromB,u.toB,d);u=R.content;var T=R.breakAtStart,da=R.openStart;R=R.openEnd;var ba=g.findPos(L,1);L=ba.i;ba=ba.off;F=g.findPos(F,-1);this.replaceRange(F.i,F.off,L,ba,u,T,da,R)}}},{key:"replaceRange",value:function(b,d,g,k,u,F,L,R){var T=this.children[b],da=u.length?u[u.length-1]:null,ba=da?da.breakAfter:F;if(b!=g||F||ba||!(2>u.length)||!T.merge(d,k,u.length?da:null,0==d,L,R)){var va=this.children[g];
k<va.length||va.children.length&&0==va.children[va.children.length-1].length?(b==g&&(va=va.split(k),k=0),!ba&&da&&va.merge(0,k,da,!0,0,R)?u[u.length-1]=va:((k||va.children.length&&0==va.children[0].length)&&va.merge(0,k,null,!1,0,R),u.push(va))):va.breakAfter&&(da?da.breakAfter=1:F=1);g++;T.breakAfter=F;0<d&&(!F&&u.length&&T.merge(d,T.length,u[0],!1,L,0)?T.breakAfter=u.shift().breakAfter:(d<T.length||T.children.length&&0==T.children[T.children.length-1].length)&&T.merge(d,T.length,null,!1,L,0),b++);
for(;b<g&&u.length;)if(this.children[g-1].match(u[u.length-1]))g--,u.pop();else if(this.children[b].match(u[0]))b++,u.shift();else break;(b<g||u.length)&&this.replaceChildren(b,g,u)}}},{key:"updateSelection",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;if(1<arguments.length&&void 0!==arguments[1]&&arguments[1]||this.mayControlSelection()){var d=this.view.state.selection.primary,g=this.domAtPos(d.anchor),k=this.domAtPos(d.head),u=ya(this.root);(b||!u.focusNode||
hb.gecko&&d.empty&&ec(u.focusNode,u.focusOffset)||!ma(g.node,g.offset,u.anchorNode,u.anchorOffset)||!ma(k.node,k.offset,u.focusNode,u.focusOffset))&&this.view.observer.ignore(function(){if(d.empty){if(hb.gecko){var F=ec(g.node,g.offset);if(F&&3!=F){var L=dc(g.node,g.offset,1==F?1:-1);L&&(g=new lc(L,1==F?0:L.nodeValue.length))}}u.collapse(g.node,g.offset);null!=d.bidiLevel&&null!=u.cursorBidiLevel&&(u.cursorBidiLevel=d.bidiLevel)}else u.extend?(u.collapse(g.node,g.offset),u.extend(k.node,k.offset)):
(F=document.createRange(),d.anchor>d.head&&(L=[k,g],g=L[0],k=L[1]),F.setEnd(k.node,k.offset),F.setStart(g.node,g.offset),u.removeAllRanges(),u.addRange(F))});this.impreciseAnchor=g.precise?null:new lc(u.anchorNode,u.anchorOffset);this.impreciseHead=k.precise?null:new lc(u.focusNode,u.focusOffset)}}},{key:"enforceCursorAssoc",value:function(){var b=this.view.state.selection.primary,d=ya(this.root);if(b.empty&&b.assoc&&d.modify){var g=hc.find(this,b.head);if(g){var k=g.posAtStart;b.head!=k&&b.head!=
k+g.length&&(g=this.coordsAt(b.head,-1),k=this.coordsAt(b.head,1),!g||!k||g.bottom>k.top||(g=this.domAtPos(b.head+b.assoc),d.collapse(g.node,g.offset),d.modify("move",0>b.assoc?"forward":"backward","lineboundary")))}}}},{key:"mayControlSelection",value:function(){return this.view.state.facet(Ua)?this.root.activeElement==this.dom:fa(this.dom,ya(this.root))}},{key:"nearest",value:function(b){for(;b;){var d=Ob.get(b);if(d&&d.rootView==this)return d;b=b.parentNode}return null}},{key:"posFromDOM",value:function(b,
d){var g=this.nearest(b);if(!g)throw new RangeError("Trying to find position for a DOM position outside of the document");return g.localPosFromDOM(b,d)+g.posAtStart}},{key:"domAtPos",value:function(b){var d=this.childCursor().findPos(b,-1);b=d.i;for(d=d.off;b<this.children.length-1;){var g=this.children[b];if(d<g.length||g instanceof hc)break;b++;d=0}return this.children[b].domAtPos(d)}},{key:"coordsAt",value:function(b,d){for(var g=this.length,k=this.children.length-1;;k--){var u=this.children[k];
g=g-u.breakAfter-u.length;if(b>=g&&u.type!=tb.WidgetAfter)return u.coordsAt(b-g,d)}}},{key:"measureVisibleLineHeights",value:function(){var b=[],d=this.view.viewState.viewport,g=d.from;d=d.to;for(var k=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=0,F=0;F<this.children.length;F++){var L=this.children[F],R=u+L.length;if(R>d)break;if(u>=g){b.push(L.dom.getBoundingClientRect().height);var T=L.dom.scrollWidth;T>k&&(this.minWidth=k=T,this.minWidthFrom=u,this.minWidthTo=R)}u=R+L.breakAfter}return b}},
{key:"measureTextSize",value:function(){var b=this,d=!0,g=!1,k=void 0;try{for(var u=this.children[Symbol.iterator](),F;!(d=(F=u.next()).done);d=!0){var L=F.value;if(L instanceof hc){var R=L.measureTextSize();if(R)return R}}}catch(va){g=!0,k=va}finally{try{if(!d&&null!=u["return"])u["return"]()}finally{if(g)throw k;}}var T=document.createElement("div"),da,ba;T.className="cm-line";T.textContent="abc def ghi jkl mno pqr stu";this.view.observer.ignore(function(){b.dom.appendChild(T);var va=ca(T.firstChild)[0];
da=T.getBoundingClientRect().height;ba=va?va.width/27:7;T.remove()});return{lineHeight:da,charWidth:ba}}},{key:"childCursor",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.length,d=this.children.length;d&&(b-=this.children[--d].length);return new Ib(this.children,b,d)}},{key:"computeBlockGapDeco",value:function(){var b=this.view.viewState.viewport,d=[b],g=this.view.state.selection.primary,k=g.head,u=g.anchor;if(k<b.from||k>b.to)b=this.view.viewState.lineAt(k,0),
d.push(new pb(b.from,b.to));d.some(function(T){var da=T.to;return u>=T.from&&u<=da})||(b=this.view.viewState.lineAt(u,0),d.push(new pb(b.from,b.to)));this.viewports=d.sort(function(T,da){return T.from-da.from});b=[];for(k=g=0;;k++){var F=k==d.length?null:d[k],L=F?F.from-1:this.length;if(L>g){var R=this.view.viewState.lineAt(L,0).bottom-this.view.viewState.lineAt(g,0).top;b.push(nb.replace({widget:new cd(R),block:!0,inclusive:!0}).range(g,L))}if(!F)break;g=F.to+1}return nb.set(b)}},{key:"updateDeco",
value:function(){return this.decorations=[this.computeBlockGapDeco(),this.view.viewState.lineGapDeco,this.compositionDeco].concat(Pa(this.view.state.facet(Ab)),Pa(this.view.pluginField(vc)))}},{key:"scrollPosIntoView",value:function(b,d){var g;if(b=this.coordsAt(b,d)){var k=g=d=0,u=0,F=!0,L=!1,R=void 0;try{for(var T=this.view.pluginField(Jb.scrollMargins)[Symbol.iterator](),da;!(F=(da=T.next()).done);F=!0){var ba=da.value;if(ba){var va=ba.left,Wa=ba.right,Xa=ba.top;var ob=ba.bottom;null!=va&&(d=Math.max(d,
va));null!=Wa&&(g=Math.max(g,Wa));null!=Xa&&(k=Math.max(k,Xa));null!=ob&&(u=Math.max(u,ob))}}}catch($b){L=!0,R=$b}finally{try{if(!F&&null!=T["return"])T["return"]()}finally{if(L)throw R;}}ba=this.dom;T={left:b.left-d,top:b.top-k,right:b.right+g,bottom:b.bottom+u};da=ba.ownerDocument.defaultView;for(ba=ba.parentNode;ba;)if(1==ba.nodeType){if(va=ba==document.body)ob=0,b=da.innerWidth,d=0,g=da.innerHeight;else{if(ba.scrollHeight<=ba.clientHeight&&ba.scrollWidth<=ba.clientWidth){ba=ba.parentNode;continue}Wa=
ba.getBoundingClientRect();ob=Wa.left;b=Wa.left+ba.clientWidth;d=Wa.top;g=Wa.top+ba.clientHeight}Xa=Wa=0;T.top<d?Xa=-(d-T.top+5):T.bottom>g&&(Xa=T.bottom-g+5);T.left<ob?Wa=-(ob-T.left+5):T.right>b&&(Wa=T.right-b+5);if(Wa||Xa)va?da.scrollBy(Wa,Xa):(Xa&&(ob=ba.scrollTop,ba.scrollTop+=Xa,Xa=ba.scrollTop-ob),Wa&&(ob=ba.scrollLeft,ba.scrollLeft+=Wa,Wa=ba.scrollLeft-ob),T={left:T.left-Wa,top:T.top-Xa,right:T.right-Wa,bottom:T.bottom-Xa});if(va)break;ba=ba.parentNode}else if(11==ba.nodeType)ba=ba.host;else break}}},
{key:"root",get:function(){return this.view.root}},{key:"editorView",get:function(){return this.view}},{key:"length",get:function(){return this.view.state.doc.length}}]);return a}(Ob),cd=function(e){function a(b){pa(this,a);var d=Ea(this,Fa(a).call(this));d.height=b;return d}qa(a,e);sa(a,[{key:"toDOM",value:function(){var b=document.createElement("div");this.updateDOM(b);return b}},{key:"eq",value:function(b){return b.height==this.height}},{key:"updateDOM",value:function(b){if(1E7>this.height){for(;b.lastChild;)b.lastChild.remove();
b.style.height=this.height+"px"}else{b.style.height="";for(var d=this.height;0<d;d-=1E7)b.appendChild(document.createElement("div")).style.height=Math.min(d,1E7)+"px"}return!0}},{key:"estimatedHeight",get:function(){return this.height}}]);return a}(tc),Pd=function(e){function a(b,d){pa(this,a);var g=Ea(this,Fa(a).call(this));g.top=b;g.text=d;return g}qa(a,e);sa(a,[{key:"eq",value:function(b){return this.top==b.top&&this.text==b.text}},{key:"toDOM",value:function(){return this.top}},{key:"ignoreEvent",
value:function(){return!1}},{key:"customView",get:function(){return kd}}]);return a}(tc),Qd=function(){function e(){pa(this,e);this.changes=[]}sa(e,[{key:"compareRange",value:function(a,b){Q(a,b,this.changes)}},{key:"comparePoint",value:function(a,b){Q(a,b,this.changes)}}]);return e}(),ge=function(){function e(a){var b=this;pa(this,e);this.lastKeyTime=this.lastKeyCode=0;this.lastSelectionOrigin=null;this.lastSelectionTime=0;this.scrollHandlers=[];this.registeredEvents=[];this.customHandlers=[];this.composing=
!1;this.compositionEndedAt=0;this.mouseSelection=null;var d=function(k){var u=Pb[k];a.contentDOM.addEventListener(k,function(F){G(a,F)&&!b.ignoreDuringComposition(F)&&(b.mustFlushObserver(F)&&a.observer.forceFlush(),b.runCustomHandlers(k,a,F)?F.preventDefault():u(a,F))});b.registeredEvents.push(k)},g;for(g in Pb)d(g);a.contentDOM.addEventListener("keydown",function(k){a.inputState.lastKeyCode=k.keyCode;a.inputState.lastKeyTime=Date.now()});this.notifiedFocused=a.hasFocus;this.ensureHandlers(a)}sa(e,
[{key:"setSelectionOrigin",value:function(a){this.lastSelectionOrigin=a;this.lastSelectionTime=Date.now()}},{key:"ensureHandlers",value:function(a){var b=this,d=this.customHandlers=a.pluginField(gb),g=!0,k=!1,u=void 0;try{for(var F=d[Symbol.iterator](),L;!(g=(L=F.next()).done);g=!0){var R=L.value;d=function(da){0>b.registeredEvents.indexOf(da)&&"scroll"!=da&&(b.registeredEvents.push(da),a.contentDOM.addEventListener(da,function(ba){G(a,ba)&&b.runCustomHandlers(da,a,ba)&&ba.preventDefault()}))};for(var T in R.handlers)d(T)}}catch(da){k=
!0,u=da}finally{try{if(!g&&null!=F["return"])F["return"]()}finally{if(k)throw u;}}}},{key:"runCustomHandlers",value:function(a,b,d){var g=!0,k=!1,u=void 0;try{for(var F=this.customHandlers[Symbol.iterator](),L;!(g=(L=F.next()).done);g=!0){var R=L.value,T=R.handlers[a];if(T)try{if(T.call(R.plugin,d,b)||d.defaultPrevented)return!0}catch(da){Va(b.state,da)}}}catch(da){k=!0,u=da}finally{try{if(!g&&null!=F["return"])F["return"]()}finally{if(k)throw u;}}return!1}},{key:"runScrollHandlers",value:function(a,
b){var d=!0,g=!1,k=void 0;try{for(var u=this.customHandlers[Symbol.iterator](),F;!(d=(F=u.next()).done);d=!0){var L=F.value,R=L.handlers.scroll;if(R)try{R.call(L.plugin,b,a)}catch(T){Va(a.state,T)}}}catch(T){g=!0,k=T}finally{try{if(!d&&null!=u["return"])u["return"]()}finally{if(g)throw k;}}}},{key:"ignoreDuringComposition",value:function(a){return/^key/.test(a.type)?this.composing?!0:hb.safari&&500>a.timeStamp-this.compositionEndedAt?(this.compositionEndedAt=0,!0):!1:!1}},{key:"mustFlushObserver",
value:function(a){return"keydown"==a.type||"compositionend"==a.type}},{key:"startMouseSelection",value:function(a,b,d){this.mouseSelection&&this.mouseSelection.destroy();this.mouseSelection=new fe(this,a,b,d)}},{key:"update",value:function(a){this.mouseSelection&&this.mouseSelection.update(a);this.lastKeyCode=this.lastSelectionTime=0}},{key:"destroy",value:function(){this.mouseSelection&&this.mouseSelection.destroy()}}]);return e}(),fe=function(){function e(a,b,d,g){pa(this,e);this.inputState=a;this.view=
b;this.startEvent=d;this.style=g;a=b.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this));a.addEventListener("mouseup",this.up=this.up.bind(this));this.extend=d.shiftKey;if(a=b.state.facet(y.EditorState.allowMultipleSelections))a=b.state.facet(Z),a=a.length?a[0](d):hb.mac?d.metaKey:d.ctrlKey;this.multiple=a;a=b.state.facet(la);this.dragMove=a.length?a[0](d):hb.mac?!d.altKey:!d.ctrlKey;this.dragging=I(b,d)?null:!1;!1===this.dragging&&(d.preventDefault(),this.select(d))}
sa(e,[{key:"move",value:function(a){if(0==a.buttons)return this.destroy();!1===this.dragging&&this.select(a)}},{key:"up",value:function(a){null==this.dragging&&this.select(this.startEvent);this.dragging||a.preventDefault();this.destroy()}},{key:"destroy",value:function(){var a=this.view.contentDOM.ownerDocument;a.removeEventListener("mousemove",this.move);a.removeEventListener("mouseup",this.up);this.inputState.mouseSelection=null}},{key:"select",value:function(a){a=this.style.get(a,this.extend,this.multiple);
a.eq(this.view.state.selection)&&a.primary.assoc==this.view.state.selection.primary.assoc||this.view.dispatch({selection:a,annotations:y.Transaction.userEvent.of("pointerselection"),scrollIntoView:!0})}},{key:"update",value:function(a){a.docChanged&&this.dragging&&(this.dragging=this.dragging.map(a.changes));this.style.update(a)}}]);return e}(),Pb=Object.create(null),Id=hb.ie&&15>hb.ie_version||hb.ios&&604>hb.webkit_version;Pb.keydown=function(e,a){var b=(a.ctrlKey?1:0)|(a.metaKey?8:0)|(a.altKey?
2:0)|(a.shiftKey?4:0),d=a.keyCode,g=hb.mac&&1==b;(8==d||g&&72==d||46==d||g&&68==d||27==d||b==(hb.mac?8:1)&&(66==d||73==d||89==d||90==d))&&a.preventDefault();e.inputState.setSelectionOrigin("keyboardselection")};Pb.touchdown=Pb.touchmove=function(e){e.inputState.setSelectionOrigin("pointerselection")};Pb.mousedown=function(e,a){var b=null,d=!0,g=!1,k=void 0;try{for(var u=e.state.facet(wa)[Symbol.iterator](),F;!(d=(F=u.next()).done);d=!0){var L=F.value;if(b=L(e,a))break}}catch(R){g=!0,k=R}finally{try{if(!d&&
null!=u["return"])u["return"]()}finally{if(g)throw k;}}b||0!=a.button||(b=ua(e,a));b&&(e.root.activeElement!=e.contentDOM&&e.observer.ignore(function(){return A(e.contentDOM)}),e.inputState.startMouseSelection(e,a,b))};var Rd=hb.ie&&11>=hb.ie_version,Bd=null,Cd=0;Pb.dragstart=function(e,a){var b=e.state.selection.primary,d=e.inputState.mouseSelection;d&&(d.dragging=b);a.dataTransfer&&(a.dataTransfer.setData("Text",e.state.sliceDoc(b.from,b.to)),a.dataTransfer.effectAllowed="copyMove")};Pb.drop=function(e,
a){if(a.dataTransfer){var b=e.posAtCoords({x:a.clientX,y:a.clientY}),d=a.dataTransfer.getData("Text");null!=b&&d&&(a.preventDefault(),a=(a=e.inputState.mouseSelection)&&a.dragging&&a.dragMove?{from:a.dragging.from,to:a.dragging.to}:null,d={from:b,insert:d},d=e.state.changes(a?[a,d]:d),e.focus(),e.dispatch({changes:d,selection:{anchor:d.mapPos(b,-1),head:d.mapPos(b,1)},annotations:y.Transaction.userEvent.of("drop")}))}};Pb.paste=function(e,a){e.observer.flush();var b=Id?null:a.clipboardData;(b=b&&
b.getData("text/plain"))?(P(e,b),a.preventDefault()):C(e)};var qd=null;Pb.copy=Pb.cut=function(e,a){var b=e.state;var d=[],g=[],k=!1,u=!0,F=!1,L=void 0;try{for(var R=b.selection.ranges[Symbol.iterator](),T;!(u=(T=R.next()).done);u=!0){var da=T.value;da.empty||(d.push(b.sliceDoc(da.from,da.to)),g.push(da))}}catch(Xa){F=!0,L=Xa}finally{try{if(!u&&null!=R["return"])R["return"]()}finally{if(F)throw L;}}if(!d.length){k=-1;u=!0;F=!1;L=void 0;try{for(var ba=b.selection.ranges[Symbol.iterator](),va;!(u=(va=
ba.next()).done);u=!0){var Wa=b.doc.lineAt(va.value.from);Wa.number>k&&(d.push(Wa.slice()),g.push({from:Wa.from,to:Math.min(b.doc.length,Wa.to+1)}));k=Wa.number}}catch(Xa){F=!0,L=Xa}finally{try{if(!u&&null!=ba["return"])ba["return"]()}finally{if(F)throw L;}}k=!0}if(b=d.join(b.lineBreak))qd=k?b:null,(d=Id?null:a.clipboardData)?(a.preventDefault(),d.clearData(),d.setData("text/plain",b)):xa(e,b),"cut"==a.type&&e.dispatch({changes:g,scrollIntoView:!0,annotations:y.Transaction.userEvent.of("cut")})};
Pb.focus=Pb.blur=function(e){setTimeout(function(){e.hasFocus!=e.inputState.notifiedFocused&&e.update([])},10)};Pb.beforeprint=function(e){e.viewState.printing=!0;e.requestMeasure();setTimeout(function(){e.viewState.printing=!1;e.requestMeasure()},2E3)};Pb.compositionstart=Pb.compositionupdate=function(e){e.inputState.composing||(e.docView.compositionDeco.size&&(e.observer.flush(),e.docView.compositionDeco.size&&e.update([])),e.inputState.composing=!0)};Pb.compositionend=function(e){e.inputState.composing=
!1;e.inputState.compositionEndedAt=Date.now();setTimeout(function(){e.inputState.composing||e.docView.compositionDeco.size&&e.update([])},50)};var he={childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},Ad=hb.ie&&11>=hb.ie_version,ie=function(){function e(a,b,d){var g=this;pa(this,e);this.view=a;this.onChange=b;this.onScrollChanged=d;this.active=!1;this.ignoreSelection=new Lc;this.delayedFlush=-1;this.queue=[];this.scrollTargets=[];this.intersection=null;this.intersecting=!1;this.parentCheck=
-1;this.dom=a.contentDOM;this.observer=new MutationObserver(function(k){var u=!0,F=!1,L=void 0;try{for(var R=k[Symbol.iterator](),T;!(u=(T=R.next()).done);u=!0)g.queue.push(T.value)}catch(da){F=!0,L=da}finally{try{if(!u&&null!=R["return"])R["return"]()}finally{if(F)throw L;}}hb.ie&&11>=hb.ie_version&&k.some(function(da){return"childList"==da.type&&da.removedNodes.length||"characterData"==da.type&&da.oldValue.length>da.target.nodeValue.length})?g.flushSoon():g.flush()});Ad&&(this.onCharData=function(k){g.queue.push({target:k.target,
type:"characterData",oldValue:k.prevValue});g.flushSoon()});this.onSelectionChange=function(){if(g.view.root.activeElement==g.dom){if(hb.ie&&11>=hb.ie_version&&!g.view.state.selection.primary.empty){var k=ya(g.view.root);if(k.focusNode&&ma(k.focusNode,k.focusOffset,k.anchorNode,k.anchorOffset))return g.flushSoon()}g.flush()}};this.start();this.onScroll=this.onScroll.bind(this);window.addEventListener("scroll",this.onScroll);"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(function(k){0>
g.parentCheck&&(g.parentCheck=setTimeout(g.listenForScroll.bind(g),1E3));0<k[k.length-1].intersectionRatio!=g.intersecting&&(g.intersecting=!g.intersecting,g.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom));this.listenForScroll()}sa(e,[{key:"onScroll",value:function(a){this.intersecting&&(this.flush(),this.onScrollChanged(a))}},{key:"listenForScroll",value:function(){this.parentCheck=-1;for(var a=0,b=null,d=this.dom;d;)if(1==d.nodeType)!b&&a<this.scrollTargets.length&&
this.scrollTargets[a]==d?a++:b||(b=this.scrollTargets.slice(0,a)),b&&b.push(d),d=d.parentNode;else if(11==d.nodeType)d=d.host;else break;a<this.scrollTargets.length&&!b&&(b=this.scrollTargets.slice(0,a));if(b){a=!0;d=!1;var g=void 0;try{for(var k=this.scrollTargets[Symbol.iterator](),u;!(a=(u=k.next()).done);a=!0)u.value.removeEventListener("scroll",this.onScroll)}catch(R){d=!0,g=R}finally{try{if(!a&&null!=k["return"])k["return"]()}finally{if(d)throw g;}}k=!0;u=!1;a=void 0;try{for(var F=(this.scrollTargets=
b)[Symbol.iterator](),L;!(k=(L=F.next()).done);k=!0)L.value.addEventListener("scroll",this.onScroll)}catch(R){u=!0,a=R}finally{try{if(!k&&null!=F["return"])F["return"]()}finally{if(u)throw a;}}}}},{key:"ignore",value:function(a){if(!this.active)return a();try{return this.stop(),a()}finally{this.start(),this.clear()}}},{key:"start",value:function(){this.active||(this.observer.observe(this.dom,he),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange),Ad&&this.dom.addEventListener("DOMCharacterDataModified",
this.onCharData),this.active=!0)}},{key:"stop",value:function(){this.active&&(this.active=!1,this.observer.disconnect(),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),Ad&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}},{key:"clearSelection",value:function(){this.ignoreSelection.set(ya(this.view.root))}},{key:"clear",value:function(){this.observer.takeRecords();this.queue.length=0;this.clearSelection()}},{key:"flushSoon",value:function(){var a=
this;0>this.delayedFlush&&(this.delayedFlush=window.setTimeout(function(){a.delayedFlush=-1;a.flush()},20))}},{key:"forceFlush",value:function(){0<=this.delayedFlush&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}},{key:"flush",value:function(){var a=this;if(!(0<=this.delayedFlush)){var b=this.queue,d=!0,g=!1,k=void 0;try{for(var u=this.observer.takeRecords()[Symbol.iterator](),F;!(d=(F=u.next()).done);d=!0)b.push(F.value)}catch(va){g=!0,k=va}finally{try{if(!d&&null!=
u["return"])u["return"]()}finally{if(g)throw k;}}b.length&&(this.queue=[]);d=ya(this.view.root);d=!this.ignoreSelection.eq(d)&&fa(this.dom,d);if(0!=b.length||d){k=g=-1;u=!1;F=!0;var L=!1,R=void 0;try{for(var T=b[Symbol.iterator](),da;!(F=(da=T.next()).done);F=!0){var ba=this.readMutation(da.value);ba&&(ba.typeOver&&(u=!0),-1==g?(g=ba.from,k=ba.to):(g=Math.min(ba.from,g),k=Math.max(ba.to,k)))}}catch(va){L=!0,R=va}finally{try{if(!F&&null!=T["return"])T["return"]()}finally{if(L)throw R;}}b=this.view.state;
if(-1<g||d)this.onChange(g,k,u);this.view.state==b&&(this.view.docView.dirty&&(this.ignore(function(){return a.view.docView.sync()}),this.view.docView.dirty=0),this.view.docView.updateSelection());this.clearSelection()}}}},{key:"readMutation",value:function(a){var b=this.view.docView.nearest(a.target);if(!b||b.ignoreMutation(a))return null;b.markDirty();if("childList"==a.type){var d=Ca(b,a.previousSibling||a.target.previousSibling,-1);a=Ca(b,a.nextSibling||a.target.nextSibling,1);return{from:d?b.posAfter(d):
b.posAtStart,to:a?b.posBefore(a):b.posAtEnd,typeOver:!1}}return{from:b.posAtStart,to:b.posAtEnd,typeOver:a.target.nodeValue==a.oldValue}}},{key:"destroy",value:function(){this.stop();this.intersection&&this.intersection.disconnect();var a=!0,b=!1,d=void 0;try{for(var g=this.scrollTargets[Symbol.iterator](),k;!(a=(k=g.next()).done);a=!0)k.value.removeEventListener("scroll",this.onScroll)}catch(u){b=!0,d=u}finally{try{if(!a&&null!=g["return"])g["return"]()}finally{if(b)throw d;}}window.removeEventListener("scroll",
this.onScroll);clearTimeout(this.parentCheck)}}]);return e}(),Sd=function(){function e(a,b){pa(this,e);this.points=a;this.lineSep=b;this.text=""}sa(e,[{key:"readRange",value:function(a,b){if(a){for(var d=a.parentNode;;){this.findPointBefore(d,a);this.readNode(a);var g=a.nextSibling;if(g==b)break;var k=Ob.get(a),u=Ob.get(g);if((k?k.breakAfter:Ta(a))||(u?u.breakAfter:Ta(g))&&("BR"!=a.nodeName||a.cmIgnore))this.text+=this.lineSep;a=g}this.findPointBefore(d,b)}}},{key:"readNode",value:function(a){if(!a.cmIgnore){var b=
Ob.get(a);b=b&&b.overrideDOMText;var d;null!=b?d=b.sliceString(0,void 0,this.lineSep):3==a.nodeType?d=a.nodeValue:"BR"==a.nodeName?d=a.nextSibling?this.lineSep:"":1==a.nodeType&&this.readRange(a.firstChild,null);null!=d&&(this.findPointIn(a,d.length),this.text+=d)}}},{key:"findPointBefore",value:function(a,b){var d=!0,g=!1,k=void 0;try{for(var u=this.points[Symbol.iterator](),F;!(d=(F=u.next()).done);d=!0){var L=F.value;L.node==a&&a.childNodes[L.offset]==b&&(L.pos=this.text.length)}}catch(R){g=!0,
k=R}finally{try{if(!d&&null!=u["return"])u["return"]()}finally{if(g)throw k;}}}},{key:"findPointIn",value:function(a,b){var d=!0,g=!1,k=void 0;try{for(var u=this.points[Symbol.iterator](),F;!(d=(F=u.next()).done);d=!0){var L=F.value;L.node==a&&(L.pos=this.text.length+Math.min(L.offset,b))}}catch(R){g=!0,k=R}finally{try{if(!d&&null!=u["return"])u["return"]()}finally{if(g)throw k;}}}}]);return e}(),Dd=function d(a,b){pa(this,d);this.node=a;this.offset=b;this.pos=-1},Qb=function(){function a(){var b=
this,d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};pa(this,a);this.plugins=[];this.editorAttrs={};this.contentAttrs={};this.bidiCache=[];this.updateState=2;this.measureScheduled=-1;this.measureRequests=[];this.contentDOM=document.createElement("div");this.scrollDOM=document.createElement("div");this.scrollDOM.className=oa("scroller");this.scrollDOM.appendChild(this.contentDOM);this.dom=document.createElement("div");this.dom.appendChild(this.scrollDOM);this._dispatch=d.dispatch||function(g){return b.update([g])};
this.dispatch=this.dispatch.bind(this);this.root=d.root||document;this.viewState=new Ya(d.state||y.EditorState.create());this.plugins=this.state.facet(jb).map(function(g){return Cb.create(g,b)});this.observer=new ie(this,function(g,k,u){return ra(b,g,k,u)},function(g){b.inputState.runScrollHandlers(b,g);b.measure()});this.docView=new Uc(this);this.inputState=new ge(this);this.mountStyles();this.updateAttrs();this.updateState=0;ib();this.requestMeasure();d.parent&&d.parent.appendChild(this.dom)}sa(a,
[{key:"dispatch",value:function(){var b;this._dispatch(1==arguments.length&&(0>=arguments.length?void 0:arguments[0])instanceof y.Transaction?0>=arguments.length?void 0:arguments[0]:(b=this.state).update.apply(b,arguments))}},{key:"update",value:function(b){if(0!=this.updateState)throw Error("Calls to EditorView.update are not allowed while an update is in progress");this.updateState=2;var d=this.state,g=!0,k=!1,u=void 0;try{for(var F=b[Symbol.iterator](),L;!(g=(L=F.next()).done);g=!0){var R=L.value;
if(R.startState!=d)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");d=R.state}}catch(va){k=!0,u=va}finally{try{if(!g&&null!=F["return"])F["return"]()}finally{if(k)throw u;}}g=new cc(this,d,b);b=b.some(function(va){return va.scrollIntoView})?d.selection.primary:null;this.viewState.update(g,b);this.bidiCache=Jd.update(this.bidiCache,g.changes);g.empty||this.updatePlugins(g);d=this.docView.update(g);this.state.facet(Kb)!=this.styleModules&&
this.mountStyles();this.updateAttrs();this.updateState=0;(d||b||this.viewState.mustEnforceCursorAssoc)&&this.requestMeasure();b=!0;d=!1;k=void 0;try{for(var T=this.state.facet(Oa)[Symbol.iterator](),da;!(b=(da=T.next()).done);b=!0){var ba=da.value;ba(g)}}catch(va){d=!0,k=va}finally{try{if(!b&&null!=T["return"])T["return"]()}finally{if(d)throw k;}}}},{key:"setState",value:function(b){var d=this;if(0!=this.updateState)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");
this.updateState=2;var g=!0,k=!1,u=void 0;try{for(var F=this.plugins[Symbol.iterator](),L;!(g=(L=F.next()).done);g=!0)L.value.destroy(this)}catch(R){k=!0,u=R}finally{try{if(!g&&null!=F["return"])F["return"]()}finally{if(k)throw u;}}this.viewState=new Ya(b);this.plugins=b.facet(jb).map(function(R){return Cb.create(R,d)});this.docView=new Uc(this);this.inputState.ensureHandlers(this);this.mountStyles();this.updateAttrs();this.bidiCache=[];this.updateState=0;this.requestMeasure()}},{key:"updatePlugins",
value:function(b){var d=b.prevState.facet(jb),g=b.state.facet(jb);if(d!=g){var k=[],u=[],F=!0,L=!1,R=void 0;try{for(var T=g[Symbol.iterator](),da;!(F=(da=T.next()).done);F=!0){var ba=da.value,va=d.indexOf(ba);if(0>va)k.push(Cb.create(ba,this));else{var Wa=this.plugins[va].update(b);u.push(Wa);k.push(Wa)}}}catch(vb){L=!0,R=vb}finally{try{if(!F&&null!=T["return"])T["return"]()}finally{if(L)throw R;}}b=!0;d=!1;g=void 0;try{for(var Xa=this.plugins[Symbol.iterator](),ob;!(b=(ob=Xa.next()).done);b=!0){var $b=
ob.value;0>u.indexOf($b)&&$b.destroy(this)}}catch(vb){d=!0,g=vb}finally{try{if(!b&&null!=Xa["return"])Xa["return"]()}finally{if(d)throw g;}}this.plugins=k;this.inputState.ensureHandlers(this)}else for(k=0;k<this.plugins.length;k++)this.plugins[k]=this.plugins[k].update(b)}},{key:"measure",value:function(){var b=this;-1<this.measureScheduled&&cancelAnimationFrame(this.measureScheduled);this.measureScheduled=-1;for(var d=null,g=0;;g++){this.updateState=1;var k=this.viewState.measure(this.docView,0<
g),u=this.measureRequests;if(!k&&!u.length&&null==this.viewState.scrollTo)break;this.measureRequests=[];if(5<g){console.warn("Viewport failed to stabilize");break}var F=u.map(function(ba){try{return ba.read(b)}catch(va){return Va(b.state,va),Kd}}),L=new cc(this,this.state);L.flags|=k;d?d.flags|=k:d=L;this.updateState=2;this.updatePlugins(L);this.updateAttrs();k&&this.docView.update(L);for(L=0;L<u.length;L++)if(F[L]!=Kd)try{u[L].write(F[L],this)}catch(ba){Va(this.state,ba)}this.viewState.scrollTo&&
(this.docView.scrollPosIntoView(this.viewState.scrollTo.head,this.viewState.scrollTo.assoc),this.viewState.scrollTo=null);if(!(k&4)&&0==this.measureRequests.length)break}this.updateState=0;this.measureScheduled=-1;if(d){g=!0;k=!1;u=void 0;try{for(var R=this.state.facet(Oa)[Symbol.iterator](),T;!(g=(T=R.next()).done);g=!0){var da=T.value;da(d)}}catch(ba){k=!0,u=ba}finally{try{if(!g&&null!=R["return"])R["return"]()}finally{if(k)throw u;}}}}},{key:"updateAttrs",value:function(){var b=n(this.state.facet(Vb),
{"class":oa("wrap")+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});w(this.dom,this.editorAttrs,b);this.editorAttrs=b;b=n(this.state.facet(bc),{spellcheck:"false",contenteditable:String(this.state.facet(Ua)),"class":oa("content"),style:"".concat(hb.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"});w(this.contentDOM,this.contentAttrs,b);this.contentAttrs=b}},{key:"mountStyles",value:function(){this.styleModules=this.state.facet(Kb);U.StyleModule.mount(this.root,
this.styleModules.concat(zd).reverse())}},{key:"domAtPos",value:function(b){return this.docView.domAtPos(b)}},{key:"posAtDOM",value:function(b){return this.docView.posFromDOM(b,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)}},{key:"readMeasured",value:function(){if(2==this.updateState)throw Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&-1<this.measureScheduled&&this.measure()}},{key:"requestMeasure",value:function(b){var d=this;0>this.measureScheduled&&
(this.measureScheduled=requestAnimationFrame(function(){return d.measure()}));if(b){if(null!=b.key)for(var g=0;g<this.measureRequests.length;g++)if(this.measureRequests[g].key===b.key){this.measureRequests[g]=b;return}this.measureRequests.push(b)}}},{key:"pluginField",value:function(b){var d=[],g=!0,k=!1,u=void 0;try{for(var F=this.plugins[Symbol.iterator](),L;!(g=(L=F.next()).done);g=!0)L.value.takeField(b,d)}catch(R){k=!0,u=R}finally{try{if(!g&&null!=F["return"])F["return"]()}finally{if(k)throw u;
}}return d}},{key:"plugin",value:function(b){var d=!0,g=!1,k=void 0;try{for(var u=this.plugins[Symbol.iterator](),F;!(d=(F=u.next()).done);d=!0){var L=F.value;if(L.spec==b)return L.value}}catch(R){g=!0,k=R}finally{try{if(!d&&null!=u["return"])u["return"]()}finally{if(g)throw k;}}return null}},{key:"blockAtHeight",value:function(b,d){this.readMeasured();return this.viewState.blockAtHeight(b,mb(d,this.contentDOM))}},{key:"visualLineAtHeight",value:function(b,d){this.readMeasured();return this.viewState.lineAtHeight(b,
mb(d,this.contentDOM))}},{key:"visualLineAt",value:function(b){return this.viewState.lineAt(b,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)}},{key:"viewportLines",value:function(b,d){var g=this.viewport;this.viewState.forEachLine(g.from,g.to,b,mb(d,this.contentDOM))}},{key:"moveByChar",value:function(b,d,g){return Yb(this,b,d,g)}},{key:"moveByGroup",value:function(b,d){var g=this;return Yb(this,b,d,function(k){return W(g,b.head,k)})}},{key:"moveToLineBoundary",value:function(b,d){a:{var g=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;var k=this.state.doc.lineAt(b.head);if(g=g&&this.lineWrapping?this.coordsAtPos(0>b.assoc&&b.head>k.from?b.head-1:b.head):null){var u=this.dom.getBoundingClientRect();g=this.posAtCoords({x:d==(this.textDirection==Lb.LTR)?u.right-1:u.left+1,y:(g.top+g.bottom)/2});if(null!=g){k=y.EditorSelection.cursor(g,d?-1:1);break a}}g=hc.find(this.docView,b.head);k=y.EditorSelection.cursor(g?d?g.posAtEnd:g.posAtStart:d?k.to:k.from,d?-1:1)}return k}},{key:"moveVertically",
value:function(b,d,g){a:{var k,u=b.head;var F=d?1:-1;if(u==(d?this.state.doc.length:0))F=y.EditorSelection.cursor(u);else{var L=this.coordsAtPos(u);if(L){var R=this.dom.getBoundingClientRect();d=null!==(k=b.goalColumn)&&void 0!==k?k:L.left-R.left;k=R.left+d;g=null!==g&&void 0!==g?g:5;L=0>F?L.top:L.bottom;for(R=0;50>R;R+=10){var T=qc(this,{x:k,y:L+(g+R)*F},F);if(null==T)break;if(T!=u){F=y.EditorSelection.cursor(T,void 0,void 0,d);break a}}}g=this.state.doc;L=g.lineAt(u);d=this.state.tabSize;k=b.goalColumn;
b=0;if(null==k){for(u=g.iterRange(L.from,u);!u.next().done;)b=(0,ha.countColumn)(u.value,b,d);k=b*this.defaultCharacterWidth}else b=Math.round(k/this.defaultCharacterWidth);if(0>F&&0==L.from)F=y.EditorSelection.cursor(0);else if(0<F&&L.to==g.length)F=y.EditorSelection.cursor(L.to);else{L=g.line(L.number+F);F=L.from;u=0;for(g=g.iterRange(L.from,L.to);u>=b&&!g.next().done;)u=(0,ha.findColumn)(g.value,u,b,d),L=u.offset,u=b-u.leftOver,F+=L;F=y.EditorSelection.cursor(F,void 0,void 0,k)}}}return F}},{key:"scrollPosIntoView",
value:function(b){this.viewState.scrollTo=y.EditorSelection.cursor(b);this.requestMeasure()}},{key:"posAtCoords",value:function(b){this.readMeasured();return qc(this,b)}},{key:"coordsAtPos",value:function(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();var g=this.docView.coordsAt(b,d);if(!g||g.left==g.right)return g;var k=this.state.doc.lineAt(b),u=this.bidiSpans(k);k=u[rc.find(u,b-k.from,-1,d)];return t(g,k.dir==Lb.LTR==0<d)}},{key:"bidiSpans",value:function(b){if(b.length>
je)return[new rc(0,b.length,0)];var d=this.textDirection,g=!0,k=!1,u=void 0;try{for(var F=this.bidiCache[Symbol.iterator](),L;!(g=(L=F.next()).done);g=!0){var R=L.value;if(R.from==b.from&&R.dir==d)return R.order}}catch(T){k=!0,u=T}finally{try{if(!g&&null!=F["return"])F["return"]()}finally{if(k)throw u;}}g=Ba(b.slice(),this.textDirection);this.bidiCache.push(new Jd(b.from,b.to,d,g));return g}},{key:"focus",value:function(){var b=this;this.observer.ignore(function(){A(b.contentDOM);b.docView.updateSelection()})}},
{key:"destroy",value:function(){var b=!0,d=!1,g=void 0;try{for(var k=this.plugins[Symbol.iterator](),u;!(b=(u=k.next()).done);b=!0)u.value.destroy(this)}catch(F){d=!0,g=F}finally{try{if(!b&&null!=k["return"])k["return"]()}finally{if(d)throw g;}}this.inputState.destroy();this.dom.remove();this.observer.destroy();-1<this.measureScheduled&&cancelAnimationFrame(this.measureScheduled)}},{key:"state",get:function(){return this.viewState.state}},{key:"viewport",get:function(){return this.viewState.viewport}},
{key:"visibleRanges",get:function(){return this.viewState.visibleRanges}},{key:"inView",get:function(){return this.viewState.inView}},{key:"composing",get:function(){return this.inputState.composing}},{key:"themeClasses",get:function(){return Rc+" "+(this.state.facet(Zc)?"cm-dark":"cm-light")+" "+this.state.facet(Cc)}},{key:"contentHeight",get:function(){return this.viewState.heightMap.height+this.viewState.paddingTop+this.viewState.paddingBottom}},{key:"defaultCharacterWidth",get:function(){return this.viewState.heightOracle.charWidth}},
{key:"defaultLineHeight",get:function(){return this.viewState.heightOracle.lineHeight}},{key:"textDirection",get:function(){return this.viewState.heightOracle.direction}},{key:"lineWrapping",get:function(){return this.viewState.heightOracle.lineWrapping}},{key:"hasFocus",get:function(){return this.root.activeElement==this.contentDOM}}],[{key:"domEventHandlers",value:function(b){return Sb.define(function(){return{}},{eventHandlers:b})}},{key:"theme",value:function(b,d){var g=U.StyleModule.newName();
b=[Cc.of(g),Kb.of(Y(".".concat(Rc,".").concat(g),b))];d&&d.dark&&b.push(Zc.of(!0));return b}},{key:"baseTheme",value:function(b){return(0,y.precedence)(Kb.of(Y("."+Rc,b)),"fallback")}}]);return a}();J.EditorView=Qb;Qb.styleModule=Kb;Qb.inputHandler=za;Qb.exceptionSink=ta;Qb.updateListener=Oa;Qb.editable=Ua;Qb.dragMovesSelection=la;Qb.clickAddsSelectionRange=Z;Qb.mouseSelectionStyle=wa;Qb.decorations=Ab;Qb.lineWrapping=Qb.theme({$content:{whiteSpace:"pre-wrap"}});Qb.contentAttributes=bc;Qb.editorAttributes=
Vb;var je=4096,rd=-1,Kd={},Jd=function(){function a(b,d,g,k){pa(this,a);this.from=b;this.to=d;this.dir=g;this.order=k}sa(a,null,[{key:"update",value:function(b,d){if(d.empty)return b;for(var g=[],k=b.length?b[b.length-1].dir:Lb.LTR,u=Math.max(0,b.length-10);u<b.length;u++){var F=b[u];F.dir!=k||d.touchesRange(F.from,F.to)||g.push(new a(d.mapPos(F.from,1),d.mapPos(F.to,-1),F.dir,F.order))}return g}}]);return a}(),Td="undefined"==typeof navigator?"key":/Mac/.test(navigator.platform)?"mac":/Win/.test(navigator.platform)?
"win":/Linux|X11/.test(navigator.platform)?"linux":"key",xd=y.Facet.define(),de=Qb.domEventHandlers({keydown:function(a,b){return gc(b.state.facet(xd),a,b,"editor")}}),Gc=null,Ud=4E3,Ld=!hb.ios,Xc=y.Facet.define({combine:function(a){return(0,y.combineConfig)(a,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:function(b,d){return Math.min(b,d)},drawRangeCursor:function(b,d){return b||d}})}}),Ed=function(){function a(b,d,g,k,u){pa(this,a);this.left=b;this.top=d;this.width=g;this.height=k;
this.className=u}sa(a,[{key:"draw",value:function(){var b=document.createElement("div");b.className=this.className;b.style.left=this.left+"px";b.style.top=this.top+"px";0<=this.width&&(b.style.width=this.width+"px");b.style.height=this.height+"px";return b}},{key:"eq",value:function(b){return this.left==b.left&&this.top==b.top&&this.width==b.width&&this.height==b.height&&this.className==b.className}}]);return a}(),$d=Sb.fromClass(function(){function a(b){pa(this,a);this.view=b;this.rangePieces=[];
this.cursors=[];this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)};this.selectionLayer=b.scrollDOM.appendChild(document.createElement("div"));this.selectionLayer.className=oa("selectionLayer");this.selectionLayer.setAttribute("aria-hidden","true");this.cursorLayer=b.scrollDOM.appendChild(document.createElement("div"));this.cursorLayer.className=oa("cursorLayer");this.cursorLayer.setAttribute("aria-hidden","true");b.requestMeasure(this.measureReq);this.setBlinkRate()}sa(a,
[{key:"setBlinkRate",value:function(){this.cursorLayer.style.animationDuration=this.view.state.facet(Xc).cursorBlinkRate+"ms"}},{key:"update",value:function(b){var d=b.prevState.facet(Xc)!=b.state.facet(Xc);(d||b.selectionSet||b.geometryChanged||b.viewportChanged)&&this.view.requestMeasure(this.measureReq);b.transactions.some(function(g){return g.scrollIntoView})&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink");d&&this.setBlinkRate()}},
{key:"readPos",value:function(){var b=this,d=this.view.state,g=d.facet(Xc),k=d.selection.ranges.map(function(Xa){return Xa.empty?[]:wc(b.view,Xa)}).reduce(function(Xa,ob){return Xa.concat(ob)}),u=[],F=!0,L=!1,R=void 0;try{for(var T=d.selection.ranges[Symbol.iterator](),da;!(F=(da=T.next()).done);F=!0){var ba=da.value,va=ba==d.selection.primary;if(ba.empty?!va||Ld:g.drawRangeCursor){var Wa=xc(this.view,ba,va);Wa&&u.push(Wa)}}}catch(Xa){L=!0,R=Xa}finally{try{if(!F&&null!=T["return"])T["return"]()}finally{if(L)throw R;
}}return{rangePieces:k,cursors:u}}},{key:"drawSel",value:function(b){var d=this,g=b.rangePieces;b=b.cursors;if(g.length!=this.rangePieces.length||g.some(function(ba,va){return!ba.eq(d.rangePieces[va])})){this.selectionLayer.textContent="";var k=!0,u=!1,F=void 0;try{for(var L=g[Symbol.iterator](),R;!(k=(R=L.next()).done);k=!0)this.selectionLayer.appendChild(R.value.draw())}catch(ba){u=!0,F=ba}finally{try{if(!k&&null!=L["return"])L["return"]()}finally{if(u)throw F;}}this.rangePieces=g}if(b.length!=
this.cursors.length||b.some(function(ba,va){return!ba.eq(d.cursors[va])})){this.cursorLayer.textContent="";g=!0;L=!1;R=void 0;try{for(var T=b[Symbol.iterator](),da;!(g=(da=T.next()).done);g=!0)this.cursorLayer.appendChild(da.value.draw())}catch(ba){L=!0,R=ba}finally{try{if(!g&&null!=T["return"])T["return"]()}finally{if(L)throw R;}}this.cursors=b}}},{key:"destroy",value:function(){this.selectionLayer.remove();this.cursorLayer.remove()}}]);return a}()),Md={$content:{"\x26 ::selection":{backgroundColor:"transparent !important"}}};
Ld&&(Md.$content.caretColor="transparent !important");var ae=(0,y.precedence)(Qb.theme(Md),"override"),Vd=oa("selectionBackground"),Yd=oa("cursor.primary"),Zd=oa("cursor.secondary"),ke=/[\0-\x08\n-\x1F\x7F-\x9F\xAD\u061C\u200B\u200C\u200E\u200F\u2028\u2029\uFEFF\uFFF9-\uFFFC]/g,le={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",
8232:"line separator",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},wd=null,Nd=null!=/x/.unicode?"gu":"g",hd=y.Facet.define({combine:function(a){a=(0,y.combineConfig)(a,{render:null,specialChars:ke,addSpecialChars:null});if(a.replaceTabs=!kc())a.specialChars=new RegExp("\t|"+a.specialChars.source,Nd);a.addSpecialChars&&(a.specialChars=new RegExp(a.specialChars.source+"|"+a.addSpecialChars.source,Nd));return a}}),be=Sb.fromClass(function(){function a(b){pa(this,
a);this.view=b;this.decorations=nb.none;this.decorationCache=Object.create(null);this.recompute()}sa(a,[{key:"update",value:function(b){var d=b.prevState.facet(hd)!=b.state.facet(hd);d&&(this.decorationCache=Object.create(null));(d||b.changes.length||b.viewportChanged)&&this.recompute()}},{key:"recompute",value:function(){var b=[],d=!0,g=!1,k=void 0;try{for(var u=this.view.visibleRanges[Symbol.iterator](),F;!(d=(F=u.next()).done);d=!0){var L=F.value;this.getDecorationsFor(L.from,L.to,b)}}catch(R){g=
!0,k=R}finally{try{if(!d&&null!=u["return"])u["return"]()}finally{if(g)throw k;}}this.decorations=nb.set(b)}},{key:"getDecorationsFor",value:function(b,d,g){var k=this.view.state.facet(hd),u=this.view.state.doc,F=b;for(b=u.iterRange(b,d);!b.next().done;){if(!b.lineBreak)for(;d=k.specialChars.exec(b.value);){var L=(0,ha.codePointAt)(d[0],0);if(null!=L){if(9==L){var R=u.lineAt(F+d.index);L=this.view.state.tabSize;R=(0,ha.countColumn)(u.sliceString(R.from,F+d.index),0,L);L=nb.replace({widget:new me((L-
R%L)*this.view.defaultCharacterWidth)})}else L=this.decorationCache[L]||(this.decorationCache[L]=nb.replace({widget:new ne(k,L)}));g.push(L.range(F+d.index,F+d.index+d[0].length))}}F+=b.value.length}}}]);return a}(),{decorations:function(a){return a.decorations}}),ne=function(a){function b(d,g){pa(this,b);var k=Ea(this,Fa(b).call(this));k.options=d;k.code=g;return k}qa(b,a);sa(b,[{key:"eq",value:function(d){return d.code==this.code}},{key:"toDOM",value:function(){var d=this.code;d=32<=d?null:10==
d?"␤":String.fromCharCode(9216+d);d=d||"•";var g="Control character "+(le[this.code]||this.code),k=this.options.render&&this.options.render(this.code,g,d);if(k)return k;k=document.createElement("span");k.textContent=d;k.title=g;k.setAttribute("aria-label",g);k.style.color="red";return k}},{key:"ignoreEvent",value:function(){return!1}}]);return b}(tc),me=function(a){function b(d){pa(this,b);var g=Ea(this,Fa(b).call(this));g.width=d;return g}qa(b,a);sa(b,[{key:"eq",value:function(d){return d.width==
this.width}},{key:"toDOM",value:function(){var d=document.createElement("span");d.textContent="\t";d.className=Od;d.style.width=this.width+"px";return d}},{key:"ignoreEvent",value:function(){return!1}}]);return b}(tc),Od=U.StyleModule.newName(),ce=Qb.styleModule.of(new U.StyleModule(function(a,b,d){b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d;return a}({},"."+Od,{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"}))),Hd=200,ee=function(a){function b(d){pa(this,
b);var g=Ea(this,Fa(b).call(this));g.content=d;return g}qa(b,a);sa(b,[{key:"toDOM",value:function(){var d=document.createElement("span");d.className=oa("placeholder");d.style.pointerEvents="none";d.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content);"string"==typeof this.content?d.setAttribute("aria-label","placeholder "+this.content):d.setAttribute("aria-hidden","true");return d}},{key:"ignoreEvent",value:function(){return!1}}]);return b}(tc);J.__test={HeightMap:f,
HeightOracle:bd,MeasuredHeights:Tc,QueryType:c,ChangedRange:Wb,computeOrder:Ba,moveVisually:Ha}};
shadow$provide[7]=function(Ia,Ka,ub,J){function La(fa){for(var ca=0;ca<Ga.length;ca+=2)if(Ga.charCodeAt(ca)==fa)return Ga.charAt(ca+1);return(0,sa.fromCodePoint)(128>fa?fa:fa+1)}function Ma(fa,ca,ma,ka){if(fa.composing)return!1;var D=fa.state.selection.primary;if(2<ka.length||2==ka.length&&1==(0,sa.codePointSize)((0,sa.codePointAt)(ka,0))||ca!=D.from||ma!=D.to)return!1;ca=Ea(fa.state,ka);if(!ca)return!1;fa.dispatch(ca);return!0}function Ea(fa,ca){var ma=fa.languageDataAt("closeBrackets",fa.selection.primary.head)[0]||
ya,ka=ma.brackets||ya.brackets,D=!0,x=!1,t=void 0;try{for(var A=ka[Symbol.iterator](),H;!(D=(H=A.next()).done);D=!0){var N=H.value,E=La((0,sa.codePointAt)(N,0));if(ca==N)return E==N?Ja(fa,N,-1<ka.indexOf(N+N+N)):Fa(fa,N,E,ma.before||ya.before);if(ca==E)return qa(fa,N,E)}}catch(p){x=!0,t=p}finally{try{if(!D&&null!=A["return"])A["return"]()}finally{if(x)throw t;}}return null}function Qa(fa,ca){fa=fa.sliceString(ca,ca+2);return fa.slice(0,(0,sa.codePointSize)((0,sa.codePointAt)(fa,0)))}function Fa(fa,
ca,ma,ka){var D=null,x=fa.changeByRange(function(t){if(!t.empty)return{changes:[{insert:ca,from:t.from},{insert:ma,from:t.to}],range:Ra.EditorSelection.range(t.anchor+ca.length,t.head+ca.length)};var A=Qa(fa.doc,t.head);return!A||/\s/.test(A)||-1<ka.indexOf(A)?{changes:{insert:ca+ma,from:t.head},range:Ra.EditorSelection.cursor(t.head+ca.length)}:{range:D=t}});return D?null:fa.update(x,{scrollIntoView:!0,annotations:Ra.Transaction.userEvent.of("input")})}function qa(fa,ca,ma){var ka=null;ca=fa.selection.ranges.map(function(D){return D.empty&&
Qa(fa.doc,D.head)==ma?Ra.EditorSelection.cursor(D.head+ma.length):ka=D});return ka?null:fa.update({selection:Ra.EditorSelection.create(ca,fa.selection.primaryIndex),scrollIntoView:!0})}function Ja(fa,ca,ma){var ka=null,D=fa.changeByRange(function(x){if(!x.empty)return{changes:[{insert:ca,from:x.from},{insert:ca,from:x.to}],range:Ra.EditorSelection.range(x.anchor+ca.length,x.head+ca.length)};var t=x.head,A=Qa(fa.doc,t);if(A==ca){if(Pa(fa,t))return{changes:{insert:ca+ca,from:t},range:Ra.EditorSelection.cursor(t+
ca.length)};x=ma&&fa.sliceDoc(t,t+3*ca.length)==ca+ca+ca;return{range:Ra.EditorSelection.cursor(t+ca.length*(x?3:1))}}return ma&&fa.sliceDoc(t-2*ca.length,t)==ca+ca&&Pa(fa,t-2*ca.length)?{changes:{insert:ca+ca+ca+ca,from:t},range:Ra.EditorSelection.cursor(t+ca.length)}:fa.charCategorizer(t)(A)!=Ra.CharCategory.Word&&(A=fa.sliceDoc(t-1,t),A!=ca&&fa.charCategorizer(t)(A)!=Ra.CharCategory.Word)?{changes:{insert:ca+ca,from:t},range:Ra.EditorSelection.cursor(t+ca.length)}:{range:ka=x}});return ka?null:
fa.update(D,{scrollIntoView:!0,annotations:Ra.Transaction.userEvent.of("input")})}function Pa(fa,ca){fa=fa.tree.resolve(ca+1);return fa.parent&&fa.from==ca}Object.defineProperty(J,"__esModule",{value:!0});J.closeBrackets=function(){return pa.EditorView.inputHandler.of(Ma)};J.handleInsertion=Ea;J.deleteBracketPair=J.closeBracketsKeymap=void 0;var pa=Ka(6),Ra=Ka(2),sa=Ka(0),ya={brackets:["(","[","{","'",'"'],before:")]}'\":;\x3e"},Ga="()[]{}\x3c\x3e";Ia=function(fa){var ca=fa.state;fa=fa.dispatch;var ma=
(ca.languageDataAt("closeBrackets",ca.selection.primary.head)[0]||ya).brackets||ya.brackets,ka=null,D=ca.changeByRange(function(x){if(x.empty){var t=x.head;t=ca.doc.sliceString(t-2,t);t=(0,sa.codePointSize)((0,sa.codePointAt)(t,0))==t.length?t:t.slice(1);var A=!0,H=!1,N=void 0;try{for(var E=ma[Symbol.iterator](),p;!(A=(p=E.next()).done);A=!0){var z=p.value;if(z==t&&Qa(ca.doc,x.head)==La((0,sa.codePointAt)(z,0)))return{changes:{from:x.head-z.length,to:x.head+z.length},range:Ra.EditorSelection.cursor(x.head-
z.length),annotations:Ra.Transaction.userEvent.of("delete")}}}catch(q){H=!0,N=q}finally{try{if(!A&&null!=E["return"])E["return"]()}finally{if(H)throw N;}}}return{range:ka=x}});ka||fa(ca.update(D,{scrollIntoView:!0}));return!ka};J.deleteBracketPair=Ia;J.closeBracketsKeymap=[{key:"Backspace",run:Ia}]};
shadow$provide[8]=function(Ia,Ka,ub,J){function La(q){La="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};return La(q)}function Ma(q,n){if(!(q instanceof n))throw new TypeError("Cannot call a class as a function");}function Ea(q,n){for(var r=0;r<n.length;r++){var w=n[r];w.enumerable=w.enumerable||!1;w.configurable=!0;"value"in w&&(w.writable=!0);
Object.defineProperty(q,w.key,w)}}function Qa(q,n,r){n&&Ea(q.prototype,n);r&&Ea(q,r);return q}function Fa(q,n){if(n&&("object"===La(n)||"function"===typeof n))return n;if(void 0===q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function qa(q){qa=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)};return qa(q)}function Ja(q,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");
q.prototype=Object.create(n&&n.prototype,{constructor:{value:q,writable:!0,configurable:!0}});n&&Pa(q,n)}function Pa(q,n){Pa=Object.setPrototypeOf||function(r,w){r.__proto__=w;return r};return Pa(q,n)}function pa(q){return[Ra(),ma.of(Object.assign(Object.assign({},ca),q))]}function Ra(q){var n=[x,ka];q&&!1===q.fixed&&n.push(D.of(!0));return n}function sa(q){for(var n=9;n<q;)n=10*n+9;return n}Object.defineProperty(J,"__esModule",{value:!0});J.gutter=pa;J.gutters=Ra;J.lineNumbers=function(){return[E.of(0<
arguments.length&&void 0!==arguments[0]?arguments[0]:{}),z]};J.lineNumberMarkers=J.GutterMarker=void 0;var ya=Ka(6),Ga=Ka(4),fa=Ka(2);Ia=function(q){function n(){Ma(this,n);return Fa(this,qa(n).apply(this,arguments))}Ja(n,q);Qa(n,[{key:"compare",value:function(r){return this==r||this.constructor==r.constructor&&this.eq(r)}},{key:"toDOM",value:function(r){return null}},{key:"at",value:function(r){return new Ga.Range(r,r,this)}}]);return n}(Ga.RangeValue);J.GutterMarker=Ia;Ia.prototype.elementClass=
"";Ia.prototype.mapMode=fa.MapMode.TrackBefore;var ca={style:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return Ga.RangeSet.empty},lineMarker:function(){return null},initialSpacer:null,updateSpacer:null,domEventHandlers:{}},ma=fa.Facet.define(),ka=ya.EditorView.baseTheme({$gutters:{display:"flex",height:"100%",boxSizing:"border-box",left:0},"$$light $gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"$$dark $gutters":{backgroundColor:"#333338",color:"#ccc"},
$gutter:{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},$gutterElement:{boxSizing:"border-box"},"$gutterElement.lineNumber":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"}}),D=fa.Facet.define({combine:function(q){return q.some(function(n){return n})}}),x=ya.ViewPlugin.fromClass(function(){function q(n){Ma(this,q);this.view=n;this.dom=document.createElement("div");this.dom.className=(0,ya.themeClass)("gutters");
this.dom.setAttribute("aria-hidden","true");this.gutters=n.state.facet(ma).map(function(Y){return new A(n,Y)});var r=!0,w=!1,M=void 0;try{for(var Q=this.gutters[Symbol.iterator](),aa;!(r=(aa=Q.next()).done);r=!0)this.dom.appendChild(aa.value.dom)}catch(Y){w=!0,M=Y}finally{try{if(!r&&null!=Q["return"])Q["return"]()}finally{if(w)throw M;}}if(this.fixed=!n.state.facet(D))this.dom.style.position="sticky";n.scrollDOM.insertBefore(this.dom,n.contentDOM)}Qa(q,[{key:"update",value:function(n){var r=this;
if(this.updateGutters(n)){var w=this.gutters.map(function(Aa){return new t(Aa,r.view.viewport)});this.view.viewportLines(function(Aa){if(Array.isArray(Aa.type)){var Ba=!0,Ha=!1,Sa=void 0;try{for(var $a=Aa.type[Symbol.iterator](),Va;!(Ba=(Va=$a.next()).done);Ba=!0){var lb=Va.value;if(lb.type==ya.BlockType.Text){var kb=lb;break}}}catch(rb){Ha=!0,Sa=rb}finally{try{if(!Ba&&null!=$a["return"])$a["return"]()}finally{if(Ha)throw Sa;}}}else kb=Aa.type==ya.BlockType.Text?Aa:void 0;if(kb){Aa=!0;Ba=!1;Ha=void 0;
try{for(var wb=w[Symbol.iterator](),Gb;!(Aa=(Gb=wb.next()).done);Aa=!0)Gb.value.line(r.view,kb)}catch(rb){Ba=!0,Ha=rb}finally{try{if(!Aa&&null!=wb["return"])wb["return"]()}finally{if(Ba)throw Ha;}}}},0);var M=!0,Q=!1,aa=void 0;try{for(var Y=w[Symbol.iterator](),oa;!(M=(oa=Y.next()).done);M=!0)oa.value.finish()}catch(Aa){Q=!0,aa=Aa}finally{try{if(!M&&null!=Y["return"])Y["return"]()}finally{if(Q)throw aa;}}this.dom.style.minHeight=this.view.contentHeight+"px";n.state.facet(D)!=!this.fixed&&(this.fixed=
!this.fixed,this.dom.style.position=this.fixed?"sticky":"")}}},{key:"updateGutters",value:function(n){var r=n.prevState.facet(ma),w=n.state.facet(ma),M=n.docChanged||n.heightChanged||n.viewportChanged;if(r==w){var Q=!0,aa=!1;r=void 0;try{for(var Y=this.gutters[Symbol.iterator](),oa;!(Q=(oa=Y.next()).done);Q=!0)oa.value.update(n)&&(M=!0)}catch(lb){aa=!0,r=lb}finally{try{if(!Q&&null!=Y["return"])Y["return"]()}finally{if(aa)throw r;}}}else{M=!0;Y=[];oa=!0;var Aa=!1,Ba=void 0;try{for(var Ha=w[Symbol.iterator](),
Sa;!(oa=(Sa=Ha.next()).done);oa=!0){var $a=Sa.value,Va=r.indexOf($a);0>Va?Y.push(new A(this.view,$a)):(this.gutters[Va].update(n),Y.push(this.gutters[Va]))}}catch(lb){Aa=!0,Ba=lb}finally{try{if(!oa&&null!=Ha["return"])Ha["return"]()}finally{if(Aa)throw Ba;}}n=!0;r=!1;w=void 0;try{for(Q=this.gutters[Symbol.iterator]();!(n=(aa=Q.next()).done);n=!0)aa.value.dom.remove()}catch(lb){r=!0,w=lb}finally{try{if(!n&&null!=Q["return"])Q["return"]()}finally{if(r)throw w;}}for(n=0;n<Y.length;n++)this.dom.appendChild(Y[n].dom);
this.gutters=Y}return M}},{key:"destroy",value:function(){this.dom.remove()}}]);return q}(),{provide:ya.PluginField.scrollMargins.from(function(q){return 0!=q.gutters.length&&q.fixed?q.view.textDirection==ya.Direction.LTR?{left:q.dom.offsetWidth}:{right:q.dom.offsetWidth}:null})}),t=function(){function q(n,r){Ma(this,q);this.gutter=n;this.localMarkers=[];this.height=this.i=0;this.cursor=Ga.RangeSet.iter(Array.isArray(n.markers)?n.markers:[n.markers],r.from)}Qa(q,[{key:"line",value:function(n,r){this.localMarkers.length&&
(this.localMarkers=[]);for(;this.cursor.value&&this.cursor.from<=r.from;)this.cursor.from==r.from&&this.localMarkers.push(this.cursor.value),this.cursor.next();var w=this.gutter.config.lineMarker(n,r,this.localMarkers);w&&this.localMarkers.unshift(w);w=this.gutter;if(0!=this.localMarkers.length||w.config.renderEmptyElements){var M=r.top-this.height;if(this.i==w.elements.length)n=new H(n,r.height,M,this.localMarkers,w.elementClass),w.elements.push(n),w.dom.appendChild(n.dom);else{var Q=this.localMarkers,
aa=w.elements[this.i];a:{var Y=Q;var oa=aa.markers;if(Y.length!=oa.length)Y=!1;else{for(var Aa=0;Aa<Y.length;Aa++)if(!Y[Aa].compare(oa[Aa])){Y=!1;break a}Y=!0}}Y&&(Q=aa.markers,this.localMarkers.length=0);aa.update(n,r.height,M,Q,w.elementClass)}this.height=r.bottom;this.i++}}},{key:"finish",value:function(){for(var n=this.gutter;n.elements.length>this.i;)n.dom.removeChild(n.elements.pop().dom)}}]);return q}(),A=function(){function q(n,r){var w=this;Ma(this,q);this.view=n;this.config=r;this.elements=
[];this.spacer=null;this.dom=document.createElement("div");this.dom.className=(0,ya.themeClass)("gutter"+(this.config.style?"."+this.config.style:""));this.elementClass=(0,ya.themeClass)("gutterElement"+(this.config.style?"."+this.config.style:""));var M=function(aa){w.dom.addEventListener(aa,function(Y){var oa=n.visualLineAtHeight(Y.clientY,n.contentDOM.getBoundingClientRect().top);r.domEventHandlers[aa](n,oa,Y)&&Y.preventDefault()})},Q;for(Q in r.domEventHandlers)M(Q);this.markers=r.markers(n.state);
r.initialSpacer&&(this.spacer=new H(n,0,0,[r.initialSpacer(n)],this.elementClass),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}Qa(q,[{key:"update",value:function(n){var r=this.markers;this.markers=this.config.markers(n.state);if(this.spacer&&this.config.updateSpacer){var w=this.config.updateSpacer(this.spacer.markers[0],n);w!=this.spacer.markers[0]&&this.spacer.update(n.view,0,0,[w],this.elementClass)}return this.markers!=r}}]);return q}(),
H=function(){function q(n,r,w,M,Q){Ma(this,q);this.height=-1;this.above=0;this.dom=document.createElement("div");this.update(n,r,w,M,Q)}Qa(q,[{key:"update",value:function(n,r,w,M,Q){this.height!=r&&(this.dom.style.height=(this.height=r)+"px");this.above!=w&&(this.dom.style.marginTop=(this.above=w)?w+"px":"");if(this.markers!=M){for(this.markers=M;r=this.dom.lastChild;)r.remove();r=!0;w=!1;var aa=void 0;try{for(var Y=M[Symbol.iterator](),oa;!(r=(oa=Y.next()).done);r=!0){var Aa=oa.value,Ba=Aa.toDOM(n);
Ba&&this.dom.appendChild(Ba);var Ha=Aa.elementClass;Ha&&(Q+=" "+Ha)}}catch(Sa){w=!0,aa=Sa}finally{try{if(!r&&null!=Y["return"])Y["return"]()}finally{if(w)throw aa;}}this.dom.className=Q}}}]);return q}(),N=fa.Facet.define();J.lineNumberMarkers=N;var E=fa.Facet.define({combine:function(q){return(0,fa.combineConfig)(q,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(n,r){var w=Object.assign({},n);n=function(Q){var aa=w[Q],Y=r[Q];w[Q]=aa?function(oa,Aa,Ba){return aa(oa,Aa,Ba)||Y(oa,
Aa,Ba)}:Y};for(var M in r)n(M);return w}})}}),p=function(q){function n(r){Ma(this,n);var w=Fa(this,qa(n).call(this));w.number=r;return w}Ja(n,q);Qa(n,[{key:"eq",value:function(r){return this.number==r.number}},{key:"toDOM",value:function(r){r=r.state.facet(E);return document.createTextNode(r.formatNumber(this.number))}}]);return n}(Ia),z=pa({style:"lineNumber",markers:function(q){return q.facet(N)},lineMarker:function(q,n,r){return r.length?null:new p(q.state.doc.lineAt(n.from).number)},initialSpacer:function(q){return new p(sa(q.state.doc.lines))},
updateSpacer:function(q,n){n=sa(n.view.state.doc.lines);return n==q.number?q:new p(n)}})};
shadow$provide[9]=function(Ia,Ka,ub,J){function La(n){La="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"===typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};return La(n)}function Ma(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");}function Ea(n,r){for(var w=0;w<r.length;w++){var M=r[w];M.enumerable=M.enumerable||!1;M.configurable=!0;"value"in M&&(M.writable=!0);
Object.defineProperty(n,M.key,M)}}function Qa(n,r,w){r&&Ea(n.prototype,r);w&&Ea(n,w);return n}function Fa(n,r){if(r&&("object"===La(r)||"function"===typeof r))return r;if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function qa(n){qa=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)};return qa(n)}function Ja(n,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");
n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}});r&&Pa(n,r)}function Pa(n,r){Pa=Object.setPrototypeOf||function(w,M){w.__proto__=M;return w};return Pa(n,r)}function pa(n,r){var w=r.mapPos(n.from,1);n=r.mapPos(n.to,-1);return w>=n?void 0:{from:w,to:n}}function Ra(n){var r=[],w=!0,M=!1,Q=void 0;try{for(var aa=function(){var Aa=oa.value.head;if(r.some(function(Ba){return Ba.from<=Aa&&Ba.to>=Aa}))return"continue";r.push(n.visualLineAt(Aa))},Y=n.state.selection.ranges[Symbol.iterator](),
oa;!(w=(oa=Y.next()).done);w=!0)aa()}catch(Aa){M=!0,Q=Aa}finally{try{if(!w&&null!=Y["return"])Y["return"]()}finally{if(M)throw Q;}}return r}function sa(n,r,w){var M,Q=null;null===(M=n.field(t,!1))||void 0===M?void 0:M.between(r,w,function(aa,Y){if(!Q||Q.from>aa)Q={from:aa,to:Y}});return Q}function ya(n,r,w){var M=!1;n.between(r,r,function(Q,aa){Q==r&&aa==w&&(M=!0)});return M}function Ga(n,r,w){return n.facet(ca.EditorState.foldable).reduce(function(M,Q){return M||Q(n,r,w)},null)}function fa(n){var r=
[t,q];n&&r.push(N.of(n));return r}Object.defineProperty(J,"__esModule",{value:!0});J.codeFolding=fa;J.foldGutter=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=Object.assign(Object.assign({},p),n),w=new z(r,!0),M=new z(r,!1);return[(0,ka.gutter)({style:"foldGutter",lineMarker:function(Q,aa){return sa(Q.state,aa.from,aa.to)?M:Ga(Q.state,aa.from,aa.to)?w:null},initialSpacer:function(){return new z(r,!1)},domEventHandlers:{click:function(Q,aa){var Y=sa(Q.state,aa.from,aa.to);
return Y?(Q.dispatch({effects:x.of(Y)}),!0):(aa=Ga(Q.state,aa.from,aa.to))?(Q.dispatch({effects:D.of(aa)}),!0):!1}}}),fa()]};J.unfoldCode=J.unfoldAll=J.foldKeymap=J.foldCode=J.foldAll=void 0;var ca=Ka(2),ma=Ka(6),ka=Ka(8),D=ca.StateEffect.define({map:pa}),x=ca.StateEffect.define({map:pa}),t=ca.StateField.define({create:function(){return ma.Decoration.none},update:function(n,r){n=n.map(r.changes);var w=!0,M=!1,Q=void 0;try{for(var aa=function(){var Ha=oa.value;Ha.is(D)&&!ya(n,Ha.value.from,Ha.value.to)?
n=n.update({add:[E.range(Ha.value.from,Ha.value.to)]}):Ha.is(x)&&(n=n.update({filter:function(Sa,$a){return Ha.value.from!=Sa||Ha.value.to!=$a},filterFrom:Ha.value.from,filterTo:Ha.value.to}))},Y=r.effects[Symbol.iterator](),oa;!(w=(oa=Y.next()).done);w=!0)aa()}catch(Ha){M=!0,Q=Ha}finally{try{if(!w&&null!=Y["return"])Y["return"]()}finally{if(M)throw Q;}}if(r.selection){var Aa=!1,Ba=r.selection.primary.head;n.between(Ba,Ba,function(Ha,Sa){Ha<Ba&&Sa>Ba&&(Aa=!0)});Aa&&(n=n.update({filterFrom:Ba,filterTo:Ba,
filter:function(Ha,Sa){return Sa<=Ba||Ha>=Ba}}))}return n},provide:[ma.EditorView.decorations]});Ia=function(n){var r=!0,w=!1,M=void 0;try{for(var Q=Ra(n)[Symbol.iterator](),aa;!(r=(aa=Q.next()).done);r=!0){var Y=aa.value,oa=Ga(n.state,Y.from,Y.to);if(oa)return n.dispatch({effects:D.of(oa),reconfigure:n.state.field(t,!1)?void 0:{append:fa()}}),!0}}catch(Aa){w=!0,M=Aa}finally{try{if(!r&&null!=Q["return"])Q["return"]()}finally{if(w)throw M;}}return!1};J.foldCode=Ia;Ka=function(n){if(!n.state.field(t,
!1))return!1;var r=[],w=!0,M=!1,Q=void 0;try{for(var aa=Ra(n)[Symbol.iterator](),Y;!(w=(Y=aa.next()).done);w=!0){var oa=Y.value,Aa=sa(n.state,oa.from,oa.to);Aa&&r.push(x.of(Aa))}}catch(Ba){M=!0,Q=Ba}finally{try{if(!w&&null!=aa["return"])aa["return"]()}finally{if(M)throw Q;}}r.length&&n.dispatch({effects:r});return 0<r.length};J.unfoldCode=Ka;ub=function(n){for(var r=n.state,w=[],M=0;M<r.doc.length;){M=n.visualLineAt(M);var Q=Ga(r,M.from,M.to);Q&&w.push(D.of(Q));M=(Q?n.visualLineAt(Q.to):M).to+1}w.length&&
n.dispatch({effects:w,reconfigure:n.state.field(t,!1)?void 0:{append:fa()}});return!!w.length};J.foldAll=ub;var A=function(n){var r=n.state.field(t,!1);if(!r||!r.size)return!1;var w=[];r.between(0,n.state.doc.length,function(M,Q){w.push(x.of({from:M,to:Q}))});n.dispatch({effects:w});return!0};J.unfoldAll=A;J.foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Ia},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Ka},{key:"Ctrl-Alt-[",run:ub},{key:"Ctrl-Alt-]",run:A}];var H={placeholderDOM:null,placeholderText:"…"},
N=ca.Facet.define({combine:function(n){return(0,ca.combineConfig)(n,H)}}),E=ma.Decoration.replace({widget:new (function(n){function r(){Ma(this,r);return Fa(this,qa(r).apply(this,arguments))}Ja(r,n);Qa(r,[{key:"ignoreEvents",value:function(){return!1}},{key:"toDOM",value:function(w){var M=w.state,Q=M.facet(N);if(Q.placeholderDOM)return Q.placeholderDOM();var aa=document.createElement("span");aa.textContent=Q.placeholderText;aa.setAttribute("aria-label",M.phrase("folded code"));aa.title=M.phrase("unfold");
aa.className=(0,ma.themeClass)("foldPlaceholder");aa.onclick=function(Y){var oa=w.visualLineAt(w.posAtDOM(Y.target));(oa=sa(w.state,oa.from,oa.to))&&w.dispatch({effects:x.of(oa)});Y.preventDefault()};return aa}}]);return r}(ma.WidgetType))}),p={openText:"⌄",closedText:"›"},z=function(n){function r(w,M){Ma(this,r);var Q=Fa(this,qa(r).call(this));Q.config=w;Q.open=M;return Q}Ja(r,n);Qa(r,[{key:"eq",value:function(w){return this.config==w.config&&this.open==w.open}},{key:"toDOM",value:function(w){var M=
document.createElement("span");M.textContent=this.open?this.config.openText:this.config.closedText;M.title=w.state.phrase(this.open?"Fold line":"Unfold line");return M}}]);return r}(ka.GutterMarker),q=ma.EditorView.baseTheme({$foldPlaceholder:{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},"$gutterElement.foldGutter":{padding:"0 1px",cursor:"pointer"}})};
shadow$provide[10]=function(Ia,Ka,ub,J){function La(ca,ma){if(!(ca instanceof ma))throw new TypeError("Cannot call a class as a function");}function Ma(ca,ma){for(var ka=0;ka<ma.length;ka++){var D=ma[ka];D.enumerable=D.enumerable||!1;D.configurable=!0;"value"in D&&(D.writable=!0);Object.defineProperty(ca,D.key,D)}}function Ea(ca,ma,ka){ma&&Ma(ca.prototype,ma);ka&&Ma(ca,ka);return ca}Object.defineProperty(J,"__esModule",{value:!0});J.styleTags=J.highlighter=J.defaultTags=J.defaultHighlighter=J.TagSystem=
void 0;var Qa=Ka(1),Fa=Ka(3),qa=Ka(6),Ja=Ka(2),Pa=Ka(4);Ia=function(){function ca(ma){var ka=this;La(this,ca);this.typeNames=[""];this.typeIDs=Object.create(null);this.prop=new Qa.NodeProp;this.flags=ma.flags;this.types=ma.types;this.flagMask=Math.pow(2,this.flags.length)-1;this.typeShift=this.flags.length;var D=ma.subtypes||0,x=[void 0];this.typeIDs[""]=0;var t=1,A=!0,H=!1,N=void 0;try{for(var E=ma.types[Symbol.iterator](),p;!(A=(p=E.next()).done);A=!0){var z=p.value,q=/^([\w\-]+)(?:=([\w-]+))?$/.exec(z);
if(!q)throw new RangeError("Invalid type name "+z);var n=t++;this.typeNames[n]=q[1];this.typeIDs[q[1]]=n;x[n]=q[2];for(ma=0;ma<D;ma++){var r=t++,w=q[1]+"#"+(ma+1);this.typeNames[r]=w;this.typeIDs[w]=r;x[r]=q[1]}}}catch(M){H=!0,N=M}finally{try{if(!A&&null!=E["return"])E["return"]()}finally{if(H)throw N;}}this.parents=x.map(function(M){if(null==M)return 0;var Q=ka.typeIDs[M];if(null==Q)throw new RangeError("Unknown parent type '".concat(M,"' specified"));return Q});if(30<this.flags.length||this.typeNames.length>
Math.pow(2,30-this.flags.length))throw new RangeError("Too many style tag flags to fit in a 30-bit integer");}Ea(ca,[{key:"get",value:function(ma){var ka=0,D=!0,x=!1,t=void 0;try{for(var A=ma.split(" ")[Symbol.iterator](),H;!(D=(H=A.next()).done);D=!0){var N=H.value;if(N){var E=this.flags.indexOf(N);if(-1<E)ka+=1<<E;else{var p=this.typeIDs[N];if(null==p)throw new RangeError("Unknown tag type '".concat(N,"'"));if(ka>>this.typeShift)throw new RangeError("Multiple tag types specified in '".concat(ma,
"'"));ka+=p<<this.typeShift}}}}catch(z){x=!0,t=z}finally{try{if(!D&&null!=A["return"])A["return"]()}finally{if(x)throw t;}}return ka}},{key:"getWithMode",value:function(ma){var ka="+"==ma[0]?1:"!"==ma[0]?0:2;return{mode:ka,tag:this.get(2==ka?ma:ma.slice(1))}}},{key:"addTagProp",value:function(ma){var ka=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},D=this.getWithMode(ma);return this.prop.set(ka,new sa(D.tag,D.mode,Ra))}},{key:"add",value:function(ma){var ka=Object.create(null),D;for(D in ma){var x=
this.getWithMode(ma[D]),t=x.mode;x=x.tag;var A=!0,H=!1,N=void 0;try{for(var E=D.split(" ")[Symbol.iterator](),p;!(A=(p=E.next()).done);A=!0){var z=p.value.split("/"),q=z[z.length-1],n=1<z.length?z.slice(0,z.length-1).map(function(w){return"*"==w?null:w}):Ra,r=new sa(x,t,n);ka[q]=r.sort(ka[q])}}catch(w){H=!0,N=w}finally{try{if(!A&&null!=E["return"])E["return"]()}finally{if(H)throw N;}}}return this.prop.add(ka)}},{key:"highlighter",value:function(ma){var ka=this,D=new Ga(this,ma);return[(0,Ja.precedence)(qa.ViewPlugin.define(function(x){return new fa(x,
ka.prop,D)},{decorations:function(x){return x.decorations}}),"fallback"),qa.EditorView.styleModule.of(D.module)]}},{key:"specificity",value:function(ma){for(var ka=ma&this.flagMask,D=0,x=1;x<=this.flags.length;x++)ka&1<<x&&D++;for(ma>>=this.typeShift;ma;ma=this.parents[ma])D+=/#/.test(this.typeNames[ma])?500:1E3;return D}}]);return ca}();J.TagSystem=Ia;var pa=new Ia({flags:"invalid meta standard definition constant local control link strong emphasis monospace changed inserted deleted".split(" "),
subtypes:7,types:"comment lineComment\x3dcomment blockComment\x3dcomment docComment\x3dcomment name variableName\x3dname typeName\x3dname propertyName\x3dname className\x3dname labelName\x3dname functionName\x3dname namespace\x3dname literal string\x3dliteral docString\x3dstring character\x3dstring number\x3dliteral integer\x3dnumber float\x3dnumber bool\x3dliteral regexp\x3dliteral escape\x3dliteral color\x3dliteral content heading\x3dcontent list\x3dcontent quote\x3dcontent keyword self\x3dkeyword null\x3dkeyword atom\x3dkeyword unit\x3dkeyword modifier\x3dkeyword operatorKeyword\x3dkeyword operator derefOperator\x3doperator arithmeticOperator\x3doperator logicOperator\x3doperator bitwiseOperator\x3doperator compareOperator\x3doperator updateOperator\x3doperator typeOperator\x3doperator punctuation separator\x3dpunctuation bracket\x3dpunctuation angleBracket\x3dbracket squareBracket\x3dbracket paren\x3dbracket brace\x3dbracket".split(" ")});
J.defaultTags=pa;var Ra=[],sa=function(){function ca(ma,ka,D,x){La(this,ca);this.tag=ma;this.mode=ka;this.context=D;this.next=x}Ea(ca,[{key:"sort",value:function(ma){if(!ma||ma.context.length<this.context.length)return this.next=ma,this;ma.next=this.sort(ma.next);return ma}}]);return ca}();J.styleTags=function(ca){return pa.add(ca)};Ia=function(ca){return pa.highlighter(ca)};J.highlighter=Ia;var ya=function t(ma,ka,D,x){La(this,t);this.type=ma;this.flags=ka;this.specificity=D;this.cls=x},Ga=function(){function ma(ka,
D){La(this,ma);this.tags=ka;this.cache=Object.create(null);var x=Object.create(null),t=[],A;for(A in D){var H=Fa.StyleModule.newName();x["."+H]=D[A];var N=!0,E=!1,p=void 0;try{for(var z=A.split(/\s*,\s*/)[Symbol.iterator](),q;!(N=(q=z.next()).done);N=!0){var n=ka.get(q.value);t.push(new ya(n>>ka.typeShift,n&ka.flagMask,ka.specificity(n),H))}}catch(r){E=!0,p=r}finally{try{if(!N&&null!=z["return"])z["return"]()}finally{if(E)throw p;}}}this.rules=t.sort(function(r,w){return w.specificity-r.specificity});
this.module=new Fa.StyleModule(x)}Ea(ma,[{key:"match",value:function(ka){var D=this.cache[ka];if(null!=D)return D;D="";for(var x=ka>>this.tags.typeShift,t=ka&this.tags.flagMask;;){var A=!0,H=!1,N=void 0;try{for(var E=this.rules[Symbol.iterator](),p;!(A=(p=E.next()).done);A=!0){var z=p.value;if(z.type==x&&(z.flags&t)==z.flags&&(D&&(D+=" "),D+=z.cls,t&=~z.flags,x))break}}catch(q){H=!0,N=q}finally{try{if(!A&&null!=E["return"])E["return"]()}finally{if(H)throw N;}}if(x)x=this.tags.parents[x];else break}return this.cache[ka]=
D}}]);return ma}(),fa=function(){function ma(ka,D,x){La(this,ma);this.prop=D;this.styling=x;this.nodeStack=[""];this.classStack=[""];this.inheritStack=[""];this.tree=ka.state.tree;this.decorations=this.buildDeco(ka.visibleRanges,this.tree)}Ea(ma,[{key:"update",value:function(ka){var D=ka.state.facet(Ja.EditorState.syntax);if(!D.length)this.decorations=qa.Decoration.none;else if(D[0].parsePos(ka.state)<ka.view.viewport.to)this.decorations=this.decorations.map(ka.changes);else if(this.tree!=D[0].getTree(ka.state)||
ka.viewportChanged)this.tree=D[0].getTree(ka.state),this.decorations=this.buildDeco(ka.view.visibleRanges,this.tree)}},{key:"buildDeco",value:function(ka,D){function x(Y,oa){Y>H&&oa&&A.add(H,Y,qa.Decoration.mark({"class":oa}));H=Y}var t=this,A=new Pa.RangeSetBuilder,H,N,E,p=this.nodeStack,z=this.classStack,q=this.inheritStack,n=!0,r=!1,w=void 0;try{for(var M=function(){var Y=aa.value,oa=Y.from,Aa=Y.to;N="";E=0;H=oa;D.iterate({from:oa,to:Aa,enter:function(Ba,Ha){E++;for(var Sa=q[E-1],$a=Sa,Va=Ba.prop(t.prop),
lb=!1;Va;){var kb;if(!(kb=!Va.context.length))a:if(kb=Va.context,kb.length>E-1)kb=!1;else{for(var wb=E-1,Gb=kb.length-1;0<=Gb;Gb--,wb--){var rb=kb[Gb];if(rb&&rb!=p[wb]){kb=!1;break a}}kb=!0}if(kb){if(kb=t.styling.match(Va.tag))$a&&($a+=" "),$a+=kb,1==Va.mode?Sa=$a:0==Va.mode&&(lb=!0);break}Va=Va.next}$a!=N&&(x(Ha,N),N=$a);if(lb)return E--,!1;z[E]=$a;q[E]=Sa;p[E]=Ba.name},leave:function(Ba,Ha,Sa){E--;Ba=z[E];Ba!=N&&(x(Math.min(Aa,Sa),N),N=Ba)}})},Q=ka[Symbol.iterator](),aa;!(n=(aa=Q.next()).done);n=
!0)M()}catch(Y){r=!0,w=Y}finally{try{if(!n&&null!=Q["return"])Q["return"]()}finally{if(r)throw w;}}return A.finish()}}]);return ma}();Ia=Ia({deleted:{textDecoration:"line-through"},inserted:{textDecoration:"underline"},link:{textDecoration:"underline"},strong:{fontWeight:"bold"},emphasis:{fontStyle:"italic"},keyword:{color:"#708"},"atom, bool":{color:"#219"},number:{color:"#164"},string:{color:"#a11"},"regexp, escape, string#2":{color:"#e40"},"variableName definition":{color:"#00f"},typeName:{color:"#085"},
className:{color:"#167"},"name#2":{color:"#256"},"propertyName definition":{color:"#00c"},comment:{color:"#940"},meta:{color:"#555"},invalid:{color:"#f00"}});J.defaultHighlighter=Ia};
shadow$provide[11]=function(na,Pa,lb,D){function Ja(t,k){if(!(t instanceof k))throw new TypeError("Cannot call a class as a function");}function Ka(t,k){for(var h=0;h<k.length;h++){var l=k[h];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(t,l.key,l)}}function Ca(t,k,h){k&&Ka(t.prototype,k);h&&Ka(t,h);return t}function Ra(t,k){return function(h){var l=h.state;h=h.dispatch;var u=l.field(z,!1);if(!u)return!1;l=u.pop(t,l,k);if(!l)return!1;h(l);return!0}}
function wa(t){return function(k){k=k.field(z,!1);if(!k)return 0;k=0==t?k.done:k.undone;return k.length-(k.length&&!k[0].changes?1:0)}}function za(t,k,h,l){t=t.slice(k+1>h+20?k-h-1:0,k);t.push(l);return t}function Fa(t,k){var h=[],l=!1;t.iterChangedRanges(function(u,J){return h.push(u,J)});k.iterChangedRanges(function(u,J,F,A){for(u=0;u<h.length;){J=h[u++];var E=h[u++];A>=J&&F<=E&&(l=!0)}});return l}function Ma(t,k){return t.ranges.length==k.ranges.length&&0===t.ranges.filter(function(h,l){return h.empty!=
k.ranges[l].empty}).length}function ra(t,k){return t.length?k.length?t.concat(k):t:k}function Ea(t,k){if(t.length){var h=t[t.length-1],l=h.selectionsAfter.slice(Math.max(0,h.selectionsAfter.length-G));if(l.length&&l[l.length-1].eq(k))return t;l.push(k);return za(t,t.length-1,1E9,h.setSelAfter(l))}return[M.selection([k])]}function ja(t){var k=t[t.length-1],h=t.slice();h[t.length-1]=k.setSelAfter(k.selectionsAfter.slice(0,k.selectionsAfter.length-1));return h}function Ia(t,k){if(!t.length)return t;
for(var h=t.length,l=Q;h;){l=Da(t[h-1],k,l);if(l.changes&&!l.changes.empty||l.effects.length)return t=t.slice(0,h),t[h-1]=l,t;k=l.mapped;h--;l=l.selectionsAfter}return l.length?[M.selection(l)]:Q}function Da(t,k,h){h=ra(t.selectionsAfter.length?t.selectionsAfter.map(function(F){return F.map(k)}):Q,h);if(!t.changes)return M.selection(h);var l=t.changes.map(k),u=k.mapDesc(t.changes,!0),J=t.mapped?t.mapped.composeDesc(u):u;return new M(l,ha.StateEffect.mapEffects(t.effects,k),J,t.startSelection.map(u),
h)}Object.defineProperty(D,"__esModule",{value:!0});D.history=function(){return[z,H.of(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})]};D.undoSelection=D.undoDepth=D.undo=D.redoSelection=D.redoDepth=D.redo=D.isolateHistory=D.invertedEffects=D.historyKeymap=void 0;var ha=Pa(2),aa=ha.Annotation.define(),da=ha.Annotation.define();D.isolateHistory=da;var T=ha.Facet.define();D.invertedEffects=T;var H=ha.Facet.define({combine:function(t){return(0,ha.combineConfig)(t,{minDepth:100,newGroupDelay:500},
{minDepth:Math.max,newGroupDelay:Math.min})}}),z=ha.StateField.define({create:function(){return r.empty},update:function(t,k){var h=k.state.facet(H),l=k.annotation(aa);if(l){var u=M.fromTransaction(k),J=l.side;t=0==J?t.undone:t.done;t=u?za(t,t.length,h.minDepth,u):Ea(t,k.startState.selection);return new r(0==J?l.rest:t,0==J?t:l.rest)}l=k.annotation(da);if("full"==l||"before"==l)t=t.isolate();if(!1===k.annotation(ha.Transaction.addToHistory))return k.changes.length?t.addMapping(k.changes.desc):t;u=
M.fromTransaction(k);J=k.annotation(ha.Transaction.time);var F=k.annotation(ha.Transaction.userEvent);u?t=t.addChanges(u,J,F,h.newGroupDelay,h.minDepth):k.selection&&(t=t.addSelection(k.startState.selection,J,F,h.newGroupDelay));if("full"==l||"after"==l)t=t.isolate();return t}});na=Ra(0,!1);D.undo=na;Pa=Ra(1,!1);D.redo=Pa;lb=Ra(0,!0);D.undoSelection=lb;var x=Ra(1,!0);D.redoSelection=x;var y=wa(0);D.undoDepth=y;y=wa(1);D.redoDepth=y;var M=function(){function t(k,h,l,u,J){Ja(this,t);this.changes=k;
this.effects=h;this.mapped=l;this.startSelection=u;this.selectionsAfter=J}Ca(t,[{key:"setSelAfter",value:function(k){return new t(this.changes,this.effects,this.mapped,this.startSelection,k)}}],[{key:"fromTransaction",value:function(k){var h=Q,l=!0,u=!1,J=void 0;try{for(var F=k.startState.facet(T)[Symbol.iterator](),A;!(l=(A=F.next()).done);l=!0){var E=A.value,O=E(k);O.length&&(h=h.concat(O))}}catch(U){u=!0,J=U}finally{try{if(!l&&null!=F["return"])F["return"]()}finally{if(u)throw J;}}return!h.length&&
k.changes.empty?null:new t(k.changes.invert(k.startState.doc),h,void 0,k.startState.selection,Q)}},{key:"selection",value:function(k){return new t(void 0,Q,void 0,void 0,k)}}]);return t}(),Q=[],G=200,r=function(){function t(k,h){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;Ja(this,t);this.done=k;this.undone=h;this.prevTime=l;this.prevUserEvent=u}Ca(t,[{key:"isolate",value:function(){return this.prevTime?new t(this.done,
this.undone):this}},{key:"addChanges",value:function(k,h,l,u,J){var F=this.done,A=F[F.length-1];F=A&&A.changes&&h-this.prevTime<u&&!A.selectionsAfter.length&&A.changes.length&&k.changes&&Fa(A.changes,k.changes)?za(F,F.length-1,J,new M(k.changes.compose(A.changes),ra(k.effects,A.effects),A.mapped,A.startSelection,Q)):za(F,F.length,J,k);return new t(F,Q,h,l)}},{key:"addSelection",value:function(k,h,l,u){var J=this.done.length?this.done[this.done.length-1].selectionsAfter:Q;return 0<J.length&&h-this.prevTime<
u&&"keyboardselection"==l&&this.prevUserEvent==l&&Ma(J[J.length-1],k)?this:new t(Ea(this.done,k),this.undone,h,l)}},{key:"addMapping",value:function(k){return new t(Ia(this.done,k),Ia(this.undone,k),this.prevTime,this.prevUserEvent)}},{key:"pop",value:function(k,h,l){var u=0==k?this.done:this.undone;if(0==u.length)return null;var J=u[u.length-1];return l&&J.selectionsAfter.length?h.update({selection:J.selectionsAfter[J.selectionsAfter.length-1],annotations:aa.of({side:k,rest:ja(u)})}):J.changes?(l=
1==u.length?Q:u.slice(0,u.length-1),J.mapped&&(l=Ia(l,J.mapped)),h.update({changes:J.changes,selection:J.startSelection,effects:J.effects,annotations:aa.of({side:k,rest:l}),filter:!1})):null}}]);return t}();r.empty=new r(Q,Q);D.historyKeymap=[{key:"Mod-z",run:na,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Pa,preventDefault:!0},{key:"Mod-u",run:lb,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:x,preventDefault:!0}]};
shadow$provide[12]=function(Ia,Ka,ub,J){function La(q,n,r){n in q?Object.defineProperty(q,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):q[n]=r;return q}function Ma(q){Ma="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};return Ma(q)}function Ea(q,n){if(!(q instanceof n))throw new TypeError("Cannot call a class as a function");}function Qa(q,
n){for(var r=0;r<n.length;r++){var w=n[r];w.enumerable=w.enumerable||!1;w.configurable=!0;"value"in w&&(w.writable=!0);Object.defineProperty(q,w.key,w)}}function Fa(q,n,r){n&&Qa(q.prototype,n);r&&Qa(q,r);return q}function qa(q){qa=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)};return qa(q)}function Ja(q,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(n&&
n.prototype,{constructor:{value:q,writable:!0,configurable:!0}});n&&Pa(q,n)}function Pa(q,n){Pa=Object.setPrototypeOf||function(r,w){r.__proto__=w;return r};return Pa(q,n)}function pa(q){return ka.EditorState.indentation.of(function(n,r){a:{for(var w=q.getTree(n.state).resolve(r),M=w,Q=r;;){Q=M.childBefore(Q);if(!Q)break;Q.type.isError&&Q.from==Q.to?(w=M,Q=Q.from):(M=Q,Q=M.to+1)}for(;w;w=w.parent)if(M=Ra(w)){n=M(new t(n,r,w));break a}n=-1}return n})}function Ra(q){var n=q.type.prop(x);if(n)return n;
n=q.firstChild;var r;if(n&&(r=n.type.prop(ma.NodeProp.closedBy))){var w=q.lastChild,M=w&&-1<r.indexOf(w.name);return function(Q){var aa;if(aa=M){var Y,oa;aa=!(Q.pos==(null===(Y=Q.options)||void 0===Y?void 0:Y.simulateBreak)&&(null===(oa=Q.options)||void 0===oa?0:oa.simulateDoubleBreak))}return ya(Q,!0,1,void 0,aa?w.from:void 0)}}return null==q.parent?sa:null}function sa(){return 0}function ya(q,n,r,w,M){var Q=q.textAfter,aa=Q.match(/^\s*/)[0].length;w=w&&Q.slice(aa,aa+w.length)==w||M==q.pos+aa;var Y;
if(n)a:if(n=q.node,M=n.childAfter(n.from),Q=n.lastChild,M)for(aa=null===(Y=q.options)||void 0===Y?void 0:Y.simulateBreak,Y=q.state.doc.lineAt(M.from),Y=null==aa||aa<=Y.from?Y.to:Math.min(Y.to,aa),aa=M.to;;){aa=n.childAfter(aa);if(!aa||aa==Q){Y=null;break a}if(!aa.type.isSkipped){Y=aa.from<Y?M:null;break a}aa=aa.to}else Y=null;else Y=null;return Y?w?q.column(Y.from):q.column(Y.to):q.baseIndent+(w?0:q.unit*r)}function Ga(q){return ka.EditorState.foldable.of(function(n,r,w){for(var M=null,Q=q.getTree(n).resolve(w);Q;Q=
Q.parent)if(!(Q.to<=w||Q.from>w)){if(M&&Q.from<r)break;var aa=Q.type.prop(A);aa&&(aa=aa(Q,n))&&aa.from<=w&&aa.from>=r&&aa.to>w&&(M=aa)}return M})}function fa(q,n){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5E6,w=Date.now()+n;;){var M=q.advance();if(M)return M;if(q.pos>r||Date.now()>w)return null}}function ca(q,n){var r=q.forceFinish();q=r.applyChanges([{fromA:q.pos,toA:r.length,fromB:q.pos,toB:r.length}]).append(n.applyChanges([{fromA:0,toA:q.pos,fromB:0,toB:q.pos}]));return{parsed:r,
cache:q}}Object.defineProperty(J,"__esModule",{value:!0});J.continuedIndent=function(){var q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=q.except;q=q.units;var r=void 0===q?1:q;return function(w){var M=n&&n.test(w.textAfter);return w.baseIndent+(M?0:r*w.unit)}};J.delimitedIndent=function(q){var n=q.closing,r=q.align,w=void 0===r?!0:r;q=q.units;var M=void 0===q?1:q;return function(Q){return ya(Q,w,M,n)}};J.indentNodeProp=J.foldNodeProp=J.flatIndent=J.TreeIndentContext=J.LezerSyntax=
void 0;var ma=Ka(1),ka=Ka(2),D=Ka(6),x=new ma.NodeProp;J.indentNodeProp=x;var t=function(q){function n(r,w,M){Ea(this,n);r=qa(n).call(this,r.state,r.options);if(!r||"object"!==Ma(r)&&"function"!==typeof r){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");r=this}r.pos=w;r.node=M;return r}Ja(n,q);Fa(n,[{key:"textAfter",get:function(){return this.textAfterPos(this.pos)}},{key:"baseIndent",get:function(){for(var r=this.state.doc.lineAt(this.node.from);;){for(var w=
this.node.resolve(r.from);w.parent&&w.parent.from==w.from;)w=w.parent;var M;a:{for(M=this.node;M;M=M.parent)if(w==M){M=!0;break a}M=!1}if(M)break;r=this.state.doc.lineAt(w.from)}return this.lineIndent(r)}}]);return n}(ka.IndentContext);J.TreeIndentContext=t;J.flatIndent=function(q){return q.baseIndent};var A=new ma.NodeProp;J.foldNodeProp=A;Ia=function(){function q(n,r,w){var M=this;Ea(this,q);this.parser=n;this.dialect=r;this.languageData=w;var Q=ka.StateEffect.define();this.field=ka.StateField.define({create:function(aa){return N.advance(ma.Tree.empty,
M,aa.doc)},update:function(aa,Y){return aa.apply(Y,M,Q)}});this.extension=[ka.EditorState.syntax.of(this),this.field,D.ViewPlugin.define(function(aa){return new z(aa,M,Q)}),pa(this),Ga(this)]}Fa(q,[{key:"withDialect",value:function(n){return new q(this.parser,n,this.languageData)}},{key:"getTree",value:function(n){return n.field(this.field).tree}},{key:"parsePos",value:function(n){return n.field(this.field).upto}},{key:"ensureTree",value:function(n,r){var w=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:100,M=n.field(this.field);if(M.upto>=r)return M.updatedTree;M.parse||M.startParse(this,n.doc);return M.parse.pos<r&&(w=fa(M.parse,w,r))?M.stopParse(w,n.doc.length):M.parse.pos<r?null:M.stopParse()}},{key:"languageDataFacetAt",value:function(n,r){if(this.parser.hasNested)for(n=this.getTree(n).resolve(r,-1);n;){if(r=n.type.prop(ka.languageDataProp))return r;n=n.parent}return this.languageData}}],[{key:"define",value:function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{},w=ka.Facet.define({combine:r.languageData?function(M){return M.concat(r.languageData)}:void 0});return new q(n.withProps(ka.languageDataProp.add(La({},n.topType.name,w))),r.dialect||"",w)}}]);return q}();J.LezerSyntax=Ia;var H=function(){function q(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n.length;Ea(this,q);this.doc=n;this.length=r;this.cursorPos=0;this.string="";this.cursor=n.iter()}Fa(q,[{key:"get",value:function(n){if(n>=this.length)return-1;var r=this.cursorPos-this.string.length;
if(n<r||n>=this.cursorPos)n<this.cursorPos&&(this.cursor=this.doc.iter(),this.cursorPos=0),this.string=this.cursor.next(n-this.cursorPos).value,this.cursorPos=n+this.string.length,r=this.cursorPos-this.string.length;return this.string.charCodeAt(n-r)}},{key:"read",value:function(n,r){var w=this.cursorPos-this.string.length;return n<w||r>=this.cursorPos?this.doc.sliceString(n,r):this.string.slice(n-w,r-w)}},{key:"clip",value:function(n){return new q(this.doc,n)}}]);return q}(),N=function(){function q(n,
r,w){Ea(this,q);this.tree=n;this.upto=r;this.cache=w;this.parse=null;this.updatedTree=n}Fa(q,[{key:"apply",value:function(n,r,w){var M=!0,Q=!1,aa=void 0;try{for(var Y=n.effects[Symbol.iterator](),oa;!(M=(oa=Y.next()).done);M=!0){var Aa=oa.value;if(Aa.is(w))return Aa.value}}catch(Ha){Q=!0,aa=Ha}finally{try{if(!M&&null!=Y["return"])Y["return"]()}finally{if(Q)throw aa;}}if(!n.docChanged)return this;var Ba=[];n.changes.iterChangedRanges(function(Ha,Sa,$a,Va){return Ba.push({fromA:Ha,toA:Sa,fromB:$a,toB:Va})});
return q.advance((this.parse?ca(this.parse,this.updatedTree).cache:this.cache).applyChanges(Ba),r,n.state.doc)}},{key:"startParse",value:function(n,r){this.parse=n.parser.startParse(new H(r),{cache:this.cache,dialect:n.dialect})}},{key:"stopParse",value:function(n,r){if(n)this.cache=n;else{var w=ca(this.parse,this.updatedTree);n=w.parsed;this.cache=w.cache}this.updatedTree=n;this.upto=null!==r&&void 0!==r?r:this.parse.pos;this.parse=null;return n}}],[{key:"advance",value:function(n,r,w){r=r.parser.startParse(new H(w),
{cache:n,dialect:r.dialect});var M=fa(r,25);if(M)return new q(M,w.length,M);n=ca(r,n);return new q(n.parsed,r.pos,n.cache)}}]);return q}(),E="undefined"!=typeof window&&window.requestIdleCallback||function(q,n){return setTimeout(q,n.timeout)},p="undefined"!=typeof window&&window.cancelIdleCallback||clearTimeout,z=function(){function q(n,r,w){Ea(this,q);this.view=n;this.syntax=r;this.setSyntax=w;this.working=-1;this.work=this.work.bind(this);this.scheduleWork()}Fa(q,[{key:"update",value:function(n){n.docChanged&&
this.scheduleWork()}},{key:"scheduleWork",value:function(){if(!(-1<this.working)){var n=this.view.state;n.field(this.syntax.field).upto>=n.doc.length||(this.working=E(this.work,{timeout:200}))}}},{key:"work",value:function(n){this.working=-1;var r=this.view.state,w=r.field(this.syntax.field);w.upto>=r.doc.length||(w.parse||w.startParse(this.syntax,r.doc),(n=fa(w.parse,n?Math.max(25,n.timeRemaining()):100))||.8<w.parse.badness?(n=w.stopParse(n,r.doc.length),this.view.dispatch({effects:this.setSyntax.of(new N(n,
r.doc.length,w.cache))})):this.scheduleWork())}},{key:"destroy",value:function(){0<=this.working&&p(this.working)}}]);return q}()};
shadow$provide[13]=function(na,Pa,lb,D){function Ja(){throw Error("setTimeout has not been defined");}function Ka(){throw Error("clearTimeout has not been defined");}function Ca(aa){if(ra===setTimeout)return setTimeout(aa,0);if((ra===Ja||!ra)&&setTimeout)return ra=setTimeout,setTimeout(aa,0);try{return ra(aa,0)}catch(da){try{return ra.call(null,aa,0)}catch(T){return ra.call(this,aa,0)}}}function Ra(aa){if(Ea===clearTimeout)return clearTimeout(aa);if((Ea===Ka||!Ea)&&clearTimeout)return Ea=clearTimeout,
clearTimeout(aa);try{return Ea(aa)}catch(da){try{return Ea.call(null,aa)}catch(T){return Ea.call(this,aa)}}}function wa(){Ia&&Da&&(Ia=!1,Da.length?ja=Da.concat(ja):ha=-1,ja.length&&za())}function za(){if(!Ia){var aa=Ca(wa);Ia=!0;for(var da=ja.length;da;){Da=ja;for(ja=[];++ha<da;)Da&&Da[ha].run();ha=-1;da=ja.length}Da=null;Ia=!1;Ra(aa)}}function Fa(aa,da){this.fun=aa;this.array=da}function Ma(){}na=lb.exports={};try{var ra="function"===typeof setTimeout?setTimeout:Ja}catch(aa){ra=Ja}try{var Ea="function"===
typeof clearTimeout?clearTimeout:Ka}catch(aa){Ea=Ka}var ja=[],Ia=!1,Da,ha=-1;na.nextTick=function(aa){var da=Array(arguments.length-1);if(1<arguments.length)for(var T=1;T<arguments.length;T++)da[T-1]=arguments[T];ja.push(new Fa(aa,da));1!==ja.length||Ia||Ca(za)};Fa.prototype.run=function(){this.fun.apply(null,this.array)};na.title="browser";na.browser=!0;na.env={};na.argv=[];na.version="";na.versions={};na.on=Ma;na.addListener=Ma;na.once=Ma;na.off=Ma;na.removeListener=Ma;na.removeAllListeners=Ma;
na.emit=Ma;na.prependListener=Ma;na.prependOnceListener=Ma;na.listeners=function(aa){return[]};na.binding=function(aa){throw Error("process.binding is not supported");};na.cwd=function(){return"/"};na.chdir=function(aa){throw Error("process.chdir is not supported");};na.umask=function(){return 0}};
shadow$provide[14]=function(Ia,Ka,ub,J){function La(E,p){function z(){this.constructor=E}Ja(E,p);E.prototype=null===p?Object.create(p):(z.prototype=p.prototype,new z)}function Ma(E,p){void 0===p&&(p=Uint16Array);if("string"!=typeof E)return E;for(var z=null,q=0,n=0;q<E.length;){for(var r=0;;){var w=E.charCodeAt(q++),M=!1;if(126==w){r=65535;break}92<=w&&w--;34<=w&&w--;w-=32;46<=w&&(w-=46,M=!0);r+=w;if(M)break;r*=46}z?z[n++]=r:z=new p(r)}return z}function Ea(E,p){return E[p]|E[p+1]<<16}function Qa(E,
p,z){for(var q=p,n;65535!=(n=E[q]);q++)if(n==z)return q-p;return-1}function Fa(E){for(var p=null,z=0;z<E.length;z++){var q=E[z];q.pos==q.cx.input.length&&q.cx.parser.stateFlag(q.state,2)&&(!p||p.score<q.score)&&(p=q)}return p}Ia=Ka(13);"use strict";Object.defineProperty(J,"__esModule",{value:!0});var qa=Ka(1),Ja=function(E,p){Ja=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,q){z.__proto__=q}||function(z,q){for(var n in q)Object.prototype.hasOwnProperty.call(q,n)&&(z[n]=q[n])};
return Ja(E,p)},Pa=function(){function E(p,z,q,n,r,w,M,Q,aa){this.cx=p;this.stack=z;this.state=q;this.reducePos=n;this.pos=r;this.score=w;this.buffer=M;this.bufferBase=Q;this.parent=aa}E.prototype.toString=function(){return"["+this.stack.filter(function(p,z){return 0==z%3}).concat(this.state)+"]@"+this.pos+(this.score?"!"+this.score:"")};E.start=function(p,z,q){void 0===q&&(q=0);return new E(p,[],z,q,q,0,[],0,null)};E.prototype.pushState=function(p,z){this.stack.push(this.state,z,this.bufferBase+
this.buffer.length);this.state=p};E.prototype.reduce=function(p){var z=p>>19,q=p&65535,n=this.cx.parser,r=n.dynamicPrecedence(q);r&&(this.score+=r);if(0==z)q<n.minRepeatTerm&&this.storeNode(q,this.reducePos,this.reducePos,4,!0),this.pushState(n.getGoto(this.state,q,!0),this.reducePos);else{z=this.stack.length-3*(z-1)-(p&262144?6:0);r=this.stack[z-2];var w=this.bufferBase+this.buffer.length-this.stack[z-1];if(q<n.minRepeatTerm||p&131072){var M=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(q,
r,M,w+4,!0)}for(this.state=p&262144?this.stack[z]:n.getGoto(this.stack[z-3],q,!0);this.stack.length>z;)this.stack.pop()}};E.prototype.storeNode=function(p,z,q,n,r){void 0===n&&(n=4);void 0===r&&(r=!1);if(0==p){var w=this,M=this.buffer.length;0==M&&w.parent&&(M=w.bufferBase-w.parent.bufferBase,w=w.parent);if(0<M&&0==w.buffer[M-4]&&-1<w.buffer[M-1]){if(z==q)return;if(w.buffer[M-2]>=z){w.buffer[M-2]=q;return}}}if(r&&this.pos!=q){r=this.buffer.length;if(0<r&&0!=this.buffer[r-4])for(;0<r&&this.buffer[r-
2]>q;)this.buffer[r]=this.buffer[r-4],this.buffer[r+1]=this.buffer[r-3],this.buffer[r+2]=this.buffer[r-2],this.buffer[r+3]=this.buffer[r-1],r-=4,4<n&&(n-=4);this.buffer[r]=p;this.buffer[r+1]=z;this.buffer[r+2]=q;this.buffer[r+3]=n}else this.buffer.push(p,z,q,n)};E.prototype.shift=function(p,z,q){if(p&131072)this.pushState(p&65535,this.pos);else if(0==(p&262144)){var n=this.pos,r=this.cx.parser;if(q>this.pos||z<=r.maxNode)this.pos=q,r.stateFlag(p,1)||(this.reducePos=q);this.pushState(p,n);z<=r.maxNode&&
this.buffer.push(z,n,q,4)}else z<=this.cx.parser.maxNode&&this.buffer.push(z,this.pos,q,4),this.pos=q};E.prototype.apply=function(p,z,q){p&65536?this.reduce(p):this.shift(p,z,q)};E.prototype.useNode=function(p,z){var q=this.cx.reused.length-1;if(0>q||this.cx.reused[q]!=p)this.cx.reused.push(p),q++;var n=this.pos;this.reducePos=this.pos=n+p.length;this.pushState(z,n);this.buffer.push(q,n,this.reducePos,-1)};E.prototype.split=function(){for(var p=this,z=p.buffer.length;0<z&&p.buffer[z-2]>p.reducePos;)z-=
4;var q=p.buffer.slice(z);for(z=p.bufferBase+z;p&&z==p.bufferBase;)p=p.parent;return new E(this.cx,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,q,z,p)};E.prototype.recoverByDelete=function(p,z){var q=p<=this.cx.parser.maxNode;q&&this.storeNode(p,this.pos,z);this.storeNode(0,this.pos,z,q?8:4);this.pos=this.reducePos=z;this.score-=200};E.prototype.canShift=function(p){for(var z=new Ra(this);;){var q=this.cx.parser.stateSlot(z.top,4)||this.cx.parser.hasAction(z.top,p);if(0==(q&65536))return!0;
if(0==q)return!1;z.reduce(q)}};Object.defineProperty(E.prototype,"ruleStart",{get:function(){for(var p=this.state,z=this.stack.length;;){p=this.cx.parser.stateSlot(p,5);if(!(p&65536))return 0;z-=3*(p>>19);if((p&65535)<this.cx.parser.minRepeatTerm)return this.stack[z+1];p=this.stack[z]}},enumerable:!0,configurable:!0});E.prototype.startOf=function(p,z){for(var q=this.state,n=this.stack.length,r=this.cx.parser;;){var w=r.stateSlot(q,5);q=w>>19;var M=w&65535;if(-1<p.indexOf(M)&&(w=this.stack[n-3*(w>>
19)+1],null==z||z>w))return w;if(0==n)return null;0==q?(n-=3,q=this.stack[n]):(n-=3*(q-1),q=r.getGoto(this.stack[n-3],M,!0))}};E.prototype.recoverByInsert=function(p){var z=this;if(300<=this.stack.length)return[];var q=this.cx.parser.nextStates(this.state);if(4<q.length||120<=this.stack.length){var n=q.filter(function(M){return M!=z.state&&z.cx.parser.hasAction(M,p)});if(120>this.stack.length)for(var r=0;4>n.length&&r<q.length;r++)0>n.indexOf(q[r])&&n.push(q[r]);q=n}n=[];for(r=0;r<q.length&&4>n.length;r++)if(q[r]!=
this.state){var w=this.split();w.storeNode(0,w.pos,w.pos,4,!0);w.pushState(q[r],this.pos);w.score-=200;n.push(w)}return n};E.prototype.forceReduce=function(){var p=this.cx.parser.stateSlot(this.state,5);if(0==(p&65536))return!1;this.cx.parser.validAction(this.state,p)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100);this.reduce(p);return!0};E.prototype.forceAll=function(){for(;!this.cx.parser.stateFlag(this.state,2)&&this.forceReduce(););return this};Object.defineProperty(E.prototype,
"deadEnd",{get:function(){if(3!=this.stack.length)return!1;var p=this.cx.parser;return 65535==p.data[p.stateSlot(this.state,1)]&&!p.stateSlot(this.state,4)},enumerable:!0,configurable:!0});E.prototype.restart=function(){this.state=this.stack[0];this.stack.length=0};E.prototype.sameState=function(p){if(this.state!=p.state||this.stack.length!=p.stack.length)return!1;for(var z=0;z<this.stack.length;z+=3)if(this.stack[z]!=p.stack[z])return!1;return!0};E.prototype.toTree=function(){return qa.Tree.build({buffer:sa.create(this),
group:this.cx.parser.group,topID:this.cx.topTerm,maxBufferLength:this.cx.maxBufferLength,reused:this.cx.reused,minRepeatType:this.cx.parser.minRepeatTerm})};Object.defineProperty(E.prototype,"parser",{get:function(){return this.cx.parser},enumerable:!0,configurable:!0});E.prototype.dialectEnabled=function(p){return this.cx.dialect.flags[p]};return E}(),pa;(function(E){E[E.Token=200]="Token";E[E.Reduce=100]="Reduce";E[E.MaxNext=4]="MaxNext";E[E.MaxInsertStackDepth=300]="MaxInsertStackDepth";E[E.DampenInsertStackDepth=
120]="DampenInsertStackDepth"})(pa||(pa={}));var Ra=function(){function E(p){this.stack=p;this.top=p.state;this.rest=p.stack;this.offset=this.rest.length}E.prototype.reduce=function(p){var z=p&65535;p>>=19;0==p?(this.rest==this.stack.stack&&(this.rest=this.rest.slice()),this.rest.push(this.top,0,0),this.offset+=3):this.offset-=3*(p-1);this.top=this.stack.cx.parser.getGoto(this.rest[this.offset-3],z,!0)};return E}(),sa=function(){function E(p,z,q){this.stack=p;this.pos=z;this.index=q;this.buffer=p.buffer;
0==this.index&&this.maybeNext()}E.create=function(p){return new E(p,p.bufferBase+p.buffer.length,p.buffer.length)};E.prototype.maybeNext=function(){var p=this.stack.parent;null!=p&&(this.index=this.stack.bufferBase-p.bufferBase,this.stack=p,this.buffer=p.buffer)};Object.defineProperty(E.prototype,"id",{get:function(){return this.buffer[this.index-4]},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"start",{get:function(){return this.buffer[this.index-3]},enumerable:!0,configurable:!0});
Object.defineProperty(E.prototype,"end",{get:function(){return this.buffer[this.index-2]},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"size",{get:function(){return this.buffer[this.index-1]},enumerable:!0,configurable:!0});E.prototype.next=function(){this.index-=4;this.pos-=4;0==this.index&&this.maybeNext()};E.prototype.fork=function(){return new E(this.stack,this.pos,this.index)};return E}();Ka=function(){function E(){this.end=this.value=this.start=-1}E.prototype.accept=function(p,
z){this.value=p;this.end=z};return E}();var ya=function(){function E(p,z){void 0===z&&(z=p.length);this.string=p;this.length=z}E.prototype.get=function(p){return 0>p||p>=this.length?-1:this.string.charCodeAt(p)};E.prototype.read=function(p,z){return this.string.slice(p,Math.min(this.length,z))};E.prototype.clip=function(p){return new E(this.string,p)};return E}(),Ga=function(){function E(p,z){this.data=p;this.id=z}E.prototype.token=function(p,z,q){var n=this.data,r=0,w=1<<this.id,M=q.cx.dialect,Q=
z.start;a:for(;0!=(w&n[r]);){for(var aa=n[r+1],Y=r+3;Y<aa;Y+=2)if(0<(n[Y+1]&w)){var oa=n[Y];if(M.allows(oa)&&(-1==z.value||z.value==oa||q.cx.parser.overrides(oa,z.value))){z.accept(oa,Q);break}}Y=p.get(Q++);oa=0;for(r=n[r+2];oa<r;){var Aa=oa+r>>1,Ba=aa+Aa+(Aa<<1),Ha=n[Ba+1];if(Y<n[Ba])r=Aa;else if(Y>=Ha)oa=Aa+1;else{r=n[Ba+2];continue a}}break}};return E}();Ga.prototype.contextual=Ga.prototype.fallback=Ga.prototype.extend=!1;pa=function(){return function(E,p){void 0===p&&(p={});this.token=E;this.contextual=
!!p.contextual;this.fallback=!!p.fallback;this.extend=!!p.extend}}();var fa="undefined"!=typeof Ia&&/\bparse\b/.test(Ia.env.LOG),ca=null,ma=function(){function E(p){this.start=[0];this.index=[0];this.nextStart=0;this.trees=[p]}E.prototype.nodeAt=function(p){if(p<this.nextStart)return null;for(;;){var z=this.trees.length-1;if(0>z)return this.nextStart=1E9,null;var q=this.trees[z],n=this.index[z];if(n==q.children.length)this.trees.pop(),this.start.pop(),this.index.pop();else{var r=q.children[n];q=this.start[z]+
q.positions[n];if(q>=p)return q==p?r:null;r instanceof qa.TreeBuffer?(this.index[z]++,this.nextStart=q+r.length):(this.index[z]++,q+r.length>=p&&(this.trees.push(r),this.start.push(q),this.index.push(0)))}}};return E}(),ka=function(E){function p(){var z=null!==E&&E.apply(this,arguments)||this;z.extended=-1;z.mask=0;return z}La(p,E);p.prototype.clear=function(z){this.start=z;this.value=this.extended=-1};return p}(Ka),D=new Ka,x=function(){function E(p){this.tokens=[];this.mainToken=D;this.actions=
[];this.tokens=p.tokenizers.map(function(z){return new ka})}E.prototype.getActions=function(p,z){var q=0,n=null,r=p.cx.parser,w=r.tokenizers;r=r.stateSlot(p.state,3);for(var M=0;M<w.length;M++)if(0!=(1<<M&r)){var Q=w[M],aa=this.tokens[M];if(!n||Q.fallback){if(Q.contextual||aa.start!=p.pos||aa.mask!=r)this.updateCachedToken(aa,Q,p,z),aa.mask=r;if(0!=aa.value){var Y=q;-1<aa.extended&&(q=this.addActions(p,aa.extended,aa.end,q));q=this.addActions(p,aa.value,aa.end,q);if(!Q.extend&&(n=aa,q>Y))break}}}for(;this.actions.length>
q;)this.actions.pop();n||(n=D,n.start=p.pos,p.pos==z.length?n.accept(p.cx.parser.eofTerm,p.pos):n.accept(0,p.pos+1));this.mainToken=n;return this.actions};E.prototype.updateCachedToken=function(p,z,q,n){p.clear(q.pos);z.token(n,p,q);if(-1<p.value){z=q.cx.parser;for(var r=0;r<z.specialized.length;r++)if(z.specialized[r]==p.value){var w=z.specializers[r](n.read(p.start,p.end),q);if(0<=w&&q.cx.dialect.allows(w>>1)){0==(w&1)?p.value=w>>1:p.extended=w>>1;break}}}else q.pos==n.length?p.accept(q.cx.parser.eofTerm,
q.pos):p.accept(0,q.pos+1)};E.prototype.putAction=function(p,z,q,n){for(var r=0;r<n;r+=3)if(this.actions[r]==p)return n;this.actions[n++]=p;this.actions[n++]=z;this.actions[n++]=q;return n};E.prototype.addActions=function(p,z,q,n){var r=p.state;p=p.cx.parser;for(var w=p.data,M=0;2>M;M++)for(var Q=p.stateSlot(r,M?2:1);;Q+=3){if(65535==w[Q])if(1==w[Q+1])Q=Ea(w,Q+2);else{0==n&&2==w[Q+1]&&(n=this.putAction(Ea(w,Q+1),z,q,n));break}w[Q]==z&&(n=this.putAction(Ea(w,Q+1),z,q,n))}return n};return E}(),t=function(){return function(E,
p,z,q,n,r,w){void 0===r&&(r=null);void 0===w&&(w=-1);this.parser=E;this.maxBufferLength=p;this.input=z;this.topTerm=q;this.dialect=n;this.parent=r;this.wrapType=w;this.reused=[];this.tokens=new x(E)}}(),A=function(){function E(p,z,q){void 0===q&&(q={});this.tokenCount=this.recovering=this.pos=0;this.nextStackID=9812;var n=q.cache;n=void 0===n?void 0:n;var r=q.strict;r=void 0===r?!1:r;var w=q.bufferLength;w=void 0===w?qa.DefaultBufferLength:w;var M=q.top;M=void 0===M?void 0:M;q=q.dialect;var Q=M?p.topRules[M]:
p.defaultTop;if(!Q)throw new RangeError("Invalid top rule name "+M);this.stacks=[Pa.start(new t(p,w,z,Q[1],p.parseDialect(q)),Q[0])];this.strict=r;this.cache=n?new ma(n):null}E.prototype.putStack=function(p){this.stacks.push(p);if(0>this.pos||p.pos<this.pos)this.pos=p.pos};E.prototype.putStackDedup=function(p){for(var z=0;z<this.stacks.length;z++){var q=this.stacks[z];if(q.pos==p.pos&&q.sameState(p)){this.stacks[z].score<p.score&&(this.stacks[z]=p);return}}this.putStack(p)};E.prototype.advance=function(){var p=
this.stacks,z=this.pos;this.stacks=[];this.pos=-1;for(var q=null,n=null,r=0;r<p.length;r++)for(var w=p[r];;){if(w.pos>z)this.putStack(w);else{var M=this.advanceStack(w,p);if(M){w=M;continue}else q||(q=[],n=[]),q.push(w),w=w.cx.tokens.mainToken,n.push(w.value,w.end)}break}if(!this.stacks.length){if(r=q&&Fa(q))return r.toTree();if(this.strict)throw fa&&q&&console.log("Stuck with token "+q[0].cx.parser.getName(q[0].cx.tokens.mainToken.value)),new SyntaxError("No parse at "+z);this.recovering||(this.recovering=
5)}if(this.recovering&&q&&(r=this.runRecovery(q,n)))return r.forceAll().toTree();if(this.recovering)r=1==this.recovering?1:3*this.recovering,this.stacks.length>r&&(this.stacks.sort(function(Q,aa){return aa.score-Q.score}),this.stacks.length=r),this.stacks.some(function(Q){return Q.reducePos>z})&&this.recovering--;else if(1<this.stacks.length)a:for(r=0;r<this.stacks.length-1;r++)for(w=this.stacks[r],q=r+1;q<this.stacks.length;q++)if(n=this.stacks[q],w.sameState(n)||200<w.buffer.length&&200<n.buffer.length)if(0<
(w.score-n.score||w.buffer.length-n.buffer.length))this.stacks.splice(q--,1);else{this.stacks.splice(r--,1);continue a}this.tokenCount++;return null};E.prototype.advanceStack=function(p,z){var q=p.pos,n=p.cx,r=n.input,w=n.parser;n=fa?this.stackID(p)+" -\x3e ":"";if(this.cache)for(var M=this.cache.nodeAt(q);M;){var Q=w.group.types[M.type.id]==M.type?w.getGoto(p.state,M.type.id):-1;if(-1<Q)return p.useNode(M,Q),fa&&console.log(n+this.stackID(p)+(" (via reuse of "+w.getName(M.type.id)+")")),p;if(!(M instanceof
qa.Tree)||0==M.children.length||0<M.positions[0])break;M=M.children[0];if(!(M instanceof qa.Tree))break}M=w.startNested(p.state);a:if(-1<M){Q=w.nested[M];var aa=Q.grammar;M=Q.end;Q=Q.placeholder;var Y=void 0,oa=null,Aa=void 0,Ba=void 0,Ha=void 0;if("function"==typeof aa){Ha=aa(r,p);if(Ha.stay)break a;oa=Ha.parseNode;z=Ha.parser;Aa=Ha.top;Ba=Ha.dialect;Y=Ha.filterEnd;Ha=Ha.wrapType}else z=aa;M=this.scanForNestEnd(p,M,Y);q=p.cx.input.clip(M);if(oa||!z)return n=oa?oa(q,p.pos):qa.Tree.empty,n.length!=
M-p.pos&&(n=new qa.Tree(n.type,n.children,n.positions,M-p.pos)),null!=Ha&&(n=new qa.Tree(w.group.types[Ha],[n],[0],n.length)),p.useNode(n,w.getGoto(p.state,Q,!0)),p;w=Aa?z.topRules[Aa]:z.defaultTop;p=Pa.start(new t(z,p.cx.maxBufferLength,q,w[1],z.parseDialect(Ba),p,Ha),w[0],p.pos);fa&&console.log(n+this.stackID(p)+" (nested)");return p}M=w.stateSlot(p.state,4);if(0<M)return p.reduce(M),fa&&console.log(n+this.stackID(p)+(" (via always-reduce "+w.getName(M&65535)+")")),p;Q=p.cx.tokens.getActions(p,
r);for(Ba=0;Ba<Q.length;){Ha=Q[Ba++];oa=Q[Ba++];M=Q[Ba++];Y=(Aa=Ba==Q.length||!z)?p:p.split();Y.apply(Ha,oa,M);fa&&console.log(n+this.stackID(Y)+(" (via "+(0==(Ha&65536)?"shift":"reduce of "+w.getName(Ha&65535))+" for "+w.getName(oa)+" @ "+q+(Y==p?"":", split")+")"));if(Aa)return Y;Y.pos>q?this.putStack(Y):z.push(Y)}return p.cx.parent&&p.pos==r.length?this.finishNested(p):null};E.prototype.advanceFully=function(p){for(var z=p.pos;;){var q=this.advanceStack(p,null);if(!q)return p;if(q.pos>z)return this.putStackDedup(q),
null;p=q}};E.prototype.runRecovery=function(p,z){for(var q=null,n=!1,r=0;r<p.length;r++){var w=p[r],M=z[r<<1],Q=z[(r<<1)+1],aa=fa?this.stackID(w)+" -\x3e ":"";if(w.deadEnd){if(n)continue;n=!0;w.restart();fa&&console.log(aa+this.stackID(w)+" (restarted)");var Y=this.advanceFully(w);if(Y)w=Y;else continue}for(var oa=w.split(),Aa=aa,Ba=0;oa.forceReduce()&&10>Ba;Ba++){fa&&console.log(Aa+this.stackID(oa)+" (via force-reduce)");Y=this.advanceFully(oa);if(!Y)break;oa=Y;fa&&(Aa=this.stackID(Y)+" -\x3e ")}Y=
0;for(oa=w.recoverByInsert(M);Y<oa.length;Y++)Aa=oa[Y],fa&&console.log(aa+this.stackID(Aa)+" (via recover-insert)"),this.advanceFully(Aa);w.cx.input.length>w.pos?(Q==w.pos&&(Q++,M=0),w.recoverByDelete(M,Q),fa&&console.log(aa+this.stackID(w)+(" (via recover-delete "+w.cx.parser.getName(M)+")")),this.putStackDedup(w)):w.cx.parent||q&&!(q.score<w.score)||(q=w)}return q};E.prototype.forceFinish=function(){return this.stacks[0].split().forceAll().toTree()};Object.defineProperty(E.prototype,"badness",{get:function(){return this.stacks.length?
-(this.stacks[0].score/(200*this.tokenCount)):0},enumerable:!0,configurable:!0});E.prototype.scanForNestEnd=function(p,z,q){for(var n=p.cx.input,r=p.pos;r<n.length;r++)if(D.start=r,D.value=-1,z.token(n,D,p),-1<D.value&&(!q||q(n.read(r,D.end))))return r;return n.length};E.prototype.finishNested=function(p){if(-2==p.cx.wrapType)return null;var z=p.cx.parent,q=p.forceAll().toTree(),n=z.cx.parser,r=n.nested[n.startNested(z.state)];q=new qa.Tree(q.type,q.children,q.positions.map(function(w){return w-z.pos}),
p.pos-z.pos);-1<p.cx.wrapType&&(q=new qa.Tree(n.group.types[p.cx.wrapType],[q],[0],q.length));p.cx.wrapType=-2;z.useNode(q,n.getGoto(z.state,r.placeholder,!0));fa&&console.log(this.stackID(z)+(" (via unnest "+(-1<p.cx.wrapType?n.getName(p.cx.wrapType):q.type.name)+")"));return z};E.prototype.stackID=function(p){var z=(ca||(ca=new WeakMap)).get(p);z||ca.set(p,z=String.fromCodePoint(this.nextStackID++));return z+p};return E}(),H=function(){function E(p,z,q){this.source=p;this.flags=z;this.disabled=
q}E.prototype.allows=function(p){return!this.disabled||0==this.disabled[p]};return E}();Ia=function(){function E(p){function z(Sa,$a,Va){M[Sa]==N&&(M[Sa]=Object.create(null));$a.set(M[Sa],$a.deserialize(String(Va)))}var q=this;this.nextStateCache=[];this.cachedDialect=null;if(12!=p.version)throw new RangeError("Parser version ("+p.version+") doesn't match runtime version (12)");var n=Ma(p.tokenData),r=p.nodeNames.split(" ");this.minRepeatTerm=r.length;for(var w=0;w<p.repeatNodeCount;w++)r.push("");
var M=[];for(w=0;w<r.length;w++)M.push(N);if(p.nodeProps)for(var Q=0,aa=p.nodeProps;Q<aa.length;Q++){var Y=aa[Q],oa=Y[0];for(w=1;w<Y.length;){var Aa=Y[w++];if(0<=Aa)z(Aa,oa,Y[w++]);else{var Ba=Y[w+-Aa];for(Aa=-Aa;0<Aa;Aa--)z(Y[w++],oa,Ba);w++}}}this.specialized=new Uint16Array(p.specialized?p.specialized.length:0);this.specializers=[];if(p.specialized)for(w=0;w<p.specialized.length;w++)this.specialized[w]=p.specialized[w].term,this.specializers[w]=p.specialized[w].get;this.states=Ma(p.states,Uint32Array);
this.data=Ma(p.stateData);this.goto=Ma(p.goto);var Ha=Object.keys(p.topRules).map(function(Sa){return p.topRules[Sa][1]});this.group=new qa.NodeGroup(r.map(function(Sa,$a){var Va=($a>=q.minRepeatTerm?8:0)|(-1<Ha.indexOf($a)?1:0)|(0==$a?4:0)|(p.skippedNodes&&-1<p.skippedNodes.indexOf($a)?2:0);return new qa.NodeType(Sa,M[$a],$a,Va)}));this.maxTerm=p.maxTerm;this.tokenizers=p.tokenizers.map(function(Sa){return"number"==typeof Sa?new Ga(n,Sa):Sa});this.topRules=p.topRules;this.nested=(p.nested||[]).map(function(Sa){var $a=
Sa[3];return{name:Sa[0],grammar:Sa[1],end:new Ga(Ma(Sa[2]),0),placeholder:$a}});this.dialects=p.dialects||{};this.dynamicPrecedences=p.dynamicPrecedences||null;this.tokenPrecTable=p.tokenPrec;this.termNames=p.termNames||null;this.maxNode=this.group.types.length-1;w=0;for(r=this.states.length/6;w<r;w++)this.nextStateCache[w]=null}E.prototype.parse=function(p,z){"string"==typeof p&&(p=new ya(p));for(p=new A(this,p,z);;)if(z=p.advance())return z};E.prototype.startParse=function(p,z){"string"==typeof p&&
(p=new ya(p));return new A(this,p,z)};E.prototype.getGoto=function(p,z,q){void 0===q&&(q=!1);var n=this.goto;if(z>=n[0])return-1;for(z=n[z+1];;){var r=n[z++],w=r&1,M=n[z++];if(w&&q)return M;for(r=z+(r>>1);z<r;z++)if(n[z]==p)return M;if(w)return-1}};E.prototype.hasAction=function(p,z){for(var q=this.data,n=0;2>n;n++)for(var r=this.stateSlot(p,n?2:1),w;;r+=3){if(65535==(w=q[r]))if(1==q[r+1])w=q[r=Ea(q,r+2)];else{if(2==q[r+1])return Ea(q,r+2);break}if(w==z||0==w)return Ea(q,r+1)}return 0};E.prototype.stateSlot=
function(p,z){return this.states[6*p+z]};E.prototype.stateFlag=function(p,z){return 0<(this.stateSlot(p,0)&z)};E.prototype.startNested=function(p){p=this.stateSlot(p,0);return p&4?p>>10:-1};E.prototype.validAction=function(p,z){if(z==this.stateSlot(p,4))return!0;for(p=this.stateSlot(p,1);;p+=3){if(65535==this.data[p])if(1==this.data[p+1])p=Ea(this.data,p+2);else return!1;if(z==Ea(this.data,p+1))return!0}};E.prototype.nextStates=function(p){var z=this.nextStateCache[p];if(z)return z;z=[];for(var q=
this.stateSlot(p,1);;q+=3){if(65535==this.data[q])if(1==this.data[q+1])q=Ea(this.data,q+2);else break;0==(this.data[q+2]&1)&&0>z.indexOf(this.data[q+1])&&z.push(this.data[q+1])}q=this.goto;for(var n=q[0],r=0;r<n;r++)for(var w=q[r+1];;){for(var M=q[w++],Q=q[w++],aa=w+(M>>1);w<aa;w++)q[w]==p&&0>z.indexOf(Q)&&z.push(Q);if(M&1)break}return this.nextStateCache[p]=z};E.prototype.overrides=function(p,z){z=Qa(this.data,this.tokenPrecTable,z);return 0>z||Qa(this.data,this.tokenPrecTable,p)<z};E.prototype.withNested=
function(p){return this.copy({nested:this.nested.map(function(z){return Object.prototype.hasOwnProperty.call(p,z.name)?{name:z.name,grammar:p[z.name],end:z.end,placeholder:z.placeholder}:z})})};E.prototype.withProps=function(){for(var p,z=[],q=0;q<arguments.length;q++)z[q]=arguments[q];return this.copy({group:(p=this.group).extend.apply(p,z)})};E.prototype.withTokenizer=function(p,z){return this.copy({tokenizers:this.tokenizers.map(function(q){return q==p?z:q})})};E.prototype.copy=function(p){for(var z=
Object.create(E.prototype),q=0,n=Object.keys(this);q<n.length;q++){var r=n[q];z[r]=r in p?p[r]:this[r]}return z};E.prototype.getName=function(p){return this.termNames?this.termNames[p]:String(p<=this.maxNode&&this.group.types[p].name||p)};Object.defineProperty(E.prototype,"eofTerm",{get:function(){return this.maxNode+1},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,"hasNested",{get:function(){return 0<this.nested.length},enumerable:!0,configurable:!0});Object.defineProperty(E.prototype,
"defaultTop",{get:function(){return this.topRules[Object.keys(this.topRules)[0]]},enumerable:!0,configurable:!0});E.prototype.dynamicPrecedence=function(p){var z=this.dynamicPrecedences;return null==z?0:z[p]||0};Object.defineProperty(E.prototype,"topType",{get:function(){return this.group.types[this.defaultTop[1]]},enumerable:!0,configurable:!0});E.prototype.parseDialect=function(p){if(this.cachedDialect&&this.cachedDialect.source==p)return this.cachedDialect;var z=Object.keys(this.dialects),q=z.map(function(){return!1});
if(p)for(var n=0,r=p.split(" ");n<r.length;n++){var w=z.indexOf(r[n]);0<=w&&(q[w]=!0)}n=null;for(r=0;r<z.length;r++)if(!q[r]){var M=this.dialects[z[r]];for(w=void 0;65535!=(w=this.data[M++]);)(n||(n=new Uint8Array(this.maxTerm+1)))[w]=1}return this.cachedDialect=new H(p,q,n)};E.deserialize=function(p){return new E(p)};return E}();Ia.TokenGroup=Ga;var N=Object.create(null);J.NodeGroup=qa.NodeGroup;J.NodeProp=qa.NodeProp;J.NodeType=qa.NodeType;J.Tree=qa.Tree;J.TreeCursor=qa.TreeCursor;J.ExternalTokenizer=
pa;J.ParseContext=A;J.Parser=Ia;J.Stack=Pa;J.Token=Ka};
shadow$provide[15]=function(Ia,Ka,ub,J){function La(c,f){let h=null;for(let m=0;m<c.length;m++){let v=c[m].walk(f);v==c[m]||h||(h=c.slice(0,m));h&&h.push(v)}return h||c}function Ma(c,f){return c.constructor==f.constructor&&c.eq(f)}function Ea(c,f){return c.length==f.length&&c.every((h,m)=>Ma(h,f[m]))}function Qa(c,f){return c.prec<f.prec?"("+c.toString()+")":c.toString()}function Fa(c){for(let f in c)return!0;return!1}function qa(c,f,h){if(c.length!=f.length)return c.length-f.length;for(let m=0;m<
c.length;m++){let v=h(c[m],f[m]);if(v)return v}return 0}function Ja(c,f){if(0==c.length||c==f)return f;if(0==f.length)return c;let h=c.slice();for(let m of f)c.includes(m)||h.push(m);return h.sort()}function Pa(c){return 65534<c?"∞":55296<=c&&57343>c?"\\u{"+c.toString(16)+"}":String.fromCharCode(c)}function pa(c){let f="";for(let h=0;h<c.length;h++)f+=String.fromCharCode(c[h].from);return f}function Ra(c){let f="";for(let h of c)f+=(f.length?"-":"")+h.id;return f}function sa(c){let f=[],h=[];for(var m of c)f.includes(m.from)||
f.push(m.from),f.includes(m.to)||f.push(m.to);f.sort((v,B)=>v-B);for(m=1;m<f.length;m++){let v=f[m-1],B=f[m],K=[];for(let O of c)if(O.to>v&&O.from<B)for(let V of O.target.closure())K.includes(V)||K.push(V);K.length&&h.push(new tc(v,B,K))}return h}function ya(c,f){let h=f?f.start:c.start;f=f||N(c);let m=Ga(c),v=[];if(c.eat("\x3c"))for(;!c.eat("\x3e");)v.length&&c.expect(","),v.push(N(c));c=ca(c);return new qb(h,f,m,v,c)}function Ga(c){if("["!=c.type)return nb;let f=[];for(c.expect("[");!c.eat("]");)f.length&&
c.expect(","),f.push(fa(c));return f}function fa(c){let f=c.start,h=[],m=c.value,v="at"==c.type;c.eat("at")||c.eat("id")||c.unexpected();if(c.eat("\x3d"))for(;;)if("string"==c.type||"id"==c.type)h.push(new Lc(c.start,c.value,null)),c.next();else if(c.eat("."))h.push(new Lc(c.start,".",null));else if(c.eat("{"))h.push(new Lc(c.start,null,c.expect("id"))),c.expect("}");else break;return new hb(f,v,m,h)}function ca(c){c.expect("{");let f=H(c);c.expect("}");return f}function ma(c){var f=c.start;if(c.eat("("))return f=
H(c),c.expect(")"),f;if("string"==c.type){var h=c.value;c.next();return 0==h.length?new cb(f,nb,[nb,nb]):new Tb(f,h)}if(c.eat("id","_"))return new Yc(f);if("set"==c.type){h="!"==c.string[c.start];var m=M(c.value.replace(/\\.|-|"/g,B=>"-"==B?"﷚":'"'==B?'\\"':B));let v=[];for(let B=0;B<m.length;){let K=m.codePointAt(B);B+=65535<K?2:1;if(B<m.length-1&&"﷚"==m[B]){let O=m.codePointAt(B+1);B+=65535<O?3:2;O<K&&c.raise("Invalid character range",c.start);D(c,v,K,O+1)}else D(c,v,K,K+1)}c.next();return new Qc(f,
v.sort((B,K)=>B[0]-K[0]),h)}if("at"!=c.type||"specialize"!=c.value&&"extend"!=c.value){if("["==c.type)return h=ya(c,new ha(f,"_anon")),h.params.length&&c.raise("Inline rules can't have parameters",h.start),new bb(f,h);h=N(c);if("["==c.type||"{"==c.type)return h=ya(c,h),h.params.length&&c.raise("Inline rules can't have parameters",h.start),new bb(f,h);m=null;c.eat(".")&&(m=h,h=N(c));return new ia(f,m,h,ka(c))}{let {start:v,value:B}=c;c.next();f=Ga(c);c.expect("\x3c");m=H(c);c.eat(",")?h=H(c):m instanceof
Tb?h=m:c.raise(`@${B} requires two arguments when its first argument isn't a literal string`);c.expect("\x3e");return new Da(v,B,f,m,h)}}function ka(c){let f=[];if(c.eat("\x3c"))for(;!c.eat("\x3e");)f.length&&c.expect(","),f.push(H(c));return f}function D(c,f,h,m){f.every(([v,B])=>B<=h||v>=m)||c.raise("Overlapping character range",c.start);f.push([h,m])}function x(c){let f=c.start,h=ma(c);for(;;){let m=c.type;if(c.eat("*")||c.eat("?")||c.eat("+"))h=new ac(f,h,m);else return h}}function t(c){return"}"==
c.type||")"==c.type||"|"==c.type||"/"==c.type||"/\\"==c.type||"{"==c.type||","==c.type||"\x3e"==c.type}function A(c){let f=c.start,h=[],m=[nb];do{for(;;){let v=c.start,B;if(c.eat("~"))B="ambig";else if(c.eat("!"))B="prec";else break;m[m.length-1]=m[m.length-1].concat(new Hb(v,N(c),B))}if(t(c))break;h.push(x(c));m.push(nb)}while(!t(c));return 1==h.length&&m.every(v=>0==v.length)?h[0]:new cb(f,h,m)}function H(c){let f=c.start;var h=A(c);if(!c.eat("|"))return h;h=[h];do h.push(A(c));while(c.eat("|"));
return new eb(f,h)}function N(c){"id"!=c.type&&c.unexpected();let f=c.start,h=c.value;c.next();return new ha(f,h)}function E(c){let f=c.start;c.next();c.expect("{");let h=[];for(;!c.eat("}");){h.length&&c.expect(",");let m=ma(c);m instanceof Tb||m instanceof ia?h.push(m):c.raise("Invalid expression in token precedences",m.start)}return new gc(f,h)}function p(c){let f=c.start;c.next();c.expect("{");let h=ma(c);h instanceof Tb||h instanceof ia||c.raise("Invalid expression in token conflict",h.start);
c.eat(",");let m=ma(c);m instanceof Tb||m instanceof ia||c.raise("Invalid expression in token conflict",m.start);c.expect("}");return new Zb(f,h,m)}function z(c){let f=[];for(c.expect("{");!c.eat("}");){f.length&&c.eat(",");let h=N(c),m=Ga(c);f.push({id:h,props:m})}return f}function q(c,f){let h=N(c);c.expect("id","from");let m=c.expect("string");return new kc(f,h,m,z(c))}function n(c,f,h){c.expect("{");let m=H(c);c.expect("}");let v=N(c);c.expect("id","from");let B=c.expect("string");return new y(h,
f,m,v,B,z(c))}function r(c,f){let h=N(c),m=c.eat("id","as")?N(c):h,v=null;c.eat("id","from")?v=c.expect("string"):c.expect("id","empty");return new U(f,m,h,v)}function w(c,f){let h=N(c),m=c.eat("id","as")?N(c):h;c.expect("id","from");c=c.expect("string");return new na(f,m,h,c)}function M(c){let f=/\\(?:u\{([\da-f]+)\}|u([\da-f]{4})|x([\da-f]{2})|([ntbrf0])|(.))|./yig,h="",m;for(;m=f.exec(c);){let [v,B,K,O,V,Z]=m;h=B||K||O?h+String.fromCodePoint(parseInt(B||K||O,16)):V?h+("n"==V?"\n":"t"==V?"\t":"0"==
V?"\x00":"r"==V?"\r":"f"==V?"\f":"\b"):Z?h+Z:h+v}return h}function Q(c,f){return(c<<5)+c+f}function aa(c){let f=Ib.none;for(let h of c)f=f.join(h.conflicts());return f}function Y(c,f){for(let h of c)if(h.rule.name.repeated)for(let m of f)if(m.rule.name==h.rule.name){if(h.rule.isRepeatWrap&&2==h.pos)return 1;if(m.rule.isRepeatWrap&&2==m.pos)return-1}return 0}function oa(c,f){return c<f?-1:c>f?1:0}function Aa(c,f,h,m){let v=[];for(f+=1;f<c.parts.length;f++){let B=c.parts[f],K=!1;if(B.terminal)Va(B,
v);else for(let O of m[B.name])null==O?K=!0:Va(O,v);if(!K)return v}for(let B of h)Va(B,v);return v}function Ba(c,f){if(c.length!=f.length)return!1;for(let h=0;h<c.length;h++)if(!c[h].eq(f[h]))return!1;return!0}function Ha(c,f){if(c.length!=f.length)return!1;for(let h=0;h<c.length;h++)if(c[h]!=f[h])return!1;return!0}function Sa(c){let f=5381;for(let h of c)f=Q(f,h.hash);return f}function $a(c,f){function h(K,O,V,Z,la){for(let wa of K.rules){K=m.find(ta=>ta.rule==wa);K||(K=(K=c.find(ta=>0==ta.pos&&
ta.rule==wa))?new uc(wa,0,K.ahead.slice(),K.ambigAhead,K.skipAhead,K.via):new uc(wa,0,[],hc,Z,la),m.push(K));if(K.skipAhead!=Z)throw new Nb("Inconsistent skip sets after "+la.trail());K.ambigAhead=Ja(K.ambigAhead,V);for(let ta of O)K.ahead.includes(ta)||(K.ahead.push(ta),K.rule.parts.length&&!K.rule.parts[0].terminal&&Va(K,v))}}let m=[],v=[];for(var B of c){let K=B.next;K&&!K.terminal&&h(K,Aa(B.rule,B.pos,B.ahead,f),B.conflicts(B.pos+1).ambigGroups,B.pos==B.rule.parts.length-1?B.skipAhead:B.rule.skip,
B)}for(;v.length;)B=v.pop(),h(B.rule.parts[0],Aa(B.rule,0,B.ahead,f),Ja(B.rule.conflicts[1].ambigGroups,1==B.rule.parts.length?B.ambigAhead:hc),B.skipAhead,B);f=c.slice();for(let K of m)K.ahead.sort((O,V)=>O.hash-V.hash),K.finish(),B=c.findIndex(O=>0==O.pos&&O.rule==K.rule),-1<B?f[B]=K:f.push(K);return f.sort((K,O)=>K.cmp(O))}function Va(c,f){f.includes(c)||f.push(c)}function lb(c){let f=Object.create(null);for(var h of c.terms)h.terminal||(f[h.name]=[]);for(;;){h=!1;for(let m of c.terms)if(!m.terminal)for(let v of m.rules){let B=
f[m.name],K=!1,O=B.length;for(let V of v.parts){K=!0;if(V.terminal)Va(V,B);else for(let Z of f[V.name])null==Z?K=!1:Va(Z,B);if(K)break}K||Va(null,B);B.length>O&&(h=!0)}if(!h)return f}}function kb(c,f){function h(m,v){let B=[];for(let K=v.via;!K.eqSimple(m);K=K.via)B.push(K);if(!B.length)return"";B.unshift(v);return B.reverse().map((K,O)=>"\n"+"  ".repeat(O+1)+(K==v?"":"via ")+K).join("")}if(c.eqSimple(f))return"";for(let m=c;m;m=m.via)for(let v=f;v;v=v.via)if(m.eqSimple(v))return"\nShared origin: "+
m+h(m,c)+h(m,f);return""}function wb(c,f,h){function m(ta,Oa){if(0==ta.length)return null;let za=Sa(ta);var Ua=B[za];let sb;for(var Jb of ta)if(!sb)sb=Jb.skip;else if(sb!=Jb.skip)throw new Nb("Inconsistent skip sets after "+Jb.trail());if(Ua)for(let jb of Ua)if(Ba(ta,jb.set)){if(jb.state.skip!=sb)throw new Nb("Inconsistent skip sets after "+jb.set[0].trail());return jb.state}Ua=$a(ta,h);Jb=Sa(Ua);let fb;if(!Oa)for(let jb of v)jb.hash==Jb&&jb.hasSet(Ua)&&(fb=jb);fb||(fb=new Zc(v.length,Ua,0,sb,Jb,
Oa),v.push(fb));(B[za]||(B[za]=[])).push(new Rc(ta,fb));return fb}let v=[],B={};for(var K of f){const ta=K.rules.length?K.rules[0].skip:c.names["%noskip"];m(K.rules.map(Oa=>(new uc(Oa,0,[c.eof],hc,ta,null)).finish()),K)}f=[];for(K=0;K<v.length;K++){let ta=v[K];var O=[];let Oa=[];var V=[];for(let za of ta.set)if(za.pos==za.rule.parts.length)za.rule.name.top||V.push(za);else{var Z=za.rule.parts[za.pos],la=O.indexOf(Z);0>la?(O.push(Z),Oa.push([za])):Oa[la].push(za)}for(Z=0;Z<O.length;Z++){la=O[Z];var wa=
Oa[Z].map(za=>za.advance());la.terminal?(wa=Gb(wa),(wa=m(wa))&&ta.addAction(new Ub(la,wa),Oa[Z],f)):(wa=m(wa))&&ta.goto.push(new Ub(la,wa))}O=!1;for(let za of V)for(let Ua of za.ahead)V=ta.actions.length,ta.addAction(new Cc(Ua,za.rule),[za],f),ta.actions.length==V&&(O=!0);if(O)for(V=0;V<ta.goto.length;V++)h[ta.goto[V].term.name].some(za=>ta.actions.some(Ua=>Ua.term==za&&Ua instanceof Ub))||ta.goto.splice(V--,1)}if(f.length)throw new Nb(f.map(ta=>ta.error).join("\n\n"));for(let ta of v)ta.finish();
return v}function Gb(c){let f=null,h=1;for(let m of c){let v=m.rule.conflicts[m.pos-1].cut;if(!(v<h)){if(!f||v>h)h=v,f=[];f.push(m)}}return f||c}function rb(c,f,h){for(let m of c.goto)for(let v of f.goto)if(m.term==v.term&&h[m.target.id]!=h[v.target.id])return!1;a:for(let m of c.actions){c=!1;for(let v of f.actions)if(v.term==m.term){if(m instanceof Ub?v instanceof Ub&&h[m.target.id]==h[v.target.id]:v.eq(m))continue a;c=!0}if(c)return!1}return!0}function dc(c,f,h){return rb(c,f,h)&&rb(f,c,h)}function ec(c,
f){let h=[];for(var m of c){let v=f[m.id];h[v]||(h[v]=new Zc(v,m.set,0,m.skip,m.hash,m.startRule),h[v].tokenGroup=m.tokenGroup,h[v].defaultReduce=m.defaultReduce)}for(let v of c){c=h[f[v.id]];c.flags|=v.flags;for(m=0;m<v.actions.length;m++){let B=v.actions[m].map(f,h);c.actions.some(K=>K.eq(B))||(c.actions.push(B),c.actionPositions.push(v.actionPositions[m]))}for(let B of v.goto){let K=B.map(f,h);c.goto.some(O=>O.eq(K))||c.goto.push(K)}}return h}function Xb(c,f){if(c.length!=f.length)return!1;for(let h=
0;h<c.length;h++)if(!c[h].eqSimple(f[h]))return!1;return!0}function jc(c){function f(V,Z){let la=m[V],wa=c[la.members[Z]],ta=la.members.pop();Z!=la.members.length&&(la.members[Z]=ta);for(V+=1;V<m.length;V++)if(h[wa.id]=V,m[V].origin==la.origin&&m[V].members.every(Oa=>dc(wa,c[Oa],h))){m[V].members.push(wa.id);return}h[wa.id]=m.length;m.push(new $c(la.origin,wa.id))}let h=[],m=[];a:for(var v=0;v<c.length;v++){var B=c[v];if(!B.startRule)for(var K=0;K<m.length;K++){var O=m[K];let V=c[O.members[0]];if(B.tokenGroup==
V.tokenGroup&&B.skip==V.skip&&!V.startRule&&Xb(B.set,V.set)){O.members.push(v);h.push(K);continue a}}h.push(m.length);m.push(new $c(m.length,v))}for(;;){v=!1;for(let V=0,Z=m.length;V<Z;V++)for(B=m[V],K=0;K<B.members.length-1;K++)for(O=K+1;O<B.members.length;O++)dc(c[B.members[K]],c[B.members[O]],h)||(v=!0,f(V,O--));if(!v)return ec(c,h)}}function Mb(c){for(;;){let h=[],m=!1,v=[];for(let B=0;B<c.length;B++){let K=c[B];var f=v.findIndex(O=>K.eq(O));if(0>f)h[B]=v.length,v.push(K);else{h[B]=f;m=!0;f=v[f];
let O=null;for(let V of K.set)f.set.some(Z=>Z.eqSimple(V))||(O||(O=[])).push(V);O&&(f.set=O.concat(f.set).sort((V,Z)=>V.cmp(Z)))}}if(!m)return c;for(let B of v)B.defaultReduce||(B.actions=B.actions.map(K=>K.map(h,v)),B.goto=B.goto.map(K=>K.map(h,v)));for(c=0;c<v.length;c++)v[c].id=c;c=v}}function nc(c,f=65535){if(c>f)throw Error("Trying to encode a number that's too big: "+c);if(65535==c)return String.fromCharCode(126);f="";for(var h=46;;h=0){let m=c%46;c-=m;h=m+h+32;34<=h&&h++;92<=h&&h++;h=String.fromCharCode(h);
f=h+f;if(0==c)break;c/=46}return f}function zb(c,f=65535){let h='"'+nc(c.length,4294967295);for(let m=0;m<c.length;m++)h+=nc(c[m],f);return h+'"'}function xb(...c){return new oc(c,null)}function Rb(c,f,h){let m=c.props[f];if(!m||0>m.split(" ").indexOf(h))c.props[f]=m?m+" "+h:h}function qc(c){let f=Object.create(null);for(let {value:h,term:m,type:v}of c)f[h]=m.id<<1|("specialize"==v?0:1);return f}function Yb(c,f,h=c.parts.length){return c.name.id|65536|(c.isRepeatWrap&&h==c.parts.length?131072:0)|
(f.some(m=>m.rule==c.name)?262144:0)|h<<19}function W(c,f){let h=Object.create(null),m=[],v=B=>{h[B.id]||(h[B.id]=!0,m.push(B))};for(let B of c)B.startRule&&f.includes(B.startRule)&&v(B);for(c=0;c<m.length;c++){for(let B of m[c].actions)B instanceof Ub&&v(B.target);for(let B of m[c].goto)v(B.target)}return B=>!h[B]}function I(c){let f={},h=0;for(var m of c)for(var v of m.goto)h=Math.max(v.term.id,h),c=f[v.term.id]||(f[v.term.id]={}),(c[v.target.id]||(c[v.target.id]=[])).push(m.id);m=new md;v=[];c=
h+2;for(let B=0;B<=h;B++){let K=f[B];if(!K){v.push(1);continue}let O=[],V=Object.keys(K);for(let Z of V){let la=K[Z];O.push((Z==V[V.length-1]?1:0)+(la.length<<1));O.push(+Z);for(let wa of la)O.push(wa)}v.push(m.storeArray(O)+c)}if(v.some(B=>65535<B))throw new Nb("Goto table too large");return Uint16Array.from([h+1,...v,...m.data])}function G(c,f){c.includes(f)||c.push(f)}function C(c){let f=Object.create(null);for(let h of c){c=1<<h.id;for(let m of h.tokens)f[m.id]=(f[m.id]||0)|c}return f}function P(c,
f){function h(v){if(v instanceof cb){let B=v.exprs.indexOf(f);-1<B&&B<v.exprs.length-1&&(m=v.exprs[B+1])}return v}let m;for(let v of c.rules)v.expr.walk(h);for(let v of c.topRules)v.expr.walk(h);return m}function S(c,f,h){function m(B,K){return B.actions.some(O=>O.term==K)||h[f.skipRules.indexOf(B.skip)].startTokens.includes(K)}let v=Object.create(null);return(B,K)=>{B.id<K.id&&([B,K]=[K,B]);let O=B.id|K.id<<16,V=v[O];return null!=V?V:v[O]=c.some(Z=>m(Z,B)&&m(Z,K))}}function X(c){let f=0,h=[];for(let [m,
v]of c)m>f&&h.push([f,m]),f=v;1114111>=f&&h.push([f,1114112]);return h}function ea(c,f,h,m){if(55296>h&&1114112==m)c.edge(h,65535,f);else if(65536>h&&(55296>h&&c.edge(h,Math.min(m,55296),f),57344<m&&c.edge(Math.max(h,57344),Math.min(m,65535),f),h=65536),!(65536>m)){h=String.fromCodePoint(h);var v=String.fromCodePoint(m-1);m=h.charCodeAt(0);h=h.charCodeAt(1);var B=v.charCodeAt(0);v=v.charCodeAt(1);if(m==B)B=new Db,c.edge(m,m+1,B),B.edge(h,v+1,f);else{let K=m,O=B;if(56320<h){K++;let V=new Db;c.edge(m,
m+1,V);V.edge(h,57344,f)}57343>v&&(O--,m=new Db,c.edge(B,B+1,m),m.edge(56320,v+1,f));K<=O&&(m=new Db,c.edge(K,O+1,m),m.edge(56320,57344,f))}}}function ua(c){return c instanceof cb&&0==c.exprs.length}function xa(c,f){let h=Object.create(null);for(let m of f){c.unique(m.id);let {name:v,props:B,dialect:K}=c.nodeInfo(m.props,"d",m.id.name);f=c.makeTerminal(m.id.name,v,B);null!=K&&(c.tokens.byDialect[K]||(c.tokens.byDialect[K]=[])).push(f);c.namedTerms[m.id.name]=h[m.id.name]=f}return h}function Ca(c,
f,h){f=f[h.id.name];if(!f)return null;h.args.length&&c.raise("External tokens cannot take arguments",h.args[0].start);c.used(h.id.name);return f}function ra(c,f,h){let m=c.findIndex(v=>v.term==f);0>m?c.push({term:f,after:h}):c[m]={term:f,after:c[m].after.concat(h)}}function Na(c,f){for(let m=0;;m++){let v=Object.create(null),B;if(0==m)for(let O of c)if(O.name.inline&&!v[O.name.name]){let V=c.filter(Z=>Z.name==O.name);V.some(Z=>Z.parts.includes(O.name))||(B=v[O.name.name]=V)}for(let O=0;O<c.length;O++){let V=
c[O];V.name.interesting||V.parts.includes(V.name)||!(3>V.parts.length)||f.includes(V.name)||1!=V.parts.length&&!c.every(Z=>Z.skip==V.skip||!Z.parts.includes(V.name))||V.parts.some(Z=>!!v[Z.name])||c.some((Z,la)=>la!=O&&Z.name==V.name)||(B=v[V.name.name]=[V])}if(!B)return c;let K=[];for(let O of c){var h=function(V,Z,la){if(V==O.parts.length)K.push(new sc(O.name,la,Z,O.skip));else{var wa=O.parts[V],ta=v[wa.name];if(ta)for(let Oa of ta)h(V+1,Z.slice(0,Z.length-1).concat(Z[V].join(Oa.conflicts[0])).concat(Oa.conflicts.slice(1,
Oa.conflicts.length-1)).concat(O.conflicts[V+1].join(Oa.conflicts[Oa.conflicts.length-1])),la.concat(Oa.parts));else h(V+1,Z.concat(O.conflicts[V+1]),la.concat(wa))}};v[O.name.name]||(O.parts.some(V=>!!v[V.name])?h(0,[O.conflicts[0]],[]):K.push(O))}c=K}}function Ta(c){let f=Object.create(null);var h;for(let m=0;m<c.length;){let v=m,B=c[m++].name;for(;m<c.length&&c[m].name==B;)m++;let K=m-v;if(!B.interesting)for(let O=m;O<c.length;){let V=O,Z=c[O++].name;for(;O<c.length&&c[O].name==Z;)O++;if(O-V!=
K||Z.interesting)continue;let la=!0;for(let wa=0;wa<K&&la;wa++)0!=c[v+wa].cmpNoName(c[V+wa])&&(la=!1);la&&(h=f[B.name]=Z)}}if(!h)return c;h=[];for(let m of c)f[m.name.name]||h.push(m.parts.every(v=>!f[v.name])?m:new sc(m.name,m.parts.map(v=>f[v.name]||v),m.conflicts,m.skip));return h}function Za(c,f){return Ta(Na(c,f))}function db(c){return c.props.some(f=>f.at&&"export"==f.name)}var ab=Ka(13);"use strict";Object.defineProperty(J,"__esModule",{value:!0});var mb=Ka(14);class ib{constructor(c){this.start=
c}}class Dc extends ib{constructor(c,f,h,m,v,B,K,O,V,Z,la,wa,ta){super(c);this.rules=f;this.topRules=h;this.tokens=m;this.externalTokens=v;this.externalSpecializers=B;this.precedences=K;this.mainSkip=O;this.scopedSkip=V;this.dialects=Z;this.grammars=la;this.externalProps=wa;this.autoDelim=ta}toString(){return Object.values(this.rules).join("\n")}}class qb extends ib{constructor(c,f,h,m,v){super(c);this.id=f;this.props=h;this.params=m;this.expr=v}toString(){return this.id.name+(this.params.length?
`<${this.params.join()}>`:"")+" -\x3e "+this.expr}}class fc extends ib{constructor(c,f){super(c);this.items=f}}class gc extends ib{constructor(c,f){super(c);this.items=f}}class Zb extends ib{constructor(c,f,h){super(c);this.a=f;this.b=h}}class wc extends ib{constructor(c,f,h,m,v){super(c);this.precedences=f;this.conflicts=h;this.rules=m;this.literals=v}}class xc extends ib{constructor(c,f,h){super(c);this.literal=f;this.props=h}}class kc extends ib{constructor(c,f,h,m){super(c);this.id=f;this.source=
h;this.tokens=m}}class y extends ib{constructor(c,f,h,m,v,B){super(c);this.type=f;this.token=h;this.id=m;this.source=v;this.tokens=B}}class U extends ib{constructor(c,f,h,m){super(c);this.id=f;this.externalID=h;this.source=m}}class na extends ib{constructor(c,f,h,m){super(c);this.id=f;this.externalID=h;this.source=m}}class ha extends ib{constructor(c,f){super(c);this.name=f}toString(){return this.name}}class ja extends ib{walk(c){return c(this)}eq(c){return!1}}ja.prototype.prec=10;class ia extends ja{constructor(c,
f,h,m){super(c);this.namespace=f;this.id=h;this.args=m}toString(){return this.id.name+(this.args.length?`<${this.args.join()}>`:"")}eq(c){return(this.namespace?null!=c.namespace&&c.namespace.name==this.namespace.name:!c.namespace)&&this.id.name==c.id.name&&Ea(this.args,c.args)}walk(c){let f=La(this.args,c);return c(f==this.args?this:new ia(this.start,this.namespace,this.id,f))}}class Da extends ja{constructor(c,f,h,m,v){super(c);this.type=f;this.props=h;this.token=m;this.content=v}toString(){return`@${this.type}[${this.props.join(",")}]<${this.token}, ${this.content}>`}eq(c){return this.type==
c.type&&hb.eqProps(this.props,c.props)&&Ma(this.token,c.token)&&Ma(this.content,c.content)}walk(c){let f=this.token.walk(c),h=this.content.walk(c);return c(f==this.token&&h==this.content?this:new Da(this.start,this.type,this.props,f,h))}}class bb extends ja{constructor(c,f){super(c);this.rule=f}toString(){let c=this.rule;return`${c.id}${c.props.length?`[${c.props.join(",")}]`:""} { ${c.expr} }`}eq(c){let f=this.rule;c=c.rule;return Ma(f.expr,c.expr)&&f.id.name==c.id.name&&hb.eqProps(f.props,c.props)}walk(c){let f=
this.rule,h=f.expr.walk(c);return c(h==f.expr?this:new bb(this.start,new qb(f.start,f.id,f.props,[],h)))}}class eb extends ja{constructor(c,f){super(c);this.exprs=f}toString(){return this.exprs.map(c=>Qa(c,this)).join(" | ")}eq(c){return Ea(this.exprs,c.exprs)}walk(c){let f=La(this.exprs,c);return c(f==this.exprs?this:new eb(this.start,f))}}eb.prototype.prec=1;class cb extends ja{constructor(c,f,h){super(c);this.exprs=f;this.markers=h}toString(){return this.exprs.map(c=>Qa(c,this)).join(" ")}eq(c){return Ea(this.exprs,
c.exprs)&&this.markers.every((f,h)=>{let m=c.markers[h];return f.length==m.length&&f.every((v,B)=>v.eq(m[B]))})}walk(c){let f=La(this.exprs,c);return c(f==this.exprs?this:new cb(this.start,f,this.markers))}}cb.prototype.prec=2;class Hb extends ib{constructor(c,f,h){super(c);this.id=f;this.type=h}toString(){return("ambig"==this.type?"~":"!")+this.id.name}eq(c){return this.id.name==c.id.name&&this.type==c.type}}class ac extends ja{constructor(c,f,h){super(c);this.expr=f;this.kind=h}toString(){return Qa(this.expr,
this)+this.kind}eq(c){return Ma(this.expr,c.expr)&&this.kind==c.kind}walk(c){let f=this.expr.walk(c);return c(f==this.expr?this:new ac(this.start,f,this.kind))}}ac.prototype.prec=3;class Tb extends ja{constructor(c,f){super(c);this.value=f}toString(){return JSON.stringify(this.value)}eq(c){return this.value==c.value}}class Qc extends ja{constructor(c,f,h){super(c);this.ranges=f;this.inverted=h}toString(){return`[${this.inverted?"^":""}${this.ranges.map(([c,f])=>String.fromCodePoint(c)+(f==c+1?"":
"-"+String.fromCodePoint(f)))}]`}eq(c){return this.inverted==c.inverted&&this.ranges.length==c.ranges.length&&this.ranges.every(([f,h],m)=>{let [v,B]=c.ranges[m];return f==v&&h==B})}}class Yc extends ja{constructor(c){super(c)}toString(){return"_"}eq(){return!0}}class hb extends ib{constructor(c,f,h,m){super(c);this.at=f;this.name=h;this.value=m}eq(c){return this.name==c.name&&this.value.length==c.value.length&&this.value.every((f,h)=>f.value==c.value[h].value&&f.name==c.value[h].name)}toString(){let c=
(this.at?"@":"")+this.name;if(this.value.length){c+="\x3d";for(let {name:f,value:h}of this.value)c+=f?`{${f}}`:/[^\w-]/.test(h)?JSON.stringify(h):h}return c}static eqProps(c,f){return c.length==f.length&&c.every((h,m)=>h.eq(f[m]))}}class Lc extends ib{constructor(c,f,h){super(c);this.value=f;this.name=h}}class Nb extends Error{}let Ec=0;class lc{constructor(c,f,h,m={}){this.name=c;this.flags=f;this.nodeName=h;this.props=m;this.hash=++Ec;this.id=-1;this.rules=[]}toString(){return this.name}get nodeType(){return this.top||
null!=this.nodeName||Fa(this.props)||this.repeated}get terminal(){return 0<(this.flags&1)}get eof(){return 0<(this.flags&4)}get error(){return"error"in this.props}get top(){return 0<(this.flags&2)}get interesting(){return 0<this.flags||null!=this.nodeName}get repeated(){return 0<(this.flags&16)}set preserve(c){this.flags=c?this.flags|8:this.flags&-9}get preserve(){return 0<(this.flags&8)}set inline(c){this.flags=c?this.flags|32:this.flags&-33}get inline(){return 0<(this.flags&32)}cmp(c){return this.hash-
c.hash}}class yd{constructor(){this.terms=[];this.names=Object.create(null);this.tops=[];this.eof=this.term("␄",null,5);this.error=this.term("⚠","⚠",8)}term(c,f,h=0,m={}){f=new lc(c,h,f,m);this.terms.push(f);return this.names[c]=f}makeTop(c,f){c=this.term("@top",c,2,f);this.tops.push(c);return c}makeTerminal(c,f,h={}){return this.term(c,f,1,h)}makeNonTerminal(c,f,h={}){return this.term(c,f,0,h)}makeRepeat(c){return this.term(c,null,16)}uniqueName(c){for(let f=0;;f++){let h=f?`${c}-${f}`:c;if(!this.names[h])return h}}finish(c){for(var f of c)f.name.rules.push(f);
this.terms=this.terms.filter(B=>B.terminal||B.preserve||c.some(K=>K.name==B||K.parts.includes(B)));f={};let h=[this.error];this.error.id=0;let m=1;for(var v of this.terms)0>v.id&&v.nodeType&&!v.repeated&&(v.id=m++,h.push(v));v=m;for(let B of this.terms)B.repeated&&(B.id=m++,h.push(B));this.eof.id=m++;for(let B of this.terms)0>B.id&&(B.id=m++),B.name&&(f[B.id]=B.name);if(65534<=m)throw new Nb("Too many terms");return{nodeTypes:h,names:f,minRepeatTerm:v,maxTerm:m-1}}}const Ob=[];class Ib{constructor(c,
f=Ob,h=0){this.precedence=c;this.ambigGroups=f;this.cut=h}join(c){return this==Ib.none||this==c?c:c==Ib.none?this:new Ib(Math.max(this.precedence,c.precedence),Ja(this.ambigGroups,c.ambigGroups),Math.max(this.cut,c.cut))}cmp(c){return this.precedence-c.precedence||qa(this.ambigGroups,c.ambigGroups,(f,h)=>f<h?-1:f>h?1:0)||this.cut-c.cut}}Ib.none=new Ib(0);let id=0;class sc{constructor(c,f,h,m){this.name=c;this.parts=f;this.conflicts=h;this.skip=m;this.id=id++}cmp(c){return this.id-c.id}cmpNoName(c){return this.parts.length-
c.parts.length||this.skip.hash-c.skip.hash||this.parts.reduce((f,h,m)=>f||h.cmp(c.parts[m]),0)||qa(this.conflicts,c.conflicts,(f,h)=>f.cmp(h))}toString(){return this.name+" -\x3e "+this.parts.join(" ")}get isRepeatWrap(){return this.name.repeated&&2==this.parts.length&&this.parts[0]==this.name}sameReduce(c){return this.name==c.name&&this.parts.length==c.parts.length&&this.isRepeatWrap==c.isRepeatWrap}}class jd{constructor(c,f,h){this.from=c;this.to=f;this.target=h}toString(){return`-> ${this.target.id}[label=${JSON.stringify(0>
this.from?"ε":Pa(this.from)+(this.to>this.from+1?"-"+Pa(this.to-1):""))}]`}}let Vc=1;class Db{constructor(c=[],f=Vc++){this.accepting=c;this.id=f;this.edges=[]}edge(c,f,h){this.edges.push(new jd(c,f,h))}nullEdge(c){this.edge(-1,-1,c)}compile(){function c(m){let v=f[Ra(m)]=new Db(m.reduce((K,O)=>Ja(K,O.accepting),[]),h++),B=[];for(let K of m)for(let O of K.edges)0<=O.from&&B.push(O);m=sa(B);for(let K of m)m=K.targets.sort((O,V)=>O.id-V.id),v.edge(K.from,K.to,f[Ra(m)]||c(m));return v}let f=Object.create(null),
h=0;return c(this.closure().sort((m,v)=>m.id-v.id))}closure(){function c(h){if(!f.includes(h)){(h.edges.some(m=>0<=m.from)||0<h.accepting.length&&!h.edges.some(m=>{a:{var v=h.accepting;m=m.target.accepting;if(v.length!=m.length)v=!1;else{for(let B=0;B<v.length;B++)if(v[B]!=m[B]){v=!1;break a}v=!0}}return v}))&&f.push(h);for(let m of h.edges)0>m.from&&c(m.target)}}let f=[];c(this);return f}findConflicts(c){function f(v,B,K,O,V){v.id<B.id&&([v,B]=[B,v],K=-K);let Z=h.find(la=>la.a==v&&la.b==B);Z?Z.soft!=
K&&(Z.soft=0):h.push(new kd(v,B,K,pa(O),V&&pa(V)))}let h=[],m=this.cycleTerms();this.reachable((v,B)=>{if(0!=v.accepting.length){for(let K=0;K<v.accepting.length;K++)for(let O=K+1;O<v.accepting.length;O++)f(v.accepting[K],v.accepting[O],0,B);v.reachable((K,O)=>{if(K!=v)for(let V of K.accepting){K=m.includes(V);for(let Z of v.accepting)V!=Z&&f(V,Z,K||m.includes(Z)||!c(V,Z)?0:1,B,B.concat(O))}})}});return h}cycleTerms(){let c=[];this.reachable(m=>{for(let {target:v}of m.edges)c.push(m,v)});var f=new Map;
let h=[];for(let m=0;m<c.length;){let v=c[m++],B=c[m++],K=f.get(v);K||f.set(v,K=[]);if(!K.includes(B))if(v==B)h.includes(v)||h.push(v);else{for(let O of K)c.push(v,O);K.push(B)}}f=[];for(let m of h)for(let v of m.accepting)f.includes(v)||f.push(v);return f}reachable(c){let f=[],h=[];(function B(v){c(v,h);f.push(v);for(let K of v.edges)f.includes(K.target)||(h.push(K),B(K.target),h.pop())})(this)}toString(){let c="digraph {\n";this.reachable(f=>{f.accepting.length&&(c+=`  ${f.id} [label=${JSON.stringify(f.accepting.join())}];\n`);
for(let h of f.edges)c+=`  ${f.id} ${h};\n`});return c+"}"}toArray(c,f){let h=[],m=[];this.reachable(v=>{let B=m.length,K=B+3+2*v.accepting.length;h[v.id]=B;m.push(v.stateMask(c),K,v.edges.length);v.accepting.sort((O,V)=>f.indexOf(O.id)-f.indexOf(V.id));for(let O of v.accepting)m.push(O.id,c[O.id]||65535);for(let O of v.edges)m.push(O.from,O.to,-O.target.id-1)});for(let v=0;v<m.length;v++)0>m[v]&&(m[v]=h[-m[v]-1]);if(65536<m.length)throw new Nb("Tokenizer tables too big to represent with 16-bit offsets.");
return Uint16Array.from(m)}stateMask(c){let f=0;this.reachable(h=>{for(let m of h.accepting)f|=c[m.id]||65535});return f}}class kd{constructor(c,f,h,m,v){this.a=c;this.b=f;this.soft=h;this.exampleA=m;this.exampleB=v}}class tc{constructor(c,f,h){this.from=c;this.to=f;this.targets=h}}let tb=/[\w_-]+/gy;try{tb=/[\p{Alphabetic}\d_-]+/ugy}catch(c){}const nb=[];class ld{constructor(c,f=null){this.string=c;this.fileName=f;this.type="sof";this.value=null;this.end=this.start=0;this.next()}lineInfo(c){for(let f=
1,h=0;;){let m=this.string.indexOf("\n",h);if(-1<m&&m<c)++f,h=m+1;else return{line:f,ch:c-h}}}message(c,f=-1){let h=this.fileName||"";-1<f&&(f=this.lineInfo(f),h+=(h?" ":"")+f.line+":"+f.ch);return h?c+` (${h})`:c}raise(c,f=-1){throw new Nb(this.message(c,f));}match(c,f){return(f=f.exec(this.string.slice(c)))?c+f[0].length:-1}next(){let c=this.match(this.end,/^(\s|\/\/.*|\/\*[^]*?\*\/)*/);if(c==this.string.length)return this.set("eof",null,c,c);var f=this.string[c];if('"'==f)return f=this.match(c+
1,/^(\\.|[^"])*"/),-1==f&&this.raise("Unterminated string literal",c),this.set("string",M(this.string.slice(c+1,f-1)),c,f);if("'"==f)return f=this.match(c+1,/^(\\.|[^'])*'/),-1==f&&this.raise("Unterminated string literal",c),this.set("string",M(this.string.slice(c+1,f-1)),c,f);if("@"==f)return tb.lastIndex=c+1,(f=tb.exec(this.string))?this.set("at",f[0],c,c+1+f[0].length):this.raise("@ without a name",c);if("$"!=f&&"!"!=f||"["!=this.string[c+1]){if(/[\[\]()!~+*?{}<>\.,|:$=]/.test(f))return this.set(f,
null,c,c+1);{tb.lastIndex=c;let h=tb.exec(this.string);return h?this.set("id",h[0],c,c+h[0].length):this.raise("Unexpected character "+JSON.stringify(f),c)}}f=this.match(c+2,/^(?:\\.|[^\]])*\]/);-1==f&&this.raise("Unterminated character set",c);return this.set("set",this.string.slice(c+2,f-1),c,f)}set(c,f,h,m){this.type=c;this.value=f;this.start=h;this.end=m}eat(c,f=null){if(this.type!=c||null!=f&&this.value!==f)return!1;this.next();return!0}unexpected(){return this.raise(`Unexpected token '${this.string.slice(this.start,
this.end)}'`,this.start)}expect(c,f=null){let h=this.value;(this.type!=c||null!=f&&h!==f)&&this.unexpected();this.next();return h}parse(){{var c=this.start;let B=[];var f=null,h=null;let K=null,O=[],V=[],Z=[],la=[],wa=[],ta=[],Oa=[],za=!1;for(;"eof"!=this.type;){var m=this.start;if("at"==this.type&&"top"==this.value)this.next(),"id"!=this.type&&this.raise("Top rules must have a name",this.start),m=N(this),Oa.length&&"@top"===m.name&&this.raise("Unnamed secondary @top declaration",this.start),Oa.push(ya(this,
m));else if("at"==this.type&&"tokens"==this.value)if(h)this.raise("Multiple @tokens declaractions",this.start);else{{h=this.start;this.next();this.expect("{");m=[];var v=[];let Ua=[],sb=[];for(;!this.eat("}");)"at"==this.type&&"precedence"==this.value?Ua.push(E(this)):"at"==this.type&&"conflict"==this.value?sb.push(p(this)):"string"==this.type?v.push(new xc(this.start,this.expect("string"),Ga(this))):m.push(ya(this));h=new wc(h,Ua,sb,m,v)}}else if(this.eat("at","external"))this.eat("id","tokens")?
Z.push(q(this,m)):this.eat("id","grammar")?wa.push(r(this,m)):this.eat("id","prop")?ta.push(w(this,m)):this.eat("id","extend")?la.push(n(this,"extend",m)):this.eat("id","specialize")?la.push(n(this,"specialize",m)):this.unexpected();else if(this.eat("at","dialects"))for(this.expect("{"),m=!0;!this.eat("}");m=!1)m||this.eat(","),V.push(N(this));else if("at"==this.type&&"precedence"==this.value){f&&this.raise("Multiple precedence declarations",this.start);f=this.start;this.next();this.expect("{");for(m=
[];!this.eat("}");)m.length&&this.eat(","),m.push({id:N(this),type:this.eat("at","left")?"left":this.eat("at","right")?"right":this.eat("at","cut")?"cut":null});f=new fc(f,m)}else if(this.eat("at","detectDelim"))za=!0;else if(this.eat("at","skip"))if(m=ca(this),"{"==this.type){this.next();for(v=[];!this.eat("}");)v.push(ya(this));O.push({expr:m,rules:v})}else K&&this.raise("Multiple top-level skip declarations",this.start),K=m;else B.push(ya(this))}c=Oa.length?new Dc(c,B,Oa,h,Z,la,f,K,O,V,wa,ta,za):
this.raise("Missing @top declaration")}return c}}class uc{constructor(c,f,h,m,v,B){this.rule=c;this.pos=f;this.ahead=h;this.ambigAhead=m;this.skipAhead=v;this.via=B;this.hash=0}finish(){var c=Q(Q(this.rule.id,this.pos),this.skipAhead.hash);for(var f of this.ahead)c=Q(c,f.hash);for(let h of this.ambigAhead){f=h;for(let m=0;m<f.length;m++)c=Q(c,f.charCodeAt(m))}this.hash=c;return this}get next(){return this.pos<this.rule.parts.length?this.rule.parts[this.pos]:null}advance(){return(new uc(this.rule,
this.pos+1,this.ahead,this.ambigAhead,this.skipAhead,this.via)).finish()}get skip(){return this.pos==this.rule.parts.length?this.skipAhead:this.rule.skip}cmp(c){return this.rule.cmp(c.rule)||this.pos-c.pos||this.skipAhead.hash-c.skipAhead.hash||qa(this.ahead,c.ahead,(f,h)=>f.cmp(h))||qa(this.ambigAhead,c.ambigAhead,oa)}eqSimple(c){return c.rule==this.rule&&c.pos==this.pos}toString(){let c=this.rule.parts.map(f=>f.name);c.splice(this.pos,0,"·");return`${this.rule.name} -> ${c.join(" ")}`}eq(c){return this==
c||this.hash==c.hash&&this.rule==c.rule&&this.pos==c.pos&&this.skipAhead==c.skipAhead&&Ha(this.ahead,c.ahead)&&Ha(this.ambigAhead,c.ambigAhead)}trail(c=60){var f=[];for(let h=this;h;h=h.via)for(let m=h.pos-1;0<=m;m--)f.push(h.rule.parts[m]);f=f.reverse().join(" ");f.length>c&&(f=f.slice(f.length-c).replace(/.*? /,"… "));return f}conflicts(c=this.pos){let f=this.rule.conflicts[c];c==this.rule.parts.length&&this.ambigAhead.length&&(f=f.join(new Ib(0,this.ambigAhead)));return f}static addOrigins(c,f){c=
c.slice();for(let h=0;h<c.length;h++){let m=c[h];if(0==m.pos)for(let v of f)v.next!=m.rule.name||c.includes(v)||c.push(v)}return c}}class Ub{constructor(c,f){this.term=c;this.target=f}eq(c){return c instanceof Ub&&this.term==c.term&&c.target.id==this.target.id}cmp(c){return c instanceof Cc?-1:this.term.id-c.term.id||this.target.id-c.target.id}toString(){return"s"+this.target.id}map(c,f){c=f[c[this.target.id]];return c==this.target?this:new Ub(this.term,c)}}class Cc{constructor(c,f){this.term=c;this.rule=
f}eq(c){return c instanceof Cc&&this.term==c.term&&c.rule.sameReduce(this.rule)}cmp(c){return c instanceof Ub?1:this.term.id-c.term.id||this.rule.name.id-c.rule.name.id||this.rule.parts.length-c.rule.parts.length}toString(){return`${this.rule.name.name}(${this.rule.parts.length})`}map(){return this}}class Zc{constructor(c,f,h=0,m,v=Sa(f),B=null){this.id=c;this.set=f;this.flags=h;this.skip=m;this.hash=v;this.startRule=B;this.actions=[];this.actionPositions=[];this.goto=[];this.tokenGroup=-1;this.defaultReduce=
null;this.nested=-1}toString(){let c=this.actions.map(f=>f.term+"\x3d"+f).join(",")+(this.goto.length?" | "+this.goto.map(f=>f.term+"\x3d"+f).join(","):"");return this.id+": "+this.set.filter(f=>0<f.pos).join()+(this.defaultReduce?`\n  always ${this.defaultReduce.name}(${this.defaultReduce.parts.length})`:c.length?"\n  "+c:"")}addActionInner(c,f){for(let m=0;m<this.actions.length;m++){let v=this.actions[m];if(v.term==c.term){if(v.eq(c))return null;var h=uc.addOrigins(f,this.set);let B=uc.addOrigins(this.actionPositions[m],
this.set),K=aa(h),O=aa(B);h=Y(h,B)||K.precedence-O.precedence;if(0<h)this.actions.splice(m,1),this.actionPositions.splice(m,1),m--;else{if(0>h)return null;if(!K.ambigGroups.some(V=>O.ambigGroups.includes(V)))return v}}}this.actions.push(c);this.actionPositions.push(f);return null}addAction(c,f,h){var m=this.addActionInner(c,f);if(m){let v=this.actionPositions[this.actions.indexOf(m)][0],B=[f[0].rule.name,v.rule.name];h.some(K=>K.rules.some(O=>B.includes(O)))||(m=m instanceof Ub?`shift/reduce conflict between\n  ${v}\nand\n  ${f[0].rule}`:
`reduce/reduce conflict between\n  ${v.rule}\nand\n  ${f[0].rule}`,m+=`\nWith input:\n  ${f[0].trail(70)} · ${c.term} …`,m+=kb(v,f[0]),h.push(new zd(m,B)))}}getGoto(c){return this.goto.find(f=>f.term==c)}hasSet(c){return Ba(this.set,c)}finish(){if(this.actions.length){let c=this.actions[0];if(c instanceof Cc){let {rule:f}=c;this.actions.every(h=>h instanceof Cc&&h.rule.sameReduce(f))&&(this.defaultReduce=f)}}this.actions.sort((c,f)=>c.cmp(f));this.goto.sort((c,f)=>c.cmp(f))}eq(c){let f=this.defaultReduce,
h=c.defaultReduce;return f||h?f&&h?f.sameReduce(h):!1:this.skip==c.skip&&this.tokenGroup==c.tokenGroup&&Ba(this.actions,c.actions)&&Ba(this.goto,c.goto)}}class Rc{constructor(c,f){this.set=c;this.state=f}}class zd{constructor(c,f){this.error=c;this.rules=f}}class $c{constructor(c,f){this.origin=c;this.members=[f]}}const hc=[],Bb=[],Sc="undefined"!=typeof ab&&ab.env.LOG||"";class oc{constructor(c,f){this.terms=c;this.conflicts=f}concat(c){if(this==oc.none)return c;if(c==oc.none)return this;let f=null;
if(this.conflicts||c.conflicts){f=this.conflicts?this.conflicts.slice():this.ensureConflicts();let h=c.ensureConflicts();f[f.length-1]=f[f.length-1].join(h[0]);for(let m=1;m<h.length;m++)f.push(h[m])}return new oc(this.terms.concat(c.terms),f)}withConflicts(c,f){if(f==Ib.none)return this;let h=this.conflicts?this.conflicts.slice():this.ensureConflicts();h[c]=h[c].join(f);return new oc(this.terms,h)}ensureConflicts(){if(this.conflicts)return this.conflicts;let c=[];for(let f=0;f<=this.terms.length;f++)c.push(Ib.none);
return c}}oc.none=new oc(Bb,null);class Mc{constructor(c,f,h){this.id=c;this.args=f;this.term=h}matches(c){return this.id==c.id.name&&Ea(c.args,this.args)}matchesRepeat(c){return"+"==this.id&&Ma(c.expr,this.args[0])}}class Lb{constructor(c,f){this.options=f;this.terms=new yd;this.nestedGrammars=[];this.specialized=Object.create(null);this.tokenOrigins=Object.create(null);this.rules=[];this.built=[];this.ruleNames=Object.create(null);this.namespaces=Object.create(null);this.namedTerms=Object.create(null);
this.termTable=Object.create(null);this.knownProps=Object.create(null);this.dynamicRulePrecedences=[];this.definedGroups=[];this.astRules=[];this.currentSkip=[];this.input=new ld(c,f.fileName);this.ast=this.input.parse();c=mb.NodeProp;for(var h in c)c[h]instanceof mb.NodeProp&&(this.knownProps[h]={prop:c[h],source:{name:h,from:null}});for(var m of this.ast.externalProps)this.knownProps[m.id.name]={prop:this.options.externalProp?this.options.externalProp(m.id.name):mb.NodeProp.string(),source:{name:m.externalID.name,
from:m.source}};this.dialects=this.ast.dialects.map(Z=>Z.name);this.tokens=new ed(this,this.ast.tokens);this.externalTokens=this.ast.externalTokens.map(Z=>new bd(this,Z));this.externalSpecializers=this.ast.externalSpecializers.map(Z=>new Tc(this,Z));this.defineNamespace("nest",new nd);for(let Z of this.ast.grammars)this.ast.grammars.some(la=>la!=Z&&la.id.name==Z.id.name)&&this.raise(`Duplicate external grammar name '${Z.id.name}'`,Z.id.start);h=this.newName("%noskip",!0);this.defineRule(h,[]);m=this.ast.mainSkip?
this.newName("%mainskip",!0):h;let v=[];for(var B of this.ast.rules)this.astRules.push({skip:m,rule:B});for(let Z of this.ast.scopedSkip){B=h;c=this.ast.scopedSkip.findIndex((la,wa)=>wa<v.length&&Ma(la.expr,Z.expr));-1<c?B=v[c]:this.ast.mainSkip&&Ma(Z.expr,this.ast.mainSkip)?B=m:ua(Z.expr)||(B=this.newName("%skip",!0));v.push(B);for(var K of Z.rules)this.astRules.push({skip:B,rule:K})}for(var {rule:O}of this.astRules)this.unique(O.id),this.namespaces[O.id.name]&&this.raise(`Rule name '${O.id.name}' conflicts with a defined namespace`,
O.id.start);this.currentSkip.push(h);this.skipRules=m==h?[m]:[h,m];m!=h&&this.defineRule(m,this.normalizeExpr(this.ast.mainSkip));for(K=0;K<this.ast.scopedSkip.length;K++)O=v[K],this.skipRules.includes(O)||(this.skipRules.push(O),O!=h&&this.defineRule(O,this.normalizeExpr(this.ast.scopedSkip[K].expr)));this.currentSkip.pop();for(var V of this.ast.topRules){this.currentSkip.push(m);let {name:Z,props:la}=this.nodeInfo(V.props,"",V.id.name,Bb,Bb,V.expr);this.defineRule(this.terms.makeTop(Z,la),this.normalizeExpr(V.expr));
this.currentSkip.pop()}for(let Z of this.externalSpecializers)Z.finish();for(let {skip:Z,rule:la}of this.astRules)this.ruleNames[la.id.name]&&db(la)&&!la.params.length&&(this.buildRule(la,[],Z,!1),la.expr instanceof cb&&0==la.expr.exprs.length&&this.used(la.id.name));for(let Z in this.ruleNames)(V=this.ruleNames[Z])&&this.warn(`Unused rule '${V.name}'`,V.start);this.tokens.takePrecedences();this.tokens.takeConflicts();for(let {name:Z,group:la,rule:wa}of this.definedGroups)this.defineGroup(Z,la,wa);
this.checkGroups()}unique(c){c.name in this.ruleNames&&this.raise(`Duplicate definition of rule '${c.name}'`,c.start);this.ruleNames[c.name]=c}used(c){this.ruleNames[c]=null}defineNamespace(c,f,h=0){this.namespaces[c]&&this.raise(`Duplicate definition of namespace '${c}'`,h);this.namespaces[c]=f}newName(c,f=null,h={}){for(let m=f?0:1;;m++){let v=m?`${c}-${m}`:c;if(!this.terms.names[v])return this.terms.makeNonTerminal(v,!0===f?null:f,h)}}prepareParser(){var c=Za(this.rules,[...this.skipRules,...this.nestedGrammars.map(gb=>
gb.placeholder),...this.terms.tops]);let {nodeTypes:f,names:h,minRepeatTerm:m,maxTerm:v}=this.terms.finish(c);for(var B in this.namedTerms)this.termTable[B]=this.namedTerms[B].id;/\bgrammar\b/.test(Sc)&&console.log(c.join("\n"));let K=this.terms.tops.slice(),O=lb(this.terms);B=this.skipRules.map((gb,Cb)=>{let Vb=[],bc=[],Ab=[];for(let Kb of gb.rules){if(!Kb.parts.length)continue;let Wb=Kb.parts[0];for(let cc of Wb.terminal?[Wb]:O[Wb.name]||[])bc.includes(cc)||bc.push(cc);Wb.terminal&&1==Kb.parts.length&&
!Ab.some(cc=>cc!=Kb&&cc.parts[0]==Wb)?Vb.push(Wb):Ab.push(Kb)}gb.rules=Ab;Ab.length&&K.push(gb);return{skip:Vb,rule:Ab.length?gb:null,startTokens:bc,id:Cb}});c=wb(this.terms,K,O);let {tokenGroups:V,tokenPrec:Z,tokenData:la}=this.tokens.buildTokenGroups(c,B),wa=Mb(jc(c));var ta=W(wa,this.terms.tops);this.addNestedGrammars(wa);/\blr\b/.test(Sc)&&console.log(wa.join("\n"));c=[];for(var Oa of this.externalSpecializers)c.push(Oa);for(var za in this.specialized)c.push({token:this.terms.names[za],table:qc(this.specialized[za])});
let Ua=gb=>gb instanceof kc?gb.start:this.tokens.ast?this.tokens.ast.start:-1;Oa=V.concat(this.externalTokens.map(gb=>gb.ast)).sort((gb,Cb)=>Ua(gb)-Ua(Cb));let sb=new md,Jb=B.map(gb=>{let Cb=[];for(var Vb of gb.skip)Cb.push(Vb.id,0,4);if(gb.rule){Vb=wa.find(bc=>bc.startRule==gb.rule);for(let bc of Vb.actions)Cb.push(bc.term.id,Vb.id,2)}Cb.push(65535,0);return sb.storeArray(Cb)});za=new Uint32Array(6*wa.length);var fb=this.computeForceReductions(wa,B);B=new dd(Oa,sb,za,Jb,B,wa,this);for(var jb of wa)B.finish(jb,
ta(jb.id),fb[jb.id]);jb=Object.create(null);for(B=0;B<this.dialects.length;B++)jb[this.dialects[B]]=sb.storeArray((this.tokens.byDialect[B]||Bb).map(gb=>gb.id).concat(65535));B=null;if(this.dynamicRulePrecedences.length){B=Object.create(null);for(let {rule:gb,prec:Cb}of this.dynamicRulePrecedences)B[gb.id]=Cb}ta=Object.create(null);for(let gb of this.terms.tops)ta[gb.nodeName]=[wa.find(Cb=>Cb.startRule==gb).id,gb.id];fb=sb.storeArray(Z.concat(65535));let {nodeProps:Sb,skippedTypes:vc}=this.gatherNodeProps(f);
return{states:za,stateData:sb.finish(),goto:I(wa),nodeNames:f.filter(gb=>gb.id<m).map(gb=>gb.nodeName).join(" "),nodeProps:Sb,skippedTypes:vc,maxTerm:v,repeatNodeCount:f.length-m,tokenizers:Oa,tokenData:la,topRules:ta,dialects:jb,dynamicPrecedences:B,specialized:c,tokenPrec:fb,termNames:h}}getParser(){let {states:c,stateData:f,goto:h,nodeNames:m,nodeProps:v,skippedTypes:B,maxTerm:K,repeatNodeCount:O,tokenizers:V,tokenData:Z,topRules:la,dialects:wa,dynamicPrecedences:ta,specialized:Oa,tokenPrec:za,
termNames:Ua}=this.prepareParser(),sb=Oa.map(fb=>{if(fb instanceof Tc){let jb=this.options.externalSpecializer(fb.ast.id.name,this.termTable);return{term:fb.term.id,get:(Sb,vc)=>jb(Sb,vc)<<1|("extend"==fb.ast.type?1:0)}}return{term:fb.token.id,get:jb=>fb.table[jb]||-1}}),Jb=V.map(fb=>fb instanceof kc?this.options.externalTokenizer(fb.id.name,this.termTable):fb.id);return mb.Parser.deserialize({version:12,states:c,stateData:f,goto:h,nodeNames:m,maxTerm:K,repeatNodeCount:O,nodeProps:v.map(({prop:fb,
terms:jb})=>[this.knownProps[fb].prop,...jb]),skippedNodes:B,tokenData:Z,tokenizers:Jb,topRules:la,nested:this.nestedGrammars.map(fb=>[fb.name,fb.source?this.options.nestedGrammar(fb.name,this.termTable):null,fb.end.compile().toArray({},Bb),fb.placeholder.id]),dialects:wa,dynamicPrecedences:ta,specialized:sb,tokenPrec:za,termNames:Ua})}getParserFile(){function c(Ya){return"{__proto__:null,"+Object.keys(Ya).map(pb=>`${/\W/.test(pb)?JSON.stringify(pb):pb}:${Ya[pb]}`).join(", ")+"}"}function f(Ya){return"string"!=
typeof Ya||/^(true|false|\d+(\.\d+)?|\.\d+)$/.test(Ya)?Ya:JSON.stringify(Ya)}let {states:h,stateData:m,goto:v,nodeNames:B,nodeProps:K,skippedTypes:O,maxTerm:V,repeatNodeCount:Z,tokenizers:la,tokenData:wa,topRules:ta,dialects:Oa,dynamicPrecedences:za,specialized:Ua,tokenPrec:sb,termNames:Jb}=this.prepareParser(),fb=this.options.moduleStyle||"es",jb;jb="// This file was generated by lezer-generator. You probably shouldn't edit it.\n"+("cjs"==fb?'const {Parser} \x3d require("lezer")\n':'import {Parser} from "lezer"\n');
let Sb={},vc=Object.create(null),gb=Object.create(null);gb.Parser=!0;let Cb=Ya=>{for(let pb=0;;pb++){let Jc=Ya+(pb?"_"+pb:"");if(!gb[Jc])return Jc}},Vb=(Ya,pb,Jc)=>{let Uc=Ya+" from "+pb;if(vc[Uc])return vc[Uc];pb=JSON.stringify(pb);let cd=Ya;Ya in gb&&(cd=Cb(Jc),Ya+=`${"cjs"==fb?":":" as"} ${cd}`);(Sb[pb]||(Sb[pb]=[])).push(Ya);return vc[Uc]=cd};var bc=la.map(Ya=>{if(Ya instanceof kc){let {source:pb,id:{name:Jc}}=Ya;return Vb(Jc,pb,"tok")}return Ya.id}),Ab=this.nestedGrammars.map(Ya=>`[${JSON.stringify(Ya.name)}, ${Ya.source?
Vb(Ya.extName,Ya.source,Ya.name):"null"},\
${zb(Ya.end.compile().toArray({},Bb))}, ${Ya.placeholder.id}]`),Kb=K.map(({prop:Ya,terms:pb})=>{({source:Ya}=this.knownProps[Ya]);return`[${Ya.from?Vb(Ya.name,Ya.from,"prop"):Vb("NodeProp","lezer","NodeProp")+"."+Ya.name}, ${pb.map(f).join(",")}]`});let Wb="";var cc=Ua.map(Ya=>{if(Ya instanceof Tc){var pb=Vb(Ya.ast.id.name,Ya.ast.source,Ya.ast.id.name);return`{term: ${Ya.term.id}, get: (value, stack) => (${pb}(value, stack) << 1)${"extend"==Ya.ast.type?" | 1":""}}`}pb=Cb("spec_"+Ya.token.name.replace(/\W/g,
""));Wb+=`const ${pb} = ${c(Ya.table)}\n`;return`{term: ${Ya.token.id}, get: value => ${pb}[value] || -1}`});for(var pc in Sb)jb="cjs"==fb?jb+`const {${Sb[pc].join(", ")}} = require(${pc})\n`:jb+`import {${Sb[pc].join(", ")}} from ${pc}\n`;jb+=Wb;pc=Object.keys(Oa).map(Ya=>`${Ya}: ${Oa[Ya]}`);bc=`Parser.deserialize({
  version: ${12},
  states: ${zb(h,4294967295)},
  stateData: ${zb(m)},
  goto: ${zb(v)},
  nodeNames: ${JSON.stringify(B)},
  maxTerm: ${V}${Kb.length?`,
  nodeProps: [
    ${Kb.join(",\n    ")}
  ]`:""}${O.length?`,
  skippedNodes: ${JSON.stringify(O)}`:""},
  repeatNodeCount: ${Z},
  tokenData: ${zb(wa)},
  tokenizers: [${bc.join(", ")}],
  topRules: ${JSON.stringify(ta)}${Ab.length?`,
  nested: [${Ab.join(", ")}]`:""}${pc.length?`,
  dialects: {${pc.join(", ")}}`:""}${za?`,
  dynamicPrecedences: ${JSON.stringify(za)}`:""}${cc.length?`,
  specialized: [${cc.join(",")}]`:""},
  tokenPrec: ${sb}${this.options.includeNames?`,
  termNames: ${JSON.stringify(Jb)}`:""}
})`;Ab=[];for(var mc in this.termTable){Kb=mc;if(Ic.includes(Kb))for(cc=1;Kb="_".repeat(cc)+mc,Kb in this.termTable;cc++);Ab.push(`${Kb}${"cjs"==fb?":":" \x3d"} ${this.termTable[mc]}`)}for(mc=0;mc<this.dialects.length;mc++)Ab.push(`Dialect_${this.dialects[mc]}${"cjs"==fb?":":" \x3d"} ${mc}`);mc=this.options.exportName||"parser";return{parser:jb+("cjs"==fb?`exports.${mc} = ${bc}\n`:`export const ${mc} = ${bc}\n`),terms:"cjs"==fb?`${"// This file was generated by lezer-generator. You probably shouldn't edit it.\n"}module.exports = {\n  ${Ab.join(",\n  ")}\n}`:
`${"// This file was generated by lezer-generator. You probably shouldn't edit it.\n"}export const\n  ${Ab.join(",\n  ")}\n`}}gatherNonSkippedNodes(){let c=Object.create(null),f=[],h=m=>{c[m.id]||(c[m.id]=!0,f.push(m))};this.terms.tops.forEach(h);for(let m=0;m<f.length;m++)for(let v of f[m].rules)for(let B of v.parts)h(B);return c}gatherNodeProps(c){let f=this.gatherNonSkippedNodes(),h=[],m=[];for(let v of c){f[v.id]||v.error||h.push(v.id);for(let B in v.props){c=this.knownProps[B];if(!c)throw new Nb("No known prop type for "+
B);if(null!=c.source.from||"repeated"!=c.source.name&&"error"!=c.source.name)(c=m.find(K=>K.prop==B))||m.push(c={prop:B,values:{}}),(c.values[v.props[B]]||(c.values[v.props[B]]=[])).push(v.id)}}return{nodeProps:m.map(({prop:v,values:B})=>{let K=[];for(let O in B){let V=B[O];if(1==V.length)K.push(V[0],O);else{K.push(-V.length);for(let Z of V)K.push(Z);K.push(O)}}return{prop:v,terms:K}}),skippedTypes:h}}addNestedGrammars(c){for(let f of c)if(c=f.set.filter(h=>this.nestedGrammars.some(m=>m.placeholder==
h.next)),c.length){let h=c[0].next;c.every(m=>m.next==h)||this.raise(`Multiple nested grammars possible after ${c[0].trail()}`);f.set.every(m=>m.next==h||0==m.pos&&f.set.some(v=>v.next==m.rule.name))||this.raise(`Nested grammar in ambiguous position after ${c[0].trail()} `+f.set);f.nested=this.nestedGrammars.findIndex(m=>m.placeholder==h)}}makeTerminal(c,f,h){return this.terms.makeTerminal(this.terms.uniqueName(c),f,h)}computeForceReductions(c,f){function h(la,wa,ta=null){return(la=B[la])?la.some(Oa=>
{let za=ta?ta.filter(sb=>Oa.parents.includes(sb)):Oa.parents;if(0==za.length)return!1;if(Oa.target==wa)return!0;let Ua=Z[Oa.target];return null!=Ua&&h(Ua,wa,za)}):!1}let m=[],v=[],B=Object.create(null);for(var K of c){m.push(0);for(let la of K.goto){var O=B[la.term.id]||(B[la.term.id]=[]),V=O.find(wa=>wa.target==la.target.id);V?V.parents.push(K.id):O.push({parents:[K.id],target:la.target.id})}v[K.id]=K.set.filter(la=>0<la.pos&&!la.rule.name.top).sort((la,wa)=>wa.pos-la.pos||la.rule.parts.length-wa.rule.parts.length)}let Z=
Object.create(null);for(let la of c)la.defaultReduce&&0<la.defaultReduce.parts.length&&(m[la.id]=Yb(la.defaultReduce,f),1==la.defaultReduce.parts.length&&(Z[la.id]=la.defaultReduce.name.id));for(K=1;;K++){O=!0;for(let la of c)if(!la.defaultReduce)if(V=v[la.id],V.length!=K)V.length>K&&(O=!1);else for(let wa of V)if(1!=wa.pos||!h(wa.rule.name.id,la.id)){m[la.id]=Yb(wa.rule,f,wa.pos);1==wa.pos&&(Z[la.id]=wa.rule.name.id);break}if(O)break}return m}substituteArgs(c,f,h){return 0==f.length?c:c.walk(m=>
{var v;if(m instanceof ia&&!m.namespace&&-1<(v=h.findIndex(B=>B.name==m.id.name))){v=f[v];if(m.args.length){if(v instanceof ia&&!v.args.length)return new ia(m.start,v.namespace,v.id,m.args);this.raise("Passing arguments to a parameter that already has arguments",m.start)}return v}if(m instanceof bb){v=m.rule;let B=this.substituteArgsInProps(v.props,f,h);return B==v.props?m:new bb(m.start,new qb(v.start,v.id,B,v.params,v.expr))}return m instanceof Da?(v=this.substituteArgsInProps(m.props,f,h),v==m.props?
m:new Da(m.start,m.type,v,m.token,m.content)):m})}substituteArgsInProps(c,f,h){let m=B=>{let K=B;for(let V=0;V<B.length;V++){let Z=B[V];if(Z.name){var O=h.findIndex(la=>la.name==Z.name);0>O||(K==B&&(K=B.slice()),O=f[O],O instanceof ia&&!O.namespace&&!O.args.length?K[V]=new Lc(Z.start,O.id.name,null):O instanceof Tb?K[V]=new Lc(Z.start,O.value,null):this.raise(`Trying to interpolate expression '${O}' into a prop`,Z.start))}}return K},v=c;for(let B=0;B<c.length;B++){let K=c[B],O=m(K.value);O!=K.value&&
(v==c&&(v=c.slice()),v[B]=new hb(K.start,K.at,K.name,O))}return v}conflictsFor(c){let f=Ib.none,h=Ib.none;for(let v of c)if("ambig"==v.type)f=f.join(new Ib(0,[v.id.name]));else{var m=this.ast.precedences;let B=m?m.items.findIndex(K=>K.id.name==v.id.name):-1;0>B&&this.raise(`Reference to unknown precedence: '${v.id.name}'`,v.id.start);c=m.items[B];m=m.items.length-B;"cut"==c.type?f=f.join(new Ib(0,Bb,m)):(f=f.join(new Ib(m<<2)),h=h.join(new Ib((m<<2)+("left"==c.type?1:"right"==c.type?-1:0))))}return{here:f,
atEnd:h}}raise(c,f=1){return this.input.raise(c,f)}warn(c,f=-1){c=this.input.message(c,f);this.options.warn?this.options.warn(c):console.warn(c)}defineRule(c,f){let h=this.currentSkip[this.currentSkip.length-1];for(let m of f)this.rules.push(new sc(c,m.terms,m.ensureConflicts(),h))}resolve(c){if(c.namespace){var f=this.namespaces[c.namespace.name];f||this.raise(`Reference to undefined namespace '${c.namespace.name}'`,c.start);return f.resolve(c,this)}for(var h of this.built)if(h.matches(c))return[xb(h.term)];
if(h=this.tokens.getToken(c))return[xb(h)];for(var m of this.externalTokens)if(h=m.getToken(c))return[xb(h)];for(f of this.externalSpecializers)if(m=f.getToken(c))return[xb(m)];f=this.astRules.find(v=>v.rule.id.name==c.id.name);if(!f)return this.raise(`Reference to undefined rule '${c.id.name}'`,c.start);f.rule.params.length!=c.args.length&&this.raise(`Wrong number or arguments for '${c.id.name}'`,c.start);this.used(f.rule.id.name);return[xb(this.buildRule(f.rule,c.args,f.skip))]}normalizeRepeat(c){var f=
this.built.find(h=>h.matchesRepeat(c));if(f)return xb(f.term);f=this.terms.makeRepeat(this.terms.uniqueName(c.expr.prec<c.prec?`(${c.expr})+`:`${c.expr}+`));this.built.push(new Mc("+",[c.expr],f));this.defineRule(f,this.normalizeExpr(c.expr).concat(xb(f,f)));return xb(f)}normalizeSequence(c){function f(v,B,K){let {here:O,atEnd:V}=m.conflictsFor(c.markers[B]);if(B==h.length)return[v.withConflicts(v.terms.length,O.join(K))];let Z=[];for(let la of h[B])for(let wa of f(v.concat(la).withConflicts(v.terms.length,
O),B+1,K.join(V)))Z.push(wa);return Z}let h=c.exprs.map(v=>this.normalizeExpr(v)),m=this;return f(oc.none,0,Ib.none)}normalizeExpr(c){if(c instanceof ac&&"?"==c.kind)return[oc.none,...this.normalizeExpr(c.expr)];if(c instanceof ac){let f=this.normalizeRepeat(c);return"+"==c.kind?[f]:[oc.none,f]}return c instanceof eb?c.exprs.reduce((f,h)=>f.concat(this.normalizeExpr(h)),[]):c instanceof cb?this.normalizeSequence(c):c instanceof Tb?[xb(this.tokens.getLiteral(c))]:c instanceof ia?this.resolve(c):c instanceof
Da?[xb(this.resolveSpecialization(c))]:c instanceof bb?[xb(this.buildRule(c.rule,Bb,this.currentSkip[this.currentSkip.length-1],!0))]:this.raise(`This type of expression ('${c}') may not occur in non-token rules`,c.start)}buildRule(c,f,h,m=!1){let v=this.substituteArgs(c.expr,f,c.params),{name:B,props:K,dynamicPrec:O,inline:V,group:Z,exported:la}=this.nodeInfo(c.props||Bb,m?"pg":"pgi",c.id.name,f,c.params,c.expr);la&&c.params.length&&this.warn("Can't export parameterized rules",c.start);let wa=this.newName(c.id.name+
(f.length?"\x3c"+f.join(",")+"\x3e":""),B||!0,K);V&&(wa.inline=!0);O&&this.registerDynamicPrec(wa,O);(wa.nodeType||la)&&0==c.params.length&&(B||(wa.preserve=!0),this.namedTerms[c.id.name]=wa);m||this.built.push(new Mc(c.id.name,f,wa));this.currentSkip.push(h);this.defineRule(wa,this.normalizeExpr(v));this.currentSkip.pop();Z&&this.definedGroups.push({name:wa,group:Z,rule:c});return wa}nodeInfo(c,f,h=null,m=Bb,v=Bb,B,K){let O={};var V;(V=h)&&!(V=null===K||void 0===K?void 0:K.top)&&(V=h[0],V="_"==V||
V.toUpperCase()!=V,V=!V);V=V&&!/ /.test(h)?h:null;var Z=null;let la=0,wa=!1,ta=null,Oa=!1;for(let za of c)if(za.at)"name"==za.name?(V=this.finishProp(za,m,v),/ /.test(V)&&this.raise(`Node names cannot have spaces ('${V}')`,za.start)):"dialect"==za.name?(0>f.indexOf("d")&&this.raise("Can't specify a dialect on non-token rules",c[0].start),1==za.value.length||za.value[0].value||this.raise("The '@dialect' rule prop must hold a plain string value"),Z=this.dialects.indexOf(za.value[0].value),0>Z&&this.raise(`Unknown dialect '${za.value[0].value}'`,
za.value[0].start)):"dynamicPrecedence"==za.name?(0>f.indexOf("p")&&this.raise("Dynamic precedence can only be specified on nonterminals"),1==za.value.length&&/^-?(?:10|\d)$/.test(za.value[0].value)||this.raise("The '@dynamicPrecedence' rule prop must hold an integer between -10 and 10"),la=+za.value[0].value):"inline"==za.name?(za.value.length&&this.raise("'@inline' doesn't take a value",za.value[0].start),0>f.indexOf("i")&&this.raise("Inline can only be specified on nonterminals"),wa=!0):"isGroup"==
za.name?(0>f.indexOf("g")&&this.raise("'@isGroup' can only be specified on nonterminals"),ta=za.value.length?this.finishProp(za,m,v):h):"export"==za.name?(za.value.length&&this.raise("'@export' doesn't take a value",za.value[0].start),Oa=!0):this.raise(`Unknown built-in prop name '@${za.name}'`,za.start);else{if(!this.knownProps[za.name]){let Ua=["name","dialect","dynamicPrecedence","export","isGroup"].includes(za.name)?` (did you mean '@${za.name}'?)`:"";this.raise(`Unknown prop name '${za.name}'${Ua}`,
za.start)}O[za.name]=this.finishProp(za,m,v)}B&&this.ast.autoDelim&&(V||Fa(O))&&(f=this.findDelimiters(B))&&(Rb(f[0],"closedBy",f[1].nodeName),Rb(f[1],"openedBy",f[0].nodeName));if(K&&Fa(K))for(let za in K)za in O||(O[za]=K[za]);Fa(O)&&!V&&this.raise("Node has properties but no name",c.length?c[0].start:B.start);wa&&(Fa(O)||Z||la)&&this.raise("Inline nodes can't have props, dynamic precedence, or a dialect",c[0].start);wa&&V&&(V=null);return{name:V,props:O,dialect:Z,dynamicPrec:la,inline:wa,group:ta,
exported:Oa}}finishProp(c,f,h){return c.value.map(m=>{if(m.value)return m.value;var v=h.findIndex(B=>B.name==m.name);0>v&&this.raise(`Property refers to '${m.name}', but no parameter by that name is in scope`,m.start);v=f[v];return v instanceof ia&&!v.args.length&&!v.namespace?v.id.name:v instanceof Tb?v.value:this.raise(`Expression '${v}' can not be used as part of a property value`,m.start)}).join("")}resolveSpecialization(c){let f=c.type,{name:h,props:m,dialect:v}=this.nodeInfo(c.props,"d");var B=
this.normalizeExpr(c.token);1==B.length&&1==B[0].terms.length&&B[0].terms[0].terminal||this.raise(`The first argument to '${f}' must resolve to a token`,c.token.start);if(c.content instanceof Tb)var K=[c.content.value];else if(c.content instanceof eb&&c.content.exprs.every(Z=>Z instanceof Tb))K=c.content.exprs.map(Z=>Z.value);else return this.raise(`The second argument to '${c.type}' must be a literal or choice of literals`,c.content.start);B=B[0].terms[0];let O=null,V=this.specialized[B.name]||(this.specialized[B.name]=
[]);for(let Z of K)K=V.find(la=>la.value==Z),null==K?(O||(O=this.makeTerminal(B.name+"/"+JSON.stringify(Z),h,m),null!=v&&(this.tokens.byDialect[v]||(this.tokens.byDialect[v]=[])).push(O)),V.push({value:Z,term:O,type:f,dialect:v,name:h}),this.tokenOrigins[O.name]={spec:B}):(K.type!=f&&this.raise(`Conflicting specialization types for ${JSON.stringify(Z)} of ${B.name} (${f} vs ${K.type})`,c.start),K.dialect!=v&&this.raise(`Conflicting dialects for specialization ${JSON.stringify(Z)} of ${B.name}`,c.start),
K.name!=h&&this.raise(`Conflicting names for specialization ${JSON.stringify(Z)} of ${B.name}`,c.start),O&&K.term!=O&&this.raise(`Conflicting specialization tokens for ${JSON.stringify(Z)} of ${B.name}`,c.start),O=K.term);return O}findDelimiters(c){if(!(c instanceof cb)||2>c.exprs.length)return null;let f=v=>{if(v instanceof Tb)return{term:this.tokens.getLiteral(v),str:v.value};if(v instanceof ia&&0==v.args.length){var B=this.ast.rules.find(K=>K.id.name==v.id.name);if(B)return f(B.expr);if((B=this.tokens.rules.find(K=>
K.id.name==v.id.name))&&B.expr instanceof Tb)return{term:this.tokens.getToken(v),str:B.expr.value}}return null},h=f(c.exprs[c.exprs.length-1]);if(!h||!h.term.nodeName)return null;let m=["()","[]","{}","\x3c\x3e"].find(v=>-1<h.str.indexOf(v[1])&&0>h.str.indexOf(v[0]));if(!m)return null;c=f(c.exprs[0]);return!c||!c.term.nodeName||0>c.str.indexOf(m[0])||-1<c.str.indexOf(m[1])?null:[c.term,h.term]}registerDynamicPrec(c,f){this.dynamicRulePrecedences.push({rule:c,prec:f});c.preserve=!0}defineGroup(c,f,
h){var m;let v=[],B=K=>{if(K.nodeName)return[K];v.includes(K)&&this.raise(`Rule '${h.id.name}' cannot define a group because it contains a non-named recursive rule ('${K.name}')`,h.start);let O=[];v.push(K);for(let V of this.rules)if(V.name==K){let Z=V.parts.map(B).filter(la=>la.length);1<Z.length&&this.raise(`Rule '${h.id.name}' cannot define a group because some choices produce multiple named nodes`,h.start);if(1==Z.length)for(let la of Z[0])O.push(la)}v.pop();return O};for(let K of B(c))K.props.group=
((null===(m=K.props.group)||void 0===m?void 0:m.split(" "))||[]).concat(f).sort().join(" ")}checkGroups(){let c=Object.create(null),f=Object.create(null);for(var h of this.terms.terms)if(h.nodeName&&(f[h.nodeName]=!0,h.props.group))for(var m of h.props.group.split(" "))(c[m]||(c[m]=[])).push(h);h=Object.keys(c);for(m=0;m<h.length;m++){let v=h[m],B=c[v];f[v]&&this.warn(`Group name '${v}' conflicts with a node of the same name`);for(let K=m+1;K<h.length;K++){let O=c[h[K]];B.some(V=>O.includes(V))&&
(B.length>O.length?O.some(V=>!B.includes(V)):B.some(V=>!O.includes(V)))&&this.warn(`Groups '${v}' and '${h[K]}' overlap without one being a superset of the other`)}}}}class dd{constructor(c,f,h,m,v,B,K){this.tokenizers=c;this.data=f;this.stateArray=h;this.skipData=m;this.skipInfo=v;this.states=B;this.builder=K;this.sharedActions=[]}findSharedActions(c){if(5>c.actions.length)return null;var f=null;for(var h of this.sharedActions)(!f||h.actions.length>f.actions.length)&&h.actions.every(v=>c.actions.some(B=>
B.eq(v)))&&(f=h);if(f)return f;f=null;h=[];for(let v=c.id+1;v<this.states.length;v++){let B=this.states[v],K=0;if(!(B.defaultReduce||5>B.actions.length)){for(var m of c.actions)for(let O of B.actions)m.eq(O)&&(h[K++]=m);5<=K&&(!f||f.length<K)&&(f=h,h=[])}}if(!f)return null;m={actions:f,addr:this.storeActions(f,-1,null)};this.sharedActions.push(m);return m}storeActions(c,f,h){if(0>f&&h&&h.actions.length==c.length)return h.addr;let m=[];for(let v of c)h&&h.actions.some(B=>B.eq(v))||(v instanceof Ub?
m.push(v.term.id,v.target.id,0):(c=Yb(v.rule,this.skipInfo),c!=f&&m.push(v.term.id,c&65535,c>>16)));m.push(65535);-1<f?m.push(2,f&65535,f>>16):h?m.push(1,h.addr&65535,h.addr>>16):m.push(0);return this.data.storeArray(m)}finish(c,f,h){var m=this.builder,v=m.skipRules.indexOf(c.skip);let B=this.skipData[v];var K=this.skipInfo[v].startTokens;v=c.defaultReduce?Yb(c.defaultReduce,this.skipInfo):0;f=(f?1:0)|(-1<c.nested?4|c.nested<<10:0);let O=-1,V=null;if(0==v){for(const ta of c.actions)ta instanceof Cc&&
ta.term.eof&&this.skipInfo.some(Oa=>Oa.rule==ta.rule.name)&&(O=Yb(ta.rule,this.skipInfo));0>O&&(V=this.findSharedActions(c))}c.set.some(ta=>ta.rule.name.top&&ta.pos==ta.rule.parts.length)&&(f|=2);var Z=[];for(var la=0;la<c.actions.length+K.length;la++)for(var wa=la<c.actions.length?c.actions[la].term:K[la-c.actions.length];;)if((wa=m.tokenOrigins[wa.name])&&wa.spec)wa=wa.spec;else{wa&&wa.external instanceof bd&&G(Z,wa.external.ast);break}Z.sort((ta,Oa)=>ta.start-Oa.start);m=0;for(K=0;K<this.tokenizers.length;K++)if(la=
this.tokenizers[K],la instanceof kc?Z.includes(la):la.id==c.tokenGroup)m|=1<<K;Z=6*c.id;this.stateArray[Z+0]=f;this.stateArray[Z+1]=this.storeActions(v?Bb:c.actions,O,V);this.stateArray[Z+2]=B;this.stateArray[Z+3]=m;this.stateArray[Z+4]=v;this.stateArray[Z+5]=h}}class md{constructor(){this.data=[]}storeArray(c){a:{var f=this.data;b:for(var h=0;;){h=f.indexOf(c[0],h);if(-1==h||h+c.length>f.length)break;for(let m=1;m<c.length;m++)if(c[m]!=f[h+m]){h+=1;continue b}f=h;break a}f=-1}if(-1<f)return f;f=
this.data.length;for(let m of c)this.data.push(m);return f}finish(){return Uint16Array.from(this.data)}}class od{constructor(c,f){this.tokens=c;this.id=f}}class pd{constructor(c,f,h,m,v){this.placeholder=c;this.name=f;this.extName=h;this.source=m;this.end=v}}class nd{resolve(c,f){2<c.args.length&&f.raise(`Too many arguments to 'nest.${c.id.name}'`,c.start);let [h,m]=c.args,v=f.ast.grammars.find(V=>V.id.name==c.id.name);if(!v)return f.raise(`No external grammar '${c.id.name}' defined`,c.id.start);
let B=f.newName(c.id.name+"-placeholder",!0);f.defineRule(B,m?f.normalizeExpr(m):[]);if(!h&&!(h=P(f.ast,c)))return f.raise("No end token specified, and no token found directly after the nest expression",c.start);let K=new Db,O=new Db([f.terms.eof]);try{f.tokens.build(h,K,O,Bb)}catch(V){if(!(V instanceof SyntaxError))throw V;f.raise(`End token '${h}' for nested grammar is not a valid token expression`,h.start)}f.nestedGrammars.push(new pd(B,v.id.name,v.externalID.name,v.source,K));f.nestedGrammars.length>=
2**20&&f.raise("Too many nested grammars used");return[xb(B)]}}class rc{constructor(c,f,h){this.name=c;this.expr=f;this.scope=h}}class yb{constructor(c,f,h,m){this.name=c;this.start=f;this.to=h;this.args=m}}class ed{constructor(c,f){this.b=c;this.ast=f;this.startState=new Db;this.built=[];this.building=[];this.byDialect=Object.create(null);this.precedenceRelations=[];this.explicitConflicts=[];this.rules=f?f.rules:Bb;for(let h of this.rules)this.b.unique(h.id)}getToken(c){for(var f of this.built)if(f.matches(c))return f.term;
let h=c.id.name;f=this.rules.find(V=>V.id.name==h);if(!f)return null;let {name:m,props:v,dialect:B,exported:K}=this.b.nodeInfo(f.props,"d",h,c.args,f.params.length!=c.args.length?Bb:f.params),O=this.b.makeTerminal(c.toString(),m,v);null!=B&&(this.byDialect[B]||(this.byDialect[B]=[])).push(O);(O.nodeType||K)&&0==f.params.length&&(O.nodeType||(O.preserve=!0),this.b.namedTerms[h]=O);this.buildRule(f,c,this.startState,new Db([O]));this.built.push(new Mc(h,c.args,O));return O}getLiteral(c){let f=JSON.stringify(c.value);
for(var h of this.built)if(h.id==f)return h.term;var m=null;let v={};h=null;let B=this.ast?this.ast.literals.find(K=>K.literal==c.value):null;B&&({name:m,props:v,dialect:h}=this.b.nodeInfo(B.props,"d",c.value));m=this.b.makeTerminal(f,m,v);null!=h&&(this.byDialect[h]||(this.byDialect[h]=[])).push(m);this.build(c,this.startState,new Db([m]),Bb);this.built.push(new Mc(f,Bb,m));return m}buildRule(c,f,h,m,v=Bb){let B=f.id.name;c.params.length!=f.args.length&&this.b.raise(`Incorrect number of arguments for token '${B}'`,
f.start);var K=this.building.find(O=>O.name==B&&Ea(f.args,O.args));if(K){if(K.to==m){h.nullEdge(K.start);return}for(K=this.building.length-1;this.building[K].name!=B;)K--;this.b.raise(`Invalid (non-tail) recursion in token rules: ${this.building.slice(K).map(O=>O.name).join(" -\x3e ")}`,f.start)}this.b.used(c.id.name);K=new Db;h.nullEdge(K);this.building.push(new yb(B,K,m,f.args));this.build(this.b.substituteArgs(c.expr,f.args,c.params),K,m,f.args.map((O,V)=>new rc(c.params[V].name,O,v)));this.building.pop()}build(c,
f,h,m){if(c instanceof ia){if(c.namespace){if("std"==c.namespace.name)return this.buildStd(c,f,h);this.b.raise(`Unknown namespace '${c.namespace.name}'`,c.start)}let K=c.id.name;var v=m.find(O=>O.name==K);if(v)return this.build(v.expr,f,h,v.scope);v=this.rules.find(O=>O.id.name==K);if(!v)return this.b.raise(`Reference to rule '${c.id.name}', which isn't found in this token group`,c.start);this.buildRule(v,c,f,h,m)}else if(c instanceof eb)for(v of c.exprs)this.build(v,f,h,m);else if(ua(c))f.nullEdge(h);
else if(c instanceof cb)for((v=c.markers.find(K=>0<K.length))&&this.b.raise("Conflict marker in token expression",v[0].start),v=0;v<c.exprs.length;v++){var B=v==c.exprs.length-1?h:new Db;this.build(c.exprs[v],f,B,m);f=B}else if(c instanceof ac)"*"==c.kind?(v=new Db,f.nullEdge(v),this.build(c.expr,v,v,m),v.nullEdge(h)):"+"==c.kind?(v=new Db,this.build(c.expr,f,v,m),this.build(c.expr,v,v,m),v.nullEdge(h)):(f.nullEdge(h),this.build(c.expr,f,h,m));else if(c instanceof Qc)for(let [K,O]of c.inverted?X(c.ranges):
c.ranges)ea(f,h,K,O);else if(c instanceof Tb)for(m=0;m<c.value.length;m++)v=c.value.charCodeAt(m),B=m==c.value.length-1?h:new Db,f.edge(v,v+1,B),f=B;else if(c instanceof Yc)f.edge(0,65535,h);else return this.b.raise("Unrecognized expression type in token",c.start)}buildStd(c,f,h){c.args.length&&this.b.raise(`'std.${c.id.name}' does not take arguments`,c.args[0].start);ad.hasOwnProperty(c.id.name)||this.b.raise(`There is no builtin rule 'std.${c.id.name}'`,c.start);for(let [m,v]of ad[c.id.name])f.edge(m,
v,h)}takePrecedences(){let c=this.precedenceRelations=[];if(this.ast)for(let f of this.ast.precedences){let h=[];for(let m of f.items){let v=[];if(m instanceof ia)for(let B of this.built)(m.args.length?B.matches(m):B.id==m.id.name)&&v.push(B.term);else{let B=JSON.stringify(m.value),K=this.built.find(O=>O.id==B);K&&v.push(K.term)}v.length||this.b.warn(`Precedence specified for unknown token ${m}`,m.start);for(let B of v)ra(c,B,h);h=h.concat(v)}}}takeConflicts(){var c;let f=h=>{if(h instanceof ia)for(var m of this.built){if(m.matches(h))return m.term}else{let v=
JSON.stringify(h.value);if(m=this.built.find(B=>B.id==v))return m.term}this.b.warn(`Precedence specified for unknown token ${h}`,h.start);return null};for(let h of(null===(c=this.ast)||void 0===c?void 0:c.conflicts)||[]){c=f(h.a);let m=f(h.b);c&&m&&(c.id<m.id&&([c,m]=[m,c]),this.explicitConflicts.push({a:c,b:m}))}}precededBy(c,f){let h=this.precedenceRelations.find(m=>m.term==c);return h&&h.after.includes(f)}buildTokenGroups(c,f){let h=this.startState.compile();h.accepting.length&&this.b.raise(`Grammar contains zero-length tokens (in '${h.accepting[0].name}')`,
this.rules.find(ta=>ta.id.name==h.accepting[0].name).start);/\btokens\b/.test(Sc)&&console.log(h.toString());let m=h.findConflicts(S(c,this.b,f)).filter(({a:ta,b:Oa})=>!this.precededBy(ta,Oa)&&!this.precededBy(Oa,ta));for(let {a:ta,b:Oa}of this.explicitConflicts)m.some(za=>za.a==ta&&za.b==Oa)||m.push(new kd(ta,Oa,0,"",""));var v=m.filter(ta=>ta.soft),B=m.filter(ta=>!ta.soft);let K=[],O=[];for(let ta of c){if(ta.defaultReduce)continue;c=[];let Oa=[];var V=f[this.b.skipRules.indexOf(ta.skip)].startTokens;
for(let za of V)ta.actions.some(Ua=>Ua.term==za)&&this.b.raise(`Use of token ${za.name} conflicts with skip rule`);var Z=[];for(var la=0;la<ta.actions.length+(V?V.length:0);la++){let za=la<ta.actions.length?ta.actions[la].term:V[la-ta.actions.length],Ua=this.b.tokenOrigins[za.name];if(Ua&&Ua.spec)za=Ua.spec;else if(Ua&&Ua.external)continue;G(Z,za)}if(0!=Z.length){for(let za of Z)for(let Ua of B)if(V=Ua.a==za?Ua.b:Ua.b==za?Ua.a:null)Z.includes(V)&&!K.some(sb=>sb.conflict==Ua)&&(la=Ua.exampleA?` (example: ${JSON.stringify(Ua.exampleA)}${Ua.exampleB?
` vs ${JSON.stringify(Ua.exampleB)}`:""})`:"",K.push({error:`Overlapping tokens ${za.name} and ${V.name} used in same context${la}\n`+`After: ${ta.set[0].trail()}`,conflict:Ua})),G(c,za),G(Oa,V);Z=null;for(let za of O)if(!Oa.some(Ua=>za.tokens.includes(Ua))){for(let Ua of c)G(za.tokens,Ua);Z=za;break}Z||(Z=new od(c,O.length),O.push(Z));ta.tokenGroup=Z.id}}K.length&&this.b.raise(K.map(ta=>ta.error).join("\n\n"));16<O.length&&this.b.raise(`Too many different token groups (${O.length}) to represent them as a 16-bit bitfield`);
let wa=[];f=this.precedenceRelations.slice();for(let {a:ta,b:Oa,soft:za}of v)za&&f.some(Ua=>Ua.term==ta)&&f.some(Ua=>Ua.term==Oa)&&(0>za&&([ta,Oa]=[Oa,ta]),ra(f,Oa,[ta]),ra(f,ta,[]));a:for(;f.length;){for(v=0;v<f.length;v++)if(B=f[v],B.after.every(ta=>wa.includes(ta.id))){wa.push(B.term.id);if(1==f.length)break a;f[v]=f.pop();continue a}this.b.raise(`Cyclic token precedence relation between ${f.map(ta=>ta.term).join(", ")}`)}wa=wa.filter(ta=>m.some(Oa=>!Oa.soft&&(Oa.a.id==ta||Oa.b.id==ta)));return{tokenGroups:O,
tokenPrec:wa,tokenData:h.toArray(C(O),wa)}}}const ad={asciiLetter:[[65,91],[97,123]],asciiLowercase:[[97,123]],asciiUppercase:[[65,91]],digit:[[48,58]],whitespace:[[9,14],[32,33],[133,134],[160,161],[5760,5761],[8192,8203],[8232,8234],[8239,8240],[8287,8288],[12288,12289]]};class bd{constructor(c,f){this.b=c;this.ast=f;this.tokens=xa(c,f.tokens);for(let h in this.tokens)this.b.tokenOrigins[this.tokens[h].name]={external:this}}getToken(c){return Ca(this.b,this.tokens,c)}}class Tc{constructor(c,f){this.b=
c;this.ast=f;this.term=null;this.tokens=xa(c,f.tokens)}finish(){let c=this.b.normalizeExpr(this.ast.token);1==c.length&&1==c[0].terms.length&&c[0].terms[0].terminal||this.b.raise(`The token expression to '@external ${this.ast.type}' must resolve to a token`,this.ast.token.start);this.term=c[0].terms[0];for(let f in this.tokens)this.b.tokenOrigins[this.tokens[f].name]={spec:this.term,external:this}}getToken(c){return Ca(this.b,this.tokens,c)}}const Ic="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super enum implements interface let package private protected public static yield".split(" ");
J.GenError=Nb;J.buildParser=function(c,f={}){return(new Lb(c,f)).getParser()};J.buildParserFile=function(c,f={}){return(new Lb(c,f)).getParserFile()}};
shadow$provide[16]=function(Ia,Ka,ub,J){Object.defineProperty(J,"__esModule",{value:!0});Ia=Ka(14);var La=Ka(1);Ka=La.NodeProp.flag();ub=La.NodeProp.flag();const Ma=La.NodeProp.flag(),Ea=La.NodeProp.flag(),Qa=La.NodeProp.flag();La=Object.freeze({__proto__:null,prefixColl:Ka,coll:ub,prefixEdge:Ma,sameEdge:Ea,prefixContainer:Qa});const Fa={__proto__:null,true:132,false:132,nil:134,def:143,defn:143,"defn-":143,defmacro:143,definline:143,defonce:143,deftest:143,defcard:143};Ia=Ia.Parser.deserialize({version:12,
states:",rQ]QPOOP!pOPOOOOQO'#Dj'#DjQ]QPOOO!uQPO'#CeO!|QPO'#ChO#TOPO'#C`OOQO'#Ci'#CiOOQO'#Ck'#CkO]QPO'#ClO]QPO'#CnO]QPO'#CpO]QPO'#CrO]QPO'#CtO]OPO'#C}O]OPO'#DPO#]OQO'#DVO${QPO'#CzO%SOSO'#D[O#WOPO'#D]O%eOPO'#D`O%jOPO'#DbO%rOSO'#DeO]QPO'#DhOOQO'#Dn'#DnP%wQPO'#C^POOO)C?b)C?bOOQO-E7h-E7hO'[QPO,59POOQO,59P,59PO'cQPO,59SOOQO,59S,59SOOQO,58z,58zOOQO,59W,59WOOQO,59Y,59YOOQO,59[,59[OOQO,59^,59^OOQO,59`,59`OOQO,59i,59iOOQO,59k,59kOOQO,59q,59qO'jOPO,59qO'oQPO'#DwOOQO'#C{'#C{O#eQPO'#C|OOQO'#Dt'#DtO'vQPO'#DsOOQO'#DX'#DXOOQO'#Dx'#DxO'oQPO'#DwOOQO'#Dr'#DrO(RQPO,59fOOQO,59v,59vOOQO,59x,59xOOQO,59y,59yOOQO,5:R,5:RO)nQPO,58{OOQO,59w,59wOOQO,59z,59zOOQO,59|,59|OOQO,5:P,5:POOQO,5:S,5:SPOOO,58x,58xOOQO1G.k1G.kOOQO1G.n1G.nOOQO1G/]1G/]OOQO,59h,59hOOQO,59t,59tOOQO'#DR'#DRO'vQPO'#DSOOQO'#Dv'#DvO*OQPO,5:_O*VQPO,5:cOOQO1G/Q1G/QP(WOPO,58{OOQO,59n,59nO*^QPO1G/yO*eQPO'#DTO]QPO1G/yO+{QPO7+%eP%wQPO'#ClP%wQPO'#CnP%wQPO'#CpP%wQPO'#CrP%wQPO'#CtP%wOPO'#C}P%wOPO'#DPP,SOSO'#D[P,eOPO'#DbP%wQPO'#Dh",
stateData:",p~O!aOSPOSRPQ~OUbOWSOZTO^hOaXOcYOeZOg[Oi]OjhOkhOmaOr^Ot_Ox`O}hO!TdO!VeO!YfO!dVO!eWO~ORiO~OVmO~P]OYoO~P]OWSOZTO~OxxOzyO~OUbOWSOZTO^!POaXOcYOeZOg[Oi]OjhOkhOmaOr^Ot_Ox`O}hO!TdO!VeO!YfO!dVO!eWO!i{O~Ol!kP~P#eOZTOmaOx`O!c!YO!m!VO~O^![O~OaXOmaO~O!c!^O~OU!yOWSOZTO^hOa!rOc!sOe!tOg!uOi!vOjhOkhOmaOr!wOt!xOx`O}hO!TdO!V!zO!YfO!dVO!eWO~OV!aO~P]OY!bO~P]Ox!cO~Ol!kX~P]O^!fOr^Ot_O~Ol!kO~OU!WaWTaZTa^!Waa!Wac!Wae!Wag!Wai!Waj!Wak!Wam!War!Wat!Wax!Wa}!Wa!T!Wa!V!Wa!Y!Wa!_!Wa!d!Wa!e!Wa~OV!WaY!Wal!Wa!i!Wa~P(WOl!ga~P]Ol!ka~P]Ol!gi~P]OUwXWwXZwX^wXawXcwXewXgwXiwXjwXkwXl!bXmwXrwXtwXxwX}wX!TwX!VwX!YwX!dwX!ewX~Ol!gq~P]OZTOmaOx`O!c!lO!m!VO~Oa!rOmaO~Oj^~",
goto:",w!mPP!nP!q#ePPP$XPP%O!qP!q%|P!qP!qP!qP!qPPPPP\x26t'p'p'tP'tP(p(p(tP(wP)q)qP!q!q)u!q!qP!qP!q!qP!q!qP*iPPP+XPPP,_,b,eP,k,b,qRjP!chORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{!cUORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{!bhORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{RpU!bhORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{QpUS!Ub!yR!Zc!bhORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{T!]e!z!bhORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{S!Xb!yT!]e!zT}a|zgORSTXYZ[]^_glnz!R!i!j!n!p!qS|a|S!g!O!gc!{i!r!s!t!u!v!w!x!{T!h!O!gR!p!i!`hORSTXYZ[]^_agilnz|!R!j!n!p!q!r!s!t!u!v!w!x!{S!Wb!yR!o!iT!Qa|!ccORSTXYZ[]^_agilnz|!R!i!j!n!p!q!r!s!t!u!v!w!x!{QRO^kRlnz!j!n!qQlSQnTQzaQ!j!RQ!n!iR!q!plQORSTalnz!R!i!j!n!p!qSqX!rSrY!sSsZ!tSt[!uSu]!vSv^!wSw_!xU!_g|!{R!`iR!TaR!SaQ!OaR!d|Q!i!OR!m!gQ!RaR!e|",
nodeNames:"⚠ LineComment Discard #_ Constructor ConstructorPrefix # ] [ Vector } { Map Boolean Symbol Nil Deref @ Quote ' SyntaxQuote ` Unquote ~ UnquoteSplice ~@ Number Keyword ) ( List DefLike Meta Metadata ^ ReaderMetadata #^ VarName Meta DocString \" String StringContent Operator Meta Character Set NamespacedMap KeywordPrefix RegExp Var #' ReaderConditional #? DataLiteral SymbolicValue ## AnonymousFunction Meta Program",maxTerm:75,nodeProps:[[Ma,-14,3,5,6,17,19,21,23,25,34,36,48,51,53,56,""],
[Ka,-14,4,16,18,20,22,24,33,35,46,47,49,50,52,57,""],[Ia.NodeProp.openedBy,7,"[",10,"{",28,"(",40,'"'],[Ia.NodeProp.closedBy,8,"]",11,"}",29,")",40,'"'],[ub,-3,9,12,30,""],[Qa,-4,32,38,44,58,""],[Ea,40,""]],skippedNodes:[0,1,2,3],repeatNodeCount:1,tokenData:"!\x3e[~R![OX$wX^%n^p$wpq%nqr'grs)tst)ytu'guv'gvw'gwx,yxy-^yz-qz{'g{|.U|}%n}!O.U!O!P0f!P!Q'g!Q!R!%W!R![!+p![!]!0l!]!^!7X!^!_'g!_!`'g!`!a'g!a!b'g!b!c!8n!c!}'g!}#O!9R#O#P!9f#P#Q!;Z#Q#R!;n#R#S'g#S#T!\x3cR#T#o'g#o#p!\x3cf#p#q$w#q#r!\x3cy#r#s!\x3d^#s#y$w#y#z%n#z$f$w$f$g%n$g##l'g##l#BY$w#BY#BZ%n#BZ$IS$w$IS$I_%n$I_$I|$w$I|$JO%n$JO$JT$w$JT$JU%n$JU$KV$w$KV$KW%n$KW\x26FU$w\x26FU\x26FV%n\x26FV~$wQ$|SzQOr$ws#O$w#O#P%Y#P~$wQ%_TzQOr$wrs$ws#O$w#O#P%Y#P~$wR%ujzQ!aPOX$wX^%n^p$wpq%nqr$ws|$w|}%n}#O$w#O#P%Y#P#y$w#y#z%n#z$f$w$f$g%n$g#BY$w#BY#BZ%n#BZ$IS$w$IS$I_%n$I_$I|$w$I|$JO%n$JO$JT$w$JT$JU%n$JU$KV$w$KV$KW%n$KW\x26FU$w\x26FU\x26FV%n\x26FV~$wV'ppzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q!['g![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$w~)yOx~R*Q[UPzQOr$wst*vtw$wwx+Zx!a$w!a!b+n!b#O$w#O#P%Y#P#Q$w#Q#R,R#R#S,f#S~$wR*}S!YPzQOr$ws#O$w#O#P%Y#P~$wR+bS!TPzQOr$ws#O$w#O#P%Y#P~$wR+uS!VPzQOr$ws#O$w#O#P%Y#P~$wR,YStPzQOr$ws#O$w#O#P%Y#P~$wR,mSRPzQOr$ws#O$w#O#P%Y#P~$wR-QScPzQOr$ws#O$w#O#P%Y#P~$wV-eSmTzQOr$ws#O$w#O#P%Y#P~$wR-xSlPzQOr$ws#O$w#O#P%Y#P~$wV._qzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P0f!P!Q'g!Q!R\x3ep!R![Kh![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV0opzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![2s![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV3OtzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![2s![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h5`!h!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y5`#Y#o'g#o$g$w$g##l'g##l~$wV5ipzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|7m|}$w}!O7m!O!P'g!P!Q'g!Q![9z![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV7vpzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![9z![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV:VrzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![9z![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!o'g!o!p\x3ca!p!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV\x3clpzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q!['g![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wV\x3e{yzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!PAl!P!QFz!Q![Kh![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h5`!h!o'g!o!p\x3ca!p!q\x3ca!q!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y5`#Y#l'g#l#mN^#m#o'g#o$g$w$g##l'g##l~$wVAwvzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![Al![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h5`!h!o'g!o!pD_!p!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y5`#Y#o'g#o$g$w$g##l'g##l~$wVDjtzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q!['g![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h5`!h!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y5`#Y#o'g#o$g$w$g##l'g##l~$wVGTpzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![IX![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wVIdpzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![IX![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#o'g#o$g$w$g##l'g##l~$wVKswzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!PAl!P!QFz!Q![Kh![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!g'g!g!h5`!h!o'g!o!p\x3ca!p!q\x3ca!q!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#X'g#X#Y5`#Y#o'g#o$g$w$g##l'g##l~$wVNgrzQ!cS^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![!!q![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!i!!q!i!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#Z!!q#Z#o'g#o$g$w$g##l'g##l~$wV!!|rzQ!cSjP^POq$wqr'gst'gtu'guv'gvw'gwx'gxz$wz{'g{|'g|}$w}!O'g!O!P'g!P!Q'g!Q![!!q![!]'g!]!^$w!^!_'g!_!`'g!`!a'g!a!b'g!b!c$w!c!i!!q!i!}'g!}#O$w#O#P%Y#P#R$w#R#S'g#S#T$w#T#Z!!q#Z#o'g#o$g$w$g##l'g##l~$wR!%_ezQjPOr$ws!O$w!O!P!\x26p!P!Q!*n!Q![!+p![!g$w!g!h!'m!h!o$w!o!p!)j!p!q!)j!q#O$w#O#P%Y#P#U$w#U#V!,v#V#X$w#X#Y!'m#Y#c$w#c#d!.O#d#l$w#l#m!/Q#m~$wR!\x26w[zQjPOr$ws!Q$w!Q![!\x26p![!g$w!g!h!'m!h!o$w!o!p!)}!p#O$w#O#P%Y#P#X$w#X#Y!'m#Y~$wR!'rYzQOr$ws{$w{|!(b|}$w}!O!(b!O!Q$w!Q![!(y![#O$w#O#P%Y#P~$wR!(gUzQOr$ws!Q$w!Q![!(y![#O$w#O#P%Y#P~$wR!)QWzQjPOr$ws!Q$w!Q![!(y![!o$w!o!p!)j!p#O$w#O#P%Y#P~$wR!)qSzQjPOr$ws#O$w#O#P%Y#P~$wR!*UWzQjPOr$ws!g$w!g!h!'m!h#O$w#O#P%Y#P#X$w#X#Y!'m#Y~$wR!*sUzQOr$ws!Q$w!Q![!+V![#O$w#O#P%Y#P~$wR!+^UzQjPOr$ws!Q$w!Q![!+V![#O$w#O#P%Y#P~$wR!+w_zQjPOr$ws!O$w!O!P!\x26p!P!Q!*n!Q![!+p![!g$w!g!h!'m!h!o$w!o!p!)j!p!q!)j!q#O$w#O#P%Y#P#X$w#X#Y!'m#Y~$wR!,{VzQOr$ws!Q$w!Q!R!-b!R!S!-b!S#O$w#O#P%Y#P~$wR!-iVzQjPOr$ws!Q$w!Q!R!-b!R!S!-b!S#O$w#O#P%Y#P~$wR!.TUzQOr$ws!Q$w!Q!Y!.g!Y#O$w#O#P%Y#P~$wR!.nUzQjPOr$ws!Q$w!Q!Y!.g!Y#O$w#O#P%Y#P~$wR!/VYzQOr$ws!Q$w!Q![!/u![!c$w!c!i!/u!i#O$w#O#P%Y#P#T$w#T#Z!/u#Z~$wR!/|YzQjPOr$ws!Q$w!Q![!/u![!c$w!c!i!/u!i#O$w#O#P%Y#P#T$w#T#Z!/u#Z~$wV!0uokPzQ!mSOq$wqr!2vst$wtu!2vuv!2vvw!2vwz$wz{!2v{|!2v|}$w}!O!2v!O!P!2v!P!Q!2v!Q![$w![!]!5T!]!^$w!^!_!2v!_!`!2v!`!a!2v!a!b!2v!b!c$w!c!}!2v!}#O$w#O#P%Y#P#R$w#R#S!2v#S#T$w#T#o!2v#o$g$w$g##l!2v##l~$wV!3PpkPzQ!mSOq$wqr!2vst!2vtu!2vuv!2vvw!2vwx!2vxz$wz{!2v{|!2v|}$w}!O!2v!O!P!2v!P!Q!2v!Q![!2v![!]!2v!]!^$w!^!_!2v!_!`!2v!`!a!2v!a!b!2v!b!c$w!c!}!2v!}#O$w#O#P%Y#P#R$w#R#S!2v#S#T$w#T#o!2v#o$g$w$g##l!2v##l~$wV!5^mkPzQ!mSOq$wqr!2vst$wtu!2vuv!2vvw!2vwz$wz{!2v{|!2v|}$w}!O!2v!O!P!2v!P!Q!2v!Q!^$w!^!_!2v!_!`!2v!`!a!2v!a!b!2v!b!c$w!c!}!2v!}#O$w#O#P%Y#P#R$w#R#S!2v#S#T$w#T#o!2v#o$g$w$g##l!2v##l~$wR!7`VPPzQOY!7XYZ$wZr!7Xrs!7us#O!7X#O#P!8Q#P~!7XP!7zQPPOY!7uZ~!7uR!8XVPPzQOY!7XYZ$wZr!7Xrs!7Xs#O!7X#O#P!8Q#P~!7XR!8uSaPzQOr$ws#O$w#O#P%Y#P~$wR!9YSWPzQOr$ws#O$w#O#P%Y#P~$wR!9k[zQOr$wrs$ws!Q$w!Q![!:a![!b$w!b!c!:a!c!}!:a!}#O$w#O#P%Y#P#T$w#T#o!:a#o~$wR!:hZ}PzQOr$ws!Q$w!Q![!:a![!b$w!b!c!:a!c!}!:a!}#O$w#O#P%Y#P#T$w#T#o!:a#o~$wR!;bSVPzQOr$ws#O$w#O#P%Y#P~$wR!;uSrPzQOr$ws#O$w#O#P%Y#P~$wR!\x3cYSePzQOr$ws#O$w#O#P%Y#P~$wV!\x3cmSZTzQOr$ws#O$w#O#P%Y#P~$wR!\x3dQSYPzQOr$ws#O$w#O#P%Y#P~$wR!\x3deUgPzQOr$ws!b$w!b!c!\x3dw!c#O$w#O#P%Y#P~$wR!\x3eOSiPzQOr$ws#O$w#O#P%Y#P~$w",
tokenizers:[0,1,2],topRules:{Program:[0,59]},dynamicPrecedences:{31:1},specialized:[{term:14,get:qa=>Fa[qa]||-1}],tokenPrec:535});J.parser=Ia;J.props=La};
shadow$provide[17]=function(Ia,Ka,ub,J){function La(ya,Ga,fa){var ca=ya.prop(0>Ga?Fa.NodeProp.openedBy:Fa.NodeProp.closedBy);return ca?ca:1==ya.name.length&&(ya=fa.indexOf(ya.name),-1<ya&&ya%2==(0>Ga?1:0))?[fa[ya+Ga]]:null}function Ma(ya,Ga,fa){var ca=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},ma=ca.maxScanDistance||qa;ca=ca.brackets||Ja;var ka=ya.tree,D=ka.resolve(Ga,fa),x;if(x=La(D.type,fa,ca)){a:{var t=D.parent;ma={from:D.from,to:D.to};ka=0;if((t=null===t||void 0===t?void 0:t.cursor)&&
(0>fa?t.childBefore(D.from):t.childAfter(D.to))){do if(0>fa?t.to<=D.from:t.from>=D.to)if(0==ka&&-1<x.indexOf(t.type.name)){ca={start:ma,end:{from:t.from,to:t.to},matched:!0};break a}else if(La(t.type,fa,ca))ka++;else if(La(t.type,-fa,ca)&&(ka--,0==ka)){ca={start:ma,end:{from:t.from,to:t.to},matched:!1};break a}while(0>fa?t.prevSibling():t.nextSibling())}ca={start:ma,matched:!1}}return ca}a:if(D=D.type,x=0>fa?ya.sliceDoc(Ga-1,Ga):ya.sliceDoc(Ga,Ga+1),x=ca.indexOf(x),0>x||0==x%2!=0<fa)ca=null;else{t=
{from:0>fa?Ga-1:Ga,to:0<fa?Ga+1:Ga};for(var A=ya.doc.iterRange(Ga,0<fa?ya.doc.length:0),H=0,N=0;!A.next().done&&N<=ma;){var E=A.value;0>fa&&(N+=E.length);for(var p=Ga+N*fa,z=0<fa?0:E.length-1,q=0<fa?E.length:-1;z!=q;z+=fa){var n=ca.indexOf(E[z]);if(!(0>n||ka.resolve(p+z,1).type!=D))if(0==n%2==0<fa)H++;else if(1==H){ca={start:t,end:{from:p+z,to:p+z+1},matched:n>>1==x>>1};break a}else H--}0<fa&&(N+=E.length)}ca=A.done?{start:t,matched:!1}:null}return ca}Object.defineProperty(J,"__esModule",{value:!0});
J.bracketMatching=function(){return[Pa.of(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),sa]};J.matchBrackets=Ma;var Ea=Ka(2),Qa=Ka(6),Fa=Ka(1);Ia=Qa.EditorView.baseTheme({$matchingBracket:{color:"#0b0"},$nonmatchingBracket:{color:"#a22"}});var qa=1E4,Ja="()[]{}",Pa=Ea.Facet.define({combine:function(ya){return(0,Ea.combineConfig)(ya,{afterCursor:!0,brackets:Ja,maxScanDistance:qa})}}),pa=Qa.Decoration.mark({"class":(0,Qa.themeClass)("matchingBracket")}),Ra=Qa.Decoration.mark({"class":(0,
Qa.themeClass)("nonmatchingBracket")}),sa=[Ea.StateField.define({create:function(){return Qa.Decoration.none},update:function(ya,Ga){if(!Ga.docChanged&&!Ga.selection)return ya;ya=[];var fa=Ga.state.facet(Pa),ca=!0,ma=!1,ka=void 0;try{for(var D=Ga.state.selection.ranges[Symbol.iterator](),x;!(ca=(x=D.next()).done);ca=!0){var t=x.value;if(t.empty){var A=Ma(Ga.state,t.head,-1,fa)||0<t.head&&Ma(Ga.state,t.head-1,1,fa)||fa.afterCursor&&(Ma(Ga.state,t.head,1,fa)||t.head<Ga.state.doc.length&&Ma(Ga.state,
t.head+1,-1,fa));if(A){var H=A.matched?pa:Ra;ya.push(H.range(A.start.from,A.start.to));A.end&&ya.push(H.range(A.end.from,A.end.to))}}}}catch(N){ma=!0,ka=N}finally{try{if(!ca&&null!=D["return"])D["return"]()}finally{if(ma)throw ka;}}return Qa.Decoration.set(ya,!0)},provide:[Qa.EditorView.decorations]}),Ia]};
shadow$provide[18]=function(Ia,Ka,ub,J){function La(y,U){return N.EditorSelection.create(y.ranges.map(U),y.primaryIndex)}function Ma(y,U){return y.update({selection:U,scrollIntoView:!0,annotations:N.Transaction.userEvent.of("keyboardselection")})}function Ea(y,U){var na=y.state;y=y.dispatch;U=La(na.selection,U);if(U.eq(na.selection))return!1;y(Ma(na,U));return!0}function Qa(y,U){return N.EditorSelection.cursor(U?y.to:y.from)}function Fa(y,U){return Ea(y,function(na){return na.empty?y.moveByChar(na,
U):Qa(na,U)})}function qa(y,U){return Ea(y,function(na){return na.empty?y.moveByGroup(na,U):Qa(na,U)})}function Ja(y,U,na){var ha=y.tree.resolve(U.head),ja=na?q.NodeProp.closedBy:q.NodeProp.openedBy;for(U=U.head;;){var ia=na?ha.childAfter(U):ha.childBefore(U);if(!ia)break;var Da=y;var bb=ia;if(bb.type.prop(ja))Da=!0;else{var eb=bb.to-bb.from;Da=eb&&(2<eb||/[^\s,.;:]/.test(Da.sliceDoc(bb.from,bb.to)))||bb.firstChild}Da?ha=ia:U=na?ia.to:ia.from}var cb;y=ha.type.prop(ja)&&(cb=na?(0,z.matchBrackets)(y,
ha.from,1):(0,z.matchBrackets)(y,ha.to,-1))&&cb.matched?na?cb.end.to:cb.end.from:na?ha.to:ha.from;return N.EditorSelection.cursor(y,na?-1:1)}function Pa(y,U){return Ea(y,function(na){return na.empty?y.moveVertically(na,U):Qa(na,U)})}function pa(y,U){return Ea(y,function(na){return na.empty?y.moveVertically(na,U,y.dom.clientHeight):Qa(na,U)})}function Ra(y,U,na){var ha=y.visualLineAt(U.head),ja=y.moveToLineBoundary(U,na);ja.head==U.head&&ja.head!=(na?ha.to:ha.from)&&(ja=y.moveToLineBoundary(U,na,!1));
!na&&ja.head==ha.from&&ha.length&&(y=/^\s*/.exec(y.state.sliceDoc(ha.from,Math.min(ha.from+100,ha.to)))[0].length)&&U.head>ha.from+y&&(ja=N.EditorSelection.cursor(ha.from+y));return ja}function sa(y,U,na){var ha=!1,ja=La(y.selection,function(ia){var Da=(0,z.matchBrackets)(y,ia.head,-1)||(0,z.matchBrackets)(y,ia.head,1)||0<ia.head&&(0,z.matchBrackets)(y,ia.head-1,1)||ia.head<y.doc.length&&(0,z.matchBrackets)(y,ia.head+1,-1);if(!Da||!Da.end)return ia;ha=!0;Da=Da.start.from==ia.head?Da.end.to:Da.end.from;
return na?N.EditorSelection.range(ia.anchor,Da):N.EditorSelection.cursor(Da)});if(!ha)return!1;U(Ma(y,ja));return!0}function ya(y,U){var na=La(y.state.selection,function(ha){var ja=U(ha);return N.EditorSelection.range(ha.anchor,ja.head,ja.goalColumn)});if(na.eq(y.state.selection))return!1;y.dispatch(Ma(y.state,na));return!0}function Ga(y,U){return ya(y,function(na){return y.moveByChar(na,U)})}function fa(y,U){return ya(y,function(na){return y.moveByGroup(na,U)})}function ca(y,U){return ya(y,function(na){return y.moveVertically(na,
U)})}function ma(y,U){return ya(y,function(na){return y.moveVertically(na,U,y.dom.clientHeight)})}function ka(y,U){var na=y.state.changeByRange(function(ha){var ja=ha.from,ia=ha.to;if(ja==ia){var Da=U(ja);ja=Math.min(ja,Da);ia=Math.max(ia,Da)}return ja==ia?{range:ha}:{changes:{from:ja,to:ia},range:N.EditorSelection.cursor(ja)}});if(na.changes.empty)return!1;y.dispatch(na,{scrollIntoView:!0,annotations:N.Transaction.userEvent.of("delete")});return!0}function D(y){var U=[],na=-1,ha=!0,ja=!1,ia=void 0;
try{for(var Da=y.selection.ranges[Symbol.iterator](),bb;!(ha=(bb=Da.next()).done);ha=!0){var eb=bb.value,cb=y.doc.lineAt(eb.from),Hb=y.doc.lineAt(eb.to);na==cb.number?U[U.length-1].to=Hb.to:U.push({from:cb.from,to:Hb.to});na=Hb.number}}catch(ac){ja=!0,ia=ac}finally{try{if(!ha&&null!=Da["return"])Da["return"]()}finally{if(ja)throw ia;}}return U}function x(y,U,na){var ha=[],ja=!0,ia=!1,Da=void 0;try{for(var bb=D(y)[Symbol.iterator](),eb;!(ja=(eb=bb.next()).done);ja=!0){var cb=eb.value;if(na?cb.to!=
y.doc.length:0!=cb.from){var Hb=y.doc.lineAt(na?cb.to+1:cb.from-1);na?ha.push({from:cb.to,to:Hb.to},{from:cb.from,insert:Hb.slice()+y.lineBreak}):ha.push({from:Hb.from,to:cb.from},{from:cb.to,insert:y.lineBreak+Hb.slice()})}}}catch(ac){ia=!0,Da=ac}finally{try{if(!ja&&null!=bb["return"])bb["return"]()}finally{if(ia)throw Da;}}if(!ha.length)return!1;U(y.update({changes:ha,scrollIntoView:!0}));return!0}function t(y,U,na){var ha=[],ja=!0,ia=!1,Da=void 0;try{for(var bb=D(y)[Symbol.iterator](),eb;!(ja=
(eb=bb.next()).done);ja=!0){var cb=eb.value;na?ha.push({from:cb.from,insert:y.doc.slice(cb.from,cb.to)+y.lineBreak}):ha.push({from:cb.to,insert:y.lineBreak+y.doc.slice(cb.from,cb.to)})}}catch(Hb){ia=!0,Da=Hb}finally{try{if(!ja&&null!=bb["return"])bb["return"]()}finally{if(ia)throw Da;}}U(y.update({changes:ha,scrollIntoView:!0}));return!0}function A(y,U){var na=!0,ha=!1,ja=void 0;try{for(var ia=y.state.facet(N.EditorState.indentation)[Symbol.iterator](),Da;!(na=(Da=ia.next()).done);na=!0){var bb=Da.value,
eb=bb(y,U);if(-1<eb)return eb}}catch(cb){ha=!0,ja=cb}finally{try{if(!na&&null!=ia["return"])ia["return"]()}finally{if(ha)throw ja;}}return-1}function H(y,U){var na=-1;return y.changeByRange(function(ha){for(var ja=[],ia=y.doc.lineAt(ha.from);;){ia.number>na&&(U(ia,ja,ha),na=ia.number);if(ha.to<=ia.to)break;ia=y.doc.lineAt(ia.to+1)}ia=y.changes(ja);return{changes:ja,range:N.EditorSelection.range(ia.mapPos(ha.anchor,1),ia.mapPos(ha.head,1))}})}Object.defineProperty(J,"__esModule",{value:!0});J.transposeChars=
J.standardKeymap=J.splitLine=J.simplifySelection=J.selectSyntaxRight=J.selectSyntaxLeft=J.selectParentSyntax=J.selectPageUp=J.selectPageDown=J.selectMatchingBracket=J.selectLineUp=J.selectLineStart=J.selectLineEnd=J.selectLineDown=J.selectLineBoundaryForward=J.selectLineBoundaryBackward=J.selectLine=J.selectGroupRight=J.selectGroupLeft=J.selectGroupForward=J.selectGroupBackward=J.selectDocStart=J.selectDocEnd=J.selectCharRight=J.selectCharLeft=J.selectCharForward=J.selectCharBackward=J.selectAll=
J.moveLineUp=J.moveLineDown=J.insertNewlineAndIndent=J.insertNewline=J.indentSelection=J.indentMore=J.indentLess=J.emacsStyleKeymap=J.deleteTrailingWhitespace=J.deleteToLineEnd=J.deleteLine=J.deleteGroupForward=J.deleteGroupBackward=J.deleteCodePointForward=J.deleteCodePointBackward=J.deleteCharForward=J.deleteCharBackward=J.defaultKeymap=J.cursorSyntaxRight=J.cursorSyntaxLeft=J.cursorPageUp=J.cursorPageDown=J.cursorMatchingBracket=J.cursorLineUp=J.cursorLineStart=J.cursorLineEnd=J.cursorLineDown=
J.cursorLineBoundaryForward=J.cursorLineBoundaryBackward=J.cursorGroupRight=J.cursorGroupLeft=J.cursorGroupForward=J.cursorGroupBackward=J.cursorDocStart=J.cursorDocEnd=J.cursorCharRight=J.cursorCharLeft=J.cursorCharForward=J.cursorCharBackward=J.copyLineUp=J.copyLineDown=void 0;var N=Ka(2),E=Ka(0),p=Ka(6),z=Ka(17),q=Ka(1),n=function(y){return Fa(y,y.textDirection!=p.Direction.LTR)};J.cursorCharLeft=n;var r=function(y){return Fa(y,y.textDirection==p.Direction.LTR)};J.cursorCharRight=r;J.cursorCharForward=
function(y){return Fa(y,!0)};J.cursorCharBackward=function(y){return Fa(y,!1)};var w=function(y){return qa(y,y.textDirection!=p.Direction.LTR)};J.cursorGroupLeft=w;var M=function(y){return qa(y,y.textDirection==p.Direction.LTR)};J.cursorGroupRight=M;var Q=function(y){return qa(y,!0)};J.cursorGroupForward=Q;var aa=function(y){return qa(y,!1)};J.cursorGroupBackward=aa;Ia=function(y){return Ea(y,function(U){return Ja(y.state,U,y.textDirection!=p.Direction.LTR)})};J.cursorSyntaxLeft=Ia;Ka=function(y){return Ea(y,
function(U){return Ja(y.state,U,y.textDirection==p.Direction.LTR)})};J.cursorSyntaxRight=Ka;var Y=function(y){return Pa(y,!1)};J.cursorLineUp=Y;var oa=function(y){return Pa(y,!0)};J.cursorLineDown=oa;var Aa=function(y){return pa(y,!1)};J.cursorPageUp=Aa;var Ba=function(y){return pa(y,!0)};J.cursorPageDown=Ba;var Ha=function(y){return Ea(y,function(U){return Ra(y,U,!0)})};J.cursorLineBoundaryForward=Ha;var Sa=function(y){return Ea(y,function(U){return Ra(y,U,!1)})};J.cursorLineBoundaryBackward=Sa;
var $a=function(y){return Ea(y,function(U){return N.EditorSelection.cursor(y.visualLineAt(U.head).from,1)})};J.cursorLineStart=$a;var Va=function(y){return Ea(y,function(U){return N.EditorSelection.cursor(y.visualLineAt(U.head).to,-1)})};J.cursorLineEnd=Va;ub=function(y){return sa(y.state,y.dispatch,!1)};J.cursorMatchingBracket=ub;J.selectMatchingBracket=function(y){return sa(y.state,y.dispatch,!0)};var lb=function(y){return Ga(y,y.textDirection!=p.Direction.LTR)};J.selectCharLeft=lb;var kb=function(y){return Ga(y,
y.textDirection==p.Direction.LTR)};J.selectCharRight=kb;J.selectCharForward=function(y){return Ga(y,!0)};J.selectCharBackward=function(y){return Ga(y,!1)};var wb=function(y){return fa(y,y.textDirection!=p.Direction.LTR)};J.selectGroupLeft=wb;var Gb=function(y){return fa(y,y.textDirection==p.Direction.LTR)};J.selectGroupRight=Gb;var rb=function(y){return fa(y,!0)};J.selectGroupForward=rb;var dc=function(y){return fa(y,!1)};J.selectGroupBackward=dc;var ec=function(y){return ya(y,function(U){return Ja(y.state,
U,y.textDirection!=p.Direction.LTR)})};J.selectSyntaxLeft=ec;var Xb=function(y){return ya(y,function(U){return Ja(y.state,U,y.textDirection==p.Direction.LTR)})};J.selectSyntaxRight=Xb;var jc=function(y){return ca(y,!1)};J.selectLineUp=jc;var Mb=function(y){return ca(y,!0)};J.selectLineDown=Mb;var nc=function(y){return ma(y,!1)};J.selectPageUp=nc;var zb=function(y){return ma(y,!0)};J.selectPageDown=zb;var xb=function(y){return ya(y,function(U){return Ra(y,U,!0)})};J.selectLineBoundaryForward=xb;var Rb=
function(y){return ya(y,function(U){return Ra(y,U,!1)})};J.selectLineBoundaryBackward=Rb;var qc=function(y){return ya(y,function(U){return N.EditorSelection.cursor(y.visualLineAt(U.head).from)})};J.selectLineStart=qc;var Yb=function(y){return ya(y,function(U){return N.EditorSelection.cursor(y.visualLineAt(U.head).to)})};J.selectLineEnd=Yb;var W=function(y){var U=y.dispatch;U(Ma(y.state,{anchor:0}));return!0};J.cursorDocStart=W;var I=function(y){var U=y.state;y=y.dispatch;y(Ma(U,{anchor:U.doc.length}));
return!0};J.cursorDocEnd=I;var G=function(y){var U=y.state;y=y.dispatch;y(Ma(U,{anchor:U.selection.primary.anchor,head:0}));return!0};J.selectDocStart=G;var C=function(y){var U=y.state;y=y.dispatch;y(Ma(U,{anchor:U.selection.primary.anchor,head:U.doc.length}));return!0};J.selectDocEnd=C;var P=function(y){var U=y.state;y=y.dispatch;y(U.update({selection:{anchor:0,head:U.doc.length},annotations:N.Transaction.userEvent.of("keyboardselection")}));return!0};J.selectAll=P;var S=function(y){var U=y.state;
y=y.dispatch;var na=D(U).map(function(ha){return N.EditorSelection.range(ha.from,Math.min(ha.to+1,U.doc.length))});y(U.update({selection:new N.EditorSelection(na),annotations:N.Transaction.userEvent.of("keyboardselection")}));return!0};J.selectLine=S;var X=function(y){var U=y.state;y=y.dispatch;var na=La(U.selection,function(ha){for(var ja,ia=U.tree.resolve(ha.head,1);!(ia.from<ha.from&&ia.to>=ha.to||ia.to>ha.to&&ia.from<=ha.from)&&(null===(ja=ia.parent)||void 0===ja?0:ja.parent);)ia=ia.parent;return N.EditorSelection.range(ia.to,
ia.from)});y(Ma(U,na));return!0};J.selectParentSyntax=X;var ea=function(y){var U=y.state;y=y.dispatch;var na=U.selection,ha=null;1<na.ranges.length?ha=new N.EditorSelection([na.primary]):na.primary.empty||(ha=new N.EditorSelection([N.EditorSelection.cursor(na.primary.head)]));if(!ha)return!1;y(Ma(U,ha));return!0};J.simplifySelection=ea;var ua=function(y,U,na){return ka(y,function(ha){var ja=y.state,ia=ja.doc.lineAt(ha),Da;if(!U&&ha>ia.from&&ha<ia.from+200&&!/[^ \t]/.test(Da=ia.slice(0,ha-ia.from))){if("\t"==
Da[Da.length-1])return ha-1;ja=(0,E.countColumn)(Da,0,ja.tabSize)%ja.indentUnit||ja.indentUnit;for(ia=0;ia<ja&&" "==Da[Da.length-1-ia];ia++)ha--;return ha}na?(Da=(Da=ia.slice(ha-ia.from+(U?0:-2),ha-ia.from+(U?2:0)))?(0,E.codePointSize)((0,E.codePointAt)(Da,0)):1,Da=U?Math.min(ja.doc.length,ha+Da):Math.max(0,ha-Da)):Da=ia.findClusterBreak(ha-ia.from,U)+ia.from;Da==ha&&ia.number!=(U?ja.doc.lines:1)&&(Da+=U?1:-1);return Da})},xa=function(y){return ua(y,!1,!0)};J.deleteCodePointBackward=xa;J.deleteCodePointForward=
function(y){return ua(y,!0,!0)};var Ca=function(y){return ua(y,!1,!1)};J.deleteCharBackward=Ca;var ra=function(y){return ua(y,!0,!1)};J.deleteCharForward=ra;var Na=function(y,U){return ka(y,function(na){for(var ha=y.state,ja=ha.doc.lineAt(na),ia=ha.charCategorizer(na),Da=null;;){if(na==(U?ja.to:ja.from)){if(ja.number==(U?ha.doc.lines:1))break;ja=ha.doc.line(ja.number+(U?1:-1));var bb=U?ja.from:ja.to;var eb="\n"}else bb=ja.findClusterBreak(na-ja.from,U)+ja.from,eb=ja.slice(Math.min(na,bb)-ja.from,
Math.max(na,bb)-ja.from);eb=ia(eb);if(null!=Da&&eb!=Da)break;eb!=N.CharCategory.Space&&(Da=eb);na=bb}return na})},Ta=function(y){return Na(y,!1)};J.deleteGroupBackward=Ta;var Za=function(y){return Na(y,!0)};J.deleteGroupForward=Za;var db=function(y){return ka(y,function(U){var na=y.visualLineAt(U).to;return U<na?na:Math.max(y.state.doc.length,U+1)})};J.deleteToLineEnd=db;J.deleteTrailingWhitespace=function(y){var U=y.state;y=y.dispatch;for(var na=[],ha=0,ja=U.doc.iterLines();!ja.next().done;){var ia=
ja.value.search(/\s+$/);-1<ia&&na.push({from:ha+ia,to:ha+ja.value.length});ha+=ja.value.length+1}if(!na.length)return!1;y(U.update({changes:na}));return!0};var ab=function(y){var U=y.state;y=y.dispatch;var na=U.changeByRange(function(ha){return{changes:{from:ha.from,to:ha.to,insert:E.Text.of(["",""])},range:N.EditorSelection.cursor(ha.from)}});y(U.update(na,{scrollIntoView:!0,annotations:N.Transaction.userEvent.of("input")}));return!0};J.splitLine=ab;var mb=function(y){var U=y.state;y=y.dispatch;
var na=U.changeByRange(function(ha){if(!ha.empty||0==ha.from||ha.from==U.doc.length)return{range:ha};ha=ha.from;var ja=U.doc.lineAt(ha),ia=ha==ja.from?ha-1:ja.findClusterBreak(ha-ja.from,!1)+ja.from;ja=ha==ja.to?ha+1:ja.findClusterBreak(ha-ja.from,!0)+ja.from;return{changes:{from:ia,to:ja,insert:U.doc.slice(ha,ja).append(U.doc.slice(ia,ha))},range:N.EditorSelection.cursor(ja)}});if(na.changes.empty)return!1;y(U.update(na,{scrollIntoView:!0}));return!0};J.transposeChars=mb;var ib=function(y){return x(y.state,
y.dispatch,!1)};J.moveLineUp=ib;var Dc=function(y){return x(y.state,y.dispatch,!0)};J.moveLineDown=Dc;var qb=function(y){return t(y.state,y.dispatch,!1)};J.copyLineUp=qb;var fc=function(y){return t(y.state,y.dispatch,!0)};J.copyLineDown=fc;var gc=function(y){var U=y.state,na=U.changes(D(U).map(function(ja){var ia=ja.from;ja=ja.to;0<ia?ia--:ja<U.doc.length&&ja++;return{from:ia,to:ja}})),ha=La(U.selection,function(ja){return y.moveVertically(ja,!0)}).map(na);y.dispatch({changes:na,selection:ha,scrollIntoView:!0});
return!0};J.deleteLine=gc;J.insertNewline=function(y){var U=y.state;y=y.dispatch;y(U.update(U.replaceSelection(U.lineBreak),{scrollIntoView:!0}));return!0};var Zb=function(y){var U=y.state;y=y.dispatch;var na=U.changeByRange(function(ha){var ja=ha.from;ha=ha.to;var ia;if(ia=ja==ha)if(ia=ja,/\(\)|\[\]|\{\}/.test(U.sliceDoc(ia-1,ia+1)))ia={from:ia,to:ia};else{var Da=U.tree.resolve(ia),bb=Da.childBefore(ia);Da=Da.childAfter(ia);var eb;ia=bb&&Da&&bb.to<=ia&&Da.from>=ia&&(eb=bb.type.prop(q.NodeProp.closedBy))&&
-1<eb.indexOf(Da.name)?{from:bb.to,to:Da.from}:null}eb=ia;ia=new N.IndentContext(U,{simulateBreak:ja,simulateDoubleBreak:!!eb});bb=A(ia,ja);0>bb&&(bb=/^\s*/.exec(U.doc.lineAt(ja).slice(0,50))[0].length);for(Da=U.doc.lineAt(ja);ha<Da.to&&/\s/.test(Da.slice(ha-Da.from,ha+1-Da.from));)ha++;eb?(ja=eb.from,ha=eb.to):ja>Da.from&&ja<Da.from+100&&!/\S/.test(Da.slice(0,ja))&&(ja=Da.from);var cb=["",U.indentString(bb)];eb&&cb.push(U.indentString(ia.lineIndent(Da)));return{changes:{from:ja,to:ha,insert:E.Text.of(cb)},
range:N.EditorSelection.cursor(ja+1+bb)}});y(U.update(na,{scrollIntoView:!0}));return!0};J.insertNewlineAndIndent=Zb;var wc=function(y){var U=y.state;y=y.dispatch;var na=Object.create(null),ha=new N.IndentContext(U,{overrideIndentation:function(ia){ia=na[ia];return null==ia?-1:ia}}),ja=H(U,function(ia,Da,bb){var eb=A(ha,ia.from);if(!(0>eb)){var cb=/^\s*/.exec(ia.slice(0,Math.min(ia.length,200)))[0],Hb=U.indentString(eb);if(cb!=Hb||bb.from<ia.from+cb.length)na[ia.from]=eb,Da.push({from:ia.from,to:ia.from+
cb.length,insert:Hb})}});ja.changes.empty||y(U.update(ja));return!0};J.indentSelection=wc;var xc=function(y){var U=y.state;y=y.dispatch;y(U.update(H(U,function(na,ha){ha.push({from:na.from,insert:U.facet(N.EditorState.indentUnit)})})));return!0};J.indentMore=xc;var kc=function(y){var U=y.state;y=y.dispatch;y(U.update(H(U,function(na,ha){var ja=na.slice(0,Math.min(na.length,200));if(ja=/^\s*/.exec(ja)[0]){var ia=(0,E.countColumn)(ja,0,U.tabSize);ia=U.indentString(Math.max(0,ia-U.indentUnit));for(var Da=
0;Da<ja.length&&Da<ia.length&&ja.charCodeAt(Da)==ia.charCodeAt(Da);)Da++;ha.push({from:na.from+Da,to:na.from+ja.length,insert:ia.slice(Da)})}})));return!0};J.indentLess=kc;Q=[{key:"Ctrl-b",run:n,shift:lb},{key:"Ctrl-f",run:r,shift:kb},{key:"Ctrl-p",run:Y,shift:jc},{key:"Ctrl-n",run:oa,shift:Mb},{key:"Ctrl-a",run:$a,shift:qc},{key:"Ctrl-e",run:Va,shift:Yb},{key:"Ctrl-d",run:ra},{key:"Ctrl-h",run:Ca},{key:"Ctrl-k",run:db},{key:"Alt-d",run:Za},{key:"Ctrl-Alt-h",run:Ta},{key:"Ctrl-o",run:ab},{key:"Ctrl-t",
run:mb},{key:"Alt-f",run:Q,shift:rb},{key:"Alt-b",run:aa,shift:dc},{key:"Alt-\x3c",run:W},{key:"Alt-\x3e",run:I},{key:"Ctrl-v",run:Ba},{key:"Alt-v",run:Aa}];J.emacsStyleKeymap=Q;n=[{key:"ArrowLeft",run:n,shift:lb},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:w,shift:wb},{mac:"Cmd-ArrowLeft",run:$a,shift:qc},{key:"ArrowRight",run:r,shift:kb},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:M,shift:Gb},{mac:"Cmd-ArrowRight",run:Va,shift:Yb},{key:"ArrowUp",run:Y,shift:jc},{mac:"Cmd-ArrowUp",run:W,shift:G},
{mac:"Ctrl-ArrowUp",run:Aa,shift:nc},{key:"ArrowDown",run:oa,shift:Mb},{mac:"Cmd-ArrowDown",run:I,shift:C},{mac:"Ctrl-ArrowDown",run:Ba,shift:zb},{key:"PageUp",run:Aa,shift:nc},{key:"PageDown",run:Ba,shift:zb},{key:"Home",run:Sa,shift:Rb},{key:"Mod-Home",run:W,shift:G},{key:"End",run:Ha,shift:xb},{key:"Mod-End",run:I,shift:C},{key:"Enter",run:Zb},{key:"Mod-a",run:P},{key:"Backspace",run:xa},{key:"Delete",run:ra},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ta},{key:"Mod-Delete",mac:"Alt-Delete",run:Za}].concat(Q.map(function(y){return{mac:y.key,
run:y.run,shift:y.shift}}));J.standardKeymap=n;Ia=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Ia,shift:ec},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Ka,shift:Xb},{key:"Alt-ArrowUp",run:ib},{key:"Shift-Alt-ArrowUp",run:qb},{key:"Alt-ArrowDown",run:Dc},{key:"Shift-Alt-ArrowDown",run:fc},{key:"Escape",run:ea},{key:"Mod-l",run:S},{key:"Mod-i",run:X},{key:"Mod-[",run:kc},{key:"Mod-]",run:xc},{key:"Mod-Alt-\\",run:wc},{key:"Shift-Mod-k",run:gc},{key:"Shift-Mod-\\",run:ub}].concat(n);J.defaultKeymap=
Ia};
var h,aa=this||self;
function q(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}var ba="closure_uid_"+(1E9*Math.random()>>>0),ca=0;function ea(a,b){a.sort(b||fa)}function ha(a,b){for(var c=Array(a.length),d=0;d<a.length;d++)c[d]={index:d,value:a[d]};var e=b||fa;ea(c,function(f,g){return e(f.value,g.value)||f.index-g.index});for(d=0;d<a.length;d++)a[d]=c[d].value}function fa(a,b){return a>b?1:a<b?-1:0};function ia(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b};function ja(a,b){null!=a&&this.append.apply(this,arguments)}h=ja.prototype;h.wa="";h.set=function(a){this.wa=""+a};h.append=function(a,b,c){this.wa+=String(a);if(null!=b)for(let d=1;d<arguments.length;d++)this.wa+=arguments[d];return this};h.clear=function(){this.wa=""};h.toString=function(){return this.wa};var ka={},la={},ma,t={},na=null;function oa(){return new v(null,5,[pa,!0,qa,!0,ra,!1,sa,!1,ua,null],null)}function w(a){return null!=a&&!1!==a}function va(a){return a instanceof Array}function wa(a){return null==a?!0:!1===a?!0:!1}function xa(a){return null!=a}function x(a,b){return a[q(null==b?null:b)]?!0:a._?!0:!1}function y(a,b){var c=null==b?null:b.constructor;c=w(w(c)?c.zb:c)?c.kb:q(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}
function ya(a){var b=a.kb;return w(b)?b:z.c(a)}var za="undefined"!==typeof Symbol&&"function"===q(Symbol)?Symbol.iterator:"@@iterator";function Aa(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function Ba(a){function b(d,e){d.push(e);return d}var c=[];return Ca?Ca(b,c,a):Da.call(null,b,c,a)}function Ea(a){return"symbol"===q(a)||"undefined"!==typeof Symbol&&a instanceof Symbol}function Fa(){}
function Ga(a){if(null!=a&&null!=a.Y)a=a.Y(a);else{var b=Ga[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Ga._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("ICounted.-count",a);}return a}function Ha(){}function Ia(a){if(null!=a&&null!=a.V)a=a.V(a);else{var b=Ia[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Ia._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IEmptyableCollection.-empty",a);}return a}function Ja(){}
function La(a,b){if(null!=a&&null!=a.X)a=a.X(a,b);else{var c=La[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=La._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("ICollection.-conj",a);}return a}function Ma(){}
var Oa=function(){function a(d,e,f){var g=Na[q(null==d?null:d)];if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);g=Na._;if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);throw y("IIndexed.-nth",d);}function b(d,e){var f=Na[q(null==d?null:d)];if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);f=Na._;if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);throw y("IIndexed.-nth",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.g=b;c.l=a;return c}(),Na=function Na(a){switch(arguments.length){case 2:return Na.g(arguments[0],arguments[1]);case 3:return Na.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};Na.g=function(a,b){return null!=a&&null!=a.M?a.M(a,b):Oa(a,b)};Na.l=function(a,b,c){return null!=a&&null!=a.la?a.la(a,b,c):Oa(a,b,c)};Na.F=3;
function A(a){if(null!=a&&null!=a.W)a=a.W(a);else{var b=A[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=A._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("ISeq.-first",a);}return a}function Pa(a){if(null!=a&&null!=a.Za)a=a.Za(a);else{var b=Pa[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Pa._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("ISeq.-rest",a);}return a}function Qa(){}function Ra(){}
var Ta=function(){function a(d,e,f){var g=Sa[q(null==d?null:d)];if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);g=Sa._;if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);throw y("ILookup.-lookup",d);}function b(d,e){var f=Sa[q(null==d?null:d)];if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);f=Sa._;if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);throw y("ILookup.-lookup",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.g=b;c.l=a;return c}(),Sa=function Sa(a){switch(arguments.length){case 2:return Sa.g(arguments[0],arguments[1]);case 3:return Sa.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};Sa.g=function(a,b){return null!=a&&null!=a.ja?a.ja(a,b):Ta(a,b)};Sa.l=function(a,b,c){return null!=a&&null!=a.K?a.K(a,b,c):Ta(a,b,c)};Sa.F=3;
function Ua(a,b,c){if(null!=a&&null!=a.ua)a=a.ua(a,b,c);else{var d=Ua[q(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Ua._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw y("IAssociative.-assoc",a);}return a}function Va(a,b){if(null!=a&&null!=a.Xa)a=a.Xa(a,b);else{var c=Va[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Va._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IFind.-find",a);}return a}function Wa(){}
function Xa(a,b){if(null!=a&&null!=a.qb)a=a.qb(a,b);else{var c=Xa[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Xa._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IMap.-dissoc",a);}return a}function Ya(a){if(null!=a&&null!=a.Jb)a=a.key;else{var b=Ya[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Ya._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IMapEntry.-key",a);}return a}
function Za(a){if(null!=a&&null!=a.Kb)a=a.O;else{var b=Za[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Za._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IMapEntry.-val",a);}return a}function $a(){}function cb(){}function db(a){if(null!=a&&null!=a.pb)a=a.pb(a);else{var b=db[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=db._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IDeref.-deref",a);}return a}function eb(){}
function fb(a){if(null!=a&&null!=a.S)a=a.S(a);else{var b=fb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=fb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IMeta.-meta",a);}return a}function gb(a,b){if(null!=a&&null!=a.U)a=a.U(a,b);else{var c=gb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=gb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IWithMeta.-with-meta",a);}return a}function hb(){}
var jb=function(){function a(d,e,f){var g=ib[q(null==d?null:d)];if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);g=ib._;if(null!=g)return g.l?g.l(d,e,f):g.call(null,d,e,f);throw y("IReduce.-reduce",d);}function b(d,e){var f=ib[q(null==d?null:d)];if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);f=ib._;if(null!=f)return f.g?f.g(d,e):f.call(null,d,e);throw y("IReduce.-reduce",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.g=b;c.l=a;return c}(),ib=function ib(a){switch(arguments.length){case 2:return ib.g(arguments[0],arguments[1]);case 3:return ib.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};ib.g=function(a,b){return null!=a&&null!=a.ca?a.ca(a,b):jb(a,b)};ib.l=function(a,b,c){return null!=a&&null!=a.da?a.da(a,b,c):jb(a,b,c)};ib.F=3;function kb(){}
function lb(a,b,c){if(null!=a&&null!=a.jb)a=a.jb(a,b,c);else{var d=lb[q(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=lb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw y("IKVReduce.-kv-reduce",a);}return a}function mb(a,b){if(null!=a&&null!=a.R)a=a.R(a,b);else{var c=mb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=mb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IEquiv.-equiv",a);}return a}
function nb(a){if(null!=a&&null!=a.T)a=a.T(a);else{var b=nb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=nb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IHash.-hash",a);}return a}function ob(){}function pb(a){if(null!=a&&null!=a.N)a=a.N(a);else{var b=pb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=pb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("ISeqable.-seq",a);}return a}function qb(){}function rb(){}function sb(){}function ab(){}
function bb(a){if(null!=a&&null!=a.nc)a=a.nc(a);else{var b=bb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=bb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IReversible.-rseq",a);}return a}function tb(a,b){if(null!=a&&null!=a.yb)a=a.yb(a,b);else{var c=tb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=tb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IWriter.-write",a);}return a}function ub(){}
function vb(a,b,c){if(null!=a&&null!=a.P)a=a.P(a,b,c);else{var d=vb[q(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=vb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw y("IPrintWithWriter.-pr-writer",a);}return a}function wb(a){if(null!=a&&null!=a.Ra)a=a.Ra(a);else{var b=wb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=wb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IEditableCollection.-as-transient",a);}return a}
function xb(a,b){if(null!=a&&null!=a.Ta)a=a.Ta(a,b);else{var c=xb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=xb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("ITransientCollection.-conj!",a);}return a}function yb(a){if(null!=a&&null!=a.ab)a=a.ab(a);else{var b=yb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=yb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("ITransientCollection.-persistent!",a);}return a}
function zb(a,b,c){if(null!=a&&null!=a.Sa)a=a.Sa(a,b,c);else{var d=zb[q(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=zb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw y("ITransientAssociative.-assoc!",a);}return a}function Ab(){}function Bb(a,b){if(null!=a&&null!=a.Qa)a=a.Qa(a,b);else{var c=Bb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Bb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IComparable.-compare",a);}return a}
function Cb(a){if(null!=a&&null!=a.ub)a=a.ub(a);else{var b=Cb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Cb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IChunk.-drop-first",a);}return a}function Db(a){if(null!=a&&null!=a.ob)a=a.ob(a);else{var b=Db[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Db._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IChunkedSeq.-chunked-first",a);}return a}
function Eb(a){if(null!=a&&null!=a.ib)a=a.ib(a);else{var b=Eb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Eb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IChunkedSeq.-chunked-rest",a);}return a}function Fb(a,b){if(null!=a&&null!=a.Ob)a=a.Ob(a,b);else{var c=Fb[q(null==a?null:a)];if(null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else if(c=Fb._,null!=c)a=c.g?c.g(a,b):c.call(null,a,b);else throw y("IReset.-reset!",a);}return a}
var Hb=function(){function a(f,g,k,l,m){var n=Gb[q(null==f?null:f)];if(null!=n)return n.ia?n.ia(f,g,k,l,m):n.call(null,f,g,k,l,m);n=Gb._;if(null!=n)return n.ia?n.ia(f,g,k,l,m):n.call(null,f,g,k,l,m);throw y("ISwap.-swap!",f);}function b(f,g,k,l){var m=Gb[q(null==f?null:f)];if(null!=m)return m.I?m.I(f,g,k,l):m.call(null,f,g,k,l);m=Gb._;if(null!=m)return m.I?m.I(f,g,k,l):m.call(null,f,g,k,l);throw y("ISwap.-swap!",f);}function c(f,g,k){var l=Gb[q(null==f?null:f)];if(null!=l)return l.l?l.l(f,g,k):l.call(null,
f,g,k);l=Gb._;if(null!=l)return l.l?l.l(f,g,k):l.call(null,f,g,k);throw y("ISwap.-swap!",f);}function d(f,g){var k=Gb[q(null==f?null:f)];if(null!=k)return k.g?k.g(f,g):k.call(null,f,g);k=Gb._;if(null!=k)return k.g?k.g(f,g):k.call(null,f,g);throw y("ISwap.-swap!",f);}var e=null;e=function(f,g,k,l,m){switch(arguments.length){case 2:return d.call(this,f,g);case 3:return c.call(this,f,g,k);case 4:return b.call(this,f,g,k,l);case 5:return a.call(this,f,g,k,l,m)}throw Error("Invalid arity: "+arguments.length);
};e.g=d;e.l=c;e.I=b;e.ia=a;return e}(),Gb=function Gb(a){switch(arguments.length){case 2:return Gb.g(arguments[0],arguments[1]);case 3:return Gb.l(arguments[0],arguments[1],arguments[2]);case 4:return Gb.I(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Gb.ia(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};Gb.g=function(a,b){return null!=a&&null!=a.Qb?a.Qb(a,b):Hb(a,b)};
Gb.l=function(a,b,c){return null!=a&&null!=a.Rb?a.Rb(a,b,c):Hb(a,b,c)};Gb.I=function(a,b,c,d){return null!=a&&null!=a.Sb?a.Sb(a,b,c,d):Hb(a,b,c,d)};Gb.ia=function(a,b,c,d,e){return null!=a&&null!=a.Tb?a.Tb(a,b,c,d,e):Hb(a,b,c,d,e)};Gb.F=5;function Ib(){}function Jb(a){if(null!=a&&null!=a.ma)a=a.ma(a);else{var b=Jb[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=Jb._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IIterable.-iterator",a);}return a}
function Kb(a){this.Xb=a;this.j=1073741824;this.A=0}Kb.prototype.yb=function(a,b){return this.Xb.append(b)};function Lb(a){var b=new ja;a.P(null,new Kb(b),oa());return z.c(b)}var Mb="undefined"!==typeof Math&&"undefined"!==typeof Math.imul&&0!==Math.imul(4294967295,5)?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function Nb(a){a=Mb(a|0,-862048943);return Mb(a<<15|a>>>-15,461845907)}
function Ob(a,b){a=(a|0)^(b|0);return Mb(a<<13|a>>>-13,5)+-430675100|0}function Pb(a,b){a=(a|0)^b;a=Mb(a^a>>>16,-2048144789);a=Mb(a^a>>>13,-1028477387);return a^a>>>16}function Qb(a){a:{var b=1;for(var c=0;;)if(b<a.length)c=Ob(c,Nb(a.charCodeAt(b-1)|a.charCodeAt(b)<<16)),b+=2;else{b=c;break a}}return Pb(1===(a.length&1)?b^Nb(a.charCodeAt(a.length-1)):b,Mb(2,a.length))}var Rb={},Sb=0;
function Tb(a){255<Sb&&(Rb={},Sb=0);if(null==a)return 0;var b=Rb[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b)d=Mb(31,d)+a.charCodeAt(c),c+=1;else{b=d;break a}else b=0;else b=0;Rb[a]=b;Sb+=1;a=b}return a}
function Ub(a){if(null!=a&&(a.j&4194304||t===a.cc))return a.T(null)^0;if("number"===typeof a){if(w(isFinite(a)))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=Tb(a),a=0===a?a:Pb(Ob(0,Nb(a)),4)):a=a instanceof Date?a.valueOf()^0:null==a?0:nb(a)^0,a}function Vb(a,b){return a^b+2654435769+(a<<6)+(a>>2)}
function Wb(a,b){if(a.str===b.str)return 0;if(w(wa(a.ha)?b.ha:!1))return-1;if(w(a.ha)){if(wa(b.ha))return 1;var c=fa(a.ha,b.ha);return 0===c?fa(a.name,b.name):c}return fa(a.name,b.name)}function Xb(a,b,c,d,e){this.ha=a;this.name=b;this.str=c;this.Pa=d;this.sa=e;this.j=2154168321;this.A=4096}h=Xb.prototype;h.toString=function(){return this.str};h.R=function(a,b){return b instanceof Xb?this.str===b.str:!1};
h.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};h.c=function(a){return C.g?C.g(a,this):C.call(null,a,this)};h.g=function(a,b){return C.l?C.l(a,this,b):C.call(null,a,this,b)};h.S=function(){return this.sa};
h.U=function(a,b){return new Xb(this.ha,this.name,this.str,this.Pa,b)};h.T=function(){var a=this.Pa;return null!=a?a:this.Pa=a=Vb(Qb(this.name),Tb(this.ha))};h.P=function(a,b){return tb(b,this.str)};var Yb=function Yb(a){switch(arguments.length){case 1:return Yb.c(arguments[0]);case 2:return Yb.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};
Yb.c=function(a){for(;;){if(a instanceof Xb)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?Yb.g(null,a):Yb.g(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof E)a=a.na;else throw Error("no conversion to symbol");}};Yb.g=function(a,b){var c=null!=a?[z.c(a),"/",z.c(b)].join(""):b;return new Xb(a,b,c,null,null)};Yb.F=2;function Zb(a){return null!=a?a.A&131072||t===a.dc?!0:a.A?!1:x(Ib,a):x(Ib,a)}
function G(a){if(null==a)return null;if(null!=a&&(a.j&8388608||t===a.Pb))return a.N(null);if(va(a)||"string"===typeof a)return 0===a.length?null:new H(a,0,null);if(null!=a&&null!=a[za])return a=(null!==a&&za in a?a[za]:void 0).call(a),$b.c?$b.c(a):$b.call(null,a);if(x(ob,a))return pb(a);throw Error([z.c(a)," is not ISeqable"].join(""));}function I(a){if(null==a)return null;if(null!=a&&(a.j&64||t===a.v))return a.W(null);a=G(a);return null==a?null:A(a)}
function ac(a){return null!=a?null!=a&&(a.j&64||t===a.v)?a.Za(null):(a=G(a))?a.Za(null):J:J}function K(a){return null==a?null:null!=a&&(a.j&128||t===a.Ya)?a.ba():G(ac(a))}var M=function M(a){switch(arguments.length){case 1:return M.c(arguments[0]);case 2:return M.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return M.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};M.c=function(){return!0};
M.g=function(a,b){return null==a?null==b:a===b||mb(a,b)};M.s=function(a,b,c){for(;;)if(M.g(a,b))if(K(c))a=b,b=I(c),c=K(c);else return M.g(b,I(c));else return!1};M.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};M.F=2;function bc(a){this.D=a}bc.prototype.next=function(){if(null!=this.D){var a=I(this.D);this.D=K(this.D);return{value:a,done:!1}}return{value:null,done:!0}};function cc(a){return new bc(G(a))}
function dc(a,b){this.value=a;this.Va=b;this.mb=null;this.j=8388672;this.A=0}dc.prototype.N=function(){return this};dc.prototype.W=function(){return this.value};dc.prototype.Za=function(){null==this.mb&&(this.mb=$b.c?$b.c(this.Va):$b.call(null,this.Va));return this.mb};function $b(a){var b=a.next();return w(b.done)?null:new dc(b.value,a)}function ec(a){var b=0,c=1;for(a=G(a);;)if(null!=a)b+=1,c=Mb(31,c)+Ub(I(a))|0,a=K(a);else return Pb(Ob(0,Nb(c)),b)}var fc=Pb(Ob(0,Nb(1)),0);
function gc(a){var b=0,c=0;for(a=G(a);;)if(null!=a)b+=1,c=c+Ub(I(a))|0,a=K(a);else return Pb(Ob(0,Nb(c)),b)}var hc=Pb(Ob(0,Nb(0)),0);Fa["null"]=!0;Ga["null"]=function(){return 0};Date.prototype.R=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};Date.prototype.Wa=t;Date.prototype.Qa=function(a,b){if(b instanceof Date)return fa(this.valueOf(),b.valueOf());throw Error(["Cannot compare ",z.c(this)," to ",z.c(b)].join(""));};mb.number=function(a,b){return a===b};eb["function"]=!0;
fb["function"]=function(){return null};nb._=function(a){return a[ba]||(a[ba]=++ca)};function ic(a){this.O=a;this.j=32768;this.A=0}ic.prototype.pb=function(){return this.O};function jc(a){return a instanceof ic}function kc(a){return db(a)}function lc(a,b){var c=a.length;if(0===a.length)return b.B?b.B():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.g?b.g(d,f):b.call(null,d,f);if(jc(d))return db(d);e+=1}else return d}
function mc(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.g?b.g(e,f):b.call(null,e,f);if(jc(e))return db(e);c+=1}else return e}function nc(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.g?b.g(c,f):b.call(null,c,f);if(jc(c))return db(c);d+=1}else return c}function oc(a){return null!=a?a.j&2||t===a.Cb?!0:a.j?!1:x(Fa,a):x(Fa,a)}function pc(a){return null!=a?a.j&16||t===a.wb?!0:a.j?!1:x(Ma,a):x(Ma,a)}
function N(a,b,c){var d=O.c?O.c(a):O.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(M.g(qc?qc(a,c):rc.call(null,a,c),b))return c;c+=1}else return-1}function P(a,b,c){var d=O.c?O.c(a):O.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(M.g(qc?qc(a,c):rc.call(null,a,c),b))return c;--c}else return-1}function sc(a,b){this.h=a;this.i=b}sc.prototype.ea=function(){return this.i<this.h.length};
sc.prototype.next=function(){var a=this.h[this.i];this.i+=1;return a};function H(a,b,c){this.h=a;this.i=b;this.meta=c;this.j=166592766;this.A=139264}h=H.prototype;h.toString=function(){return Lb(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O.c?O.c(this):O.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.M=function(a,b){a=b+this.i;if(0<=a&&a<this.h.length)return this.h[a];throw Error("Index out of bounds");};h.la=function(a,b,c){a=b+this.i;return 0<=a&&a<this.h.length?this.h[a]:c};
h.ma=function(){return new sc(this.h,this.i)};h.S=function(){return this.meta};h.ba=function(){return this.i+1<this.h.length?new H(this.h,this.i+1,null):null};h.Y=function(){var a=this.h.length-this.i;return 0>a?0:a};h.nc=function(){var a=this.Y(null);return 0<a?new je(this,a-1,null):null};h.T=function(){return ec(this)};h.R=function(a,b){return tc.g?tc.g(this,b):tc.call(null,this,b)};h.V=function(){return J};h.ca=function(a,b){return nc(this.h,b,this.h[this.i],this.i+1)};
h.da=function(a,b,c){return nc(this.h,b,c,this.i)};h.W=function(){return this.h[this.i]};h.Za=function(){return this.i+1<this.h.length?new H(this.h,this.i+1,null):J};h.N=function(){return this.i<this.h.length?this:null};h.U=function(a,b){return b===this.meta?this:new H(this.h,this.i,b)};h.X=function(a,b){return Q.g?Q.g(b,this):Q.call(null,b,this)};H.prototype[za]=function(){return cc(this)};function uc(a){return 0<a.length?new H(a,0,null):null}
function je(a,b,c){this.$a=a;this.i=b;this.meta=c;this.j=32374990;this.A=8192}h=je.prototype;h.toString=function(){return Lb(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O.c?O.c(this):O.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.meta};h.ba=function(){return 0<this.i?new je(this.$a,this.i-1,null):null};h.Y=function(){return this.i+1};h.T=function(){return ec(this)};
h.R=function(a,b){return tc.g?tc.g(this,b):tc.call(null,this,b)};h.V=function(){return J};h.ca=function(a,b){return Yc?Yc(b,this):qe.call(null,b,this)};h.da=function(a,b,c){return Zc?Zc(b,c,this):qe.call(null,b,c,this)};h.W=function(){return Na(this.$a,this.i)};h.Za=function(){return 0<this.i?new je(this.$a,this.i-1,null):J};h.N=function(){return this};h.U=function(a,b){return b===this.meta?this:new je(this.$a,this.i,b)};h.X=function(a,b){return Q.g?Q.g(b,this):Q.call(null,b,this)};
je.prototype[za]=function(){return cc(this)};function vc(a){for(;;){var b=K(a);if(null!=b)a=b;else return I(a)}}mb._=function(a,b){return a===b};var wc=function wc(a){switch(arguments.length){case 0:return wc.B();case 1:return wc.c(arguments[0]);case 2:return wc.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return wc.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};wc.B=function(){return xc};wc.c=function(a){return a};
wc.g=function(a,b){return null!=a?La(a,b):new yc(null,b,null,1,null)};wc.s=function(a,b,c){for(;;)if(w(c))a=wc.g(a,b),b=I(c),c=K(c);else return wc.g(a,b)};wc.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};wc.F=2;
function O(a){if(null!=a)if(null!=a&&(a.j&2||t===a.Cb))a=a.Y(null);else if(va(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.j&8388608||t===a.Pb))a:{a=G(a);for(var b=0;;){if(oc(a)){a=b+Ga(a);break a}a=K(a);b+=1}}else a=Ga(a);else a=0;return a}function zc(a,b,c){for(;;){if(null==a)return c;if(0===b)return G(a)?I(a):c;if(pc(a))return Na(a,b,c);if(G(a))a=K(a),--b;else return c}}
function rc(a){switch(arguments.length){case 2:return qc(arguments[0],arguments[1]);case 3:return R(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}
function qc(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.j&16||t===a.wb))return a.M(null,b);if(va(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.j&64||t===a.v)||null!=a&&(a.j&16777216||t===a.xb)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(G(a)){a=I(a);break a}throw Error("Index out of bounds");}if(pc(a)){a=Na(a,b);break a}if(G(a))a=K(a),--b;else throw Error("Index out of bounds");}return a}if(x(Ma,a))return Na(a,b);throw Error(["nth not supported on this type ",z.c(ya(null==a?null:a.constructor))].join(""));}
function R(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.j&16||t===a.wb))return a.la(null,b,c);if(va(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.j&64||t===a.v)||null!=a&&(a.j&16777216||t===a.xb))return 0>b?c:zc(a,b,c);if(x(Ma,a))return Na(a,b,c);throw Error(["nth not supported on this type ",z.c(ya(null==a?null:a.constructor))].join(""));}
var C=function C(a){switch(arguments.length){case 2:return C.g(arguments[0],arguments[1]);case 3:return C.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};C.g=function(a,b){return null==a?null:null!=a&&(a.j&256||t===a.Ib)?a.ja(null,b):va(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:x(Ra,a)?Sa(a,b):null};
C.l=function(a,b,c){return null!=a?null!=a&&(a.j&256||t===a.Ib)?a.K(null,b,c):va(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:x(Ra,a)?Sa(a,b,c):c:c};C.F=3;var Ac=function Ac(a){switch(arguments.length){case 3:return Ac.l(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ac.s(arguments[0],arguments[1],arguments[2],new H(c.slice(3),0,null))}};
Ac.l=function(a,b,c){if(null!=a&&(a.j&512||t===a.$b))a=a.ua(null,b,c);else if(null!=a)a=Ua(a,b,c);else{a=[b,c];b=[];for(c=0;;)if(c<a.length){var d=a[c],e=a[c+1],f=Bc(b,d);-1===f?(f=b,f.push(d),f.push(e)):b[f+1]=e;c+=2}else break;a=new v(null,b.length/2,b,null)}return a};Ac.s=function(a,b,c,d){for(;;)if(a=Ac.l(a,b,c),w(d))b=I(d),c=I(K(d)),d=K(K(d));else return a};Ac.C=function(a){var b=I(a),c=K(a);a=I(c);var d=K(c);c=I(d);d=K(d);return this.s(b,a,c,d)};Ac.F=3;
var Cc=function Cc(a){switch(arguments.length){case 1:return Cc.c(arguments[0]);case 2:return Cc.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Cc.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Cc.c=function(a){return a};Cc.g=function(a,b){return null==a?null:Xa(a,b)};Cc.s=function(a,b,c){for(;;){if(null==a)return null;a=Cc.g(a,b);if(w(c))b=I(c),c=K(c);else return a}};
Cc.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};Cc.F=2;function Dc(a,b){this.o=a;this.meta=b;this.j=393217;this.A=0}h=Dc.prototype;h.S=function(){return this.meta};h.U=function(a,b){return new Dc(this.o,b)};
h.call=function(a){switch(arguments.length-1){case 0:return this.B();case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.I(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Ja(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.Ka(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.xa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.ya(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Aa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ba(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ca(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Da(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Fa(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Ha(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:var b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],f=arguments[5],g=arguments[6],k=arguments[7],l=arguments[8],m=arguments[9],n=arguments[10],p=arguments[11],r=arguments[12],u=arguments[13],B=arguments[14],D=arguments[15],
F=arguments[16],S=arguments[17],W=arguments[18],da=arguments[19],ta=arguments[20],Ka=arguments[21];return Ec.Hb?Ec.Hb(this.o,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W,da,ta,Ka):Ec.call(null,this.o,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W,da,ta,Ka);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};h.B=function(){return this.o.B?this.o.B():this.o.call(null)};
h.c=function(a){return this.o.c?this.o.c(a):this.o.call(null,a)};h.g=function(a,b){return this.o.g?this.o.g(a,b):this.o.call(null,a,b)};h.l=function(a,b,c){return this.o.l?this.o.l(a,b,c):this.o.call(null,a,b,c)};h.I=function(a,b,c,d){return this.o.I?this.o.I(a,b,c,d):this.o.call(null,a,b,c,d)};h.ia=function(a,b,c,d,e){return this.o.ia?this.o.ia(a,b,c,d,e):this.o.call(null,a,b,c,d,e)};h.Ia=function(a,b,c,d,e,f){return this.o.Ia?this.o.Ia(a,b,c,d,e,f):this.o.call(null,a,b,c,d,e,f)};
h.Ja=function(a,b,c,d,e,f,g){return this.o.Ja?this.o.Ja(a,b,c,d,e,f,g):this.o.call(null,a,b,c,d,e,f,g)};h.Ka=function(a,b,c,d,e,f,g,k){return this.o.Ka?this.o.Ka(a,b,c,d,e,f,g,k):this.o.call(null,a,b,c,d,e,f,g,k)};h.La=function(a,b,c,d,e,f,g,k,l){return this.o.La?this.o.La(a,b,c,d,e,f,g,k,l):this.o.call(null,a,b,c,d,e,f,g,k,l)};h.xa=function(a,b,c,d,e,f,g,k,l,m){return this.o.xa?this.o.xa(a,b,c,d,e,f,g,k,l,m):this.o.call(null,a,b,c,d,e,f,g,k,l,m)};
h.ya=function(a,b,c,d,e,f,g,k,l,m,n){return this.o.ya?this.o.ya(a,b,c,d,e,f,g,k,l,m,n):this.o.call(null,a,b,c,d,e,f,g,k,l,m,n)};h.za=function(a,b,c,d,e,f,g,k,l,m,n,p){return this.o.za?this.o.za(a,b,c,d,e,f,g,k,l,m,n,p):this.o.call(null,a,b,c,d,e,f,g,k,l,m,n,p)};h.Aa=function(a,b,c,d,e,f,g,k,l,m,n,p,r){return this.o.Aa?this.o.Aa(a,b,c,d,e,f,g,k,l,m,n,p,r):this.o.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r)};
h.Ba=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u){return this.o.Ba?this.o.Ba(a,b,c,d,e,f,g,k,l,m,n,p,r,u):this.o.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u)};h.Ca=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B){return this.o.Ca?this.o.Ca(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B):this.o.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,B)};h.Da=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D){return this.o.Da?this.o.Da(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D):this.o.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D)};
h.Ea=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F){return this.o.Ea?this.o.Ea(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F):this.o.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F)};h.Fa=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S){return this.o.Fa?this.o.Fa(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S):this.o.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S)};
h.Ga=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W){return this.o.Ga?this.o.Ga(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W):this.o.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W)};h.Ha=function(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W,da){return this.o.Ha?this.o.Ha(a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W,da):this.o.call(null,a,b,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W,da)};function Fc(a,b){return"function"==q(a)?new Dc(a,b):null==a?null:gb(a,b)}
function Gc(a){return null!=a&&(null!=a?a.j&131072||t===a.Lb||(a.j?0:x(eb,a)):x(eb,a))?fb(a):null}function Hc(a){return null==a?!1:null!=a?a.j&4096||t===a.kc?!0:a.j?!1:x($a,a):x($a,a)}function Ic(a){return null!=a?a.j&16777216||t===a.xb?!0:a.j?!1:x(qb,a):x(qb,a)}function Jc(a){return null==a?!1:null!=a?a.j&1024||t===a.hc?!0:a.j?!1:x(Wa,a):x(Wa,a)}function Kc(a){return null!=a?a.j&67108864||t===a.jc?!0:a.j?!1:x(sb,a):x(sb,a)}
function Lc(a){return null!=a?a.j&16384||t===a.lc?!0:a.j?!1:x(cb,a):x(cb,a)}function Mc(a){return null!=a?a.A&512||t===a.ac?!0:!1:!1}function Nc(a,b,c,d,e){for(;0!==e;)c[d]=a[b],d+=1,--e,b+=1}var Oc={};function Pc(a){return null==a?!1:!1===a?!1:!0}function Qc(a,b){return C.l(a,b,Oc)===Oc?!1:!0}
function Rc(a,b){if(a===b)return 0;if(null==a)return-1;if(null==b)return 1;if("number"===typeof a){if("number"===typeof b)return fa(a,b);throw Error(["Cannot compare ",z.c(a)," to ",z.c(b)].join(""));}if(null!=a?a.A&2048||t===a.Wa||(a.A?0:x(Ab,a)):x(Ab,a))return Bb(a,b);if("string"!==typeof a&&!va(a)&&!0!==a&&!1!==a||(null==a?null:a.constructor)!==(null==b?null:b.constructor))throw Error(["Cannot compare ",z.c(a)," to ",z.c(b)].join(""));return fa(a,b)}
function Sc(a,b){var c=O(a),d=O(b);if(c<d)a=-1;else if(c>d)a=1;else if(0===c)a=0;else a:for(d=0;;){var e=Rc(qc(a,d),qc(b,d));if(0===e&&d+1<c)d+=1;else{a=e;break a}}return a}function Tc(a){return M.g(a,Rc)?Rc:function(b,c){var d=a.g?a.g(b,c):a.call(null,b,c);return"number"===typeof d?d:w(d)?-1:w(a.g?a.g(c,b):a.call(null,c,b))?1:0}}function Uc(a,b){return G(b)?(b=Vc.c?Vc.c(b):Vc.call(null,b),ha(b,Tc(a)),G(b)):J}
function Wc(){return Uc(function(a,b){a=I.c?I.c(a):I.call(null,a);b=I.c?I.c(b):I.call(null,b);var c=Tc(Rc);return c.g?c.g(a,b):c.call(null,a,b)},Xc)}function qe(a){switch(arguments.length){case 2:return Yc(arguments[0],arguments[1]);case 3:return Zc(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function Yc(a,b){var c=G(b);return c?(b=I(c),c=K(c),Ca?Ca(a,b,c):Da.call(null,a,b,c)):a.B?a.B():a.call(null)}
function Zc(a,b,c){for(c=G(c);;)if(c){var d=I(c);b=a.g?a.g(b,d):a.call(null,b,d);if(jc(b))return db(b);c=K(c)}else return b}function $c(a,b){a=Jb(a);if(w(a.ea()))for(var c=a.next();;)if(a.ea()){var d=a.next();c=b.g?b.g(c,d):b.call(null,c,d);if(jc(c))return db(c)}else return c;else return b.B?b.B():b.call(null)}function ad(a,b,c){for(a=Jb(a);;)if(a.ea()){var d=a.next();c=b.g?b.g(c,d):b.call(null,c,d);if(jc(c))return db(c)}else return c}
function Da(a){switch(arguments.length){case 2:return bd(arguments[0],arguments[1]);case 3:return Ca(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function bd(a,b){return null!=b&&(b.j&524288||t===b.Nb)?b.ca(null,a):va(b)?lc(b,a):"string"===typeof b?lc(b,a):x(hb,b)?ib(b,a):Zb(b)?$c(b,a):Yc(a,b)}
function Ca(a,b,c){return null!=c&&(c.j&524288||t===c.Nb)?c.da(null,a,b):va(c)?mc(c,a,b):"string"===typeof c?mc(c,a,b):x(hb,c)?ib(c,a,b):Zb(c)?ad(c,a,b):Zc(a,b,c)}function cd(a,b,c){return null!=c?lb(c,a,b):b}function dd(a){return a}function ed(a,b,c,d){a=a.c?a.c(b):a.call(null,b);c=Ca(a,c,d);return a.c?a.c(c):a.call(null,c)}function fd(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}
function gd(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}function hd(a){return 0>a}var z=function z(a){switch(arguments.length){case 0:return z.B();case 1:return z.c(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return z.s(arguments[0],new H(c.slice(1),0,null))}};z.B=function(){return""};z.c=function(a){return null==a?"":[a].join("")};
z.s=function(a,b){for(a=new ja(z.c(a));;)if(w(b))a=a.append(z.c(I(b))),b=K(b);else return a.toString()};z.C=function(a){var b=I(a);a=K(a);return this.s(b,a)};z.F=1;function tc(a,b){if(Ic(b))if(oc(a)&&oc(b)&&O(a)!==O(b))a=!1;else a:for(a=G(a),b=G(b);;){if(null==a){a=null==b;break a}if(null!=b&&M.g(I(a),I(b)))a=K(a),b=K(b);else{a=!1;break a}}else a=null;return Pc(a)}function yc(a,b,c,d,e){this.meta=a;this.first=b;this.rest=c;this.count=d;this.u=e;this.j=65937646;this.A=8192}h=yc.prototype;
h.toString=function(){return Lb(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.meta};h.ba=function(){return 1===this.count?null:this.rest};h.Y=function(){return this.count};h.T=function(){var a=this.u;return null!=a?a:this.u=a=ec(this)};h.R=function(a,b){return tc(this,b)};
h.V=function(){return gb(J,this.meta)};h.ca=function(a,b){return Yc(b,this)};h.da=function(a,b,c){return Zc(b,c,this)};h.W=function(){return this.first};h.Za=function(){return 1===this.count?J:this.rest};h.N=function(){return this};h.U=function(a,b){return b===this.meta?this:new yc(b,this.first,this.rest,this.count,this.u)};h.X=function(a,b){return new yc(this.meta,b,this,this.count+1,null)};yc.prototype[za]=function(){return cc(this)};function id(a){this.meta=a;this.j=65937614;this.A=8192}h=id.prototype;
h.toString=function(){return Lb(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.meta};h.ba=function(){return null};h.Y=function(){return 0};h.T=function(){return fc};h.R=function(a,b){return(null!=b?b.j&33554432||t===b.fc||(b.j?0:x(rb,b)):x(rb,b))||Ic(b)?null==G(b):!1};h.V=function(){return this};
h.ca=function(a,b){return Yc(b,this)};h.da=function(a,b,c){return Zc(b,c,this)};h.W=function(){return null};h.Za=function(){return J};h.N=function(){return null};h.U=function(a,b){return b===this.meta?this:new id(b)};h.X=function(a,b){return new yc(this.meta,b,null,1,null)};var J=new id(null);id.prototype[za]=function(){return cc(this)};function xg(a){return(null!=a?a.j&134217728||t===a.oc||(a.j?0:x(ab,a)):x(ab,a))?(a=bb(a))?a:J:Ca(wc,J,a)}
function jd(a,b,c,d){this.meta=a;this.first=b;this.rest=c;this.u=d;this.j=65929452;this.A=8192}h=jd.prototype;h.toString=function(){return Lb(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.meta};h.ba=function(){return null==this.rest?null:G(this.rest)};h.T=function(){var a=this.u;return null!=a?a:this.u=a=ec(this)};h.R=function(a,b){return tc(this,b)};h.V=function(){return J};
h.ca=function(a,b){return Yc(b,this)};h.da=function(a,b,c){return Zc(b,c,this)};h.W=function(){return this.first};h.Za=function(){return null==this.rest?J:this.rest};h.N=function(){return this};h.U=function(a,b){return b===this.meta?this:new jd(b,this.first,this.rest,this.u)};h.X=function(a,b){return new jd(null,b,this,null)};jd.prototype[za]=function(){return cc(this)};
function Q(a,b){return null==b?new yc(null,a,null,1,null):null!=b&&(b.j&64||t===b.v)?new jd(null,a,b,null):new jd(null,a,G(b),null)}function kd(a,b){if(a.na===b.na)return 0;if(w(wa(a.ha)?b.ha:!1))return-1;if(w(a.ha)){if(wa(b.ha))return 1;var c=fa(a.ha,b.ha);return 0===c?fa(a.name,b.name):c}return fa(a.name,b.name)}function E(a,b,c,d){this.ha=a;this.name=b;this.na=c;this.Pa=d;this.j=2153775105;this.A=4096}h=E.prototype;h.toString=function(){return[":",z.c(this.na)].join("")};
h.R=function(a,b){return b instanceof E?this.na===b.na:!1};h.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};h.c=function(a){return C.g(a,this)};h.g=function(a,b){return C.l(a,this,b)};
h.T=function(){var a=this.Pa;return null!=a?a:this.Pa=a=Vb(Qb(this.name),Tb(this.ha))+2654435769|0};h.P=function(a,b){return tb(b,[":",z.c(this.na)].join(""))};function ld(a){if(null!=a&&(a.A&4096||t===a.Mb))return a.ha;throw Error(["Doesn't support namespace: ",z.c(a)].join(""));}var md=function md(a){switch(arguments.length){case 1:return md.c(arguments[0]);case 2:return md.g(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};
md.c=function(a){if(a instanceof E)return a;if(a instanceof Xb)return new E(ld(a),nd.c?nd.c(a):nd.call(null,a),a.str,null);if(M.g("/",a))return new E(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new E(b[0],b[1],a,null):new E(null,b[0],a,null)}return null};
md.g=function(a,b){a=a instanceof E?nd.c?nd.c(a):nd.call(null,a):a instanceof Xb?nd.c?nd.c(a):nd.call(null,a):a;b=b instanceof E?nd.c?nd.c(b):nd.call(null,b):b instanceof Xb?nd.c?nd.c(b):nd.call(null,b):b;return new E(a,b,[w(a)?[z.c(a),"/"].join(""):null,z.c(b)].join(""),null)};md.F=2;function od(a,b,c){this.meta=a;this.bb=b;this.D=null;this.u=c;this.j=32374988;this.A=1}h=od.prototype;h.toString=function(){return Lb(this)};
function pd(a){null!=a.bb&&(a.D=a.bb.B?a.bb.B():a.bb.call(null),a.bb=null);return a.D}h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.meta};h.ba=function(){this.N(null);return null==this.D?null:K(this.D)};h.T=function(){var a=this.u;return null!=a?a:this.u=a=ec(this)};h.R=function(a,b){return tc(this,b)};
h.V=function(){return gb(J,this.meta)};h.ca=function(a,b){return Yc(b,this)};h.da=function(a,b,c){return Zc(b,c,this)};h.W=function(){this.N(null);return null==this.D?null:I(this.D)};h.Za=function(){this.N(null);return null!=this.D?ac(this.D):J};h.N=function(){pd(this);if(null==this.D)return null;for(var a=this.D;;)if(a instanceof od)a=pd(a);else return this.D=a,G(this.D)};h.U=function(a,b){var c=this;return b===this.meta?c:new od(b,function(){return c.N(null)},this.u)};
h.X=function(a,b){return Q(b,this)};od.prototype[za]=function(){return cc(this)};function qd(a){this.nb=a;this.end=0;this.j=2;this.A=0}qd.prototype.add=function(a){this.nb[this.end]=a;return this.end+=1};qd.prototype.chunk=function(){var a=new rd(this.nb,0,this.end);this.nb=null;return a};qd.prototype.Y=function(){return this.end};function rd(a,b,c){this.h=a;this.off=b;this.end=c;this.j=524306;this.A=0}h=rd.prototype;h.Y=function(){return this.end-this.off};
h.M=function(a,b){return this.h[this.off+b]};h.la=function(a,b,c){return 0<=b&&b<this.end-this.off?this.h[this.off+b]:c};h.ub=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new rd(this.h,this.off+1,this.end)};h.ca=function(a,b){return nc(this.h,b,this.h[this.off],this.off+1)};h.da=function(a,b,c){return nc(this.h,b,c,this.off)};function sd(a,b,c,d){this.chunk=a;this.qa=b;this.meta=c;this.u=d;this.j=31850732;this.A=1536}h=sd.prototype;h.toString=function(){return Lb(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.meta};h.ba=function(){return 1<Ga(this.chunk)?new sd(Cb(this.chunk),this.qa,null,null):null==this.qa?null:pb(this.qa)};h.T=function(){var a=this.u;return null!=a?a:this.u=a=ec(this)};
h.R=function(a,b){return tc(this,b)};h.V=function(){return J};h.W=function(){return Na(this.chunk,0)};h.Za=function(){return 1<Ga(this.chunk)?new sd(Cb(this.chunk),this.qa,null,null):null==this.qa?J:this.qa};h.N=function(){return this};h.ob=function(){return this.chunk};h.ib=function(){return null==this.qa?J:this.qa};h.U=function(a,b){return b===this.meta?this:new sd(this.chunk,this.qa,b,this.u)};h.X=function(a,b){return Q(b,this)};h.vb=function(){return null==this.qa?null:this.qa};
sd.prototype[za]=function(){return cc(this)};function td(a,b){return 0===Ga(a)?b:new sd(a,b,null,null)}function ud(a,b){a.add(b)}function Vc(a){var b=[];for(a=G(a);;)if(null!=a)b.push(I(a)),a=K(a);else return b}function vd(a,b){if(oc(b))return O(b);var c=0;for(b=G(b);;)if(null!=b&&c<a)c+=1,b=K(b);else return c}
var wd=function wd(a){if(null==a)return null;var c=K(a);return null==c?G(I(a)):Q(I(a),wd.c?wd.c(c):wd.call(null,c))},xd=function xd(a){switch(arguments.length){case 0:return xd.B();case 1:return xd.c(arguments[0]);case 2:return xd.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return xd.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};xd.B=function(){return new od(null,function(){return null},null)};
xd.c=function(a){return new od(null,function(){return a},null)};xd.g=function(a,b){return new od(null,function(){var c=G(a);return c?Mc(c)?td(Db(c),xd.g(Eb(c),b)):Q(I(c),xd.g(ac(c),b)):b},null)};xd.s=function(a,b,c){return function g(e,f){return new od(null,function(){var k=G(e);return k?Mc(k)?td(Db(k),g(Eb(k),f)):Q(I(k),g(ac(k),f)):w(f)?g(I(f),K(f)):null},null)}(xd.g(a,b),c)};xd.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};xd.F=2;
var yd=function yd(a){switch(arguments.length){case 0:return yd.B();case 1:return yd.c(arguments[0]);case 2:return yd.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return yd.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};yd.B=function(){return wb(xc)};yd.c=function(a){return a};yd.g=function(a,b){return xb(a,b)};yd.s=function(a,b,c){for(;;)if(a=xb(a,b),w(c))b=I(c),c=K(c);else return a};
yd.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};yd.F=2;
function zd(a,b,c){var d=G(c);if(0===b)return a.B?a.B():a.call(null);c=A(d);var e=Pa(d);if(1===b)return a.c?a.c(c):a.call(null,c);d=A(e);var f=Pa(e);if(2===b)return a.g?a.g(c,d):a.call(null,c,d);e=A(f);var g=Pa(f);if(3===b)return a.l?a.l(c,d,e):a.call(null,c,d,e);f=A(g);var k=Pa(g);if(4===b)return a.I?a.I(c,d,e,f):a.call(null,c,d,e,f);g=A(k);var l=Pa(k);if(5===b)return a.ia?a.ia(c,d,e,f,g):a.call(null,c,d,e,f,g);k=A(l);var m=Pa(l);if(6===b)return a.Ia?a.Ia(c,d,e,f,g,k):a.call(null,c,d,e,f,g,k);l=
A(m);var n=Pa(m);if(7===b)return a.Ja?a.Ja(c,d,e,f,g,k,l):a.call(null,c,d,e,f,g,k,l);m=A(n);var p=Pa(n);if(8===b)return a.Ka?a.Ka(c,d,e,f,g,k,l,m):a.call(null,c,d,e,f,g,k,l,m);n=A(p);var r=Pa(p);if(9===b)return a.La?a.La(c,d,e,f,g,k,l,m,n):a.call(null,c,d,e,f,g,k,l,m,n);p=A(r);var u=Pa(r);if(10===b)return a.xa?a.xa(c,d,e,f,g,k,l,m,n,p):a.call(null,c,d,e,f,g,k,l,m,n,p);r=A(u);var B=Pa(u);if(11===b)return a.ya?a.ya(c,d,e,f,g,k,l,m,n,p,r):a.call(null,c,d,e,f,g,k,l,m,n,p,r);u=A(B);var D=Pa(B);if(12===
b)return a.za?a.za(c,d,e,f,g,k,l,m,n,p,r,u):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u);B=A(D);var F=Pa(D);if(13===b)return a.Aa?a.Aa(c,d,e,f,g,k,l,m,n,p,r,u,B):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,B);D=A(F);var S=Pa(F);if(14===b)return a.Ba?a.Ba(c,d,e,f,g,k,l,m,n,p,r,u,B,D):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,B,D);F=A(S);var W=Pa(S);if(15===b)return a.Ca?a.Ca(c,d,e,f,g,k,l,m,n,p,r,u,B,D,F):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F);S=A(W);var da=Pa(W);if(16===b)return a.Da?a.Da(c,d,e,f,g,k,l,m,n,p,r,u,B,
D,F,S):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S);W=A(da);var ta=Pa(da);if(17===b)return a.Ea?a.Ea(c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W);da=A(ta);var Ka=Pa(ta);if(18===b)return a.Fa?a.Fa(c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W,da):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W,da);ta=A(Ka);Ka=Pa(Ka);if(19===b)return a.Ga?a.Ga(c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W,da,ta):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W,da,ta);var fg=A(Ka);Pa(Ka);if(20===b)return a.Ha?
a.Ha(c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W,da,ta,fg):a.call(null,c,d,e,f,g,k,l,m,n,p,r,u,B,D,F,S,W,da,ta,fg);throw Error("Only up to 20 arguments supported on functions");}function Ad(a){return null!=a&&(a.j&128||t===a.Ya)?a.ba():G(ac(a))}function Bd(a,b,c){return null==c?a.c?a.c(b):a.call(a,b):Cd(a,b,A(c),Ad(c))}function Cd(a,b,c,d){return null==d?a.g?a.g(b,c):a.call(a,b,c):Dd(a,b,c,A(d),Ad(d))}function Dd(a,b,c,d,e){return null==e?a.l?a.l(b,c,d):a.call(a,b,c,d):Ed(a,b,c,d,A(e),Ad(e))}
function Ed(a,b,c,d,e,f){if(null==f)return a.I?a.I(b,c,d,e):a.call(a,b,c,d,e);var g=A(f),k=K(f);if(null==k)return a.ia?a.ia(b,c,d,e,g):a.call(a,b,c,d,e,g);f=A(k);var l=K(k);if(null==l)return a.Ia?a.Ia(b,c,d,e,g,f):a.call(a,b,c,d,e,g,f);k=A(l);var m=K(l);if(null==m)return a.Ja?a.Ja(b,c,d,e,g,f,k):a.call(a,b,c,d,e,g,f,k);l=A(m);var n=K(m);if(null==n)return a.Ka?a.Ka(b,c,d,e,g,f,k,l):a.call(a,b,c,d,e,g,f,k,l);m=A(n);var p=K(n);if(null==p)return a.La?a.La(b,c,d,e,g,f,k,l,m):a.call(a,b,c,d,e,g,f,k,l,m);
n=A(p);var r=K(p);if(null==r)return a.xa?a.xa(b,c,d,e,g,f,k,l,m,n):a.call(a,b,c,d,e,g,f,k,l,m,n);p=A(r);var u=K(r);if(null==u)return a.ya?a.ya(b,c,d,e,g,f,k,l,m,n,p):a.call(a,b,c,d,e,g,f,k,l,m,n,p);r=A(u);var B=K(u);if(null==B)return a.za?a.za(b,c,d,e,g,f,k,l,m,n,p,r):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r);u=A(B);var D=K(B);if(null==D)return a.Aa?a.Aa(b,c,d,e,g,f,k,l,m,n,p,r,u):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u);B=A(D);var F=K(D);if(null==F)return a.Ba?a.Ba(b,c,d,e,g,f,k,l,m,n,p,r,u,B):a.call(a,b,c,d,
e,g,f,k,l,m,n,p,r,u,B);D=A(F);var S=K(F);if(null==S)return a.Ca?a.Ca(b,c,d,e,g,f,k,l,m,n,p,r,u,B,D):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u,B,D);F=A(S);var W=K(S);if(null==W)return a.Da?a.Da(b,c,d,e,g,f,k,l,m,n,p,r,u,B,D,F):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u,B,D,F);S=A(W);var da=K(W);if(null==da)return a.Ea?a.Ea(b,c,d,e,g,f,k,l,m,n,p,r,u,B,D,F,S):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u,B,D,F,S);W=A(da);var ta=K(da);if(null==ta)return a.Fa?a.Fa(b,c,d,e,g,f,k,l,m,n,p,r,u,B,D,F,S,W):a.call(a,b,c,d,e,g,f,k,l,m,
n,p,r,u,B,D,F,S,W);da=A(ta);var Ka=K(ta);if(null==Ka)return a.Ga?a.Ga(b,c,d,e,g,f,k,l,m,n,p,r,u,B,D,F,S,W,da):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u,B,D,F,S,W,da);ta=A(Ka);Ka=K(Ka);if(null==Ka)return a.Ha?a.Ha(b,c,d,e,g,f,k,l,m,n,p,r,u,B,D,F,S,W,da,ta):a.call(a,b,c,d,e,g,f,k,l,m,n,p,r,u,B,D,F,S,W,da,ta);b=[b,c,d,e,g,f,k,l,m,n,p,r,u,B,D,F,S,W,da,ta];for(c=Ka;;)if(c)b.push(A(c)),c=K(c);else break;return a.apply(a,b)}
function Ec(a){switch(arguments.length){case 2:return T(arguments[0],arguments[1]);case 3:return Fd(arguments[0],arguments[1],arguments[2]);case 4:return Gd(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Hd(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=arguments[0];d=arguments[1];var e=arguments[2],f=arguments[3],g=arguments[4];b=new H(b.slice(5),0,null);c.C?(b=wd(b),
d=Q(d,Q(e,Q(f,Q(g,b)))),e=c.F,b=4+vd(e-3,b),c=b<=e?zd(c,b,d):c.C(d)):c=Ed(c,d,e,f,g,wd(b));return c}}function T(a,b){if(a.C){var c=a.F,d=vd(c+1,b);return d<=c?zd(a,d,b):a.C(b)}b=G(b);return null==b?a.B?a.B():a.call(a):Bd(a,A(b),Ad(b))}function Fd(a,b,c){if(a.C){b=Q(b,c);var d=a.F;c=vd(d,c)+1;return c<=d?zd(a,c,b):a.C(b)}return Bd(a,b,G(c))}function Gd(a,b,c,d){return a.C?(b=Q(b,Q(c,d)),c=a.F,d=2+vd(c-1,d),d<=c?zd(a,d,b):a.C(b)):Cd(a,b,c,G(d))}
function Hd(a,b,c,d,e){return a.C?(b=Q(b,Q(c,Q(d,e))),c=a.F,e=3+vd(c-2,e),e<=c?zd(a,e,b):a.C(b)):Dd(a,b,c,d,G(e))}
function Id(){if("undefined"===typeof ka||"undefined"===typeof la||"undefined"===typeof ma)ma=function(a){this.Wb=a;this.j=393216;this.A=0},ma.prototype.U=function(a,b){return new ma(b)},ma.prototype.S=function(){return this.Wb},ma.prototype.ea=function(){return!1},ma.prototype.next=function(){return Error("No such element")},ma.prototype.remove=function(){return Error("Unsupported operation")},ma.mc=function(){return new U(null,1,5,V,[Jd],null)},ma.zb=!0,ma.kb="cljs.core/t_cljs$core19718",ma.Ub=
function(a){return tb(a,"cljs.core/t_cljs$core19718")};return new ma(Kd)}function Ld(a,b){for(;;){if(null==G(b))return!0;var c=I(b);c=a.c?a.c(c):a.call(null,c);if(w(c))b=K(b);else return!1}}function Md(a,b){for(;;)if(b=G(b)){var c=I(b);c=a.c?a.c(c):a.call(null,c);if(w(c))return c;b=K(b)}else return null}
function Nd(a){return function(){function b(g,k){return wa(a.g?a.g(g,k):a.call(null,g,k))}function c(g){return wa(a.c?a.c(g):a.call(null,g))}function d(){return wa(a.B?a.B():a.call(null))}var e=null,f=function(){function g(l,m,n){var p=null;if(2<arguments.length){p=0;for(var r=Array(arguments.length-2);p<r.length;)r[p]=arguments[p+2],++p;p=new H(r,0,null)}return k.call(this,l,m,p)}function k(l,m,n){return wa(Gd(a,l,m,n))}g.F=2;g.C=function(l){var m=I(l);l=K(l);var n=I(l);l=ac(l);return k(m,n,l)};
g.s=k;return g}();e=function(g,k,l){switch(arguments.length){case 0:return d.call(this);case 1:return c.call(this,g);case 2:return b.call(this,g,k);default:var m=null;if(2<arguments.length){m=0;for(var n=Array(arguments.length-2);m<n.length;)n[m]=arguments[m+2],++m;m=new H(n,0,null)}return f.s(g,k,m)}throw Error("Invalid arity: "+arguments.length);};e.F=2;e.C=f.C;e.B=d;e.c=c;e.g=b;e.s=f.s;return e}()}
function Od(a){return function(){function b(c){if(0<arguments.length)for(var d=0,e=Array(arguments.length-0);d<e.length;)e[d]=arguments[d+0],++d;return a}b.F=0;b.C=function(c){G(c);return a};b.s=function(){return a};return b}()}function Pd(a){this.state=a;this.Bb=this.Zb=this.meta=null;this.A=16386;this.j=6455296}Pd.prototype.R=function(a,b){return this===b};Pd.prototype.pb=function(){return this.state};Pd.prototype.S=function(){return this.meta};
Pd.prototype.T=function(){return this[ba]||(this[ba]=++ca)};
function Qd(a,b){if(a instanceof Pd){var c=a.Zb;if(null!=c&&!w(c.c?c.c(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;if(null!=a.Bb)a:for(var d=G(a.Bb),e=null,f=0,g=0;;)if(g<f){var k=e.M(null,g),l=R(k,0,null);k=R(k,1,null);k.I?k.I(l,a,c,b):k.call(null,l,a,c,b);g+=1}else if(d=G(d))Mc(d)?(e=Db(d),d=Eb(d),l=e,f=O(e),e=l):(e=I(d),l=R(e,0,null),k=R(e,1,null),k.I?k.I(l,a,c,b):k.call(null,l,a,c,b),d=K(d),e=null,f=0),g=0;else break a;return b}return Fb(a,b)}
var Rd=function Rd(a){switch(arguments.length){case 2:return Rd.g(arguments[0],arguments[1]);case 3:return Rd.l(arguments[0],arguments[1],arguments[2]);case 4:return Rd.I(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Rd.s(arguments[0],arguments[1],arguments[2],arguments[3],new H(c.slice(4),0,null))}};
Rd.g=function(a,b){if(a instanceof Pd){var c=a.state;b=b.c?b.c(c):b.call(null,c);a=Qd(a,b)}else a=Gb(a,b);return a};Rd.l=function(a,b,c){if(a instanceof Pd){var d=a.state;b=b.g?b.g(d,c):b.call(null,d,c);a=Qd(a,b)}else a=Gb(a,b,c);return a};Rd.I=function(a,b,c,d){if(a instanceof Pd){var e=a.state;b=b.l?b.l(e,c,d):b.call(null,e,c,d);a=Qd(a,b)}else a=Gb(a,b,c,d);return a};Rd.s=function(a,b,c,d,e){return a instanceof Pd?Qd(a,Hd(b,a.state,c,d,e)):Gb(a,b,c,d,e)};
Rd.C=function(a){var b=I(a),c=K(a);a=I(c);var d=K(c);c=I(d);var e=K(d);d=I(e);e=K(e);return this.s(b,a,c,d,e)};Rd.F=4;
function Sd(a){return function(){function b(g,k,l){g=a.c?a.c(g):a.call(null,g);w(g)?(k=a.c?a.c(k):a.call(null,k),l=w(k)?a.c?a.c(l):a.call(null,l):k):l=g;return Pc(l)}function c(g,k){g=a.c?a.c(g):a.call(null,g);k=w(g)?a.c?a.c(k):a.call(null,k):g;return Pc(k)}function d(g){return Pc(a.c?a.c(g):a.call(null,g))}var e=null,f=function(){function g(l,m,n,p){var r=null;if(3<arguments.length){r=0;for(var u=Array(arguments.length-3);r<u.length;)u[r]=arguments[r+3],++r;r=new H(u,0,null)}return k.call(this,l,
m,n,r)}function k(l,m,n,p){l=e.l(l,m,n);p=w(l)?Ld(a,p):l;return Pc(p)}g.F=3;g.C=function(l){var m=I(l);l=K(l);var n=I(l);l=K(l);var p=I(l);l=ac(l);return k(m,n,p,l)};g.s=k;return g}();e=function(g,k,l,m){switch(arguments.length){case 0:return!0;case 1:return d.call(this,g);case 2:return c.call(this,g,k);case 3:return b.call(this,g,k,l);default:var n=null;if(3<arguments.length){n=0;for(var p=Array(arguments.length-3);n<p.length;)p[n]=arguments[n+3],++n;n=new H(p,0,null)}return f.s(g,k,l,n)}throw Error("Invalid arity: "+
arguments.length);};e.F=3;e.C=f.C;e.B=function(){return!0};e.c=d;e.g=c;e.l=b;e.s=f.s;return e}()}
function Td(a,b){return function(){function c(k,l,m){return Pc(function(){var n=a.c?a.c(k):a.call(null,k);return w(n)?(n=a.c?a.c(l):a.call(null,l),w(n)?(n=a.c?a.c(m):a.call(null,m),w(n)?(n=b.c?b.c(k):b.call(null,k),w(n)?(n=b.c?b.c(l):b.call(null,l),w(n)?b.c?b.c(m):b.call(null,m):n):n):n):n):n}())}function d(k,l){return Pc(function(){var m=a.c?a.c(k):a.call(null,k);return w(m)?(m=a.c?a.c(l):a.call(null,l),w(m)?(m=b.c?b.c(k):b.call(null,k),w(m)?b.c?b.c(l):b.call(null,l):m):m):m}())}function e(k){var l=
a.c?a.c(k):a.call(null,k);k=w(l)?b.c?b.c(k):b.call(null,k):l;return Pc(k)}var f=null,g=function(){function k(m,n,p,r){var u=null;if(3<arguments.length){u=0;for(var B=Array(arguments.length-3);u<B.length;)B[u]=arguments[u+3],++u;u=new H(B,0,null)}return l.call(this,m,n,p,u)}function l(m,n,p,r){return Pc(function(){var u=f.l(m,n,p);return w(u)?Ld(function(B){var D=a.c?a.c(B):a.call(null,B);return w(D)?b.c?b.c(B):b.call(null,B):D},r):u}())}k.F=3;k.C=function(m){var n=I(m);m=K(m);var p=I(m);m=K(m);var r=
I(m);m=ac(m);return l(n,p,r,m)};k.s=l;return k}();f=function(k,l,m,n){switch(arguments.length){case 0:return!0;case 1:return e.call(this,k);case 2:return d.call(this,k,l);case 3:return c.call(this,k,l,m);default:var p=null;if(3<arguments.length){p=0;for(var r=Array(arguments.length-3);p<r.length;)r[p]=arguments[p+3],++p;p=new H(r,0,null)}return g.s(k,l,m,p)}throw Error("Invalid arity: "+arguments.length);};f.F=3;f.C=g.C;f.B=function(){return!0};f.c=e;f.g=d;f.l=c;f.s=g.s;return f}()}
function Ud(a,b){return function(){function c(k,l,m){var n=a.c?a.c(k):a.call(null,k);if(w(n))return n;n=a.c?a.c(l):a.call(null,l);if(w(n))return n;n=a.c?a.c(m):a.call(null,m);if(w(n))return n;k=b.c?b.c(k):b.call(null,k);if(w(k))return k;l=b.c?b.c(l):b.call(null,l);return w(l)?l:b.c?b.c(m):b.call(null,m)}function d(k,l){var m=a.c?a.c(k):a.call(null,k);if(w(m))return m;m=a.c?a.c(l):a.call(null,l);if(w(m))return m;k=b.c?b.c(k):b.call(null,k);return w(k)?k:b.c?b.c(l):b.call(null,l)}function e(k){var l=
a.c?a.c(k):a.call(null,k);return w(l)?l:b.c?b.c(k):b.call(null,k)}var f=null,g=function(){function k(m,n,p,r){var u=null;if(3<arguments.length){u=0;for(var B=Array(arguments.length-3);u<B.length;)B[u]=arguments[u+3],++u;u=new H(B,0,null)}return l.call(this,m,n,p,u)}function l(m,n,p,r){m=f.l(m,n,p);return w(m)?m:Md(function(u){var B=a.c?a.c(u):a.call(null,u);return w(B)?B:b.c?b.c(u):b.call(null,u)},r)}k.F=3;k.C=function(m){var n=I(m);m=K(m);var p=I(m);m=K(m);var r=I(m);m=ac(m);return l(n,p,r,m)};k.s=
l;return k}();f=function(k,l,m,n){switch(arguments.length){case 0:return null;case 1:return e.call(this,k);case 2:return d.call(this,k,l);case 3:return c.call(this,k,l,m);default:var p=null;if(3<arguments.length){p=0;for(var r=Array(arguments.length-3);p<r.length;)r[p]=arguments[p+3],++p;p=new H(r,0,null)}return g.s(k,l,m,p)}throw Error("Invalid arity: "+arguments.length);};f.F=3;f.C=g.C;f.B=function(){return null};f.c=e;f.g=d;f.l=c;f.s=g.s;return f}()}
var Xd=function Xd(a){switch(arguments.length){case 1:return Xd.c(arguments[0]);case 2:return Xd.g(arguments[0],arguments[1]);case 3:return Xd.l(arguments[0],arguments[1],arguments[2]);case 4:return Xd.I(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Xd.s(arguments[0],arguments[1],arguments[2],arguments[3],new H(c.slice(4),0,null))}};
Xd.c=function(a){return function(b){return function(){function c(k,l){l=a.c?a.c(l):a.call(null,l);return b.g?b.g(k,l):b.call(null,k,l)}function d(k){return b.c?b.c(k):b.call(null,k)}function e(){return b.B?b.B():b.call(null)}var f=null,g=function(){function k(m,n,p){var r=null;if(2<arguments.length){r=0;for(var u=Array(arguments.length-2);r<u.length;)u[r]=arguments[r+2],++r;r=new H(u,0,null)}return l.call(this,m,n,r)}function l(m,n,p){n=Fd(a,n,p);return b.g?b.g(m,n):b.call(null,m,n)}k.F=2;k.C=function(m){var n=
I(m);m=K(m);var p=I(m);m=ac(m);return l(n,p,m)};k.s=l;return k}();f=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new H(p,0,null)}return g.s(k,l,n)}throw Error("Invalid arity: "+arguments.length);};f.F=2;f.C=g.C;f.B=e;f.c=d;f.g=c;f.s=g.s;return f}()}};
Xd.g=function(a,b){return new od(null,function(){var c=G(b);if(c){if(Mc(c)){for(var d=Db(c),e=O(d),f=new qd(Array(e)),g=0;;)if(g<e)ud(f,function(){var k=Na(d,g);return a.c?a.c(k):a.call(null,k)}()),g+=1;else break;return td(f.chunk(),Xd.g(a,Eb(c)))}return Q(function(){var k=I(c);return a.c?a.c(k):a.call(null,k)}(),Xd.g(a,ac(c)))}return null},null)};
Xd.l=function(a,b,c){return new od(null,function(){var d=G(b),e=G(c);if(d&&e){var f=I(d);var g=I(e);f=a.g?a.g(f,g):a.call(null,f,g);d=Q(f,Xd.l(a,ac(d),ac(e)))}else d=null;return d},null)};Xd.I=function(a,b,c,d){return new od(null,function(){var e=G(b),f=G(c),g=G(d);if(e&&f&&g){var k=I(e);var l=I(f),m=I(g);k=a.l?a.l(k,l,m):a.call(null,k,l,m);e=Q(k,Xd.I(a,ac(e),ac(f),ac(g)))}else e=null;return e},null)};
Xd.s=function(a,b,c,d,e){return Xd.g(function(f){return T(a,f)},function k(g){return new od(null,function(){var l=Xd.g(G,g);return Ld(dd,l)?Q(Xd.g(I,l),k(Xd.g(ac,l))):null},null)}(wc.s(e,d,uc([c,b]))))};Xd.C=function(a){var b=I(a),c=K(a);a=I(c);var d=K(c);c=I(d);var e=K(d);d=I(e);e=K(e);return this.s(b,a,c,d,e)};Xd.F=4;function Yd(a,b){return new od(null,function(){if(0<a){var c=G(b);return c?Q(I(c),Yd(a-1,ac(c))):null}return null},null)}
function Zd(a,b){return new od(null,function(){a:for(var c=a,d=b;;)if(d=G(d),0<c&&d)--c,d=ac(d);else break a;return d},null)}var $d={};function ae(a,b,c,d,e){this.meta=a;this.f=b;this.sb=c;this.lb=d;this.next=e;this.j=26083532;this.A=1}h=ae.prototype;h.toString=function(){return Lb(this)};h.S=function(){return this.meta};h.ba=function(){return this.Za(null)};h.V=function(){return J};
h.ca=function(a,b){a=this.W(null);var c=this.f.c?this.f.c(a):this.f.call(null,a);for(a=b.g?b.g(a,c):b.call(null,a,c);;){if(jc(a))return db(a);c=this.f.c?this.f.c(c):this.f.call(null,c);a=b.g?b.g(a,c):b.call(null,a,c)}};h.da=function(a,b,c){a=this.W(null);for(c=b.g?b.g(c,a):b.call(null,c,a);;){if(jc(c))return db(c);a=this.f.c?this.f.c(a):this.f.call(null,a);c=b.g?b.g(c,a):b.call(null,c,a)}};h.W=function(){$d===this.lb&&(this.lb=this.f.c?this.f.c(this.sb):this.f.call(null,this.sb));return this.lb};
h.Za=function(){null==this.next&&(this.next=new ae(null,this.f,this.W(null),$d,null));return this.next};h.N=function(){return this};h.U=function(a,b){return b===this.meta?this:new ae(b,this.f,this.sb,this.lb,this.next)};h.X=function(a,b){return Q(b,this)};function be(a,b){return new ae(null,a,null,b,null)}function ce(a,b){return T(xd,Fd(Xd,a,b))}
function de(a,b){return new od(null,function(){var c=G(b);if(c){if(Mc(c)){for(var d=Db(c),e=O(d),f=new qd(Array(e)),g=0;;)if(g<e){var k=Na(d,g);k=a.c?a.c(k):a.call(null,k);w(k)&&(k=Na(d,g),f.add(k));g+=1}else break;return td(f.chunk(),de(a,Eb(c)))}d=I(c);c=ac(c);return w(a.c?a.c(d):a.call(null,d))?Q(d,de(a,c)):de(a,c)}return null},null)}function ee(a,b){return de(Nd(a),b)}
var fe=function fe(a){switch(arguments.length){case 0:return fe.B();case 1:return fe.c(arguments[0]);case 2:return fe.g(arguments[0],arguments[1]);case 3:return fe.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}};fe.B=function(){return xc};fe.c=function(a){return a};fe.g=function(a,b){return null!=a?null!=a&&(a.A&4||t===a.Db)?gb(yb(Ca(xb,wb(a),b)),Gc(a)):Ca(La,a,b):Ca(wc,a,b)};
fe.l=function(a,b,c){return null!=a&&(a.A&4||t===a.Db)?gb(yb(ed(b,yd,wb(a),c)),Gc(a)):ed(b,wc,a,c)};fe.F=3;function ge(a,b,c){return new od(null,function(){var d=G(c);if(d){var e=Yd(a,d);return a===O(e)?Q(e,ge(a,b,Zd(b,d))):null}return null},null)}function he(a,b){this.H=a;this.h=b}function ie(a){return new he(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}
function ke(a){a=a.m;return 32>a?0:a-1>>>5<<5}function le(a,b,c){for(;;){if(0===b)return c;var d=ie(a);d.h[0]=c;c=d;b-=5}}var me=function me(a,b,c,d){var f=new he(c.H,Aa(c.h)),g=a.m-1>>>b&31;5===b?f.h[g]=d:(c=c.h[g],null!=c?(b-=5,a=me.I?me.I(a,b,c,d):me.call(null,a,b,c,d)):a=le(null,b-5,d),f.h[g]=a);return f};function ne(a,b){if(b>=ke(a))return a.ga;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.h[b>>>a&31];a=d}else return c.h}
function oe(a,b){if(0<=b&&b<a.m)b=ne(a,b);else throw a=a.m,Error(["No item ",z.c(b)," in vector of length ",z.c(a)].join(""));return b}var pe=function pe(a,b,c,d,e){var g=new he(c.H,Aa(c.h));if(0===b)g.h[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.h[k];a=pe.ia?pe.ia(a,b,c,d,e):pe.call(null,a,b,c,d,e);g.h[k]=a}return g};function re(a,b,c){this.base=this.i=0;this.h=a;this.Yb=b;this.start=0;this.end=c}re.prototype.ea=function(){return this.i<this.end};
re.prototype.next=function(){32===this.i-this.base&&(this.h=ne(this.Yb,this.i),this.base+=32);var a=this.h[this.i&31];this.i+=1;return a};function se(a,b,c,d){return c<d?te(a,b,qc(a,c),c+1,d):b.B?b.B():b.call(null)}function te(a,b,c,d,e){var f=c;c=d;for(d=ne(a,d);;)if(c<e){var g=c&31;d=0===g?ne(a,c):d;g=d[g];f=b.g?b.g(f,g):b.call(null,f,g);if(jc(f))return db(f);c+=1}else return f}
function U(a,b,c,d,e,f){this.meta=a;this.m=b;this.shift=c;this.root=d;this.ga=e;this.u=f;this.j=167666463;this.A=139268}h=U.prototype;h.Xa=function(a,b){return 0<=b&&b<this.m?new ue(b,ne(this,b)[b&31]):null};h.toString=function(){return Lb(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.ja=function(a,b){return this.K(null,b,null)};h.K=function(a,b,c){return"number"===typeof b?this.la(null,b,c):c};
h.jb=function(a,b,c){a=0;for(var d=c;;)if(a<this.m){var e=ne(this,a);c=e.length;a:for(var f=0;;)if(f<c){var g=f+a,k=e[f];d=b.l?b.l(d,g,k):b.call(null,d,g,k);if(jc(d)){e=d;break a}f+=1}else{e=d;break a}if(jc(e))return db(e);a+=c;d=e}else return d};h.M=function(a,b){return oe(this,b)[b&31]};h.la=function(a,b,c){return 0<=b&&b<this.m?ne(this,b)[b&31]:c};
h.rb=function(a,b){if(0<=a&&a<this.m){if(ke(this)<=a){var c=Aa(this.ga);c[a&31]=b;return new U(this.meta,this.m,this.shift,this.root,c,null)}return new U(this.meta,this.m,this.shift,pe(this,this.shift,this.root,a,b),this.ga,null)}if(a===this.m)return this.X(null,b);throw Error(["Index ",z.c(a)," out of bounds  [0,",z.c(this.m),"]"].join(""));};h.ma=function(){var a=this.m;return new re(0<O(this)?ne(this,0):null,this,a)};h.S=function(){return this.meta};h.Y=function(){return this.m};
h.nc=function(){return 0<this.m?new je(this,this.m-1,null):null};h.T=function(){var a=this.u;return null!=a?a:this.u=a=ec(this)};h.R=function(a,b){if(b instanceof U)if(this.m===O(b))for(a=this.ma(null),b=b.ma(null);;)if(a.ea()){var c=a.next(),d=b.next();if(!M.g(c,d))return!1}else return!0;else return!1;else return tc(this,b)};h.Ra=function(){return new ve(this.m,this.shift,we.c?we.c(this.root):we.call(null,this.root),xe.c?xe.c(this.ga):xe.call(null,this.ga))};h.V=function(){return gb(xc,this.meta)};
h.ca=function(a,b){return se(this,b,0,this.m)};h.da=function(a,b,c){a=0;for(var d=c;;)if(a<this.m){var e=ne(this,a);c=e.length;a:for(var f=0;;)if(f<c){var g=e[f];d=b.g?b.g(d,g):b.call(null,d,g);if(jc(d)){e=d;break a}f+=1}else{e=d;break a}if(jc(e))return db(e);a+=c;d=e}else return d};h.ua=function(a,b,c){if("number"===typeof b)return this.rb(b,c);throw Error("Vector's key for assoc must be a number.");};
h.N=function(){if(0===this.m)return null;if(32>=this.m)return new H(this.ga,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.h[0];else{a=a.h;break a}}return ye?ye(this,a,0,0):ze.call(null,this,a,0,0)};h.U=function(a,b){return b===this.meta?this:new U(b,this.m,this.shift,this.root,this.ga,this.u)};
h.X=function(a,b){if(32>this.m-ke(this)){a=this.ga.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.ga[d],d+=1;else break;c[a]=b;return new U(this.meta,this.m+1,this.shift,this.root,c,null)}a=(c=this.m>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=ie(null),c.h[0]=this.root,d=le(null,this.shift,new he(null,this.ga)),c.h[1]=d):c=me(this,this.shift,this.root,new he(null,this.ga));return new U(this.meta,this.m+1,a,c,[b],null)};
h.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};h.c=function(a){return this.M(null,a)};h.g=function(a,b){return this.la(null,a,b)};
var V=new he(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),xc=new U(null,0,5,V,[],fc);U.prototype[za]=function(){return cc(this)};
function Ae(a){if(w(Be.c?Be.c(a):Be.call(null,a)))a=new U(null,2,5,V,[Ce.c?Ce.c(a):Ce.call(null,a),De.c?De.c(a):De.call(null,a)],null);else if(Lc(a))a=Fc(a,null);else if(va(a))a:{var b=a.length;if(32>b)a=new U(null,b,5,V,a,null);else for(var c=32,d=(new U(null,32,5,V,a.slice(0,32),null)).Ra(null);;)if(c<b){var e=c+1;d=yd.g(d,a[c]);c=e}else{a=yb(d);break a}}else a=yb(Ca(xb,wb(xc),a));return a}
function Ee(a,b,c,d,e){this.ka=a;this.node=b;this.i=c;this.off=d;this.meta=e;this.u=null;this.j=32375020;this.A=1536}h=Ee.prototype;h.toString=function(){return Lb(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.meta};h.ba=function(){if(this.off+1<this.node.length){var a=this.ka;var b=this.node,c=this.i,d=this.off+1;a=ye?ye(a,b,c,d):ze.call(null,a,b,c,d);return null==a?null:a}return this.vb()};
h.T=function(){var a=this.u;return null!=a?a:this.u=a=ec(this)};h.R=function(a,b){return tc(this,b)};h.V=function(){return J};h.ca=function(a,b){return se(this.ka,b,this.i+this.off,O(this.ka))};h.da=function(a,b,c){return te(this.ka,b,c,this.i+this.off,O(this.ka))};h.W=function(){return this.node[this.off]};h.Za=function(){if(this.off+1<this.node.length){var a=this.ka;var b=this.node,c=this.i,d=this.off+1;a=ye?ye(a,b,c,d):ze.call(null,a,b,c,d);return null==a?J:a}return this.ib(null)};h.N=function(){return this};
h.ob=function(){var a=this.node;return new rd(a,this.off,a.length)};h.ib=function(){var a=this.i+this.node.length;if(a<Ga(this.ka)){var b=this.ka,c=ne(this.ka,a);return ye?ye(b,c,a,0):ze.call(null,b,c,a,0)}return J};h.U=function(a,b){return b===this.meta?this:Fe?Fe(this.ka,this.node,this.i,this.off,b):ze.call(null,this.ka,this.node,this.i,this.off,b)};h.X=function(a,b){return Q(b,this)};
h.vb=function(){var a=this.i+this.node.length;if(a<Ga(this.ka)){var b=this.ka,c=ne(this.ka,a);return ye?ye(b,c,a,0):ze.call(null,b,c,a,0)}return null};Ee.prototype[za]=function(){return cc(this)};
function ze(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new Ee(b,oe(b,c),c,d,null);case 4:return ye(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Fe(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function ye(a,b,c,d){return new Ee(a,b,c,d,null)}function Fe(a,b,c,d,e){return new Ee(a,b,c,d,e)}
function Ge(a,b){return a===b.H?b:new he(a,Aa(b.h))}function we(a){return new he({},Aa(a.h))}function xe(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];Nc(a,0,b,0,a.length);return b}var He=function He(a,b,c,d){c=Ge(a.root.H,c);var f=a.m-1>>>b&31;if(5===b)a=d;else{var g=c.h[f];null!=g?(b-=5,a=He.I?He.I(a,b,g,d):He.call(null,a,b,g,d)):a=le(a.root.H,b-5,d)}c.h[f]=a;return c};
function ve(a,b,c,d){this.m=a;this.shift=b;this.root=c;this.ga=d;this.A=88;this.j=275}h=ve.prototype;
h.Ta=function(a,b){if(this.root.H){if(32>this.m-ke(this))this.ga[this.m&31]=b;else{a=new he(this.root.H,this.ga);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.ga=c;this.m>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=le(this.root.H,this.shift,a),this.root=new he(this.root.H,b),this.shift=c):this.root=He(this,this.shift,this.root,a)}this.m+=1;return this}throw Error("conj! after persistent!");};h.ab=function(){if(this.root.H){this.root.H=null;var a=this.m-ke(this),b=Array(a);Nc(this.ga,0,b,0,a);return new U(null,this.m,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
h.Sa=function(a,b,c){if("number"===typeof b)return Ie(this,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
function Ie(a,b,c){if(a.root.H){if(0<=b&&b<a.m){if(ke(a)<=b)a.ga[b&31]=c;else{var d=function k(f,g){g=Ge(a.root.H,g);if(0===f)g.h[b&31]=c;else{var l=b>>>f&31;f=k(f-5,g.h[l]);g.h[l]=f}return g}(a.shift,a.root);a.root=d}return a}if(b===a.m)return a.Ta(null,c);throw Error(["Index ",z.c(b)," out of bounds for TransientVector of length",z.c(a.m)].join(""));}throw Error("assoc! after persistent!");}h.Y=function(){if(this.root.H)return this.m;throw Error("count after persistent!");};
h.M=function(a,b){if(this.root.H)return oe(this,b)[b&31];throw Error("nth after persistent!");};h.la=function(a,b,c){return 0<=b&&b<this.m?this.M(null,b):c};h.ja=function(a,b){return this.K(null,b,null)};h.K=function(a,b,c){if(this.root.H)return"number"===typeof b?this.la(null,b,c):c;throw Error("lookup after persistent!");};
h.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};h.c=function(a){return this.ja(null,a)};h.g=function(a,b){return this.K(null,a,b)};function Je(){this.j=2097152;this.A=0}Je.prototype.R=function(){return!1};var Ke=new Je;
function Le(a,b){return Pc(Jc(b)&&!Kc(b)?O(a)===O(b)?(null!=a?a.j&1048576||t===a.ec||(a.j?0:x(kb,a)):x(kb,a))?cd(function(c,d,e){return M.g(C.l(b,d,Ke),e)?!0:new ic(!1)},!0,a):Ld(function(c){return M.g(C.l(b,I(c),Ke),I(K(c)))},a):null:null)}function Me(a){this.D=a}Me.prototype.next=function(){if(null!=this.D){var a=I(this.D),b=R(a,0,null);a=R(a,1,null);this.D=K(this.D);return{value:[b,a],done:!1}}return{value:null,done:!0}};function Ne(a){this.D=a}
Ne.prototype.next=function(){if(null!=this.D){var a=I(this.D);this.D=K(this.D);return{value:[a,a],done:!1}}return{value:null,done:!0}};
function Bc(a,b){if(b instanceof E)a:{var c=a.length;b=b.na;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof E&&b===a[d].na){a=d;break a}d+=2}}else if("string"==typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof Xb)a:for(c=a.length,b=b.str,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof Xb&&b===a[d].str){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(M.g(b,a[d])){a=d;break a}d+=2}return a}function ue(a,b){this.key=a;this.O=b;this.u=null;this.j=166619935;this.A=0}h=ue.prototype;h.Xa=function(a,b){switch(b){case 0:return new ue(0,this.key);case 1:return new ue(1,this.O);default:return null}};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.ja=function(a,b){return this.la(null,b,null)};h.K=function(a,b,c){return this.la(null,b,c)};h.M=function(a,b){if(0===b)return this.key;if(1===b)return this.O;throw Error("Index out of bounds");};
h.la=function(a,b,c){return 0===b?this.key:1===b?this.O:c};h.rb=function(a,b){return(new U(null,2,5,V,[this.key,this.O],null)).rb(a,b)};h.S=function(){return null};h.Y=function(){return 2};h.Jb=function(){return this.key};h.Kb=function(){return this.O};h.nc=function(){return new H([this.O,this.key],0,null)};h.T=function(){var a=this.u;return null!=a?a:this.u=a=ec(this)};h.R=function(a,b){return tc(this,b)};h.V=function(){return null};
h.ca=function(a,b){a:if(a=this.Y(null),0===a)b=b.B?b.B():b.call(null);else for(var c=this.M(null,0),d=1;;)if(d<a){var e=this.M(null,d);c=b.g?b.g(c,e):b.call(null,c,e);if(jc(c)){b=db(c);break a}d+=1}else{b=c;break a}return b};h.da=function(a,b,c){a:{a=this.Y(null);var d=c;for(c=0;;)if(c<a){var e=this.M(null,c);d=b.g?b.g(d,e):b.call(null,d,e);if(jc(d)){b=db(d);break a}c+=1}else{b=d;break a}}return b};h.ua=function(a,b,c){return Ac.l(new U(null,2,5,V,[this.key,this.O],null),b,c)};
h.N=function(){return new H([this.key,this.O],0,null)};h.U=function(a,b){return Fc(new U(null,2,5,V,[this.key,this.O],null),b)};h.X=function(a,b){return new U(null,3,5,V,[this.key,this.O,b],null)};h.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};
h.c=function(a){return this.M(null,a)};h.g=function(a,b){return this.la(null,a,b)};function Be(a){return null!=a?a.j&2048||t===a.ic?!0:!1:!1}function Oe(a,b,c){this.h=a;this.i=b;this.sa=c;this.j=32374990;this.A=0}h=Oe.prototype;h.toString=function(){return Lb(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.sa};h.ba=function(){return this.i<this.h.length-2?new Oe(this.h,this.i+2,null):null};h.Y=function(){return(this.h.length-this.i)/2};h.T=function(){return ec(this)};
h.R=function(a,b){return tc(this,b)};h.V=function(){return J};h.ca=function(a,b){return Yc(b,this)};h.da=function(a,b,c){return Zc(b,c,this)};h.W=function(){return new ue(this.h[this.i],this.h[this.i+1])};h.Za=function(){return this.i<this.h.length-2?new Oe(this.h,this.i+2,null):J};h.N=function(){return this};h.U=function(a,b){return b===this.sa?this:new Oe(this.h,this.i,b)};h.X=function(a,b){return Q(b,this)};Oe.prototype[za]=function(){return cc(this)};
function Pe(a,b){this.h=a;this.i=0;this.m=b}Pe.prototype.ea=function(){return this.i<this.m};Pe.prototype.next=function(){var a=new ue(this.h[this.i],this.h[this.i+1]);this.i+=2;return a};function v(a,b,c,d){this.meta=a;this.m=b;this.h=c;this.u=d;this.j=16647951;this.A=139268}h=v.prototype;h.Xa=function(a,b){a=Bc(this.h,b);return-1===a?null:new ue(this.h[a],this.h[a+1])};h.toString=function(){return Lb(this)};h.keys=function(){return cc(Qe.c?Qe.c(this):Qe.call(null,this))};h.entries=function(){return new Me(G(G(this)))};
h.values=function(){return cc(Re.c?Re.c(this):Re.call(null,this))};h.has=function(a){return Qc(this,a)};h.get=function(a,b){return this.K(null,a,b)};h.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.M(null,e),g=R(f,0,null);f=R(f,1,null);a.g?a.g(f,g):a.call(null,f,g);e+=1}else if(b=G(b))Mc(b)?(c=Db(b),b=Eb(b),g=c,d=O(c),c=g):(c=I(b),g=R(c,0,null),f=R(c,1,null),a.g?a.g(f,g):a.call(null,f,g),b=K(b),c=null,d=0),e=0;else return null};h.ja=function(a,b){return this.K(null,b,null)};
h.K=function(a,b,c){a=Bc(this.h,b);return-1===a?c:this.h[a+1]};h.jb=function(a,b,c){a=this.h.length;for(var d=0;;)if(d<a){var e=this.h[d],f=this.h[d+1];c=b.l?b.l(c,e,f):b.call(null,c,e,f);if(jc(c))return db(c);d+=2}else return c};h.ma=function(){return new Pe(this.h,2*this.m)};h.S=function(){return this.meta};h.Y=function(){return this.m};h.T=function(){var a=this.u;return null!=a?a:this.u=a=gc(this)};
h.R=function(a,b){if(Jc(b)&&!Kc(b))if(a=this.h.length,this.m===b.Y(null))for(var c=0;;)if(c<a){var d=b.K(null,this.h[c],Oc);if(d!==Oc)if(M.g(this.h[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};h.Ra=function(){return new Se(this.h.length,Aa(this.h))};h.V=function(){return gb(Kd,this.meta)};h.ca=function(a,b){return $c(this,b)};h.da=function(a,b,c){return ad(this,b,c)};
h.qb=function(a,b){if(0<=Bc(this.h,b)){a=this.h.length;var c=a-2;if(0===c)return this.V(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new v(this.meta,this.m-1,c,null);M.g(b,this.h[d])?d+=2:(c[e]=this.h[d],c[e+1]=this.h[d+1],e+=2,d+=2)}}else return this};
h.ua=function(a,b,c){a=Bc(this.h,b);if(-1===a){if(this.m<Te){a=this.h;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new v(this.meta,this.m+1,e,null)}return gb(Ua(fe.g(Ue,this),b,c),this.meta)}if(c===this.h[a+1])return this;b=Aa(this.h);b[a+1]=c;return new v(this.meta,this.m,b,null)};h.N=function(){var a=this.h;return 0<=a.length-2?new Oe(a,0,null):null};h.U=function(a,b){return b===this.meta?this:new v(b,this.m,this.h,this.u)};
h.X=function(a,b){if(Lc(b))return this.ua(null,Na(b,0),Na(b,1));a=this;for(b=G(b);;){if(null==b)return a;var c=I(b);if(Lc(c))a=Ua(a,Na(c,0),Na(c,1)),b=K(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};h.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};
h.c=function(a){return this.ja(null,a)};h.g=function(a,b){return this.K(null,a,b)};var Kd=new v(null,0,[],hc),Te=8;v.prototype[za]=function(){return cc(this)};function Se(a,b){this.Ua={};this.len=a;this.h=b;this.j=259;this.A=56}h=Se.prototype;h.Y=function(){if(this.Ua)return fd(this.len);throw Error("count after persistent!");};h.ja=function(a,b){return this.K(null,b,null)};h.K=function(a,b,c){if(this.Ua)return a=Bc(this.h,b),-1===a?c:this.h[a+1];throw Error("lookup after persistent!");};
h.Ta=function(a,b){if(this.Ua){if(Be(b))return this.Sa(null,Ce.c?Ce.c(b):Ce.call(null,b),De.c?De.c(b):De.call(null,b));if(Lc(b))return this.Sa(null,b.c?b.c(0):b.call(null,0),b.c?b.c(1):b.call(null,1));a=G(b);for(b=this;;){var c=I(a);if(w(c))a=K(a),b=zb(b,Ce.c?Ce.c(c):Ce.call(null,c),De.c?De.c(c):De.call(null,c));else return b}}else throw Error("conj! after persistent!");};h.ab=function(){if(this.Ua)return this.Ua=!1,new v(null,fd(this.len),this.h,null);throw Error("persistent! called twice");};
h.Sa=function(a,b,c){if(this.Ua){a=Bc(this.h,b);if(-1===a){if(this.len+2<=2*Te)return this.len+=2,this.h.push(b),this.h.push(c),this;a=Ve.g?Ve.g(this.len,this.h):Ve.call(null,this.len,this.h);return zb(a,b,c)}c!==this.h[a+1]&&(this.h[a+1]=c);return this}throw Error("assoc! after persistent!");};h.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};
h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};h.c=function(a){return this.K(null,a,null)};h.g=function(a,b){return this.K(null,a,b)};function Ve(a,b){for(var c=wb(Ue),d=0;;)if(d<a)c=zb(c,b[d],b[d+1]),d+=2;else return c}function We(){this.O=!1}function Xe(a,b){return a===b?!0:a===b||a instanceof E&&b instanceof E&&a.na===b.na?!0:M.g(a,b)}function Ye(a,b,c){a=Aa(a);a[b]=c;return a}
function Ze(a,b){var c=Array(a.length-2);Nc(a,0,c,0,2*b);Nc(a,2*(b+1),c,2*b,c.length-2*b);return c}function $e(a,b,c,d){a=a.Ma(b);a.h[c]=d;return a}function af(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var g=a[e+1];c=b.l?b.l(f,c,g):b.call(null,f,c,g)}else c=a[e+1],c=null!=c?c.gb(b,f):f;if(jc(c))return c;e+=2;f=c}else return f}function bf(a){this.h=a;this.i=0;this.ra=this.hb=null}
bf.prototype.advance=function(){for(var a=this.h.length;;)if(this.i<a){var b=this.h[this.i],c=this.h[this.i+1];null!=b?b=this.hb=new ue(b,c):null!=c?(b=Jb(c),b=b.ea()?this.ra=b:!1):b=!1;this.i+=2;if(b)return!0}else return!1};bf.prototype.ea=function(){var a=null!=this.hb;return a?a:(a=null!=this.ra)?a:this.advance()};
bf.prototype.next=function(){if(null!=this.hb){var a=this.hb;this.hb=null;return a}if(null!=this.ra)return a=this.ra.next(),this.ra.ea()||(this.ra=null),a;if(this.advance())return this.next();throw Error("No such element");};bf.prototype.remove=function(){return Error("Unsupported operation")};function cf(a,b,c){this.H=a;this.J=b;this.h=c;this.A=131072;this.j=0}h=cf.prototype;
h.Ma=function(a){if(a===this.H)return this;var b=gd(this.J),c=Array(0>b?4:2*(b+1));Nc(this.h,0,c,0,2*b);return new cf(a,this.J,c)};h.eb=function(){return df?df(this.h):ef.call(null,this.h)};h.gb=function(a,b){return af(this.h,a,b)};h.Na=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.J&e))return d;var f=gd(this.J&e-1);e=this.h[2*f];f=this.h[2*f+1];return null==e?f.Na(a+5,b,c,d):Xe(c,e)?f:d};
h.pa=function(a,b,c,d,e,f){var g=1<<(c>>>b&31),k=gd(this.J&g-1);if(0===(this.J&g)){var l=gd(this.J);if(2*l<this.h.length){a=this.Ma(a);b=a.h;f.O=!0;c=2*(l-k);f=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[f],--l,--c,--f;b[2*k]=d;b[2*k+1]=e;a.J|=g;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=ff.pa(a,b+5,c,d,e,f);for(e=d=0;;)if(32>d)0===(this.J>>>d&1)?
d+=1:(k[d]=null!=this.h[e]?ff.pa(a,b+5,Ub(this.h[e]),this.h[e],this.h[e+1],f):this.h[e+1],e+=2,d+=1);else break;return new gf(a,l+1,k)}b=Array(2*(l+4));Nc(this.h,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;Nc(this.h,2*k,b,2*(k+1),2*(l-k));f.O=!0;a=this.Ma(a);a.h=b;a.J|=g;return a}l=this.h[2*k];g=this.h[2*k+1];if(null==l)return l=g.pa(a,b+5,c,d,e,f),l===g?this:$e(this,a,2*k+1,l);if(Xe(d,l))return e===g?this:$e(this,a,2*k+1,e);f.O=!0;f=b+5;d=hf?hf(a,f,l,g,c,d,e):jf.call(null,a,f,l,g,c,d,e);e=2*k;k=2*k+1;a=this.Ma(a);
a.h[e]=null;a.h[k]=d;return a};
h.oa=function(a,b,c,d,e){var f=1<<(b>>>a&31),g=gd(this.J&f-1);if(0===(this.J&f)){var k=gd(this.J);if(16<=k){g=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];g[b>>>a&31]=ff.oa(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.J>>>c&1)?c+=1:(g[c]=null!=this.h[d]?ff.oa(a+5,Ub(this.h[d]),this.h[d],this.h[d+1],e):this.h[d+1],d+=2,c+=1);else break;return new gf(null,k+1,g)}a=Array(2*(k+1));Nc(this.h,
0,a,0,2*g);a[2*g]=c;a[2*g+1]=d;Nc(this.h,2*g,a,2*(g+1),2*(k-g));e.O=!0;return new cf(null,this.J|f,a)}var l=this.h[2*g];f=this.h[2*g+1];if(null==l)return k=f.oa(a+5,b,c,d,e),k===f?this:new cf(null,this.J,Ye(this.h,2*g+1,k));if(Xe(c,l))return d===f?this:new cf(null,this.J,Ye(this.h,2*g+1,d));e.O=!0;e=this.J;k=this.h;a+=5;a=kf?kf(a,l,f,b,c,d):jf.call(null,a,l,f,b,c,d);c=2*g;g=2*g+1;d=Aa(k);d[c]=null;d[g]=a;return new cf(null,e,d)};
h.cb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.J&e))return d;var f=gd(this.J&e-1);e=this.h[2*f];f=this.h[2*f+1];return null==e?f.cb(a+5,b,c,d):Xe(c,e)?new ue(e,f):d};h.fb=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.J&d))return this;var e=gd(this.J&d-1),f=this.h[2*e],g=this.h[2*e+1];return null==f?(a=g.fb(a+5,b,c),a===g?this:null!=a?new cf(null,this.J,Ye(this.h,2*e+1,a)):this.J===d?null:new cf(null,this.J^d,Ze(this.h,e))):Xe(c,f)?new cf(null,this.J^d,Ze(this.h,e)):this};h.ma=function(){return new bf(this.h)};
var ff=new cf(null,0,[]);function lf(a){this.h=a;this.i=0;this.ra=null}lf.prototype.ea=function(){for(var a=this.h.length;;){if(null!=this.ra&&this.ra.ea())return!0;if(this.i<a){var b=this.h[this.i];this.i+=1;null!=b&&(this.ra=Jb(b))}else return!1}};lf.prototype.next=function(){if(this.ea())return this.ra.next();throw Error("No such element");};lf.prototype.remove=function(){return Error("Unsupported operation")};function gf(a,b,c){this.H=a;this.m=b;this.h=c;this.A=131072;this.j=0}h=gf.prototype;
h.Ma=function(a){return a===this.H?this:new gf(a,this.m,Aa(this.h))};h.eb=function(){return mf?mf(this.h):nf.call(null,this.h)};h.gb=function(a,b){for(var c=this.h.length,d=0;;)if(d<c){var e=this.h[d];if(null!=e){b=e.gb(a,b);if(jc(b))return b;d+=1}else d+=1}else return b};h.Na=function(a,b,c,d){var e=this.h[b>>>a&31];return null!=e?e.Na(a+5,b,c,d):d};
h.pa=function(a,b,c,d,e,f){var g=c>>>b&31,k=this.h[g];if(null==k)return a=$e(this,a,g,ff.pa(a,b+5,c,d,e,f)),a.m+=1,a;b=k.pa(a,b+5,c,d,e,f);return b===k?this:$e(this,a,g,b)};h.oa=function(a,b,c,d,e){var f=b>>>a&31,g=this.h[f];if(null==g)return new gf(null,this.m+1,Ye(this.h,f,ff.oa(a+5,b,c,d,e)));a=g.oa(a+5,b,c,d,e);return a===g?this:new gf(null,this.m,Ye(this.h,f,a))};h.cb=function(a,b,c,d){var e=this.h[b>>>a&31];return null!=e?e.cb(a+5,b,c,d):d};
h.fb=function(a,b,c){var d=b>>>a&31,e=this.h[d];if(null!=e){a=e.fb(a+5,b,c);if(a===e)d=this;else if(null==a)if(8>=this.m)a:{e=this.h;a=e.length;b=Array(2*(this.m-1));c=0;for(var f=1,g=0;;)if(c<a)c!==d&&null!=e[c]?(b[f]=e[c],f+=2,g|=1<<c,c+=1):c+=1;else{d=new cf(null,g,b);break a}}else d=new gf(null,this.m-1,Ye(this.h,d,a));else d=new gf(null,this.m,Ye(this.h,d,a));return d}return this};h.ma=function(){return new lf(this.h)};
function of(a,b,c){b*=2;for(var d=0;;)if(d<b){if(Xe(c,a[d]))return d;d+=2}else return-1}function pf(a,b,c,d){this.H=a;this.ta=b;this.m=c;this.h=d;this.A=131072;this.j=0}h=pf.prototype;h.Ma=function(a){if(a===this.H)return this;var b=Array(2*(this.m+1));Nc(this.h,0,b,0,2*this.m);return new pf(a,this.ta,this.m,b)};h.eb=function(){return df?df(this.h):ef.call(null,this.h)};h.gb=function(a,b){return af(this.h,a,b)};
h.Na=function(a,b,c,d){a=of(this.h,this.m,c);return 0>a?d:Xe(c,this.h[a])?this.h[a+1]:d};
h.pa=function(a,b,c,d,e,f){if(c===this.ta){b=of(this.h,this.m,d);if(-1===b){if(this.h.length>2*this.m)return b=2*this.m,c=2*this.m+1,a=this.Ma(a),a.h[b]=d,a.h[c]=e,f.O=!0,a.m+=1,a;c=this.h.length;b=Array(c+2);Nc(this.h,0,b,0,c);b[c]=d;b[c+1]=e;f.O=!0;d=this.m+1;a===this.H?(this.h=b,this.m=d,a=this):a=new pf(this.H,this.ta,d,b);return a}return this.h[b+1]===e?this:$e(this,a,b+1,e)}return(new cf(a,1<<(this.ta>>>b&31),[null,this,null,null])).pa(a,b,c,d,e,f)};
h.oa=function(a,b,c,d,e){return b===this.ta?(a=of(this.h,this.m,c),-1===a?(a=2*this.m,b=Array(a+2),Nc(this.h,0,b,0,a),b[a]=c,b[a+1]=d,e.O=!0,new pf(null,this.ta,this.m+1,b)):M.g(this.h[a+1],d)?this:new pf(null,this.ta,this.m,Ye(this.h,a+1,d))):(new cf(null,1<<(this.ta>>>a&31),[null,this])).oa(a,b,c,d,e)};h.cb=function(a,b,c,d){a=of(this.h,this.m,c);return 0>a?d:Xe(c,this.h[a])?new ue(this.h[a],this.h[a+1]):d};
h.fb=function(a,b,c){a=of(this.h,this.m,c);return-1===a?this:1===this.m?null:new pf(null,this.ta,this.m-1,Ze(this.h,fd(a)))};h.ma=function(){return new bf(this.h)};function jf(a){switch(arguments.length){case 6:return kf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return hf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}
function kf(a,b,c,d,e,f){var g=Ub(b);if(g===d)return new pf(null,g,2,[b,c,e,f]);var k=new We;return ff.oa(a,g,b,c,k).oa(a,d,e,f,k)}function hf(a,b,c,d,e,f,g){var k=Ub(c);if(k===e)return new pf(null,k,2,[c,d,f,g]);var l=new We;return ff.pa(a,b,k,c,d,l).pa(a,b,e,f,g,l)}function qf(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.D=d;this.u=e;this.j=32374988;this.A=0}h=qf.prototype;h.toString=function(){return Lb(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.meta};h.ba=function(){if(null==this.D){var a=this.nodes,b=this.i+2;return rf?rf(a,b,null):ef.call(null,a,b,null)}a=this.nodes;b=this.i;var c=K(this.D);return rf?rf(a,b,c):ef.call(null,a,b,c)};
h.T=function(){var a=this.u;return null!=a?a:this.u=a=ec(this)};h.R=function(a,b){return tc(this,b)};h.V=function(){return J};h.ca=function(a,b){return Yc(b,this)};h.da=function(a,b,c){return Zc(b,c,this)};h.W=function(){return null==this.D?new ue(this.nodes[this.i],this.nodes[this.i+1]):I(this.D)};
h.Za=function(){var a=this,b=null==a.D?function(){var c=a.nodes,d=a.i+2;return rf?rf(c,d,null):ef.call(null,c,d,null)}():function(){var c=a.nodes,d=a.i,e=K(a.D);return rf?rf(c,d,e):ef.call(null,c,d,e)}();return null!=b?b:J};h.N=function(){return this};h.U=function(a,b){return b===this.meta?this:new qf(b,this.nodes,this.i,this.D,this.u)};h.X=function(a,b){return Q(b,this)};qf.prototype[za]=function(){return cc(this)};
function ef(a){switch(arguments.length){case 1:return df(arguments[0]);case 3:return rf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function df(a){return rf(a,0,null)}function rf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new qf(null,a,b,null,null);var d=a[b+1];if(w(d)&&(d=d.eb(),w(d)))return new qf(null,a,b+2,d,null);b+=2}else return null;else return new qf(null,a,b,c,null)}
function sf(a,b,c,d,e){this.meta=a;this.nodes=b;this.i=c;this.D=d;this.u=e;this.j=32374988;this.A=0}h=sf.prototype;h.toString=function(){return Lb(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.meta};h.ba=function(){var a=this.nodes,b=this.i,c=K(this.D);return tf?tf(a,b,c):nf.call(null,a,b,c)};h.T=function(){var a=this.u;return null!=a?a:this.u=a=ec(this)};
h.R=function(a,b){return tc(this,b)};h.V=function(){return J};h.ca=function(a,b){return Yc(b,this)};h.da=function(a,b,c){return Zc(b,c,this)};h.W=function(){return I(this.D)};h.Za=function(){var a=this.nodes;var b=this.i,c=K(this.D);a=tf?tf(a,b,c):nf.call(null,a,b,c);return null!=a?a:J};h.N=function(){return this};h.U=function(a,b){return b===this.meta?this:new sf(b,this.nodes,this.i,this.D,this.u)};h.X=function(a,b){return Q(b,this)};sf.prototype[za]=function(){return cc(this)};
function nf(a){switch(arguments.length){case 1:return mf(arguments[0]);case 3:return tf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function mf(a){return tf(a,0,null)}function tf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(w(d)&&(d=d.eb(),w(d)))return new sf(null,a,b+1,d,null);b+=1}else return null;else return new sf(null,a,b,c,null)}function uf(a,b){this.aa=a;this.Ab=b;this.tb=!1}
uf.prototype.ea=function(){return!this.tb||this.Ab.ea()};uf.prototype.next=function(){if(this.tb)return this.Ab.next();this.tb=!0;return new ue(null,this.aa)};uf.prototype.remove=function(){return Error("Unsupported operation")};function vf(a,b,c,d,e,f){this.meta=a;this.m=b;this.root=c;this.fa=d;this.aa=e;this.u=f;this.j=16123663;this.A=139268}h=vf.prototype;h.Xa=function(a,b){return null==b?this.fa?new ue(null,this.aa):null:null==this.root?null:this.root.cb(0,Ub(b),b,null)};h.toString=function(){return Lb(this)};
h.keys=function(){return cc(Qe.c?Qe.c(this):Qe.call(null,this))};h.entries=function(){return new Me(G(G(this)))};h.values=function(){return cc(Re.c?Re.c(this):Re.call(null,this))};h.has=function(a){return Qc(this,a)};h.get=function(a,b){return this.K(null,a,b)};
h.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.M(null,e),g=R(f,0,null);f=R(f,1,null);a.g?a.g(f,g):a.call(null,f,g);e+=1}else if(b=G(b))Mc(b)?(c=Db(b),b=Eb(b),g=c,d=O(c),c=g):(c=I(b),g=R(c,0,null),f=R(c,1,null),a.g?a.g(f,g):a.call(null,f,g),b=K(b),c=null,d=0),e=0;else return null};h.ja=function(a,b){return this.K(null,b,null)};h.K=function(a,b,c){return null==b?this.fa?this.aa:c:null==this.root?c:this.root.Na(0,Ub(b),b,c)};
h.jb=function(a,b,c){a=this.fa?b.l?b.l(c,null,this.aa):b.call(null,c,null,this.aa):c;jc(a)?b=db(a):null!=this.root?(b=this.root.gb(b,a),b=jc(b)?kc.c?kc.c(b):kc.call(null,b):b):b=a;return b};h.ma=function(){var a=this.root?Jb(this.root):Id();return this.fa?new uf(this.aa,a):a};h.S=function(){return this.meta};h.Y=function(){return this.m};h.T=function(){var a=this.u;return null!=a?a:this.u=a=gc(this)};h.R=function(a,b){return Le(this,b)};h.Ra=function(){return new wf(this.root,this.m,this.fa,this.aa)};
h.V=function(){return gb(Ue,this.meta)};h.qb=function(a,b){if(null==b)return this.fa?new vf(this.meta,this.m-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.fb(0,Ub(b),b);return a===this.root?this:new vf(this.meta,this.m-1,a,this.fa,this.aa,null)};
h.ua=function(a,b,c){if(null==b)return this.fa&&c===this.aa?this:new vf(this.meta,this.fa?this.m:this.m+1,this.root,!0,c,null);a=new We;b=(null==this.root?ff:this.root).oa(0,Ub(b),b,c,a);return b===this.root?this:new vf(this.meta,a.O?this.m+1:this.m,b,this.fa,this.aa,null)};h.N=function(){if(0<this.m){var a=null!=this.root?this.root.eb():null;return this.fa?Q(new ue(null,this.aa),a):a}return null};h.U=function(a,b){return b===this.meta?this:new vf(b,this.m,this.root,this.fa,this.aa,this.u)};
h.X=function(a,b){if(Lc(b))return this.ua(null,Na(b,0),Na(b,1));a=this;for(b=G(b);;){if(null==b)return a;var c=I(b);if(Lc(c))a=Ua(a,Na(c,0),Na(c,1)),b=K(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};h.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};
h.c=function(a){return this.ja(null,a)};h.g=function(a,b){return this.K(null,a,b)};var Ue=new vf(null,0,null,!1,null,hc);function xf(a,b){for(var c=a.length,d=0,e=wb(Ue);;)if(d<c){var f=d+1;e=zb(e,a[d],b[d]);d=f}else return yb(e)}vf.prototype[za]=function(){return cc(this)};function wf(a,b,c,d){this.H={};this.root=a;this.count=b;this.fa=c;this.aa=d;this.j=259;this.A=56}
function yf(a,b,c){if(a.H){if(null==b)a.aa!==c&&(a.aa=c),a.fa||(a.count+=1,a.fa=!0);else{var d=new We;b=(null==a.root?ff:a.root).pa(a.H,0,Ub(b),b,c,d);b!==a.root&&(a.root=b);d.O&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}h=wf.prototype;h.Y=function(){if(this.H)return this.count;throw Error("count after persistent!");};h.ja=function(a,b){return null==b?this.fa?this.aa:null:null==this.root?null:this.root.Na(0,Ub(b),b)};
h.K=function(a,b,c){return null==b?this.fa?this.aa:c:null==this.root?c:this.root.Na(0,Ub(b),b,c)};h.Ta=function(a,b){a:if(this.H)if(Be(b))a=yf(this,Ce.c?Ce.c(b):Ce.call(null,b),De.c?De.c(b):De.call(null,b));else if(Lc(b))a=yf(this,b.c?b.c(0):b.call(null,0),b.c?b.c(1):b.call(null,1));else for(a=G(b),b=this;;){var c=I(a);if(w(c))a=K(a),b=yf(b,Ce.c?Ce.c(c):Ce.call(null,c),De.c?De.c(c):De.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
h.ab=function(){if(this.H){this.H=null;var a=new vf(null,this.count,this.root,this.fa,this.aa,null)}else throw Error("persistent! called twice");return a};h.Sa=function(a,b,c){return yf(this,b,c)};h.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};
h.c=function(a){return this.ja(null,a)};h.g=function(a,b){return this.K(null,a,b)};var X=function X(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return X.s(0<c.length?new H(c.slice(0),0,null):null)};X.s=function(a){for(var b=G(a),c=wb(Ue);;)if(b){a=K(K(b));var d=I(b);b=I(K(b));c=zb(c,d,b);b=a}else return yb(c)};X.F=0;X.C=function(a){return this.s(G(a))};function zf(a,b){this.G=a;this.sa=b;this.j=32374988;this.A=0}h=zf.prototype;h.toString=function(){return Lb(this)};
h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.sa};h.ba=function(){var a=(null!=this.G?this.G.j&128||t===this.G.Ya||(this.G.j?0:x(Qa,this.G)):x(Qa,this.G))?this.G.ba():K(this.G);return null==a?null:new zf(a,null)};h.T=function(){return ec(this)};
h.R=function(a,b){return tc(this,b)};h.V=function(){return J};h.ca=function(a,b){return Yc(b,this)};h.da=function(a,b,c){return Zc(b,c,this)};h.W=function(){return this.G.W(null).key};h.Za=function(){var a=(null!=this.G?this.G.j&128||t===this.G.Ya||(this.G.j?0:x(Qa,this.G)):x(Qa,this.G))?this.G.ba():K(this.G);return null!=a?new zf(a,null):J};h.N=function(){return this};h.U=function(a,b){return b===this.sa?this:new zf(this.G,b)};h.X=function(a,b){return Q(b,this)};zf.prototype[za]=function(){return cc(this)};
function Qe(a){return(a=G(a))?new zf(a,null):null}function Ce(a){return Ya(a)}function Af(a,b){this.G=a;this.sa=b;this.j=32374988;this.A=0}h=Af.prototype;h.toString=function(){return Lb(this)};h.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return N(this,b,0);case 2:return N(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.c=function(b){return N(this,b,0)};a.g=function(b,c){return N(this,b,c)};return a}();
h.lastIndexOf=function(){function a(c){return P(this,c,O(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return P(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.c=a;b.g=function(c,d){return P(this,c,d)};return b}();h.S=function(){return this.sa};h.ba=function(){var a=(null!=this.G?this.G.j&128||t===this.G.Ya||(this.G.j?0:x(Qa,this.G)):x(Qa,this.G))?this.G.ba():K(this.G);return null==a?null:new Af(a,null)};h.T=function(){return ec(this)};
h.R=function(a,b){return tc(this,b)};h.V=function(){return J};h.ca=function(a,b){return Yc(b,this)};h.da=function(a,b,c){return Zc(b,c,this)};h.W=function(){return this.G.W(null).O};h.Za=function(){var a=(null!=this.G?this.G.j&128||t===this.G.Ya||(this.G.j?0:x(Qa,this.G)):x(Qa,this.G))?this.G.ba():K(this.G);return null!=a?new Af(a,null):J};h.N=function(){return this};h.U=function(a,b){return b===this.sa?this:new Af(this.G,b)};h.X=function(a,b){return Q(b,this)};Af.prototype[za]=function(){return cc(this)};
function Re(a){return(a=G(a))?new Af(a,null):null}function De(a){return Za(a)}function Bf(a){this.Va=a}Bf.prototype.ea=function(){return this.Va.ea()};Bf.prototype.next=function(){if(this.Va.ea())return this.Va.next().key;throw Error("No such element");};Bf.prototype.remove=function(){return Error("Unsupported operation")};function Cf(a,b,c){this.meta=a;this.va=b;this.u=c;this.j=15077647;this.A=139268}h=Cf.prototype;h.toString=function(){return Lb(this)};h.keys=function(){return cc(G(this))};
h.entries=function(){return new Ne(G(G(this)))};h.values=function(){return cc(G(this))};h.has=function(a){return Qc(this,a)};h.forEach=function(a){for(var b=G(this),c=null,d=0,e=0;;)if(e<d){var f=c.M(null,e),g=R(f,0,null);f=R(f,1,null);a.g?a.g(f,g):a.call(null,f,g);e+=1}else if(b=G(b))Mc(b)?(c=Db(b),b=Eb(b),g=c,d=O(c),c=g):(c=I(b),g=R(c,0,null),f=R(c,1,null),a.g?a.g(f,g):a.call(null,f,g),b=K(b),c=null,d=0),e=0;else return null};h.ja=function(a,b){return this.K(null,b,null)};
h.K=function(a,b,c){a=Va(this.va,b);return w(a)?Ya(a):c};h.ma=function(){return new Bf(Jb(this.va))};h.S=function(){return this.meta};h.Y=function(){return Ga(this.va)};h.T=function(){var a=this.u;return null!=a?a:this.u=a=gc(this)};h.R=function(a,b){if(Hc(b))if(O(this)===O(b))try{return cd(function(c,d){return(c=Qc(b,d))?c:new ic(!1)},!0,this.va)}catch(c){if(c instanceof Error)return!1;throw c;}else return!1;else return!1};h.Ra=function(){return new Df(wb(this.va))};h.V=function(){return gb(Ef,this.meta)};
h.N=function(){return Qe(this.va)};h.U=function(a,b){return b===this.meta?this:new Cf(b,this.va,this.u)};h.X=function(a,b){return new Cf(this.meta,Ac.l(this.va,b,null),null)};h.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};h.c=function(a){return this.ja(null,a)};
h.g=function(a,b){return this.K(null,a,b)};var Ef=new Cf(null,Kd,hc);Cf.prototype[za]=function(){return cc(this)};function Df(a){this.Oa=a;this.A=136;this.j=259}h=Df.prototype;h.Ta=function(a,b){this.Oa=zb(this.Oa,b,null);return this};h.ab=function(){return new Cf(null,yb(this.Oa),null)};h.Y=function(){return O(this.Oa)};h.ja=function(a,b){return this.K(null,b,null)};h.K=function(a,b,c){return Sa(this.Oa,b,Oc)===Oc?c:b};
h.call=function(a){switch(arguments.length-1){case 1:return this.c(arguments[1]);case 2:return this.g(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length-1)].join(""));}};h.apply=function(a,b){return this.call.apply(this,[this].concat(Aa(b)))};h.c=function(a){return Sa(this.Oa,a,Oc)===Oc?null:a};h.g=function(a,b){return Sa(this.Oa,a,Oc)===Oc?b:a};
function nd(a){if(null!=a&&(a.A&4096||t===a.Mb))return a.name;if("string"===typeof a)return a;throw Error(["Doesn't support name: ",z.c(a)].join(""));}function Ff(a,b){return new od(null,function(){var c=G(b);if(c){var d=I(c);d=a.c?a.c(d):a.call(null,d);c=w(d)?Q(I(c),Ff(a,ac(c))):null}else c=null;return c},null)}
function Gf(){var a=Hf;return function(){function b(k,l,m){return new U(null,2,5,V,[a.l?a.l(k,l,m):a.call(null,k,l,m),dd.l?dd.l(k,l,m):dd.call(null,k,l,m)],null)}function c(k,l){return new U(null,2,5,V,[a.g?a.g(k,l):a.call(null,k,l),dd.g?dd.g(k,l):dd.call(null,k,l)],null)}function d(k){return new U(null,2,5,V,[a.c?a.c(k):a.call(null,k),dd.c?dd.c(k):dd.call(null,k)],null)}function e(){return new U(null,2,5,V,[a.B?a.B():a.call(null),dd.B?dd.B():dd.call(null)],null)}var f=null,g=function(){function k(m,
n,p,r){var u=null;if(3<arguments.length){u=0;for(var B=Array(arguments.length-3);u<B.length;)B[u]=arguments[u+3],++u;u=new H(B,0,null)}return l.call(this,m,n,p,u)}function l(m,n,p,r){return new U(null,2,5,V,[Hd(a,m,n,p,r),Hd(dd,m,n,p,r)],null)}k.F=3;k.C=function(m){var n=I(m);m=K(m);var p=I(m);m=K(m);var r=I(m);m=ac(m);return l(n,p,r,m)};k.s=l;return k}();f=function(k,l,m,n){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);case 3:return b.call(this,
k,l,m);default:var p=null;if(3<arguments.length){p=0;for(var r=Array(arguments.length-3);p<r.length;)r[p]=arguments[p+3],++p;p=new H(r,0,null)}return g.s(k,l,m,p)}throw Error("Invalid arity: "+arguments.length);};f.F=3;f.C=g.C;f.B=e;f.c=d;f.g=c;f.l=b;f.s=g.s;return f}()}
var If=function If(a,b){var d=a.exec(b);if(null==d)return null;var e=d[0],f=1===d.length?e:Ae(d);return Q(f,new od(null,function(){var g=e.length;g=d.index+(1>g?1:g);return g<=b.length?(g=b.substring(g),If.g?If.g(a,g):If.call(null,a,g)):null},null))};
function Jf(a,b,c,d,e,f,g){var k=na;na=null==na?null:na-1;try{if(null!=na&&0>na)return tb(a,"#");tb(a,c);if(0===ua.c(f))G(g)&&tb(a,function(){var u=Kf.c(f);return w(u)?u:"..."}());else{if(G(g)){var l=I(g);b.l?b.l(l,a,f):b.call(null,l,a,f)}for(var m=K(g),n=ua.c(f)-1;;)if(!m||null!=n&&0===n){G(m)&&0===n&&(tb(a,d),tb(a,function(){var u=Kf.c(f);return w(u)?u:"..."}()));break}else{tb(a,d);var p=I(m);c=a;g=f;b.l?b.l(p,c,g):b.call(null,p,c,g);var r=K(m);c=n-1;m=r;n=c}}return tb(a,e)}finally{na=k}}
function Lf(a,b){b=G(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.M(null,e);tb(a,f);e+=1}else if(b=G(b))c=b,Mc(c)?(b=Db(c),d=Eb(c),c=b,f=O(b),b=d,d=f):(f=I(c),tb(a,f),b=K(c),c=null,d=0),e=0;else return null}var Mf={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function Nf(a){return['"',z.c(a.replace(/[\\"\b\f\n\r\t]/g,function(b){return Mf[b]})),'"'].join("")}function Of(a,b){return Pc(C.g(a,ra))?null!=b&&(b.j&131072||t===b.Lb)?null!=Gc(b):!1:!1}
function Pf(a,b,c){if(null==a)return tb(b,"nil");if(Of(c,a)){tb(b,"^");var d=Gc(a);Qf.l?Qf.l(d,b,c):Qf.call(null,d,b,c);tb(b," ")}if(a.zb)return a.Ub(b);if(null!=a?a.j&2147483648||t===a.Z||(a.j?0:x(ub,a)):x(ub,a))return vb(a,b,c);if(!0===a||!1===a)return tb(b,z.c(a));if("number"===typeof a)return tb(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":z.c(a));if(null!=a&&a.constructor===Object)return tb(b,"#js "),d=Xd.g(function(f){var g=/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/;
if("string"===typeof f)g=g.exec(f),g=null!=g&&M.g(g[0],f)?1===g.length?g[0]:Ae(g):null;else throw new TypeError("re-matches must match against a string.");return new ue(null!=g?md.c(f):f,a[f])},ia(a)),Rf.I?Rf.I(d,Qf,b,c):Rf.call(null,d,Qf,b,c);if(va(a))return Jf(b,Qf,"#js ["," ","]",c,a);if("string"==typeof a)return w(qa.c(c))?tb(b,Nf(a)):tb(b,a);if("function"==q(a)){var e=a.name;c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Function":e;return Lf(b,uc(["#object[",c,w(!1)?[' "',
z.c(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(f,g){for(f=z.c(f);;)if(f.length<g)f=["0",f].join("");else return f},Lf(b,uc(['#inst "',z.c(a.getUTCFullYear()),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return Lf(b,uc(['#"',a.source,'"']));if(Ea(a))return Lf(b,uc(["#object[",a.toString(),"]"]));if(w(function(){var f=null==
a?null:a.constructor;return null==f?null:f.kb}()))return Lf(b,uc(["#object[",a.constructor.kb.replace(/\//g,"."),"]"]));e=function(){var f=null==a?null:a.constructor;return null==f?null:f.name}();c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Object":e;return null==a.constructor?Lf(b,uc(["#object[",c,"]"])):Lf(b,uc(["#object[",c," ",z.c(a),"]"]))}function Qf(a,b,c){var d=Sf.c(c);return w(d)?(c=Ac.l(c,Tf,Pf),d.l?d.l(a,b,c):d.call(null,a,b,c)):Pf(a,b,c)}
function Uf(a,b){var c=new ja;a:{var d=new Kb(c);Qf(I(a),d,b);a=G(K(a));for(var e=null,f=0,g=0;;)if(g<f){var k=e.M(null,g);tb(d," ");Qf(k,d,b);g+=1}else if(a=G(a))e=a,Mc(e)?(a=Db(e),f=Eb(e),e=a,k=O(a),a=f,f=k):(k=I(e),tb(d," "),Qf(k,d,b),a=K(e),e=null,f=0),g=0;else break a}return c}function Vf(a){return a instanceof Xb?Yb.g(null,nd(a)):md.g(null,nd(a))}
function Wf(a){if(w(!1)){var b=G(a),c=G(b),d=I(c);K(c);R(d,0,null);R(d,1,null);c=null==a?null:null!=a&&(a.j&4||t===a.Eb)?a.V(null):(null!=a?a.j&4||t===a.Eb||(a.j?0:x(Ha,a)):x(Ha,a))?Ia(a):null;for(a=null;;){d=a;b=G(b);a=I(b);var e=K(b),f=a;a=R(f,0,null);b=R(f,1,null);if(w(f))if(a instanceof E||a instanceof Xb)if(w(d))if(M.g(d,ld(a)))c=Ac.l(c,Vf(a),b),a=d,b=e;else return null;else if(d=ld(a),w(d))c=Ac.l(c,Vf(a),b),a=d,b=e;else return null;else return null;else return new U(null,2,5,V,[d,c],null)}}else return null}
function Xf(a,b,c,d,e){return Jf(d,function(f,g,k){var l=Ya(f);c.l?c.l(l,g,k):c.call(null,l,g,k);tb(g," ");f=Za(f);return c.l?c.l(f,g,k):c.call(null,f,g,k)},[z.c(a),"{"].join(""),", ","}",e,G(b))}function Rf(a,b,c,d){var e=Jc(a)?Wf(a):null,f=R(e,0,null);e=R(e,1,null);return w(f)?Xf(["#:",z.c(f)].join(""),e,b,c,d):Xf(null,a,b,c,d)}H.prototype.Z=t;H.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};od.prototype.Z=t;od.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};
ue.prototype.Z=t;ue.prototype.P=function(a,b,c){return Jf(b,Qf,"["," ","]",c,this)};qf.prototype.Z=t;qf.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};Oe.prototype.Z=t;Oe.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};dc.prototype.Z=t;dc.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};Ee.prototype.Z=t;Ee.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};jd.prototype.Z=t;jd.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};
ae.prototype.Z=t;ae.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};je.prototype.Z=t;je.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};vf.prototype.Z=t;vf.prototype.P=function(a,b,c){return Rf(this,Qf,b,c)};sf.prototype.Z=t;sf.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};Cf.prototype.Z=t;Cf.prototype.P=function(a,b,c){return Jf(b,Qf,"#{"," ","}",c,this)};sd.prototype.Z=t;sd.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};
Pd.prototype.Z=t;Pd.prototype.P=function(a,b,c){tb(b,"#object[cljs.core.Atom ");Qf(new v(null,1,[Yf,this.state],null),b,c);return tb(b,"]")};Af.prototype.Z=t;Af.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};U.prototype.Z=t;U.prototype.P=function(a,b,c){return Jf(b,Qf,"["," ","]",c,this)};id.prototype.Z=t;id.prototype.P=function(a,b){return tb(b,"()")};v.prototype.Z=t;v.prototype.P=function(a,b,c){return Rf(this,Qf,b,c)};zf.prototype.Z=t;
zf.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};yc.prototype.Z=t;yc.prototype.P=function(a,b,c){return Jf(b,Qf,"("," ",")",c,this)};Xb.prototype.Wa=t;Xb.prototype.Qa=function(a,b){if(b instanceof Xb)return Wb(this,b);throw Error(["Cannot compare ",z.c(this)," to ",z.c(b)].join(""));};E.prototype.Wa=t;E.prototype.Qa=function(a,b){if(b instanceof E)return kd(this,b);throw Error(["Cannot compare ",z.c(this)," to ",z.c(b)].join(""));};U.prototype.Wa=t;
U.prototype.Qa=function(a,b){if(Lc(b))return Sc(this,b);throw Error(["Cannot compare ",z.c(this)," to ",z.c(b)].join(""));};ue.prototype.Wa=t;ue.prototype.Qa=function(a,b){if(Lc(b))return Sc(this,b);throw Error(["Cannot compare ",z.c(this)," to ",z.c(b)].join(""));};function Zf(){}
function $f(a){if(null!=a&&null!=a.Gb)a=a.Gb(a);else{var b=$f[q(null==a?null:a)];if(null!=b)a=b.c?b.c(a):b.call(null,a);else if(b=$f._,null!=b)a=b.c?b.c(a):b.call(null,a);else throw y("IEncodeJS.-clj-\x3ejs",a);}return a}function ag(a,b){(null!=a?t===a.Fb||(a.Vb?0:x(Zf,a)):x(Zf,a))?a=$f(a):"string"===typeof a||"number"===typeof a||a instanceof E||a instanceof Xb?a=b.c?b.c(a):b.call(null,a):(a=uc([a]),b=oa(),a=null==a||wa(G(a))?"":z.c(Uf(a,b)));return a}
var bg=function bg(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return bg.s(arguments[0],1<c.length?new H(c.slice(1),0,null):null)};
bg.s=function(a,b){b=null!=b&&(b.j&64||t===b.v)?T(X,b):b;var c=C.l(b,cg,nd),d=function g(f){if(null==f)return null;if(null!=f?t===f.Fb||(f.Vb?0:x(Zf,f)):x(Zf,f))return $f(f);if(f instanceof E)return c.c?c.c(f):c.call(null,f);if(f instanceof Xb)return z.c(f);if(Jc(f)){var k={};f=G(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.M(null,n),r=R(p,0,null);p=R(p,1,null);r=ag(r,d);p=g(p);k[r]=p;n+=1}else if(f=G(f))Mc(f)?(m=Db(f),f=Eb(f),l=m,m=O(m)):(m=I(f),l=R(m,0,null),m=R(m,1,null),l=ag(l,d),m=g(m),k[l]=m,
f=K(f),l=null,m=0),n=0;else break;return k}if(null==f?0:null!=f?f.j&8||t===f.bc||(f.j?0:x(Ja,f)):x(Ja,f)){k=[];f=G(Xd.g(g,f));l=null;for(n=m=0;;)if(n<m)r=l.M(null,n),k.push(r),n+=1;else if(f=G(f))l=f,Mc(l)?(f=Db(l),n=Eb(l),l=f,m=O(f),f=n):(f=I(l),k.push(f),f=K(l),l=null,m=0),n=0;else break;return k}return f};return d(a)};bg.F=1;bg.C=function(a){var b=I(a);a=K(a);return this.s(b,a)};var dg=new E(null,"cursorGroupBackward","cursorGroupBackward",-1004717331),eg=new E("cursor","mapped","cursor/mapped",1625530272),gg=new E(null,"slurp-forward","slurp-forward",-866284566),hg=new E(null,"selection-return","selection-return",267226206),ig=new E(null,"selectGroupForward","selectGroupForward",1344873433),jg=new E(null,"table","table",-564943036),Yf=new E(null,"val","val",128701612),kg=new E(null,"doc","doc",1913296891),lg=new E(null,"selectLineEnd","selectLineEnd",-1578526086),mg=new E(null,
"cursorDocStart","cursorDocStart",2008312830),ra=new E(null,"meta","meta",1499536964),ng=new E(null,"barf-backward","barf-backward",434854195),og=new E(null,"cursorPageDown","cursorPageDown",-1143253131),pg=new E(null,"mac","mac",-1879391650),qg=new E(null,"barf-forward","barf-forward",1278612337),rg=new E(null,"from","from",1815293044),sg=new E(null,"selectPageDown","selectPageDown",226562613),tg=new E(null,"deleteCharBackward","deleteCharBackward",-618312025),ug=new E(null,"cursorPageUp","cursorPageUp",
-716828715),vg=new E(null,"selectCharLeft","selectCharLeft",1894248154),ph=new E(null,"spec","spec",347520401),wg=new E(null,"nav-left","nav-left",845947876),Qh=new E(null,"class","class",-2030961996),yg=new E(null,"cursorLineDown","cursorLineDown",180576864),zg=new E(null,"range","range",1639692286),Ag=new E(null,"selectDocEnd","selectDocEnd",496449813),Bg=new E(null,"cursor","cursor",1011937484),Cg=new E(null,"nav-right","nav-right",591041267),Dg=new E(null,"shift","shift",997140064),Jd=new Xb(null,
"meta19719","meta19719",1333101962,null),Sf=new E(null,"alt-impl","alt-impl",670969595),Eg=new E(null,"selectDocStart","selectDocStart",-217268371),Fg=new E(null,"deleteCharForward","deleteCharForward",823474956),Gg=new E(null,"deleteGroupBackward","deleteGroupBackward",616768113),Hg=new E(null,"selectLineUp","selectLineUp",-255594686),Ig=new E(null,"selectAll","selectAll",869127842),Jg=new E(null,"cursorDocEnd","cursorDocEnd",-1298653903),sa=new E(null,"dup","dup",556298533),Kg=new E(null,"cursorGroupForward",
"cursorGroupForward",1231480632),Lg=new E(null,"nav-select-right","nav-select-right",-455278613),Mg=new E(null,"cellpadding","cellpadding",-1752450238),ua=new E(null,"print-length","print-length",1931866356),Ng=new E(null,"unwrap","unwrap",-1399175462),Og=new E(null,"selectLineDown","selectLineDown",1741100604),pa=new E(null,"flush-on-newline","flush-on-newline",-151457939),Pg=new E(null,"selectGroupBackward","selectGroupBackward",1569543117),Qg=new E(null,"nav-select-left","nav-select-left",-1033285138),
Rg=new E(null,"selection-grow","selection-grow",1627169352),Sg=new E(null,"cursorLineUp","cursorLineUp",-1375841219),Tg=new E(null,"selectCharRight","selectCharRight",1049825195),Ug=new E(null,"i","i",-1386841315),Y=new E(null,"key","key",-1516042587),Vg=new E(null,"tr","tr",-1424774646),Wg=new E(null,"selectLineBoundaryForward","selectLineBoundaryForward",904508598),Xg=new E(null,"to","to",192099007),Yg=new E(null,"b","b",1482224470),Zg=new E(null,"selectPageUp","selectPageUp",152840428),$g=new E(null,
"splitLine","splitLine",-1338533189),ah=new E(null,"td","td",1479933353),bh=new E(null,"run","run",-1821166653),ch=new E(null,"cursorLineBoundaryForward","cursorLineBoundaryForward",-1283359997),dh=new E(null,"changes","changes",1492088),Bj=new E(null,"enter-and-indent","enter-and-indent",-1825406873),eh=new E(null,"cursorLineBoundaryBackward","cursorLineBoundaryBackward",1373049802),fh=new E(null,"kill","kill",-12335575),gh=new E(null,"div","div",1057191632),Tf=new E(null,"fallback-impl","fallback-impl",
-1501286995),hh=new E(null,"insertNewlineAndIndent","insertNewlineAndIndent",-542382007),ih=new E(null,"preventDefault","preventDefault",-1714933772),jh=new E(null,"pre","pre",2118456869),qa=new E(null,"readably","readably",1129599760),kh=new E(null,"deleteGroupForward","deleteGroupForward",596007091),lh=new E(null,"selectLineBoundaryBackward","selectLineBoundaryBackward",-1443564123),cg=new E(null,"keyword-fn","keyword-fn",-64566675),mh=new E(null,"cursorCharRight","cursorCharRight",-739900583),
nh=new E(null,"transposeChars","transposeChars",1566260285),oh=new E(null,"cursorCharLeft","cursorCharLeft",-1572589780),qh=new E(null,"indent","indent",-148200125),rh=new E(null,"insert","insert",1286475395),sh=new E(null,"cursorLineStart","cursorLineStart",-1505072960),th=new E(null,"slurp-backward","slurp-backward",-1615745159),uh=new E(null,"undoSelection","undoSelection",628691449),vh=new E(null,"from-to","from-to",-640428401),wh=new E(null,"cursorLineEnd","cursorLineEnd",-234219178),xh=new E(null,
"selectLineStart","selectLineStart",1211557745),Kf=new E(null,"more-marker","more-marker",-14717935);var yh={},zh={},Ah=[];function Bh(a,b){var c=zh[a];if(void 0!==c)return c;try{Ah.push(a);var d=yh[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};yh[a]=d}if(e){delete shadow$provide[a];try{e.call(d,aa,Bh,d,d.exports)}catch(g){throw console.warn("shadow-cljs - failed to load",a),g;}if(b){var f=b.globals;if(f)for(a=0;a<f.length;a++)window[f[a]]=d.exports}}}finally{Ah.pop()}return d.exports}Bh.cache={};Bh.resolve=function(a){return a};
function Ch(a){return Bh(a,{})};Ch(0);var Dh=Ch(1);var Eh=Ch(2);Ch(5);var Gh=Ch(6);Ch(7);var Hh=Ch(8);var Ih=Ch(9);var Jh=Ch(10);var Kh=Ch(11);var Lh=Ch(12);Ch(14);var Mh=Ch(15);function Nh(a){return a instanceof E?nd(a):a};function Oh(a,b){var c=G(b);I(c);c=K(c);I(c);for(K(c);;){c=G(b);b=I(c);c=K(c);var d=I(c);c=K(c);a[Nh(b)]=d;if(c)b=c;else break}}var Ph=function Ph(a){switch(arguments.length){case 1:return Ph.c(arguments[0]);case 2:return Ph.g(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return Ph.s(arguments[0],arguments[1],new H(c.slice(2),0,null))}};Ph.c=function(a){return a};
Ph.g=function(a,b){a=null!=a?a:{};if(null!=b)for(var c=G(ia(b)),d=null,e=0,f=0;;)if(f<e){var g=d.M(null,f);Oh(a,uc([g,b[Nh(g)]]));f+=1}else if(c=G(c))d=c,Mc(d)?(c=Db(d),f=Eb(d),d=c,e=O(c),c=f):(c=I(d),Oh(a,uc([c,b[Nh(c)]])),c=K(d),d=null,e=0),f=0;else break;return a};Ph.s=function(a,b,c){return Ca(Ph,Ph.g(a,b),c)};Ph.C=function(a){var b=I(a),c=K(a);a=I(c);c=K(c);return this.s(b,a,c)};Ph.F=2;var Rh=Ch(16);function Sh(a,b){b=0<b?b:0;a=a.doc.length;return b<a?b:a};function Th(a,b){return w(b.c?b.c(a):b.call(null,a))?a:null}function Uh(a,b){return a>b?{from:b,to:a}:{from:a,to:b}}function Vh(a,b){return w(b)?(a.dispatch(b),!0):!1}function Wh(a,b){return new v(null,2,[dh,new v(null,2,[rh,b,rg,a],null),Bg,a+b.length],null)}function Xh(a,b){return Yh(a,null,b)}
function Yh(a,b,c){return a.update(Ph.g(a.changeByRange(function(d){var e=c.c?c.c(d):c.call(null,d);if(null==e)e=null;else{e=Th(e,Jc);e=null!=e&&(e.j&64||t===e.v)?T(X,e):e;var f=C.g(e,eg),g=C.g(e,Bg),k=C.g(e,vh),l=C.g(e,zg);e=C.g(e,dh);e=w(e)?a.changes(bg(e)):null;w(l)?k=l:(w(f)?k=Eh.EditorSelection.cursor(e.mapPos(f)):w(g)?k=Eh.EditorSelection.cursor(g):w(k)?(f=k.c?k.c(0):k.call(null,0),k=k.c?k.c(1):k.call(null,1),k=Eh.EditorSelection.range(f,k)):k=null,k=w(k)?k:d);k={range:k};w(e)&&(k.changes=e);
e=k}return w(e)?e:{range:d}}),b))}function Zh(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;return $h(arguments[0],arguments[1],2<b.length?new H(b.slice(2),0,null):null)}
function $h(a,b,c){c=R(c,0,null);c=null!=c&&(c.j&64||t===c.v)?T(X,c):c;var d=C.l(c,rg,0),e=C.g(c,Xg);c=C.g(c,ph);for(var f=a.doc.iterLines(0),g=f.next(),k=[],l=d,m=1;;){var n=g,p=null!=n&&(n.j&64||t===n.v)?T(X,n):n,r=function(){var F=p;if(null!=F&&"done"in F)return F.done}(),u=function(){var F=p;if(null!=F&&"value"in F)return F.value}();if(w(function(){var F=r;return w(F)?F:d>e}()))return a.update(Ph.g({changes:a.changes(k)},c));g=f.next();n=function(){var F=b.l?b.l(l,u,m):b.call(null,l,u,m);if(w(F)){var S=
k;S.push(F);return S}return k}();var B=l+1+u.length,D=m+1;k=n;l=B;m=D}}
function ai(a,b){var c=new Pd(-1),d=a.doc;return a.changeByRange(function(e){var f=null!=e&&(e.j&64||t===e.v)?T(X,e):e;var g=null!=f&&"from"in f?f.from:void 0;var k=null!=f&&"to"in f?f.to:void 0;var l=null!=f&&"anchor"in f?f.anchor:void 0;var m=null!=f&&"head"in f?f.head:void 0;for(var n=[],p=d.lineAt(g);;){var r=p,u=null!=r&&(r.j&64||t===r.v)?T(X,r):r,B=function(){var F=u;if(null!=F&&"number"in F)return F.number}(),D=function(){var F=u;if(null!=F&&"to"in F)return F.to}();p.number>db(c)&&(Qd(c,B),
b.l?b.l(p,n,f):b.call(null,p,n,f));p=k>D?Th(d.lineAt(D+1),function(F,S,W,da){return function(ta){return ta.number>da}}(p,r,u,B,D,n,e,f,f,g,k,l,m,c,d)):!1;if(!w(p))return e=a.changes(n),{changes:n,range:Eh.EditorSelection.range(e.mapPos(l,1),e.mapPos(m,1))}}})}
function bi(a,b){var c=null!=a&&(a.j&64||t===a.v)?T(X,a):a;a=null!=c&&"state"in c?c.state:void 0;var d=null!=a&&(a.j&64||t===a.v)?T(X,a):a;var e=null!=d&&"doc"in d?d.doc:void 0;var f=null!=c&&"changes"in c?c.changes:void 0;a=null!=c&&"effects"in c?c.effects:void 0;var g=null!=c&&"selection"in c?c.selection:void 0;var k=new Pd(-1),l=[];f.iterChanges(function(p,r,u,B){p=e.lineAt(u);u=null!=p&&(p.j&64||t===p.v)?T(X,p):p;p=null!=u&&"number"in u?u.number:void 0;r=null!=u&&"to"in u?u.to:void 0;for(;;){p>
db(k)&&(Qd(k,p),b.g?b.g(u,l):b.call(null,u,l));if(B<=r)return null;var D=e.lineAt(r+1),F=D;if(w(w(F)?D.number>u.number:F))u=D;else return null}});var m=d.changes(l);if(G(l)){var n=function(){if(null!=c){var p={};"annotations"in c&&(p.annotations=c.annotations);"scrollIntoView"in c&&(p.scrollIntoView=c.scrollIntoView);"reconfigure"in c&&(p.reconfigure=c.reconfigure)}else p={};p=null!=p?p:{};p.changes=f.compose(m);return p}();g=w(g)?function(){var p=null!=n?n:{};p.selection=d.selection.map(m);return p}():
n;return w(a)?(g=null!=g?g:{},g.effects=Eh.StateEffect.mapEffects(a,m),g):g}return c}function ci(a){a=null!=a&&(a.j&64||t===a.v)?T(X,a):a;a=null!=a&&"selection"in a?a.selection:void 0;a=null!=a&&(a.j&64||t===a.v)?T(X,a):a;a=null!=a&&"ranges"in a?a.ranges:void 0;return!Ld(function(b){return b.empty},a)};var di=Rh.props.coll,ei=Rh.props.prefixColl,fi=Rh.props.prefixEdge,gi=Rh.props.prefixContainer,hi=Dh.NodeProp.closedBy,ii=Dh.NodeProp.openedBy,ji=Rh.props.sameEdge;function Bi(a){for(var b=0;;){a=a.parent;if(null==a)return b;b+=1}}function ki(a){return a.parent.childBefore(a.from)}function li(a){return a.parent.childAfter(a.to)}function mi(a){return a.type.prop(fi)}function ni(a){return a.type.prop(gi)}function Vd(a){return a.type.prop(hi)}function Wd(a){return a.type.prop(ii)}
function oi(a){a=a.type;return a.prop(hi)||a.prop(ji)||a.prop(fi)}function pi(a){return a.prop(ii)||a.prop(ji)}function qi(a){a=a.type.prop(Dh.NodeProp.closedBy);return null==a?null:a[0]}function ri(a){a=a.type.prop(Dh.NodeProp.openedBy);return null==a?null:a[0]}function Cj(a){return a.type.isTop}function si(a){return"String"===a.name}function ti(a){return"LineComment"===a.name}function ui(a){return a.type.prop(di)}
function vi(a){var b=null!=a&&(a.j&64||t===a.v)?T(X,a):a;a=null!=b&&"firstChild"in b?b.firstChild:void 0;b=null!=b&&"lastChild"in b?b.lastChild:void 0;var c=qi(a);return w(c)?M.g(c,b.name)&&!M.g(a.to,b.to):!0}var wi=function wi(a){var c=a.parent;return null==c?null:Q(c,new od(null,function(){return wi.c?wi.c(c):wi.call(null,c)},null))};function xi(a,b){return w(b.c?b.c(a):b.call(null,a))?a:Ca(function(c,d){return w(b.c?b.c(d):b.call(null,d))?new ic(d):null},null,wi(a))}
function Oi(a,b){return Ca(function(c,d){return w(b.c?b.c(d):b.call(null,d))?d:new ic(c)},null,Q(a,wi(a)))}function yi(a,b,c){a:switch(c){case 1:var d=a.childAfter(b);break a;case -1:d=a.childBefore(b);break a;default:throw Error(["No matching clause: ",z.c(c)].join(""));}return null==d?null:Q(d,new od(null,function(){var e=yi;a:switch(c){case 1:var f=d.to;break a;case -1:f=d.from;break a;default:throw Error(["No matching clause: ",z.c(c)].join(""));}return e(a,f,c)},null))}
function zi(a,b){return a.from===b.from&&a.to===b.to&&Bi(a)===Bi(b)}function Ai(a){var b=a.name;return w(ui(a))?zi(li(a.firstChild),a.lastChild):M.g("String",b)?a.firstChild.to===a.lastChild.from:!1}function qj(a){return{from:a.from,to:a.to}}function Ci(a,b){return Pc(a.from<=b.from&&a.to>=b.to&&Bi(a)<Bi(b))}
function Ei(a,b){if(zi(a,b))return null;var c=Rc(b.from,a.from);switch(c){case 0:return Ci(b,a)?a.parent:Ci(a,b)?a.firstChild:null;case -1:if(Ci(a,b))return a.lastChild;b=ki(a);return w(b)?b:a.parent;case 1:if(Ci(a,b))return a.firstChild;b=li(a);return w(b)?b:a.parent;default:throw Error(["No matching clause: ",z.c(c)].join(""));}}function Fi(a,b){return Ff(dd,be(function(c){return Ei(c,b)},a))}function Gi(a){var b=ui(a);return w(b)?b:si(a)||"RegExp"===a.name}
function Hi(a){switch(arguments.length){case 1:return arguments[0].tree;case 2:return arguments[0].tree.resolve(arguments[1]);case 3:return arguments[0].tree.resolve(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}
function Dj(a){switch(arguments.length){case 1:return arguments[0].cursor();case 2:return arguments[0].cursor(arguments[1]);case 3:return arguments[0].cursor(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",z.c(arguments.length)].join(""));}}function Ej(a){var b=a.from,c=Oi(a,function(d){return M.g(b,d.from)});return w(c)?c:a}
function Di(a,b,c){a=Ej(Dj(a,b,1).node).cursor;for(b=xc;;){var d=a.type;if(a.from>c)return b;var e=d;if((e.isTop?0:w(e.prop(ei))?0:w(e.prop(di))?0:"Meta"!==e.name)||d.isError){if(b=wc.g(b,{type:d,from:a.from,to:a.to}),a.lastChild(),!w(a.next()))return b}else if(!w(a.next()))return b}}
function Ii(a,b,c){c=Uc(Rc,new U(null,2,5,V,[b,c],null));b=R(c,0,null);c=R(c,1,null);var d=Hi(a,b,1),e=Hi(a,c,-1);a=w(Gi(d))?d.from:b;b=w(Gi(e))?e.to:c;b=Ca(function(f,g){var k=R(f,0,null);f=R(f,1,null);return new U(null,2,5,V,[Ci(g,d)?g.from:k,Ci(g,e)?g.to:f],null)},new U(null,2,5,V,[a,b],null),Xd.g(function(f){var g=f.type;return g.prop(hi)||g.prop(ii)||g.prop(ji)||g.prop(ei)?f.parent:f},Fi(d,e)));a=R(b,0,null);b=R(b,1,null);return Eh.EditorSelection.range(a,b)}
function Hf(a){a=null!=a&&(a.j&64||t===a.v)?T(X,a):a;var b=null!=a&&"firstChild"in a?a.firstChild:void 0;var c=null!=a&&"lastChild"in a?a.lastChild:void 0;return{from:oi(b)?b.to:a.from,to:pi(c.type)?c.from:a.to}}function Ji(a){a=a.parent;if(null==a)return null;var b=Th(a,ni);return w(b)?b:Th(a.firstChild,mi)}function Ki(a,b){return[z.c(function(){var c=Ji(b);return null==c?null:a.doc.slice(c.from,c.to)}()),b.firstChild.name].join("")}function Li(a){return w(Ji(a))?a.parent:a};(function(a){if(Hc(a))return Fc(a,null);a=G(a);if(null==a)return Ef;if(a instanceof H&&0===a.i){a=a.h;for(var b=a.length,c=wb(Ef),d=0;;)if(d<b)xb(c,a[d]),d+=1;else break;return yb(c)}for(c=wb(Ef);;)if(null!=a)b=K(a),c=xb(c,A(a)),a=b;else return yb(c)})(Xd.g(function(a){return a.charCodeAt(0)},new U(null,4,5,V,[" ","n","r",","],null)));var Z=Ch(18);var Mi=Lh.indentNodeProp.add(function(a){var b=null!=a&&(a.j&64||t===a.v)?T(X,a):a;var c=null!=b&&"name"in b?b.name:void 0;return function(d){d=null!=d&&(d.j&64||t===d.v)?T(X,d):d;var e=null!=d&&"node"in d?d.node:void 0;if(M.g("Program",c))return 0;if(w(b.prop(di))){d=d.column(e.firstChild.to);if(M.g("List",c)){e=null==e?null:e.firstChild;e=null==e?null:li(e);e=null==e?null:e.name;var f=new Cf(null,new v(null,2,["DefLike",null,"Operator",null],null),null);e=f.c?f.c(e):f.call(null,e)}else e=!1;return w(e)?
d+1:d}return-1}});function Ni(a,b){return Ca(function(c,d){d=d.g?d.g(a,b):d.call(null,a,b);return-1<d?new ic(d):c},-1,a.state.facet(Eh.EditorState.indentation))}
function Pi(a,b,c){var d=xg(de(function(e){return b<=e.from&&e.from<=c||b<=e.to&&e.to<=c},Di(a.tree,b,c)));a=function(){var e=I(d);e=null==e?null:e.to;return null==e?null:e<c}();return Ca(function(e,f){var g=R(f,0,null),k=null!=g&&(g.j&64||t===g.v)?T(X,g):g;g=null!=k&&"type"in k?k.type:void 0;k=null!=k&&"from"in k?k.from:void 0;f=R(f,1,null);var l=null!=f&&(f.j&64||t===f.v)?T(X,f):f;f=null!=l&&"to"in l?l.to:void 0;l=null!=l&&"type"in l?l.type:void 0;g=l.prop(hi)||l.prop(fi)||g.prop(ii)||g.prop(ji)?
0:1;switch(Rc(k-f,g)){case 0:return e;case 1:return e.push({from:0===g?f:f+1,to:k}),e;case -1:return e.push({from:f,insert:" "}),e;default:return e}},w(a)?[{from:I(d).to,to:c}]:[],ge(2,1,d))}function Qi(a,b){b=G(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.M(null,e);a.push(f);e+=1}else if(b=G(b))c=b,Mc(c)?(b=Db(c),e=Eb(c),c=b,d=O(b),b=e):(b=I(c),a.push(b),b=K(c),c=null,d=0),e=0;else break;return a}
function Ri(a,b,c,d,e){var f=/^\s*/.exec(d)[0].length,g=Th(Ni(b,c),Nd(hd));b=w(g)?function(){var k=Rc(g,f);switch(k){case 0:return null;case 1:return{from:c+f,insert:a.indentString(g-f)};case -1:return{from:c+g,to:c+f};default:throw Error(["No matching clause: ",z.c(k)].join(""));}}():null;d=w(!0)?Pi(a,c+f,c+O(d)):null;e=w(d)?Qi(e,d):e;w(b)&&e.push(b);return e}
function Si(a){var b=new Eh.IndentContext(a);return ai(a,function(c,d){var e=null!=c&&(c.j&64||t===c.v)?T(X,c):c;c=null!=e&&"from"in e?e.from:void 0;e=null!=e&&"content"in e?e.content:void 0;return Ri(a,b,c,e,d)})}function Ti(a){var b=new Eh.IndentContext(a);return Zh(a,function(c,d){return Ri(a,b,c,d,[])})};function Ui(){var a=Vi,b=new U(null,2,5,V,["",xc],null);a:{var c=If(/\||<[^>]*?>|[^<>|]+/,'(defn lezer-clojure\n  "This is a showcase for `lezer-clojure`, a grammar for Clojure/Script to enable a decent editor experience in the browser."\n  {:added "0.1"}\n  [demo]\n  nil ;; nil\n  (+ 1 1.0 1/5 1E3 042 +042 -042) ;; numbers\n  :hi :hi/ho ::ho :*+!-_? :abc:def:ghi ;; keywords\n  true false ;; booleans\n  :hello #_ :ignored ;; ignore next form\n  #"[A-Z]" ;; regex\n  ^{:meta/data \'is-data} \'too\n  (if (test? \x3cdemo\x3e)\n    (inc demo)|\n    (dec demo)))\n  #\n    [ ]\n    #"a"\na b(c|)d e');
break a;throw new TypeError("re-seq must match against a string.");}c=Ca(function(d,e){var f=R(d,0,null);d=R(d,1,null);if(M.g(e,"|"))e=new U(null,2,5,V,[f,wc.g(d,Eh.EditorSelection.cursor(f.length))],null);else if(0==e.lastIndexOf("\x3c",0)){var g=V,k=O(e)-1;e=new U(null,2,5,g,[[f,e.substring(1,k)].join(""),wc.g(d,Eh.EditorSelection.range(f.length,f.length+(O(e)-2)))],null)}else e=new U(null,2,5,V,[[f,z.c(e)].join(""),d],null);return e},b,c);b=R(c,0,null);c=R(c,1,null);return Eh.EditorState.create({doc:b,
selection:G(c)?Eh.EditorSelection.create(Vc(c)):void 0,extensions:function(){var d=[Eh.EditorState.allowMultipleSelections.of(!0)];w(a)&&d.push(a);return d}()})};function Wi(a){return Md(function(b){return wa(b.empty)},a.ranges)}
var Xi=Eh.StateField.define({create:Od(J),update:function(a,b){b=null!=b&&(b.j&64||t===b.v)?T(X,b):b;var c=null!=b&&"state"in b?b.state:void 0;c=null!=c&&(c.j&64||t===c.v)?T(X,c):c;var d=null!=c&&"selection"in c?c.selection:void 0;b=null!=b&&"docChanged"in b?b.docChanged:void 0;return w(b)?J:wa(Wi(d))?new yc(null,d,null,1,null):w(function(){var e=null==a?null:I(K(a));return null==e?null:e.eq(d)}())?Zd(1,a):w(function(){var e=null==a?null:I(a);return null==e?null:e.eq(d)}())?a:wc.g(a,d)}});function Yi(a){return function(b){var c=null!=b&&(b.j&64||t===b.v)?T(X,b):b;b=null!=c&&"state"in c?c.state:void 0;c=null!=c&&"dispatch"in c?c.dispatch:void 0;b=a.c?a.c(b):a.call(null,b);null!=b&&(c.c?c.c(b):c.call(null,b));return!0}}
function Fj(a){var b=document;b=null!=b&&"activeElement"in b?b.activeElement:void 0;var c=document.createElement("input");c.setAttribute("class","clipboard-input");c.setAttribute("value",a);document.body.appendChild(c);c.focus();c.select();document.execCommand("copy");document.body.removeChild(c);b.focus()}
function Zi(a,b,c){var d=function(){var e=xi(Hi(a,b),function(g){var k=ui(g);return w(k)?k:si(g)||Cj(g)});e=null==e?null:yi(e,b,c);e=null==e?null:I(e);if(null==e)return null;a:switch(c){case -1:var f=rg;break a;case 1:f=Xg;break a;default:throw Error(["No matching clause: ",z.c(c)].join(""));}f=Nh(f);if(null!=e&&f in e)return e[f]}();return w(d)?d:Sh(a,b+c)}
function $i(a){return function(b){return Xh(b,function(c){var d=null!=c&&(c.j&64||t===c.v)?T(X,c):c;c=null!=d&&"from"in d?d.from:void 0;var e=null!=d&&"to"in d?d.to:void 0;d=null!=d&&"empty"in d?d.empty:void 0;if(w(d))c=new v(null,1,[Bg,Zi(b,c,a)],null);else{c=Uh(c,e);b:switch(a){case -1:e=rg;break b;case 1:e=Xg;break b;default:throw Error(["No matching clause: ",z.c(a)].join(""));}e=Nh(e);c=null!=c&&e in c?c[e]:void 0;c=new v(null,1,[Bg,c],null)}return c})}}
function aj(a){return function(b){return Xh(b,function(c){var d=null!=c&&(c.j&64||t===c.v)?T(X,c):c;c=null!=d&&"from"in d?d.from:void 0;var e=null!=d&&"to"in d?d.to:void 0;d=null!=d&&"empty"in d?d.empty:void 0;if(w(d))c=new v(null,1,[zg,Ii(b,c,Zi(b,c,a))],null);else{a:switch(c=Uh(c,e),e=null!=c&&(c.j&64||t===c.v)?T(X,c):c,c=null!=e&&"from"in e?e.from:void 0,e=null!=e&&"to"in e?e.to:void 0,a){case 1:c=Ii(b,c,Zi(b,e,a));break a;case -1:c=Ii(b,Zi(b,c,a),e);break a;default:throw Error(["No matching clause: ",
z.c(a)].join(""));}c=new v(null,1,[zg,c],null)}return c})}}function bj(a,b){var c=function(){var g=Hi(a,b,-1);return null==g?null:Th(g,function(k){k=null!=k&&(k.j&64||t===k.v)?T(X,k):k;k=null!=k&&"to"in k?k.to:void 0;return M.g(b,k)})}(),d=function(){var g=Hi(a,b,1);return null==g?null:Th(g,function(k){k=null!=k&&(k.j&64||t===k.v)?T(X,k):k;k=null!=k&&"from"in k?k.from:void 0;return M.g(b,k)})}(),e=Hi(a,b);var f=Th(c,Td(xa,Nd(oi)));return w(f)?f:w(d)?d:w(c)?c:e}
function cj(a,b,c){a=bj(a,c);return I(de(function(d){var e=null!=d&&(d.j&64||t===d.v)?T(X,d):d;d=null!=e&&"from"in e?e.from:void 0;e=null!=e&&"to"in e?e.to:void 0;return d<=b&&e>=c&&!(d===b&&e===c)},Q(a,ce(Gf(),uc([wi(a)])))))}
function dj(a){return function(b){return Xh(b,function(c){var d=null!=c&&(c.j&64||t===c.v)?T(X,c):c;c=null!=d&&"from"in d?d.from:void 0;d=null!=d&&"empty"in d?d.empty:void 0;if(w(d)){var e=xi(Hi(b,c),Td(ui,function(g){a:switch(a){case 1:g=null==g?null:Li(g);g=null==g?null:li(g);g=null==g?null:Wd(g);break a;case -1:g=null==g?null:Li(g);g=null==g?null:ki(g);g=null==g?null:Vd(g);break a;default:throw Error(["No matching clause: ",z.c(a)].join(""));}return wa(g)}));if(w(e)){a:switch(a){case 1:var f=I(ee(ti,
Ff(dd,be(li,li(Li(e))))));break a;case -1:f=I(ee(ti,Ff(dd,be(ki,ki(Li(e))))));break a;default:throw Error(["No matching clause: ",z.c(a)].join(""));}return w(f)?new v(null,2,[eg,c,dh,function(){switch(a){case 1:var g=e.lastChild,k=V,l=new v(null,2,[rg,f.to,rh,g.name],null);g=qj(g);g=null!=g?g:{};g.insert=" ";return new U(null,2,5,k,[l,g],null);case -1:return g=Ki(b,e),k=Li(e).from,new U(null,2,5,V,[new v(null,3,[rg,k,Xg,k+g.length,rh," "],null),new v(null,2,[rg,f.from,rh,g],null)],null);default:throw Error(["No matching clause: ",
z.c(a)].join(""));}}()],null):null}}return null})}}
function ej(a){return function(b){return Xh(b,function(c){c=null!=c&&(c.j&64||t===c.v)?T(X,c):c;var d=null!=c&&"from"in c?c.from:void 0;c=null!=c&&"empty"in c?c.empty:void 0;if(w(c)){var e=xi(Hi(b,d),ui);if(w(e))switch(a){case 1:c=function(){var l=e.lastChild;l=null==l?null:Ff(dd,be(ki,ki(l)));l=null==l?null:ee(ti,l);l=null==l?null:Zd(1,l);return null==l?null:I(l)}();if(w(c)){var f=c;return new v(null,2,[Bg,function(){var l=f.to;return l<d?l:d}(),dh,new U(null,2,5,V,[new v(null,2,[rg,f.to,rh,e.lastChild.name],
null),function(){var l=qj(e.lastChild);l=null!=l?l:{};l.insert=" ";return l}()],null)],null)}return null;case -1:c=function(){var l=e.firstChild;l=null==l?null:Ff(dd,be(li,li(l)));l=null==l?null:ee(ti,l);l=null==l?null:Zd(1,l);return null==l?null:I(l)}();if(w(c)){var g=c,k=Ki(b,e);c=Li(e).from;return new v(null,2,[Bg,function(){var l=g.from+(k.length+1);return d>l?d:l}(),dh,new U(null,2,5,V,[new v(null,2,[rg,g.from,rh,[" ",k].join("")],null),new v(null,3,[rg,c,Xg,c+k.length,rh,b.indentString(k.length)],
null)],null)],null)}return null;default:throw Error(["No matching clause: ",z.c(a)].join(""));}else return null}else return null})}}
var fj=xf([sh,yg,Ig,Hg,ch,lh,tg,hh,eh,Tg,Zg,Fg,oh,dg,Eg,Pg,Jg,Gg,xh,kh,Ag,sg,og,ug,Wg,wh,Kg,mh,ig,lg,vg,$g,Og,nh,Sg,mg],[Z.cursorLineStart,Z.cursorLineDown,Z.selectAll,Z.selectLineUp,Z.cursorLineBoundaryForward,Z.selectLineBoundaryBackward,Z.deleteCharBackward,Z.insertNewlineAndIndent,Z.cursorLineBoundaryBackward,Z.selectCharRight,Z.selectPageUp,Z.deleteCharForward,Z.cursorCharLeft,Z.cursorGroupBackward,Z.selectDocStart,Z.selectGroupBackward,Z.cursorDocEnd,Z.deleteGroupBackward,Z.selectLineStart,
Z.deleteGroupForward,Z.selectDocEnd,Z.selectPageDown,Z.cursorPageDown,Z.cursorPageUp,Z.selectLineBoundaryForward,Z.cursorLineEnd,Z.cursorGroupForward,Z.cursorCharRight,Z.selectGroupForward,Z.selectLineEnd,Z.selectCharLeft,Z.splitLine,Z.selectLineDown,Z.transposeChars,Z.cursorLineUp,Z.cursorDocStart]),gj=xf([qh,wg,Bj,Rg,fh,gg,Lg,Qg,qg,ng,Cg,th,Ng,hg],[Yi(function(a){return ci(a)?a.update(Si(a)):Ti(a)}),Yi($i(-1)),Yi(function(a){var b=new Eh.IndentContext(a);return Xh(a,function(c){var d=null!=c&&(c.j&
64||t===c.v)?T(X,c):c;c=null!=d&&"from"in d?d.from:void 0;d=null!=d&&"to"in d?d.to:void 0;var e=Hf(xi(Hi(a,c),Ud(ui,Cj))).from;e=Ni(b,e);e=["\n",z.c(a.indentString(e))].join("");return new v(null,2,[Bg,c+e.length,dh,new U(null,1,5,V,[new v(null,3,[rg,c,Xg,d,rh,e],null)],null)],null)})}),Yi(function(a){return Xh(a,function(b){var c=null!=b&&(b.j&64||t===b.v)?T(X,b):b;var d=null!=c&&"from"in c?c.from:void 0;var e=null!=c&&"to"in c?c.to:void 0;b=null!=c&&"empty"in c?c.empty:void 0;return w(b)?new v(null,
1,[zg,function(){var f=bj(a,d);f=null==f?null:Ii(a,f.from,f.to);return w(f)?f:c}()],null):new v(null,1,[zg,function(){var f=cj(a,d,e);f=null==f?null:Eh.EditorSelection.range(f.from,f.to);return w(f)?f:c}()],null)})}),Yi(function(a){return Xh(a,function(b){var c=null!=b&&(b.j&64||t===b.v)?T(X,b):b;var d=null!=c&&"from"in c?c.from:void 0;b=null!=c&&"to"in c?c.to:void 0;c=null!=c&&"empty"in c?c.empty:void 0;if(w(c)){b=Hi(a,d);var e=xi(b,function(k){var l=ui(k);return w(l)?l:si(k)||Cj(k)}),f=a.doc.lineAt(d).to,
g=w(e)?yi(e,d,1):null;b=w(e)?function(){var k=null==g?null:Ff(Sd(function(l){return l.from<=f}),g);return null==k?null:vc(k)}():null;b=si(e)?function(){var k=z.c(a.doc.slice(e.from,e.to)).substring(d-e.from).indexOf("\n");return 0>k?e.to-1:d+k+1}():w(b)?Wd(b)?b.from:b.to:w(function(){var k=I(g);k=null==k?null:k.from;return null==k?null:k>f}())?I(g).from:null;Fj(a.doc.slice(d,b));return w(b)?new v(null,2,[Bg,d,dh,new v(null,2,[rg,d,Xg,b],null)],null):null}Fj(a.doc.slice(d,b));return new v(null,2,[Bg,
d,dh,Uh(d,b)],null)})}),Yi(dj(1)),Yi(aj(1)),Yi(aj(-1)),Yi(ej(1)),Yi(ej(-1)),Yi($i(1)),Yi(dj(-1)),Yi(function(a){return Xh(a,function(b){var c=null!=b&&(b.j&64||t===b.v)?T(X,b):b;b=null!=c&&"from"in c?c.from:void 0;c=null!=c&&"empty"in c?c.empty:void 0;return w(c)?(c=Hi(a,b,-1),c=null==c?null:xi(c,ui),c=null==c?null:Th(c,vi),w(c)?new v(null,2,[Bg,b-1,dh,new U(null,2,5,V,[qj(c.firstChild),qj(c.lastChild)],null)],null):null):null})}),Yi(function(a){var b=I(K(a.field(Xi)));return w(b)?a.update({selection:b}):
Xh(a,function(c){return new v(null,1,[Bg,c.from],null)})})]),hj=function(a){return w(Md(dd,a))?bd(function(b,c){return wc.g(w(b)?b:Kd,c)},a):null}(uc([fj,gj]));cd(function(a,b,c){return Ac.l(a,c,b)},Kd,hj);function ij(a){var b=null!=a&&(a.j&64||t===a.v)?T(X,a):a;return w(M.g(1,b.selection.ranges.length)?function(){var c=null!=b&&"selection"in b?b.selection:void 0;c=null!=c&&"ranges"in c?c.ranges:void 0;c=null!=c&&0 in c?c[0]:void 0;var d=c.empty;return w(d)?M.g(0,c.from):d}():!1)?null:Yh(b,{annotations:Eh.Transaction.userEvent.of("delete")},function(c){var d=null!=c&&(c.j&64||t===c.v)?T(X,c):c;c=null!=d&&"empty"in d?d.empty:void 0;var e=null!=d&&"head"in d?d.head:void 0;d=null!=d&&"anchor"in d?d.anchor:
void 0;e=Uh(e,d);e=null!=e&&(e.j&64||t===e.v)?T(X,e):e;var f=null!=e&&"from"in e?e.from:void 0;if(wa(c))return new v(null,2,[Bg,f,dh,e],null);c=b.tree.resolve(f,-1);e=c.parent;c=w(w(e)?!vi(e):e)?null:pi(c.type)&&f===e.to?new v(null,1,[Bg,f-1],null):(Vd(c)||c.type.prop(ji))&&c.from===e.from?Ai(c.parent)?new v(null,2,[Bg,e.from,dh,new U(null,1,5,V,[Uh(e.from,e.to)],null)],null):new v(null,1,[Bg,f],null):w(function(){var g=Hi(b,f-1,-1);return null==g?null:Th(g,Td(function(k){return M.g(f-1,k.to)},ti))}())?
new v(null,1,[Bg,f-1],null):null;return w(c)?c:new v(null,2,[Bg,Sh(b,f-1),dh,Uh(Sh(b,f-1),f)],null)})}var jj=new v(null,4,'()[]{}""'.split(""),null);
function kj(a,b){var c=jj.c?jj.c(b):jj.call(null,b);return Xh(a,function(d){var e=null!=d&&(d.j&64||t===d.v)?T(X,d):d;var f=null!=e&&"from"in e?e.from:void 0;d=null!=e&&"head"in e?e.head:void 0;var g=null!=e&&"empty"in e?e.empty:void 0;wa(g)?(g=null!=e&&"to"in e?e.to:void 0,e=null!=e&&"anchor"in e?e.anchor:void 0,f=new v(null,2,[dh,new U(null,2,5,V,[new v(null,2,[rh,b,rg,f],null),new v(null,2,[rh,c,rg,g],null)],null),vh,new U(null,2,5,V,[e+b.length,d+b.length],null)],null)):f=w(M.g(b,'"')?xi(Hi(a,
f),si):!1)?Wh(d,'\\"'):null;return w(f)?f:new v(null,2,[dh,new v(null,2,[rh,[b,c].join(""),rg,d],null),Bg,d+b.length],null)})}
function lj(a,b){return Yh(a,{annotations:Eh.Transaction.userEvent.of("format-selections")},function(c){c=null!=c&&(c.j&64||t===c.v)?T(X,c):c;var d=null!=c&&"empty"in c?c.empty:void 0;var e=null!=c&&"head"in c?c.head:void 0;c=function(){var f=function(){var l=Hi(a,e,-1);l=null==l?null:wi(l);l=null==l?null:de(Td(ui,Nd(vi)),l);return null==l?null:I(l)}(),g=function(){var l=null==f?null:f.firstChild;return null==l?null:qi(l)}(),k=null==f?null:f.to;return w(w(g)?M.g(g,b):g)?new v(null,2,[dh,new v(null,
2,[rg,k,rh,g],null),Bg,k+1],null):null}();if(w(c))return c;c=function(){var f=function(){if(w(d))for(var g=Dj(Hi(a),e+1);;){if(pi(g.type))return g.to;if(!w(g.next()))return null}else return d}();return w(f)?new v(null,1,[Bg,f],null):null}();return w(c)?c:Wh(e,b)})}function Fh(a){return function(b){b=null!=b&&(b.j&64||t===b.v)?T(X,b):b;var c=null!=b&&"state"in b?b.state:void 0;return Vh(b,kj(c,a))}}
function Gj(a){return function(b){b=null!=b&&(b.j&64||t===b.v)?T(X,b):b;var c=null!=b&&"state"in b?b.state:void 0;return Vh(b,lj(c,a))}};var mj=Gh.EditorView.baseTheme({$matchingBracket:{color:"#0b0"},$nonmatchingBracket:{color:"#a22"}}),nj=Gh.Decoration.mark({"class":Gh.themeClass("matchingBracket")}),oj=Gh.Decoration.mark({"class":Gh.themeClass("nonmatchingBracket")});function pj(a,b){return b.range(a.from,a.to)}
Eh.StateField.define({create:Od(Gh.Decoration.none),update:function(a,b){var c=null!=b&&(b.j&64||t===b.v)?T(X,b):b;var d=null!=c&&"state"in c?c.state:void 0;b=null!=c&&"docChanged"in c?c.docChanged:void 0;var e=null!=c&&"selection"in c?c.selection:void 0;return w(w(b)?b:e)?(a=Ca(function(f,g){g=null!=g&&(g.j&64||t===g.v)?T(X,g):g;var k=null!=g&&"head"in g?g.head:void 0;var l=null!=g&&"empty"in g?g.empty:void 0;g=function(){var m=w(l)?I(de(Ud(Vd,Wd),new U(null,2,5,V,[Hi(d,k,-1),Hi(d,k,1)],null))):
l;if(w(m)){var n=Vd(m)&&M.g(m.from,m.parent.from)?Th(m.parent.lastChild,function(p){return M.g(p.name,qi(m))}):Wd(m)&&M.g(m.to,m.parent.to)?Th(m.parent.firstChild,function(p){return M.g(p.name,ri(m))}):null;return w(n)?wc.s(f,pj(m,nj),uc([pj(n,nj)])):wc.g(f,pj(m,oj))}return null}();if(w(g))return g;g=function(){if(wa(xi(Hi(d,k),si))){var m=c.state.doc.slice(k,k+1).toString();var n=new Cf(null,new v(null,3,[")",null,"]",null,"}",null],null),null);m=n.c?n.c(m):n.call(null,m)}else m=!1;return w(m)?wc.g(f,
pj({from:k,to:k+1},oj)):null}();return w(g)?g:f},xc,c.state.selection.ranges),Gh.Decoration.set(Ba(a),!0)):a},provide:[Gh.EditorView.decorations]});function rj(a){return cd(function(b,c,d){var e=C.g(b,c);return null==e?Cc.g(b,c):Ac.l(b,c,d.c?d.c(e):d.call(null,e))},a,new v(null,2,[bh,hj,Dg,hj],null))}function sj(a){return bg(cd(function(b,c,d){return fe.g(b,Xd.g(function(e){return rj(Ac.l(e,bh,c))},d))},xc,a))}
var tj=xf([yg,Ig,ch,tg,eh,Fg,oh,dg,Jg,Gg,kh,og,ug,wh,Kg,uh,mh,$g,nh,Sg,mg],[new U(null,2,5,V,[new v(null,2,[Y,"ArrowDown",Dg,Og],null),new v(null,2,[pg,"Ctrl-n",Dg,Og],null)],null),new U(null,1,5,V,[new v(null,1,[Y,"Mod-a"],null)],null),new U(null,1,5,V,[new v(null,2,[Y,"End",Dg,Wg],null)],null),new U(null,2,5,V,[new v(null,1,[Y,"Backspace"],null),new v(null,1,[pg,"Ctrl-h"],null)],null),new U(null,2,5,V,[new v(null,3,[Y,"Home",Dg,lh,pg,"Ctrl-a"],null),new v(null,2,[pg,"Cmd-ArrowLeft",Dg,lh],null)],
null),new U(null,2,5,V,[new v(null,1,[Y,"Delete"],null),new v(null,1,[pg,"Ctrl-d"],null)],null),new U(null,2,5,V,[new v(null,2,[Y,"ArrowLeft",Dg,vg],null),new v(null,2,[pg,"Ctrl-b",Dg,vg],null)],null),new U(null,1,5,V,[new v(null,2,[pg,"Alt-b",Dg,Pg],null)],null),new U(null,3,5,V,[new v(null,2,[pg,"Cmd-ArrowDown",Dg,Ag],null),new v(null,2,[Y,"Mod-End",Dg,Ag],null),new v(null,1,[pg,"Alt-\x3e"],null)],null),new U(null,2,5,V,[new v(null,2,[Y,"Mod-Backspace",pg,"Alt-Backspace"],null),new v(null,1,[pg,
"Ctrl-Alt-h"],null)],null),new U(null,3,5,V,[new v(null,2,[Y,"Mod-Delete",pg,"Ctrl-Alt-Backspace"],null),new v(null,1,[pg,"Alt-Delete"],null),new v(null,1,[pg,"Alt-d"],null)],null),new U(null,3,5,V,[new v(null,2,[pg,"Ctrl-ArrowDown",Dg,sg],null),new v(null,2,[Y,"PageDown",Dg,sg],null),new v(null,1,[pg,"Ctrl-v"],null)],null),new U(null,3,5,V,[new v(null,2,[pg,"Ctrl-ArrowUp",Dg,Zg],null),new v(null,2,[Y,"PageUp",Dg,Zg],null),new v(null,1,[pg,"Alt-v"],null)],null),new U(null,2,5,V,[new v(null,1,[pg,
"Cmd-ArrowRight"],null),new v(null,2,[pg,"Ctrl-e",Dg,lg],null)],null),new U(null,1,5,V,[new v(null,2,[pg,"Alt-f",Dg,ig],null)],null),new U(null,1,5,V,[new v(null,2,[Y,"Mod-u",ih,!0],null)],null),new U(null,2,5,V,[new v(null,2,[Y,"ArrowRight",Dg,Tg],null),new v(null,2,[pg,"Ctrl-f",Dg,Tg],null)],null),new U(null,1,5,V,[new v(null,1,[pg,"Ctrl-o"],null)],null),new U(null,1,5,V,[new v(null,1,[pg,"Ctrl-t"],null)],null),new U(null,2,5,V,[new v(null,2,[Y,"ArrowUp",Dg,Hg],null),new v(null,2,[pg,"Ctrl-p",Dg,
Hg],null)],null),new U(null,3,5,V,[new v(null,2,[pg,"Cmd-ArrowUp",Dg,Eg],null),new v(null,2,[Y,"Mod-Home",Dg,Eg],null),new v(null,1,[pg,"Alt-\x3c"],null)],null)]),Xc=xf([qh,wg,Bj,Rg,fh,gg,qg,ng,Cg,th,Ng,hg],[new U(null,1,5,V,[new v(null,2,[Y,"Tab",kg,"Indent document (or selection)"],null)],null),new U(null,1,5,V,[new v(null,4,[Y,"Alt-ArrowLeft",Dg,Qg,kg,"Move cursor one unit to the left (shift: selects this region)",ih,!0],null)],null),new U(null,1,5,V,[new v(null,2,[Y,"Enter",kg,"Insert newline and indent"],
null)],null),new U(null,2,5,V,[new v(null,2,[kg,"Grow selections",Y,"Alt-ArrowUp"],null),new v(null,1,[Y,"Mod-1"],null)],null),new U(null,1,5,V,[new v(null,3,[Y,"Ctrl-k",kg,"Remove all forms from cursor to end of line",ih,!0],null)],null),new U(null,2,5,V,[new v(null,3,[Y,"Ctrl-ArrowRight",kg,"Expand collection to include form to the right",ih,!0],null),new v(null,2,[Y,"Mod-Shift-k",ih,!0],null)],null),new U(null,2,5,V,[new v(null,3,[Y,"Ctrl-ArrowLeft",kg,"Shrink collection forwards by one form",
ih,!0],null),new v(null,2,[Y,"Mod-Shift-j",ih,!0],null)],null),new U(null,1,5,V,[new v(null,2,[kg,"Shrink collection backwards by one form",Y,"Ctrl-Alt-ArrowRight"],null)],null),new U(null,1,5,V,[new v(null,4,[Y,"Alt-ArrowRight",Dg,Lg,kg,"Move cursor one unit to the right (shift: selects this region)",ih,!0],null)],null),new U(null,1,5,V,[new v(null,3,[kg,"Grow collection backwards by one form",Y,"Ctrl-Alt-ArrowLeft",ih,!0],null)],null),new U(null,1,5,V,[new v(null,3,[Y,"Alt-s",kg,"Lift contents of collection into parent",
ih,!0],null)],null),new U(null,2,5,V,[new v(null,2,[kg,"Shrink selections",Y,"Alt-ArrowDown"],null),new v(null,1,[Y,"Mod-2"],null)],null)]),uj=sj(tj),vj=sj(Xc).concat(uj);var wj=[Lh.LezerSyntax.define(Rh.parser.withProps(Mi,Lh.foldNodeProp.add(function(){function a(b){return{from:b.from+1,to:b.to-1}}return{Vector:a,Map:a,List:a}}()),Jh.styleTags({LineComment:"lineComment","VarName/Symbol":"variableName definition",Boolean:"atom",Keyword:"atom",Number:"number",DocString:"+emphasis",RegExp:"regexp",Discard:"!comment","Operator/Symbol":"keyword",String:"string",DefLike:"keyword",Nil:"null"})),{languageData:{commentTokens:{line:";;"}}}),Gh.keymap([{key:"Backspace",run:function(a){a=
null!=a&&(a.j&64||t===a.v)?T(X,a):a;var b=null!=a&&"state"in a?a.state:void 0;return Vh(a,ij(b))}},{key:"(",run:Fh("(")},{key:"[",run:Fh("[")},{key:"{",run:Fh("{")},{key:'"',run:Fh('"')},{key:")",run:Gj(")")},{key:"]",run:Gj("]")},{key:"}",run:Gj("}")}]),[mj],Xi,Eh.EditorState.transactionFilter.of(function(a){var b=a.annotation(Eh.Transaction.userEvent),c=function(){switch(b){case "input":case "delete":case "keyboardselection":case "pointerselection":case "cut":return null;case "format-selections":return Si(a.state);
default:var d=a.state,e=new Eh.IndentContext(d);return bi(a,function(f,g){return Ri(d,e,f.from,f.content,g)})}}();return w(c)?a.startState.update(function(){var d=null!=c?c:{};d.filter=!1;return d}()):a}),Gh.EditorView.lineWrapping];Mh.buildParser('@external prop prefixColl from "./props"\n@external prop coll from "./props"\n@external prop prefixEdge from "./props"\n@external prop sameEdge from "./props"\n@external prop prefixContainer from "./props"\n\n@top Program { expression* }\n\n@skip { whitespace | LineComment | Discard }\nexpression { Constructor | Boolean | Nil | Deref | Quote | SyntaxQuote | Unquote | UnquoteSplice | Symbol | Number | Keyword | List | Vector | Map | String | Character | Set | NamespacedMap | RegExp | Var | ReaderConditional | DataLiteral | SymbolicValue | AnonymousFunction | Meta\x3cexpression\x3e }\nDiscard { "#_" expression }\n@precedence { docString @left, operator @left, meta @right, prefixLiteral @right }\n\nlistContents {\n   defList { defLikeWithMeta varNameWithMeta (DocString expression+ | expression+)? } |\n   anyList { operatorWithMeta? expression* }\n }\n\nDocString { !docString String }\nList[coll] { "(" listContents ")" }\nVector[coll] { "[" expression* "]" }\nMap[coll] { "{" expression* "}" }\nVarName { Symbol }\n\ncoll[@isGroup\x3dColl] {\n  List | Vector | Map\n}\nprefixColl[@isGroup\x3dPrefixColl] {\n  Set |\n  AnonymousFunction |\n  NamespacedMap |\n  Constructor |\n  ReaderConditional |\n  ReaderMetadata |\n  Metadata |\n  Deref |\n  Quote |\n  SyntaxQuote |\n  Unquote |\n  UnquoteSplice\n}\n\nprefixEdge[@isGroup\x3dPrefixEdge] {\n KeywordPrefix |\n ConstructorPrefix |\n "#" |\n "##" |\n "#\'" |\n "#?" |\n "#^" |\n "#_" |\n "\'" |\n "`" |\n "~" |\n "~@" |\n "^" |\n "@"\n}\n\n@skip {} {\n  dataLiteral { "#" ident }\n  DataLiteral { dataLiteral }\n  SymbolicValue { "##" ident }\n  Set[prefixColl] { "#" Map }\n  AnonymousFunction[prefixColl] { "#" List }\n\n  KeywordPrefix[prefixEdge] { "#" keyword }\n  NamespacedMap[prefixColl] { KeywordPrefix Map }\n\n  ConstructorPrefix[prefixEdge] { !prefixLiteral  dataLiteral }\n  Constructor[prefixColl] { ConstructorPrefix (Vector | Map) }\n\n  RegExp[prefixColl] { "#" String }\n  Var[prefixColl] { "#\'" Symbol }\n  ReaderConditional[prefixColl] { "#?" (List | Deref) }\n  ReaderMetadata[prefixColl] { "#^" expression }\n  Metadata[prefixColl] { "^" expression }\n  String { \'"\' StringContent? \'"\' }\n}\n\nMeta[prefixContainer]\x3ct\x3e { (Metadata | ReaderMetadata) !meta t }\n\nDeref[prefixColl] { "@" expression }\nQuote[prefixColl] { "\'" expression }\nSyntaxQuote[prefixColl] { "`" expression }\nUnquote[prefixColl] { "~" expression }\nUnquoteSplice[prefixColl] { "~@" expression }\noperatorWithMeta { Operator | Meta\x3coperatorWithMeta\x3e }\ndefLikeWithMeta { DefLike | Meta\x3cdefLikeWithMeta\x3e }\nvarNameWithMeta { VarName | Meta\x3cvarNameWithMeta\x3e }\n\nOperator { !operator Symbol }\n\n@tokens {\n\n\n  "["\n  "{"\n  "("\n\n  "#"[prefixEdge]\n  "##"[prefixEdge]\n  "#\'"[prefixEdge]\n  "#?"[prefixEdge]\n  "#^"[prefixEdge]\n  "#_"[prefixEdge]\n\n  \'"\'[sameEdge, closedBy\x3d\'"\', openedBy\x3d\'"\']\n  "\'"[prefixEdge]\n  "`"[prefixEdge]\n  "~"[prefixEdge]\n  "~@"[prefixEdge]\n  "^"[prefixEdge]\n  "@"[prefixEdge]\n\n\n  "]"\n  "}"\n  ")"\n\n  whitespace { (std.whitespace | ",")+ }\n\n  LineComment { ";" ![\\n]* }\n\n  identStart { std.asciiLetter | $[\x3c\x3e\x26%._\x3d?!*+\\-$\\u{a1}-\\u{10ff}/] }\n  identChar { identStart | std.digit | ":" | "\'" | "#" | "/"}\n  ident { identStart identChar* }\n  Symbol { ident }\n\n  keyword { ":" ":"? ident? } // the invalid token :: can also be considered as a keyword\n  Keyword { keyword }\n\n  Number {\n    ("+" | "-")? (std.digit+ ("." std.digit* "M"?)? | "." std.digit+) (("e" | "E") ("+" | "-")? std.digit+ "M"?)? |\n    ("+" | "-")? std.digit+ ("M" | "N") |\n    ("+" | "-")? std.digit+ "/" std.digit+ |\n    ("+" | "-")? "0x" (std.digit | $[a-fA-F])+ |\n    "0b" $[01]+ |\n    "0o" $[0-7]+\n  }\n  @precedence { Number, Symbol }\n\n  StringContent {\n    (!["] | "\\\\" _)+\n  }\n\n  Character { "\\\\" (std.asciiLetter | std.digit | "@")+ }\n\n}\n\nBoolean { @specialize\x3cSymbol, "true" | "false"\x3e }\nNil { @specialize\x3cSymbol, "nil"\x3e }\nDefLike[@dynamicPrecedence\x3d1] { @extend\x3cSymbol, "def" | "defn" | "defn-" | "defmacro" | "definline" | "defonce" | "deftest" | "defcard"\x3e }\n\n@detectDelim\n',
{externalProp:function(a){switch(a){case "prefixColl":return ei;case "coll":return di;case "prefixEdge":return fi;case "prefixContainer":return gi;case "sameEdge":return ji;default:throw Error(["No matching clause: ",z.c(a)].join(""));}}});var Hj=Gh.EditorView.theme({$content:{"white-space":"pre-wrap"}}),Vi=[Gh.EditorView.lineWrapping,Hj,Kh.history(),Jh.defaultHighlighter,Gh.drawSelection(),Hh.lineNumbers(),Ih.foldGutter(),Eh.EditorState.allowMultipleSelections.of(!0),wj,Gh.keymap(vj),Gh.keymap(Kh.historyKeymap)],xj=new Pd(xc);function yj(){var a=Ui();Rd.l(xj,wc,new Gh.EditorView({state:a,parent:document.querySelector("#editor")}))}
function zj(a,b){var c=Jc(I(b))?new U(null,2,5,V,[I(b),ac(b)],null):new U(null,2,5,V,[null,b],null);b=R(c,0,null);c=R(c,1,null);return["\x3c",nd(a),z.c(cd(function(d,e,f){return[z.c(d)," ",nd(e),"\x3d'",z.c(f),"'"].join("")},"",b)),"\x3e",z.c(T(z,c)),"\x3c/",nd(a),"\x3e"].join("")}
function Aj(){for(var a=G(db(xj)),b=null,c=0,d=0;;)if(d<c){var e=b.M(null,d);e.destroy.call(e);d+=1}else if(a=G(a))b=a,Mc(b)?(a=Db(b),d=Eb(b),b=a,c=O(a),a=d):(a=I(b),a.destroy.call(a),a=K(b),b=null,c=0),d=0;else break;yj();a=document.getElementById("docs");(null!=a?a:{}).innerHTML=zj(gh,uc([zj(jg,uc([new v(null,2,[Mg,0,Qh,"w-full"],null),Ca(function(f,g){var k=R(g,0,null);g=R(g,1,null);g=R(g,0,null);var l=null!=g&&(g.j&64||t===g.v)?T(X,g):g;g=C.g(l,Y);var m=C.g(l,Dg);l=C.g(l,kg);return[z.c(f),zj(Vg,
uc([new v(null,1,[Qh,"border-t even:bg-gray-100"],null),zj(ah,uc([new v(null,1,[Qh,"px-3 py-1"],null),zj(Yg,uc([nd(k)]))])),zj(ah,uc([new v(null,1,[Qh,"px-3 py-1"],null),g])),zj(ah,uc([new v(null,1,[Qh,"px-3 py-1"],null),w(m)?zj(Ug,uc(["+Shift ",zj(Yg,uc([m]))])):null])),zj(ah,uc([new v(null,1,[Qh,"px-3 py-1"],null),l]))]))].join("")},"",Wc()),"\x3c/table\x3e"]))]));a=document.getElementById("readme");(null!=a?a:{}).innerHTML=zj(jh,uc([new v(null,1,[Qh,"mt-4"],null),"# codemirror-clojure\n\nLive demo: https://nextjournal.github.io/codemirror.next-clojure/\n\n## Dev Setup\n\n* Install JS deps: `yarn install`\n* Start dev server: `shadow-cljs watch app`\n* Open demo page at http://localhost:8002/\n\n## Todo\n\n- [ ] \"Yank\" after kill (https://www.howtogeek.com/293850/how-to-use-macos-built-in-kill-and-yank-as-an-alternative-cut-and-paste/)\n\n## Done\n\n- [x] Expand/contract region\n- [x] Barf\n- [x] Slurp\n- [x] Format whitespace (necessary for commands like Slurp to behave nicely)\n- [x] Navigate left/right by sexp\n- [x] cannot 'indent-all', changes on one line don't affect measurements taken on subsequent lines\n- [x] operators are recognized (lists with symbol in 1st position)\n- [x] Unwrap current collection\n- [x] Kill (remove all children of current node starting on current line)\n- [x] GitHub Action to publish demo site to github.io\n- [x] indentation\n- [x] odd error recovery behaviour - a `#` token can't be deleted\n- [x] deletion\n- [x] Copy/paste (only first line copies to clipboard?)\n- [x] Ctrl-A \x3d\x3e move to beginning of line (first non-whitespace char)"]));
vc(db(xj)).focus()};try{Aj()}catch(a){throw console.error("An error occurred when calling (codemirror-next.clojure.demo/render)"),a;};
}).call(this);